var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__pow=Math.pow,__defNormalProp=(e,t,n)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,__spreadValues=(e,t)=>{for(var n in t||(t={}))__hasOwnProp.call(t,n)&&__defNormalProp(e,n,t[n]);if(__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))__propIsEnum.call(t,n)&&__defNormalProp(e,n,t[n]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t));!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue")):"function"==typeof define&&define.amd?define(["exports","vue"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["v-network-graph"]={},e.Vue)}(this,(function(e,t){"use strict";function n(e,t){return e===t||e!=e&&t!=t}function o(e,t){for(var o=e.length;o--;)if(n(e[o][0],t))return o;return-1}var r=Array.prototype.splice;function i(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}i.prototype.clear=function(){this.__data__=[],this.size=0},i.prototype.delete=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():r.call(t,n,1),--this.size,!0)},i.prototype.get=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]},i.prototype.has=function(e){return o(this.__data__,e)>-1},i.prototype.set=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")(),c=l.Symbol,u=Object.prototype,d=u.hasOwnProperty,h=u.toString,p=c?c.toStringTag:void 0;var f=Object.prototype.toString;var v=c?c.toStringTag:void 0;function g(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":v&&v in Object(e)?function(e){var t=d.call(e,p),n=e[p];try{e[p]=void 0;var o=!0}catch(i){}var r=h.call(e);return o&&(t?e[p]=n:delete e[p]),r}(e):function(e){return f.call(e)}(e)}function m(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function y(e){if(!m(e))return!1;var t=g(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var b,w=l["__core-js_shared__"],x=(b=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"";var k=Function.prototype.toString;function E(e){if(null!=e){try{return k.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var S=/^\[object .+?Constructor\]$/,P=Function.prototype,_=Object.prototype,O=P.toString,M=_.hasOwnProperty,B=RegExp("^"+O.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function z(e){return!(!m(e)||(t=e,x&&x in t))&&(y(e)?B:S).test(E(e));var t}function N(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return z(n)?n:void 0}var C=N(l,"Map"),j=N(Object,"create");var T=Object.prototype.hasOwnProperty;var A=Object.prototype.hasOwnProperty;function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function D(e,t){var n,o,r=e.__data__;return("string"==(o=typeof(n=t))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function L(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}I.prototype.clear=function(){this.__data__=j?j(null):{},this.size=0},I.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},I.prototype.get=function(e){var t=this.__data__;if(j){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return j?void 0!==t[e]:A.call(t,e)},I.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=j&&void 0===t?"__lodash_hash_undefined__":t,this},L.prototype.clear=function(){this.size=0,this.__data__={hash:new I,map:new(C||i),string:new I}},L.prototype.delete=function(e){var t=D(this,e).delete(e);return this.size-=t?1:0,t},L.prototype.get=function(e){return D(this,e).get(e)},L.prototype.has=function(e){return D(this,e).has(e)},L.prototype.set=function(e,t){var n=D(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function Z(e){var t=this.__data__=new i(e);this.size=t.size}Z.prototype.clear=function(){this.__data__=new i,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!C||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new L(o)}return n.set(e,t),this.size=n.size,this};function $(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new L;++t<n;)this.add(e[t])}function q(e,t){for(var n=-1,o=null==e?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1}$.prototype.add=$.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},$.prototype.has=function(e){return this.__data__.has(e)};function V(e,t,n,o,r,i){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var d=-1,h=!0,p=2&n?new $:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var f=e[d],v=t[d];if(o)var g=a?o(v,f,d,t,e,i):o(f,v,d,e,t,i);if(void 0!==g){if(g)continue;h=!1;break}if(p){if(!q(t,(function(e,t){if(a=t,!p.has(a)&&(f===e||r(f,e,n,o,i)))return p.push(t);var a}))){h=!1;break}}else if(f!==v&&!r(f,v,n,o,i)){h=!1;break}}return i.delete(e),i.delete(t),h}var R=l.Uint8Array;function W(e){var t=-1,n=Array(e.size);return e.forEach((function(e,o){n[++t]=[o,e]})),n}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var F=c?c.prototype:void 0,X=F?F.valueOf:void 0;var U=Array.isArray;var Y=Object.prototype.propertyIsEnumerable,G=Object.getOwnPropertySymbols,K=G?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,o=null==e?0:e.length,r=0,i=[];++n<o;){var a=e[n];t(a,n,e)&&(i[r++]=a)}return i}(G(e),(function(t){return Y.call(e,t)})))}:function(){return[]};function Q(e){return null!=e&&"object"==typeof e}function J(e){return Q(e)&&"[object Arguments]"==g(e)}var ee=Object.prototype,te=ee.hasOwnProperty,ne=ee.propertyIsEnumerable,oe=J(function(){return arguments}())?J:function(e){return Q(e)&&te.call(e,"callee")&&!ne.call(e,"callee")},re=oe;var ie="object"==typeof e&&e&&!e.nodeType&&e,ae=ie&&"object"==typeof module&&module&&!module.nodeType&&module,se=ae&&ae.exports===ie?l.Buffer:void 0,le=(se?se.isBuffer:void 0)||function(){return!1},ce=/^(?:0|[1-9]\d*)$/;function ue(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ce.test(e))&&e>-1&&e%1==0&&e<t}function de(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var he={};he["[object Float32Array]"]=he["[object Float64Array]"]=he["[object Int8Array]"]=he["[object Int16Array]"]=he["[object Int32Array]"]=he["[object Uint8Array]"]=he["[object Uint8ClampedArray]"]=he["[object Uint16Array]"]=he["[object Uint32Array]"]=!0,he["[object Arguments]"]=he["[object Array]"]=he["[object ArrayBuffer]"]=he["[object Boolean]"]=he["[object DataView]"]=he["[object Date]"]=he["[object Error]"]=he["[object Function]"]=he["[object Map]"]=he["[object Number]"]=he["[object Object]"]=he["[object RegExp]"]=he["[object Set]"]=he["[object String]"]=he["[object WeakMap]"]=!1;var pe,fe="object"==typeof e&&e&&!e.nodeType&&e,ve=fe&&"object"==typeof module&&module&&!module.nodeType&&module,ge=ve&&ve.exports===fe&&a.process,me=function(){try{var e=ve&&ve.require&&ve.require("util").types;return e||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ye=me&&me.isTypedArray,be=ye?(pe=ye,function(e){return pe(e)}):function(e){return Q(e)&&de(e.length)&&!!he[g(e)]},we=Object.prototype.hasOwnProperty;function xe(e,t){var n=U(e),o=!n&&re(e),r=!n&&!o&&le(e),i=!n&&!o&&!r&&be(e),a=n||o||r||i,s=a?function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}(e.length,String):[],l=s.length;for(var c in e)!t&&!we.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ue(c,l))||s.push(c);return s}var ke=Object.prototype;function Ee(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function Se(e,t){return function(n){return e(t(n))}}var Pe=Se(Object.keys,Object),_e=Object.prototype.hasOwnProperty;function Oe(e){return null!=e&&de(e.length)&&!y(e)}function Me(e){return Oe(e)?xe(e):function(e){if(!Ee(e))return Pe(e);var t=[];for(var n in Object(e))_e.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function Be(e){return function(e,t,n){var o=t(e);return U(e)?o:function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}(o,n(e))}(e,Me,K)}var ze=Object.prototype.hasOwnProperty;var Ne=N(l,"DataView"),Ce=N(l,"Promise"),je=N(l,"Set"),Te=N(l,"WeakMap"),Ae="[object Map]",Ie="[object Promise]",De="[object Set]",Le="[object WeakMap]",Ze="[object DataView]",$e=E(Ne),qe=E(C),Ve=E(Ce),Re=E(je),We=E(Te),He=g;(Ne&&He(new Ne(new ArrayBuffer(1)))!=Ze||C&&He(new C)!=Ae||Ce&&He(Ce.resolve())!=Ie||je&&He(new je)!=De||Te&&He(new Te)!=Le)&&(He=function(e){var t=g(e),n="[object Object]"==t?e.constructor:void 0,o=n?E(n):"";if(o)switch(o){case $e:return Ze;case qe:return Ae;case Ve:return Ie;case Re:return De;case We:return Le}return t});var Fe=He,Xe="[object Arguments]",Ue="[object Array]",Ye="[object Object]",Ge=Object.prototype.hasOwnProperty;function Ke(e,t,o,r,i,a){var s=U(e),l=U(t),c=s?Ue:Fe(e),u=l?Ue:Fe(t),d=(c=c==Xe?Ye:c)==Ye,h=(u=u==Xe?Ye:u)==Ye,p=c==u;if(p&&le(e)){if(!le(t))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new Z),s||be(e)?V(e,t,o,r,i,a):function(e,t,o,r,i,a,s){switch(o){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new R(e),new R(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var l=W;case"[object Set]":var c=1&r;if(l||(l=H),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;r|=2,s.set(e,t);var d=V(l(e),l(t),r,i,a,s);return s.delete(e),d;case"[object Symbol]":if(X)return X.call(e)==X.call(t)}return!1}(e,t,c,o,r,i,a);if(!(1&o)){var f=d&&Ge.call(e,"__wrapped__"),v=h&&Ge.call(t,"__wrapped__");if(f||v){var g=f?e.value():e,m=v?t.value():t;return a||(a=new Z),i(g,m,o,r,a)}}return!!p&&(a||(a=new Z),function(e,t,n,o,r,i){var a=1&n,s=Be(e),l=s.length;if(l!=Be(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:ze.call(t,u)))return!1}var d=i.get(e),h=i.get(t);if(d&&h)return d==t&&h==e;var p=!0;i.set(e,t),i.set(t,e);for(var f=a;++c<l;){var v=e[u=s[c]],g=t[u];if(o)var m=a?o(g,v,u,t,e,i):o(v,g,u,e,t,i);if(!(void 0===m?v===g||r(v,g,n,o,i):m)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,o,r,i,a))}function Qe(e,t,n,o,r){return e===t||(null==e||null==t||!Q(e)&&!Q(t)?e!=e&&t!=t:Ke(e,t,n,o,Qe,r))}function Je(e,t){return Qe(e,t)}function et(e){return t.isReactive(e)?e:t.reactive(e)}function tt(e,t="Parameter"){if(null==e)throw new Error(`${t} is null`);return e}function nt(e,n,o,r){const i=t.reactive(new Set);return t.watch((()=>e[n]),(()=>{const t=e[n].filter((e=>e in o));Je(t,i)||(i.clear(),t.forEach(i.add,i))}),{immediate:!0}),t.watch(i,(()=>{const t=Array.from(i);Je(e[n],t)||r(`update:${n}`,t)})),et(i)}const ot=Symbol("containers");function rt(){const e=tt(t.inject(ot),"containers");return{container:e.container,svg:e.svg,svgPanZoom:e.svgPanZoom}}class it{static value(e,t){return e instanceof Function?e(t):e}static values(e,t){return 0===Object.values(e).filter((e=>e instanceof Function)).length?e:Object.fromEntries(Object.entries(e).map((([e,n])=>[e,n instanceof Function?n(t):n])))}}var at;function st(e){const t={};return Object.assign(t,e(t))}function lt(e){return Object.entries(e)}function ct(e,t){const n=new Set(Object.keys(e));lt(t).forEach((([t,o])=>{Je(e[t],o)||(e[t]=o),n.delete(t)})),n.forEach((t=>delete e[t]))}function ut(e,t,n){const o=it.values(t.normal,e);return"circle"==o.type?{width:2*o.radius*n,height:2*o.radius*n}:{width:o.width*n,height:o.height*n}}function dt(e,t,n,o){const r=Math.abs(e.x-n.x)<t.width/2+o.width/2,i=Math.abs(e.y-n.y)<t.height/2+o.height/2;return r&&i}function ht(e,t){let n=0;return n=1===t||void 0===e||"none"===e?null!=e?e:0:"string"==typeof e?e.split(/\s+/).map((e=>parseInt(e)*t)).filter((e=>!isNaN(e))).join(" "):e*t,n&&"0"!==n?n:void 0}function pt(e){let t=0;if(void 0===e||"none"===e)t=0;else if("string"==typeof e){const n=e.split(/\s+/).map((e=>parseInt(e))).filter((e=>!isNaN(e)));t=n.length%2==0?n.reduce(((e,t)=>e+t),0):2*n.reduce(((e,t)=>e+t),0)}else t=2*e;return t}e.NodeLabelDirection=void 0,(at=e.NodeLabelDirection||(e.NodeLabelDirection={}))[at.CENTER=0]="CENTER",at[at.NORTH=1]="NORTH",at[at.NORTH_EAST=2]="NORTH_EAST",at[at.EAST=3]="EAST",at[at.SOUTH_EAST=4]="SOUTH_EAST",at[at.SOUTH=5]="SOUTH",at[at.SOUTH_WEST=6]="SOUTH_WEST",at[at.WEST=7]="WEST",at[at.NORTH_WEST=8]="NORTH_WEST";class ft{static valueOf(e){return Array.from(e.values())}}function vt(...e){return e.find((e=>!!e))}var gt=/\s/;var mt=/^\s+/;function yt(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&gt.test(e.charAt(t)););return t}(e)+1).replace(mt,""):e}function bt(e){return"symbol"==typeof e||Q(e)&&"[object Symbol]"==g(e)}var wt=/^[-+]0x[0-9a-f]+$/i,xt=/^0b[01]+$/i,kt=/^0o[0-7]+$/i,Et=parseInt;function St(e){if("number"==typeof e)return e;if(bt(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=yt(e);var n=xt.test(e);return n||kt.test(e)?Et(e.slice(2),n?2:8):wt.test(e)?NaN:+e}var Pt=1/0;function _t(e){var t=function(e){return e?(e=St(e))===Pt||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}var Ot=c?c.prototype:void 0,Mt=Ot?Ot.toString:void 0;function Bt(e){if("string"==typeof e)return e;if(U(e))return function(e,t){for(var n=-1,o=null==e?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r}(e,Bt)+"";if(bt(e))return Mt?Mt.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function zt(e){return null==e?"":Bt(e)}var Nt=l.isFinite,Ct=Math.min;var jt=function(e){var t=Math[e];return function(e,n){if(e=St(e),(n=null==n?0:Ct(_t(n),292))&&Nt(e)){var o=(zt(e)+"e").split("e");return+((o=(zt(t(o[0]+"e"+(+o[1]+n)))+"e").split("e"))[0]+"e"+(+o[1]-n))}return t(e)}}("round"),Tt=jt;class At{activate(e){const{layouts:n,nodes:o,configs:r,emitter:i,scale:a,svgPanZoom:s}=e,l=e=>{for(const[t,o]of Object.entries(e)){const e=this.getOrCreateNodePosition(n,t);this.setNodePosition(e,o)}},c=e=>{const t=e.filter((e=>!(e in n))),i=s.getViewArea(),l=a.value;for(const a of t){const e=ut(o[a],r.node,l),t=__spreadValues({},i.center);for(;;){let s=!1;for(const[i,c]of Object.entries(n)){if(a===i)continue;const n=o[i];if(!n)continue;if(s=dt(t,e,c,ut(n,r.node,l)),s)break}if(!s)break;t.x+=e.width+20*l,t.x+e.width/2>i.box.right&&(t.x=i.center.x,t.y+=e.height+20*l)}const s=this.getOrCreateNodePosition(n,a);this.setNodePosition(s,t)}};c(Object.keys(o));const u=t.watch((()=>Object.keys(o)),c);i.on("node:dragstart",l),i.on("node:pointermove",l),i.on("node:dragend",l),this.onDeactivate=()=>{u(),i.off("node:dragstart",l),i.off("node:pointermove",l),i.off("node:dragend",l)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(e,t){e.value.x=Tt(t.x,3),e.value.y=Tt(t.y,3)}getOrCreateNodePosition(e,n){const o=t.toRef(e,n);return o.value||(o.value={x:0,y:0}),o}}var It=function(){try{var e=N(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Dt=It;function Lt(e,t,n){"__proto__"==t&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Zt(e,t,o){(void 0!==o&&!n(e[t],o)||void 0===o&&!(t in e))&&Lt(e,t,o)}var $t,qt=function(e,t,n){for(var o=-1,r=Object(e),i=n(e),a=i.length;a--;){var s=i[$t?a:++o];if(!1===t(r[s],s,r))break}return e},Vt="object"==typeof e&&e&&!e.nodeType&&e,Rt=Vt&&"object"==typeof module&&module&&!module.nodeType&&module,Wt=Rt&&Rt.exports===Vt?l.Buffer:void 0,Ht=Wt?Wt.allocUnsafe:void 0;function Ft(e,t){var n,o,r=t?(n=e.buffer,o=new n.constructor(n.byteLength),new R(o).set(new R(n)),o):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Xt=Object.create,Ut=function(){function e(){}return function(t){if(!m(t))return{};if(Xt)return Xt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Yt=Se(Object.getPrototypeOf,Object);var Gt=Function.prototype,Kt=Object.prototype,Qt=Gt.toString,Jt=Kt.hasOwnProperty,en=Qt.call(Object);function tn(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var nn=Object.prototype.hasOwnProperty;function on(e,t,o){var r=e[t];nn.call(e,t)&&n(r,o)&&(void 0!==o||t in e)||Lt(e,t,o)}var rn=Object.prototype.hasOwnProperty;function an(e){if(!m(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=Ee(e),n=[];for(var o in e)("constructor"!=o||!t&&rn.call(e,o))&&n.push(o);return n}function sn(e){return Oe(e)?xe(e,!0):an(e)}function ln(e){return function(e,t,n,o){var r=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=o?o(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),r?Lt(n,s,l):on(n,s,l)}return n}(e,sn(e))}function cn(e,t,n,o,r,i,a){var s=tn(e,n),l=tn(t,n),c=a.get(l);if(c)Zt(e,n,c);else{var u,d=i?i(s,l,n+"",e,t,a):void 0,h=void 0===d;if(h){var p=U(l),f=!p&&le(l),v=!p&&!f&&be(l);d=l,p||f||v?U(s)?d=s:Q(u=s)&&Oe(u)?d=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t}(s):f?(h=!1,d=function(e,t){if(t)return e.slice();var n=e.length,o=Ht?Ht(n):new e.constructor(n);return e.copy(o),o}(l,!0)):v?(h=!1,d=Ft(l,!0)):d=[]:function(e){if(!Q(e)||"[object Object]"!=g(e))return!1;var t=Yt(e);if(null===t)return!0;var n=Jt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Qt.call(n)==en}(l)||re(l)?(d=s,re(s)?d=ln(s):m(s)&&!y(s)||(d=function(e){return"function"!=typeof e.constructor||Ee(e)?{}:Ut(Yt(e))}(l))):h=!1}h&&(a.set(l,d),r(d,l,o,i,a),a.delete(l)),Zt(e,n,d)}}function un(e,t,n,o,r){e!==t&&qt(t,(function(i,a){if(r||(r=new Z),m(i))cn(e,t,a,n,un,o,r);else{var s=o?o(tn(e,a),i,a+"",e,t,r):void 0;void 0===s&&(s=i),Zt(e,a,s)}}),sn)}function dn(e){return e}function hn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var pn=Math.max;var fn=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:dn,vn=fn,gn=Date.now;var mn=function(e){var t=0,n=0;return function(){var o=gn(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(vn),yn=mn;function bn(e,t){return yn(function(e,t,n){return t=pn(void 0===t?e.length-1:t,0),function(){for(var o=arguments,r=-1,i=pn(o.length-t,0),a=Array(i);++r<i;)a[r]=o[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=o[r];return s[t]=n(a),hn(e,this,s)}}(e,t,dn),e+"")}function wn(e,t,o){if(!m(o))return!1;var r=typeof t;return!!("number"==r?Oe(o)&&ue(t,o.length):"string"==r&&t in o)&&n(o[t],e)}var xn,kn=(xn=function(e,t,n){un(e,t,n)},bn((function(e,t){var n=-1,o=t.length,r=o>1?t[o-1]:void 0,i=o>2?t[2]:void 0;for(r=xn.length>3&&"function"==typeof r?(o--,r):void 0,i&&wn(t[0],t[1],i)&&(r=o<3?void 0:r,o=1),e=Object(e);++n<o;){var a=t[n];a&&xn(e,a,n,r)}return e})));function En(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,fit:!1,layoutHandler:new At,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}}},node:st((t=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:e=>it.value(t.normal.type,e),radius:e=>{var n;return(null!=(n=it.value(t.normal.radius,e))?n:0)+2},width:e=>{var n;return(null!=(n=it.value(t.normal.width,e))?n:0)+2},height:e=>{var n;return(null!=(n=it.value(t.normal.height,e))?n:0)+2},borderRadius:e=>{var n;return null!=(n=it.value(t.normal.borderRadius,e))?n:0},strokeWidth:e=>it.value(t.normal.strokeWidth,e),strokeColor:e=>it.value(t.normal.strokeColor,e),strokeDasharray:e=>it.value(t.normal.strokeDasharray,e),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:e.NodeLabelDirection.SOUTH,text:"name"},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},transition:void 0}))),edge:st((e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>it.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>it.value(e.normal.dasharray,t),linecap:t=>it.value(e.normal.linecap,t),animate:t=>it.value(e.normal.animate,t),animationSpeed:t=>it.value(e.normal.animationSpeed,t)},selected:{width:t=>it.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=it.value(e.normal.width,t);return`${1.5*n} ${2*n}`},linecap:t=>it.value(e.normal.linecap,t),animate:t=>it.value(e.normal.animate,t),animationSpeed:t=>it.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,units:"strokeWidth",color:null}},margin:null,summarize:(e,t)=>"curve"!=t.edge.type&&null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4}}))),path:{visible:!1,clickable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:{width:6,color:e=>{const t=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],n=e.edges.map((e=>e.split("").reduce(((e,t)=>(e=(e<<5)-e+t.charCodeAt(0))&e),0))).reduce(((e,t)=>e+t),0);return t[Math.abs(n)%t.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50},transition:void 0}}}const Sn=Symbol("style");function Pn(e){return tt(t.inject(Sn),`Configs(${e})`)[e]}function _n(){return Pn("node")}function On(){return Pn("edge")}function Mn(){return Pn("path")}const Bn=t.reactive({}),zn={},Nn=Symbol("markers");function Cn(e){e&&function(e){var t;const n=null!=(t=zn[e])?t:0;n&&(n-1==0?(delete Bn[e],delete zn[e]):zn[e]=n-1)}(e)}function jn(e,t,n,o){if("none"===e.type)return void Cn(n);if("custom"===e.type)return Cn(n),e.customId;const r=function(e,t,n){var o;return __spreadProps(__spreadValues({},e),{color:null!=(o=e.color)?o:n,isSource:t})}(e,t,o),i=`marker_${(a=r).type}_${a.width}_${a.height}_${a.margin}_${a.color.replace("#","")}_${a.isSource?"L":"R"}_${"strokeWidth"===a.units?"rel":"abs"}`;var a;return i===n||(Cn(n),function(e,t){var n;const o=null!=(n=zn[e])?n:0;zn[e]=o+1,o||(Bn[e]=t)}(i,r)),i}function Tn(e,n,o){const r=et({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return t.watchEffect((()=>{const{edgeLayoutPoints:t,edgeGroups:i}=function(e,t,n){const o={},r={},i={};for(const[s,l]of Object.entries(n)){if(!(l.source in t)||!(l.target in t))continue;const e=[l.source,l.target].sort().join("<=>"),n=i[e]||{};n[s]=l,i[e]=n}const a=e.edge.gap instanceof Function?e.edge.gap:(t,n)=>e.edge.gap;for(const[s,l]of Object.entries(i)){const t=Object.keys(l).length;if(0==t)continue;const n=a(l,e),[i,c]=Object.entries(l)[0];if(1===t)o[i]={edge:c,pointInGroup:0,groupWidth:0},r[s]={edges:l,groupWidth:0,summarize:!1};else{let t=0;const i=Object.values(l).map((t=>it.value(e.edge.normal.width,t)/2)),a=Object.entries(l).map((([e,o],r)=>(r>0&&(t+=i[r-1]+n+i[r]),[e,o,t]))),c=t;a.forEach((([e,t,n])=>{o[e]={edge:t,pointInGroup:n,groupWidth:c}})),r[s]={edges:l,groupWidth:c,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:r}}(o,e,n);ct(r.edgeLayoutPoints,t),ct(r.edgeGroups,i)})),t.watchEffect((()=>{const t={};for(const[n,{edges:i,groupWidth:a}]of Object.entries(r.edgeGroups)){let s=!1;if(0==a)s=!1;else if(o.edge.summarize instanceof Function){const t=o.edge.summarize(i,o);s=null===t?An(e,i,o,a):t}else s=!!o.edge.summarize&&An(e,i,o,a);r.edgeGroups[n].summarize=s,s&&Object.keys(i).forEach((e=>t[e]=!0))}ct(r.summarizedEdges,t)})),r}function An(e,t,n,o){if(1===Object.entries(t).length)return!1;return o>Math.min(...Object.values(t).flatMap((t=>[e[t.source],e[t.target]])).filter((e=>e)).map((e=>{const t=it.values(n.node.normal,e);return"circle"===t.type?2*t.radius:Math.min(t.width,t.height)})))}function In(e,t,n,o,r,i,a){var s,l,c,u,d,h,p,f;let v,g,m,y;return e.source<e.target?[v,g,m,y]=Dn(null!=(s=null==t?void 0:t.x)?s:0,null!=(l=null==t?void 0:t.y)?l:0,null!=(c=null==n?void 0:n.x)?c:0,null!=(u=null==n?void 0:n.y)?u:0,o,r,i,a):[m,y,v,g]=Dn(null!=(d=null==n?void 0:n.x)?d:0,null!=(h=null==n?void 0:n.y)?h:0,null!=(p=null==t?void 0:t.x)?p:0,null!=(f=null==t?void 0:t.y)?f:0,o,r,i,a),{x1:v,y1:g,x2:m,y2:y}}function Dn(e,t,n,o,r,i,a,s){const l=n-e,c=o-t;let u=(i/2-a)*r;if(0!==u&&"clock"!==s){const r=Math.atan2(o-t,n-e);if("vertical"===s){const e=Math.PI/2;(r<-e||r>=e)&&(u*=-1)}else"horizontal"===s&&r<0&&(u*=-1)}if(0===l){const r=c<0?-1:1;return[e+u*r,t,n+u*r,o]}if(0===c){const r=l<0?1:-1;return[e,t+u*r,n,o+u*r]}{const r=-1/(c/l);c<0&&(u=-u);const i=u/Math.sqrt(1+Math.pow(r,2));return[e+i,t+i*r,n+i,o+i*r]}}var Ln="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zn={exports:{}};!function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);this.x=e||0,this.y=t||0}e.exports=n,n.fromArray=function(e){return new n(e[0]||0,e[1]||0)},n.fromObject=function(e){return new n(e.x||0,e.y||0)},n.prototype.addX=function(e){return this.x+=e.x,this},n.prototype.addY=function(e){return this.y+=e.y,this},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.addScalar=function(e){return this.x+=e,this.y+=e,this},n.prototype.addScalarX=function(e){return this.x+=e,this},n.prototype.addScalarY=function(e){return this.y+=e,this},n.prototype.subtractX=function(e){return this.x-=e.x,this},n.prototype.subtractY=function(e){return this.y-=e.y,this},n.prototype.subtract=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.subtractScalar=function(e){return this.x-=e,this.y-=e,this},n.prototype.subtractScalarX=function(e){return this.x-=e,this},n.prototype.subtractScalarY=function(e){return this.y-=e,this},n.prototype.divideX=function(e){return this.x/=e.x,this},n.prototype.divideY=function(e){return this.y/=e.y,this},n.prototype.divide=function(e){return this.x/=e.x,this.y/=e.y,this},n.prototype.divideScalar=function(e){return 0!==e?(this.x/=e,this.y/=e):(this.x=0,this.y=0),this},n.prototype.divideScalarX=function(e){return 0!==e?this.x/=e:this.x=0,this},n.prototype.divideScalarY=function(e){return 0!==e?this.y/=e:this.y=0,this},n.prototype.invertX=function(){return this.x*=-1,this},n.prototype.invertY=function(){return this.y*=-1,this},n.prototype.invert=function(){return this.invertX(),this.invertY(),this},n.prototype.multiplyX=function(e){return this.x*=e.x,this},n.prototype.multiplyY=function(e){return this.y*=e.y,this},n.prototype.multiply=function(e){return this.x*=e.x,this.y*=e.y,this},n.prototype.multiplyScalar=function(e){return this.x*=e,this.y*=e,this},n.prototype.multiplyScalarX=function(e){return this.x*=e,this},n.prototype.multiplyScalarY=function(e){return this.y*=e,this},n.prototype.normalize=function(){var e=this.length();return 0===e?(this.x=1,this.y=0):this.divide(n(e,e)),this},n.prototype.norm=n.prototype.normalize,n.prototype.limit=function(e,t){return Math.abs(this.x)>e&&(this.x*=t),Math.abs(this.y)>e&&(this.y*=t),this},n.prototype.randomize=function(e,t){return this.randomizeX(e,t),this.randomizeY(e,t),this},n.prototype.randomizeX=function(e,t){var n=Math.min(e.x,t.x),o=Math.max(e.x,t.x);return this.x=r(n,o),this},n.prototype.randomizeY=function(e,t){var n=Math.min(e.y,t.y),o=Math.max(e.y,t.y);return this.y=r(n,o),this},n.prototype.randomizeAny=function(e,t){return Math.round(Math.random())?this.randomizeX(e,t):this.randomizeY(e,t),this},n.prototype.unfloat=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},n.prototype.toFixed=function(e){return void 0===e&&(e=8),this.x=this.x.toFixed(e),this.y=this.y.toFixed(e),this},n.prototype.mixX=function(e,t){return void 0===t&&(t=.5),this.x=(1-t)*this.x+t*e.x,this},n.prototype.mixY=function(e,t){return void 0===t&&(t=.5),this.y=(1-t)*this.y+t*e.y,this},n.prototype.mix=function(e,t){return this.mixX(e,t),this.mixY(e,t),this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copyX=function(e){return this.x=e.x,this},n.prototype.copyY=function(e){return this.y=e.y,this},n.prototype.copy=function(e){return this.copyX(e),this.copyY(e),this},n.prototype.zero=function(){return this.x=this.y=0,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.cross=function(e){return this.x*e.y-this.y*e.x},n.prototype.projectOnto=function(e){var t=(this.x*e.x+this.y*e.y)/(e.x*e.x+e.y*e.y);return this.x=t*e.x,this.y=t*e.y,this},n.prototype.horizontalAngle=function(){return Math.atan2(this.y,this.x)},n.prototype.horizontalAngleDeg=function(){return i(this.horizontalAngle())},n.prototype.verticalAngle=function(){return Math.atan2(this.x,this.y)},n.prototype.verticalAngleDeg=function(){return i(this.verticalAngle())},n.prototype.angle=n.prototype.horizontalAngle,n.prototype.angleDeg=n.prototype.horizontalAngleDeg,n.prototype.direction=n.prototype.horizontalAngle,n.prototype.rotate=function(e){var t=this.x*Math.cos(e)-this.y*Math.sin(e),n=this.x*Math.sin(e)+this.y*Math.cos(e);return this.x=t,this.y=n,this},n.prototype.rotateDeg=function(e){return e=a(e),this.rotate(e)},n.prototype.rotateTo=function(e){return this.rotate(e-this.angle())},n.prototype.rotateToDeg=function(e){return e=a(e),this.rotateTo(e)},n.prototype.rotateBy=function(e){var t=this.angle()+e;return this.rotate(t)},n.prototype.rotateByDeg=function(e){return e=a(e),this.rotateBy(e)},n.prototype.distanceX=function(e){return this.x-e.x},n.prototype.absDistanceX=function(e){return Math.abs(this.distanceX(e))},n.prototype.distanceY=function(e){return this.y-e.y},n.prototype.absDistanceY=function(e){return Math.abs(this.distanceY(e))},n.prototype.distance=function(e){return Math.sqrt(this.distanceSq(e))},n.prototype.distanceSq=function(e){var t=this.distanceX(e),n=this.distanceY(e);return t*t+n*n},n.prototype.length=function(){return Math.sqrt(this.lengthSq())},n.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},n.prototype.magnitude=n.prototype.length,n.prototype.isZero=function(){return 0===this.x&&0===this.y},n.prototype.isEqualTo=function(e){return this.x===e.x&&this.y===e.y},n.prototype.toString=function(){return"x:"+this.x+", y:"+this.y},n.prototype.toArray=function(){return[this.x,this.y]},n.prototype.toObject=function(){return{x:this.x,y:this.y}};var o=180/Math.PI;function r(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function i(e){return e*o}function a(e){return e/o}}(Zn);var $n=Zn.exports;function qn(e){const t=$n.fromArray([e.x1,e.y1]),n=$n.fromArray([e.x2,e.y2]);return{source:t,target:n,v:Wn(t,n)}}function Vn(e,t){const n=$n.fromObject(e),o=$n.fromObject(t);return{source:n,target:o,v:Wn(n,o)}}function Rn(e,t){return{source:e,target:t,v:Wn(e,t)}}function Wn(e,t){return t.clone().subtract(e)}function Hn(e,t){const n=t.v.clone().normalize(),o=t.source,r=e.clone().subtract(o),i=n.dot(r);return o.clone().add(n.multiplyScalar(i))}function Fn(e,t,n,o){if(!(t.clone().subtract(n).lengthSq()-o*o<=Math.pow(1,-10)))return null;const r=Rn(e,t),i=Hn(n,r),a=i.clone().subtract(n).length();if(o<a)return null;if(o===a)return i;const s=Math.sqrt(__pow(o,2)-__pow(a,2)),l=r.v.normalize().multiplyScalar(s);return i.subtract(l)}function Xn(e,t){const n=t.source,o=n.clone().subtract(e.source),r=e.v,i=t.v,a=o.cross(r)/r.cross(i);return n.clone().add(i.clone().multiplyScalar(a))}function Un(e,t,n,o,r){const i=e,a=n.clone().subtract(i),s=a.magnitude(),l=t+o;if(l<s)return null;const c=Math.abs(t-o);if(s<c)return null;if(s===l){const n=a.clone().normalize();return e.clone().add(n.multiplyScalar(t))}if(s===c){const n=a.clone().normalize(),r=t>o;return e.clone().add(n.multiplyScalar(r?t:-t))}const u=t,d=o,h=u*((__pow(s,2)+__pow(u,2)-__pow(d,2))/(2*s*u)),p=Math.sqrt(__pow(u,2)-__pow(h,2)),f=a.clone().normalize(),v=$n.fromArray([-f.y,f.x]),g=f.clone().multiplyScalar(h),m=v.clone().multiplyScalar(p),y=e.clone().add(g).add(m),b=e.clone().add(g).subtract(m);return Kn(y,r)<Kn(b,r)?y:b}function Yn(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return Rn(e.target,e.target.clone().add(t))}function Gn(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function Kn(e,t){const n=t.x-e.x,o=t.y-e.y;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}function Qn(e){return e==e&&!m(e)}function Jn(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function eo(e){var t=function(e){for(var t=Me(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,Qn(r)]}return t}(e);return 1==t.length&&t[0][2]?Jn(t[0][0],t[0][1]):function(n){return n===e||function(e,t,n,o){var r=n.length,i=r,a=!o;if(null==e)return!i;for(e=Object(e);r--;){var s=n[r];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<i;){var l=(s=n[r])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var d=new Z;if(o)var h=o(c,u,l,e,t,d);if(!(void 0===h?Qe(u,c,3,o,d):h))return!1}}return!0}(n,e,t)}}var to=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,no=/^\w*$/;function oo(e,t){if(U(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!bt(e))||(no.test(e)||!to.test(e)||null!=t&&e in Object(t))}function ro(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=e.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(ro.Cache||L),n}ro.Cache=L;var io=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ao=/\\(\\)?/g,so=function(e){var t=ro(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(io,(function(e,n,o,r){t.push(o?r.replace(ao,"$1"):n||e)})),t})),lo=so;function co(e,t){return U(e)?e:oo(e,t)?[e]:lo(zt(e))}function uo(e){if("string"==typeof e||bt(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function ho(e,t){for(var n=0,o=(t=co(t,e)).length;null!=e&&n<o;)e=e[uo(t[n++])];return n&&n==o?e:void 0}function po(e,t){return null!=e&&t in Object(e)}function fo(e,t){return null!=e&&function(e,t,n){for(var o=-1,r=(t=co(t,e)).length,i=!1;++o<r;){var a=uo(t[o]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i||++o!=r?i:!!(r=null==e?0:e.length)&&de(r)&&ue(a,r)&&(U(e)||re(e))}(e,t,po)}function vo(e,t){return oo(e)&&Qn(t)?Jn(uo(e),t):function(n){var o=function(e,t,n){var o=null==e?void 0:ho(e,t);return void 0===o?n:o}(n,e);return void 0===o&&o===t?fo(n,e):Qe(t,o,3)}}function go(e){return oo(e)?(t=uo(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return ho(t,e)}}(e);var t}function mo(e,t){return e<t}function yo(e,t){return e&&e.length?function(e,t,n){for(var o=-1,r=e.length;++o<r;){var i=e[o],a=t(i);if(null!=a&&(void 0===s?a==a&&!bt(a):n(a,s)))var s=a,l=i}return l}(e,"function"==typeof(n=t)?n:null==n?dn:"object"==typeof n?U(n)?vo(n[0],n[1]):eo(n):go(n),mo):void 0;var n}function bo(e,t){return{x1:e.x,y1:e.y,x2:t.x,y2:t.y}}function wo(e,t,n,o){var r;const i=Vn(e,t),a=t.x-n.width/2*o,s=t.y-n.height/2*o,l=t.x+n.width/2*o,c=t.y+n.height/2*o,u=[],d=n.borderRadius*o;if(0==d)u.push($n.fromArray([a,s]),$n.fromArray([a,c]),$n.fromArray([l,s]),$n.fromArray([l,c]));else{const e=d*Math.sin(Math.PI/4);u.push($n.fromArray([a+d,s]),$n.fromArray([a,s+d]),$n.fromArray([a+d-e,s+d-e]),$n.fromArray([a+d,c]),$n.fromArray([a,c-d]),$n.fromArray([a+d-e,c-d+e]),$n.fromArray([l-d,s]),$n.fromArray([l,s+d]),$n.fromArray([l-d+e,s+d-e]),$n.fromArray([l-d,c]),$n.fromArray([l,c-d]),$n.fromArray([l-d+e,c-d+e]))}const h=null!=(r=yo(u.map((e=>Hn(e,i))),(e=>Wn(i.source,e).lengthSq())))?r:i.target;return Wn(h,i.target).length()}function xo(e,t,n){return function(e,t,n){const o=e.v.clone().normalize();e.v.angle();const r=e.source.clone().add(o.clone().multiplyScalar(t)),i=e.target.clone().subtract(o.clone().multiplyScalar(n));let[a,s]=r.toArray(),[l,c]=i.toArray();const u=Wn(r,i);if(e.v.angle()*u.angle()<0){const e=$n.fromArray([(a+l)/2,(s+c)/2]),t=e.clone().add(o.multiplyScalar(.5));[a,s]=e.toArray(),[l,c]=t.toArray()}return{x1:a,y1:s,x2:l,y2:c}}(qn(e),t,n)}function ko(e,t,n){const{x:o,y:r}=e,i=o-t.x,a=r-t.y;return{x:i*Math.cos(n)-a*Math.sin(n)+t.x,y:i*Math.sin(n)+a*Math.cos(n)+t.y}}function Eo(e){return e>0?-(2*Math.PI-e):2*Math.PI+e}function So(e,t,n,o){const r=[],i=Rn(t,e),a=Rn(t,n);let s=Gn(i,a);o*s<0&&(s=Eo(s));const l=$n.fromObject(ko(e,t,-s/2)),c=Rn(t,l),u=Yn(c),d=Gn(i,c);let h=Yn(i);if(Math.abs(d)<Math.PI/2){const e=Xn(h,u);r.push(e)}else{const e=$n.fromObject(ko(l,t,d/2)),n=Yn(Rn(t,$n.fromObject(e))),o=Xn(h,n),i=Xn(n,u);r.push(o,e,i)}r.push(l);const p=Gn(a,c);if(h=Yn(a),Math.abs(p)<Math.PI/2){const e=Xn(h,u);r.push(e)}else{const e=$n.fromObject(ko(l,t,p/2)),n=Yn(Rn(t,$n.fromObject(e))),o=Xn(u,n),i=Xn(n,h);r.push(o,e,i)}return r}const Po=Symbol("states"),_o={type:"none",width:0,height:0,margin:0,units:"strokeWidth",color:null};function Oo(){return tt(t.inject(Po),"states")}function Mo(e,t,n){return t&&n.selected?it.values(n.selected,e):it.values(n.normal,e)}function Bo(e,n,o,r,i,a){e[o]={selected:r,hovered:i};const s=e[o];s.shape=t.computed((()=>function(e,t,n,o){return n&&o.hover?it.values(o.hover,e):Mo(e,t,o)}(n[o],s.selected,s.hovered,a))),s.staticShape=t.computed((()=>Mo(n[o],s.selected,a))),s.label=t.computed((()=>it.values(a.label,n[o]))),s.labelText=t.computed((()=>{var e,r;return a.label.text instanceof Function?t.unref(s.label).text:null!=(r=null==(e=n[o])?void 0:e[t.unref(s.label).text])?r:""})),s.draggable=t.computed((()=>it.value(a.draggable,n[o]))),s.selectable=t.computed((()=>it.value(a.selectable,n[o])))}function zo(e){return"none"===e.type?_o:e}function No(e,n,o,r,i,a,s,l,c){if(!r[i])return;e[i]={line:void 0,selectable:!1,selected:a,hovered:!1,curve:void 0,origin:{x1:0,y1:0,x2:0,y2:0},labelPosition:{x1:0,y1:0,x2:0,y2:0},position:{x1:0,y1:0,x2:0,y2:0},stopWatchHandle:()=>{}};const u=e[i],d=t.computed((()=>{const e=r[i],t=function(e,t,n,o){return t?it.values(o.selected,e):n&&o.hover?it.values(o.hover,e):it.values(o.normal,e)}(e,u.selected,u.hovered,s);return{stroke:t,normalWidth:it.value(s.normal.width,e),source:zo(it.values(s.marker.source,[e,t])),target:zo(it.values(s.marker.target,[e,t]))}}));u.line=d,u.selectable=t.computed((()=>it.value(s.selectable,r[i])));const h=t.toRef(n.edgeLayoutPoints,i),p=t.toRef(n.summarizedEdges,i),f=t.watchEffect((()=>{var e,t;const n=r[i];if(!n)return;const a=l[null==n?void 0:n.source],f=l[null==n?void 0:n.target],v=null==(e=o[null==n?void 0:n.source])?void 0:e.staticShape,g=null==(t=o[null==n?void 0:n.target])?void 0:t.staticShape;if(!(a&&f&&v&&g))return;const m=function(e,t,n,o,r,i){return e?t?In(e.edge,n,o,r,0,0,i):In(e.edge,n,o,r,e.groupWidth,e.pointInGroup,i):{x1:0,y1:0,x2:0,y2:0}}(h.value,p.value,a,f,c.value,s.keepOrder),[y,b]=function(e,t,n,o){let r,i;return r="circle"===n.type?n.radius:wo(t,e,n,1),i="circle"===o.type?o.radius:wo(e,t,o,1),[r,i]}(a,f,v,g),w=c.value;u.labelPosition=xo(m,y*w,b*w);let x=0,k=0;const E=d.value;if("none"!==E.source.type){const e=E.source;x=e.margin+e.width,"strokeWidth"===e.units&&(x*=E.normalWidth)}if("none"!==E.target.type){const e=E.target;k=e.margin+e.width,"strokeWidth"===e.units&&(k*=E.normalWidth)}null===s.margin||void 0===s.margin?"none"===E.source.type&&"none"===E.target.type||(x+=y,k+=b):(x+=s.margin+y,k+=s.margin+b);if("straight"===s.type)u.origin=m,u.curve=void 0,u.position=0===x&&0===k?u.origin:xo(u.origin,x*w,k*w);else{u.origin=bo(a,f);const e=h.value.groupWidth/2-h.value.pointInGroup,[t,n]=function(e,t,n,o,r){const i=qn(e),a=qn(t),s=function(e){return $n.fromArray([(e.x1+e.x2)/2,(e.y1+e.y2)/2])}(t),[l,c]=function(e,t,n){const o=e.x,r=e.y,i=t.x,a=t.y,s=n.x,l=n.y,c=o-i,u=r-a,d=s-i,h=l-a,p=(h*(c*(o+i)+u*(r+a))-u*(d*(s+i)+h*(l+a)))/(2*c*h-2*u*d),f=(-d*(c*(o+i)+u*(r+a))+c*(d*(s+i)+h*(l+a)))/(2*c*h-2*u*d),v=Math.sqrt(Math.pow(o-p,2)+Math.pow(r-f,2));return[$n.fromArray([p,f]),v]}(i.source,i.target,s);let u,d;if(0===n)return u=0===o&&0===r?e:xo(e,o,r),[u,d];const h=Rn(l,s),p=Gn(Rn(l,i.source),h);if(0===o&&0===r)u=e;else{let e=o/c,t=r/c;p>0&&(e*=-1,t*=-1),u=bo(ko(i.source,l,e),ko(i.target,l,-t));let n=Gn(Rn(l,i.source),Rn(l,i.target)),h=Gn(Vn(l,{x:u.x1,y:u.y1}),Vn(l,{x:u.x2,y:u.y2}));if(p*n<0&&(n=Eo(n),p*h<0&&(h=Eo(h))),n*h<0){const e=s.clone().add(a.v.normalize().multiplyScalar(.5));return u=bo(s,e),[u,d]}}const[f,v]=function(e){return[$n.fromArray([e.x1,e.y1]),$n.fromArray([e.x2,e.y2])]}(u),g=So(f,l,v,p).map((e=>e.toObject()));return d={center:s,theta:p,circle:{center:l,radius:c},control:g},[u,d]}(u.origin,m,e,x*w,k*w);u.position=t,u.curve=n}})),v=t.watchEffect((()=>{r[i]&&(u.sourceMarkerId=jn(d.value.source,!0,u.sourceMarkerId,d.value.stroke.color),u.targetMarkerId=jn(d.value.target,!1,u.targetMarkerId,d.value.stroke.color))}));e[i].stopWatchHandle=()=>{f(),v(),Cn(u.sourceMarkerId),Cn(u.targetMarkerId)}}const Co=Symbol("mouseEventHandlers");function jo(e,t){var n;const o=null!=(n=e[t])?n:{x:0,y:0};return __spreadValues({},o)}function To(e,n,o,r,i,a,s,l,c,u){t.onMounted((()=>{var t;null==(t=e.value)||t.addEventListener("pointerdown",v,{passive:!0})})),t.onUnmounted((()=>{var t;null==(t=e.value)||t.removeEventListener("pointerdown",v)}));const d={container:{moveCounter:0,pointerCounter:0},nodePointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodes:l,hoveredNodesPre:new Set,hoveredEdges:c,edgePointers:new Map,edgePointerPeekCount:0},h={pointermove:function(e){d.container.moveCounter++},pointerup:g,pointercancel:g},p={pointermove:function(e){var t;e.preventDefault(),e.stopPropagation();const n=d.nodePointers.get(e.pointerId);if(!n)return;if(n.latestPosition={x:e.pageX,y:e.pageY},n.moveCounter++,n.moveCounter<=3)return;if(!(null==(t=r[n.nodeId])?void 0:t.draggable))return;if(4===n.moveCounter){const e=y(n,{pointerId:n.pointerId,pageX:n.dragBasePosition.x,pageY:n.dragBasePosition.y});u.emit("node:dragstart",e)}const o=y(n,e);u.emit("node:pointermove",o)},pointerup:function(e){var t;e.preventDefault(),e.stopPropagation();const n=d.nodePointers.get(e.pointerId);if(!n)return;d.nodePointers.delete(e.pointerId);const o=n.nodeId;if(n.moveCounter>3){if(null==(t=r[n.nodeId])?void 0:t.draggable){const t=y(n,e);u.emit("node:dragend",t),u.emit("node:pointerup",{node:o,event:e})}}else u.emit("node:pointerup",{node:o,event:e}),function(e,t){var n,o;if(t.shiftKey&&s.size>0)return;s.clear();const i=null!=(o=null==(n=r[e])?void 0:n.selectable)&&o;if(i){const n=ft.valueOf(d.nodePointers).filter((e=>e.pointerId!=t.pointerId&&a.has(e.nodeId))).length>0;t.shiftKey||n?a.has(e)?a.delete(e):"number"==typeof i&&a.size>=i||a.add(e):a.has(e)||(a.clear(),a.add(e))}u.emit("node:click",{node:e,event:t})}(o,e);0==d.nodePointers.size?(d.follow={followedPointerId:-1,nodeBasePositions:{}},lt(p).forEach((([e,t])=>{document.removeEventListener(e,t)})),u.emit("view:mode","default")):m(n);d.hoveredNodes.clear(),d.hoveredNodesPre.forEach(d.hoveredNodes.add,d.hoveredNodes)},pointercancel:function(e){e.preventDefault(),e.stopPropagation();let t=d.nodePointers.get(e.pointerId);if(!t)return;for(t of d.nodePointers.values()){const n=t.nodeId;if(t.moveCounter>3){const e=y(t,{pointerId:t.pointerId,pageX:t.latestPosition.x,pageY:t.latestPosition.y});u.emit("node:dragend",e)}u.emit("node:pointerup",{node:n,event:e})}d.nodePointers.clear(),d.follow={followedPointerId:-1,nodeBasePositions:{}},lt(p).forEach((([e,t])=>{document.removeEventListener(e,t)})),u.emit("view:mode","default")}},f={pointerup:function(e){e.preventDefault(),e.stopPropagation();const t=d.edgePointers.get(e.pointerId);if(!t)return;d.edgePointers.delete(e.pointerId);const n=t.edgeId;u.emit("edge:pointerup",{edge:n,event:e}),(d.edgePointers.size>0||1===d.edgePointerPeekCount)&&function(e,t){var n;if(t.shiftKey&&a.size>0)return;a.clear();const o=null==(n=i[e])?void 0:n.selectable;if(o){const n=ft.valueOf(d.edgePointers).filter((e=>e.pointerId!=t.pointerId&&s.has(e.edgeId))).length>0;t.shiftKey||n?s.has(e)?s.delete(e):"number"==typeof o&&s.size>=o||s.add(e):(s.clear(),s.add(e))}u.emit("edge:click",{edge:e,event:t})}(n,e);0===d.edgePointers.size&&(d.edgePointerPeekCount=0,lt(f).forEach((([e,t])=>{document.removeEventListener(e,t)})),u.emit("view:mode","default"))},pointercancel:function(e){e.preventDefault(),e.stopPropagation();if(!d.edgePointers.get(e.pointerId))return;for(const t of d.edgePointers.values()){const n=t.edgeId;u.emit("edge:pointerup",{edge:n,event:e})}d.edgePointers.clear(),d.edgePointerPeekCount=0,lt(f).forEach((([e,t])=>{document.removeEventListener(e,t)})),u.emit("view:mode","default")}};function v(t){d.container.moveCounter=0,0===d.container.pointerCounter&&lt(h).forEach((([t,n])=>{var o;null==(o=e.value)||o.addEventListener(t,n,{passive:!0})})),d.container.pointerCounter++}function g(t){if(d.container.pointerCounter--,0===d.container.pointerCounter&&(lt(h).forEach((([t,n])=>{var o;null==(o=e.value)||o.removeEventListener(t,n)})),d.container.moveCounter<=3)){if(t.shiftKey&&(a.size>0||s.size>0))return;a.clear(),s.clear()}}function m(e){const t=d.follow.followedPointerId===e.pointerId,o=a.has(e.nodeId),i=!(e.pointerId in d.nodePointers);if(t&&i||t&&!o){const t=ft.valueOf(d.nodePointers).find((e=>a.has(e.nodeId)));if(!t)return void(d.follow={followedPointerId:-1,nodeBasePositions:{}});e=t,d.follow.followedPointerId=e.pointerId}else{const t=d.nodePointers.get(d.follow.followedPointerId);if(!t)return void(d.follow={followedPointerId:-1,nodeBasePositions:{}});e=t}if(t||o){const t=ft.valueOf(d.nodePointers).map((e=>e.nodeId));d.follow.nodeBasePositions=Object.fromEntries(Array.from(a).filter((e=>!t.includes(e))).filter((e=>{var t;return null==(t=r[e])?void 0:t.draggable})).map((e=>[e,jo(n,e)]))),e.dragBasePosition=__spreadValues({},e.latestPosition),e.nodeBasePosition=jo(n,e.nodeId)}}function y(e,t){const n=e.dragBasePosition.x-t.pageX,r=e.dragBasePosition.y-t.pageY,i=d.follow.followedPointerId==e.pointerId?__spreadValues({[e.nodeId]:e.nodeBasePosition},d.follow.nodeBasePositions):{[e.nodeId]:e.nodeBasePosition},a=o.value;return Object.fromEntries(Object.entries(i).map((([e,t])=>[e,{x:t.x-n/a,y:t.y-r/a}])))}t.watch(a,(()=>{const e=d.nodePointers.get(d.follow.followedPointerId);e&&m(e)}));const b={selectedNodes:a,hoveredNodes:l,selectedEdges:s,hoveredEdges:c,handleNodePointerDownEvent:function(e,t){if(t.preventDefault(),t.stopPropagation(),0!==d.edgePointers.size)return;0==d.nodePointers.size&&(u.emit("view:mode","node"),lt(p).forEach((([e,t])=>{document.addEventListener(e,t)})));const o={pointerId:t.pointerId,nodeId:e,moveCounter:0,nodeBasePosition:jo(n,e),dragBasePosition:{x:t.pageX,y:t.pageY},latestPosition:{x:t.pageX,y:t.pageY}};d.nodePointers.set(t.pointerId,o),a.has(e)&&(d.follow.followedPointerId<0?(d.follow.followedPointerId=t.pointerId,m(o)):delete d.follow.nodeBasePositions[o.nodeId]),u.emit("node:pointerdown",{node:e,event:t})},handleNodePointerOverEvent:function(e,t){d.hoveredNodesPre.add(e),d.nodePointers.size>0||(d.hoveredNodes.add(e),u.emit("node:pointerover",{node:e,event:t}))},handleNodePointerOutEvent:function(e,t){d.hoveredNodesPre.delete(e),d.nodePointers.size>0||(d.hoveredNodes.delete(e),u.emit("node:pointerout",{node:e,event:t}))},handleEdgePointerDownEvent:function(e,t){if(t.preventDefault(),t.stopPropagation(),0!==d.nodePointers.size)return;0==d.edgePointers.size&&(u.emit("view:mode","edge"),lt(f).forEach((([e,t])=>{document.addEventListener(e,t)})),d.edgePointerPeekCount=0),d.edgePointerPeekCount++;const n={pointerId:t.pointerId,edgeId:e};d.edgePointers.set(t.pointerId,n),u.emit("edge:pointerdown",{edge:e,event:t})},handleEdgePointerOverEvent:function(e,t){d.hoveredEdges.add(e),u.emit("edge:pointerover",{edge:e,event:t})},handleEdgePointerOutEvent:function(e,t){d.hoveredEdges.delete(e),u.emit("edge:pointerout",{edge:e,event:t})}};return t.provide(Co,b),b}function Ao(){return tt(t.inject(Co),"mouseEventHandlers")}const Io=Symbol("emitter");function Do(){const e={all:n=n||new Map,on:function(e,t){var o=n.get(e);o?o.push(t):n.set(e,[t])},off:function(e,t){var o=n.get(e);o&&(t?o.splice(o.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var o=n.get(e);o&&o.slice().map((function(e){e(t)})),(o=n.get("*"))&&o.slice().map((function(n){n(e,t)}))}};var n;return t.provide(Io,e),e}function Lo(){return{emitter:tt(t.inject(Io),"event emitter")}}var Zo={getGlobalThis:function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==Ln)return Ln;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){for(var n in e=e||{},t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else{if(!("string"==typeof e||e instanceof String))throw new Error("Provided selector is not an HTML object nor String");if(!(t=document.querySelector(e)))throw new Error("Provided selector did not find any elements. Selector: "+e)}if("svg"===t.tagName.toLowerCase())n=t;else if("object"===t.tagName.toLowerCase())n=t.contentDocument.documentElement;else{if("embed"!==t.tagName.toLowerCase())throw"img"===t.tagName.toLowerCase()?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");n=t.getSVGDocument().documentElement}return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(void 0===e.clientX||null===e.clientX)if(e.clientX=0,e.clientY=0,void 0!==e.touches&&e.touches.length){if(void 0!==e.touches[0].clientX)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(void 0!==e.touches[0].pageX){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else void 0!==e.originalEvent&&void 0!==e.originalEvent.clientX&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(void 0!==e.touches&&e.touches.length){if(void 0!==e.touches[n].clientX)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(void 0!==e.touches[n].pageX){var o=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-o.left,e.clientY=e.touches[n].pageY-o.top}}else void 0!==e.clientX&&null!==e.clientX||(e.clientX=0,e.clientY=0,void 0!==e.originalEvent&&void 0!==e.originalEvent.clientX&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(2===e.detail)return!0;if(null!=t){var n=e.timeStamp-t.timeStamp,o=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&o<10}return!1},now:Date.now||function(){return(new Date).getTime()},throttle:function(e,t,n){var o,r,i,a=this,s=null,l=0;n||(n={});var c=function(){l=!1===n.leading?0:a.now(),s=null,i=e.apply(o,r),s||(o=r=null)};return function(){var u=a.now();l||!1!==n.leading||(l=u);var d=t-(u-l);return o=this,r=arguments,d<=0||d>t?(clearTimeout(s),s=null,l=u,i=e.apply(o,r),s||(o=r=null)):s||!1===n.trailing||(s=setTimeout(c,d)),i}},createRequestAnimationFrame:function(e){var t=null;return"auto"!==e&&e<60&&e>1&&(t=Math.floor(1e3/e)),null===t?window.requestAnimationFrame||$o(33):$o(t)},calculateDistance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}};function $o(e){return function(t){window.setTimeout(t,e)}}var qo=Zo,Vo=function(){var e,t,n,o="",r=[],i={passive:!0},a={passive:!1};function s(){return n||(n="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"),n}function l(t,n,l,c){var u;u="wheel"===s()?l:function(e,t){var n=function(e){!e&&(e=window.event);var n={originalEvent:e,target:e.target||e.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==e.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){e.preventDefault?e.preventDefault():e.returnValue=!1}};return"mousewheel"==s()?(n.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(n.deltaX=-1/40*e.wheelDeltaX)):n.deltaY=e.detail,t(n)};return r.push({element:e,fn:n}),n}(t,l),t[e](o+n,u,c?i:a)}function c(e,n,l,c){var u;u="wheel"===s()?l:function(e){for(var t=0;t<r.length;t++)if(r[t].element===e)return r[t].fn;return function(){}}(e),e[t](o+n,u,c?i:a),function(e){for(var t=0;t<r.length;t++)if(r[t].element===e)return r.splice(t,1)}(e)}return qo.getGlobalThis().addEventListener?(e="addEventListener",t="removeEventListener"):(e="attachEvent",t="detachEvent",o="on"),{on:function(e,t,n){l(e,s(),t,n),"DOMMouseScroll"==s()&&l(e,"MozMousePixelScroll",t,n)},off:function(e,t,n){c(e,s(),t,n),"DOMMouseScroll"==s()&&c(e,"MozMousePixelScroll",t,n)}}}(),Ro=Zo,Wo="unknown";"undefined"!=typeof document&&document.documentMode&&(Wo="ie");var Ho={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(!(n=Ro.isElement(t)?t:e.querySelector(t))){var o=Array.prototype.slice.call(e.childNodes||e.children).filter((function(e){return"defs"!==e.nodeName&&"#text"!==e.nodeName}));1===o.length&&"g"===o[0].nodeName&&null===o[0].getAttribute("transform")&&(n=o[0])}if(!n){var r="viewport-"+(new Date).toISOString().replace(/\D/g,"");(n=document.createElementNS(this.svgNS,"g")).setAttribute("id",r);var i=e.childNodes||e.children;if(i&&i.length>0)for(var a=i.length;a>0;a--)"defs"!==i[i.length-a].nodeName&&n.appendChild(i[i.length-a]);e.appendChild(n)}var s=[];return n.getAttribute("class")&&(s=n.getAttribute("class").split(" ")),~s.indexOf("svg-pan-zoom_viewport")||(s.push("svg-pan-zoom_viewport"),n.setAttribute("class",s.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),null!==e.parentNode){var t=e.getAttribute("style")||"";-1===t.toLowerCase().indexOf("overflow")&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Ro.throttle((function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var o=e[n];o.parentNode.insertBefore(o,o)}}),Ln?Ln.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var o=this,r="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",r),"transform"in e.style?e.style.transform=r:"-ms-transform"in e.style?e.style["-ms-transform"]=r:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=r),"ie"===Wo&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout((function(){o.refreshDefsGlobal()}),o.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Ro.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var o=t.createSVGPoint();return Ro.touchNormalize(e,t,n),o.x=e.clientX,o.y=e.clientY,o},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var o=e.createSVGPoint();return o.x=t,o.y=n,o}},Fo=Ho,Xo={enable:function(e){var t=e.svg.querySelector("defs");if(t||(t=document.createElementNS(Fo.svgNS,"defs"),e.svg.appendChild(t)),!t.querySelector("style#svg-pan-zoom-controls-styles")){var n=document.createElementNS(Fo.svgNS,"style");n.setAttribute("id","svg-pan-zoom-controls-styles"),n.setAttribute("type","text/css"),n.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(n)}var o=document.createElementNS(Fo.svgNS,"g");o.setAttribute("id","svg-pan-zoom-controls"),o.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),o.setAttribute("class","svg-pan-zoom-control"),o.appendChild(this._createZoomIn(e)),o.appendChild(this._createZoomReset(e)),o.appendChild(this._createZoomOut(e)),e.svg.appendChild(o),e.controlIcons=o},_createZoomIn:function(e){var t=document.createElementNS(Fo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().zoomIn()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().zoomIn()}),!1);var n=document.createElementNS(Fo.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Fo.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},_createZoomReset:function(e){var t=document.createElementNS(Fo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().reset()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().reset()}),!1);var n=document.createElementNS(Fo.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Fo.svgNS,"path");o.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o);var r=document.createElementNS(Fo.svgNS,"path");return r.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomOut:function(e){var t=document.createElementNS(Fo.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",(function(){e.getPublicInstance().zoomOut()}),!1),t.addEventListener("touchstart",(function(){e.getPublicInstance().zoomOut()}),!1);var n=document.createElementNS(Fo.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var o=document.createElementNS(Fo.svgNS,"path");return o.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),o.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(o),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Uo=Ho,Yo=Zo,Go=function(e,t){this.init(e,t)};Go.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=Yo.proxy(this.updateCTM,this),this.requestAnimationFrame=Yo.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},Go.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter((function(e){return e})).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=n,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},Go.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},Go.prototype.getViewBox=function(){return Yo.extend({},this.viewBox)},Go.prototype.processCTM=function(){var e,t=this.getCTM();(this.options.fit||this.options.contain)&&(e=this.options.fit?Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t.a=e,t.d=e,t.e=-this.viewBox.x*e,t.f=-this.viewBox.y*e);if(this.options.center){var n=.5*(this.options.width-(this.viewBox.width+2*this.viewBox.x)*t.a),o=.5*(this.options.height-(this.viewBox.height+2*this.viewBox.y)*t.a);t.e=n,t.f=o}return this.originalState.zoom=t.a,this.originalState.x=t.e,this.originalState.y=t.f,t},Go.prototype.getOriginalState=function(){return Yo.extend({},this.originalState)},Go.prototype.getState=function(){return Yo.extend({},this.activeState)},Go.prototype.getZoom=function(){return this.activeState.zoom},Go.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},Go.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},Go.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},Go.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},Go.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(!1===this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var o=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),r=!1,i=!1;!1===o?(e.e=this.getPan().x,e.f=this.getPan().y,r=i=!0):Yo.isObject(o)&&(!1===o.x?(e.e=this.getPan().x,r=!0):Yo.isNumber(o.x)&&(e.e=o.x),!1===o.y?(e.f=this.getPan().y,i=!0):Yo.isNumber(o.y)&&(e.f=o.y)),r&&i||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},Go.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},Go.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},Go.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},Go.prototype.pendingUpdate=!1,Go.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},Go.prototype.updateCTM=function(){var e=this.getCTM();Uo.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Ko=Vo,Qo=Xo,Jo=Zo,er=Ho,tr=function(e,t){return new Go(e,t)},nr=function(e,t){this.init(e,t)},or={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},rr={passive:!0},ir={passive:!1};nr.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),er.setupSvgAttributes(this.svg),this.options=Jo.extend(Jo.extend({},or),t),this.state="none";var o=er.getBoundingClientRectNormalized(e);this.width=o.width,this.height=o.height,this.viewport=tr(er.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(e,t){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(e,t)},onZoom:function(e){if(n.viewport&&n.options.onZoom)return n.options.onZoom(e)},beforePan:function(e,t){if(n.viewport&&n.options.beforePan)return n.options.beforePan(e,t)},onPan:function(e){if(n.viewport&&n.options.onPan)return n.options.onPan(e)},onUpdatedCTM:function(e){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(e)}});var r=this.getPublicInstance();r.setBeforeZoom(this.options.beforeZoom),r.setOnZoom(this.options.onZoom),r.setBeforePan(this.options.beforePan),r.setOnPan(this.options.onPan),r.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&Qo.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},nr.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={mousedown:function(n){var o=e.handleMouseDown(n,t);return t=n,o},touchstart:function(n){var o=e.handleTouchStart(n,t);return t=n,o},mouseup:function(t){return e.handleMouseUp(t)},touchend:function(t){return e.handleTouchEnd(t)},mousemove:function(t){return e.handleMouseMove(t)},touchmove:function(t){return e.handleTouchMove(t)},mouseleave:function(t){return e.handleMouseUp(t)},touchleave:function(t){return e.handleTouchEnd(t)},touchcancel:function(t){return e.handleTouchEnd(t)}},null!=this.options.customEventsHandler){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var o=n.length-1;o>=0;o--)this.eventListeners.hasOwnProperty(n[o])&&delete this.eventListeners[n[o]]}for(var r in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(r,this.eventListeners[r],this.options.preventMouseEventsDefault?ir:rr);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},nr.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(t){return e.handleMouseWheel(t)};var t=!this.options.preventMouseEventsDefault;Ko.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},nr.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Ko.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},nr.prototype.handleMouseWheel=function(e){if(this.options.zoomEnabled&&"none"===this.state){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,o=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&0===e.deltaMode&&e.wheelDelta&&(t=0===e.deltaY?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/o;var r=this.svg.getScreenCTM().inverse(),i=er.getEventPoint(e,this.svg).matrixTransform(r),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,i)}},nr.prototype.zoomAtPoint=function(e,t,n){var o=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*o.zoom,Math.min(this.options.maxZoom*o.zoom,e)),e/=this.getZoom()):this.getZoom()*e<this.options.minZoom*o.zoom?e=this.options.minZoom*o.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*o.zoom&&(e=this.options.maxZoom*o.zoom/this.getZoom());var r=this.viewport.getCTM(),i=t.matrixTransform(r.inverse()),a=this.svg.createSVGMatrix().translate(i.x,i.y).scale(e).translate(-i.x,-i.y),s=r.multiply(a);s.a!==r.a&&this.viewport.setCTM(s)},nr.prototype.zoom=function(e,t){this.zoomAtPoint(e,er.getSvgCenterPoint(this.svg,this.width,this.height),t)},nr.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},nr.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),"SVGPoint"!==Jo.getType(t)){if(!("x"in t)||!("y"in t))throw new Error("Given point is invalid");t=er.createSVGPoint(this.svg,t.x,t.y)}this.zoomAtPoint(e,t,n)},nr.prototype.getZoom=function(){return this.viewport.getZoom()},nr.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},nr.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},nr.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},nr.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},nr.prototype.reset=function(){this.resetZoom(),this.resetPan()},nr.prototype.handleDblClick=function(e){var t;if((this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled)&&(e.target.getAttribute("class")||"").indexOf("svg-pan-zoom-control")>-1)return!1;t=e.shiftKey?1/(2*(1+this.options.zoomScaleSensitivity)):2*(1+this.options.zoomScaleSensitivity);var n=er.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(t,n)},nr.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),Jo.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&Jo.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=er.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},nr.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),"pan"===this.state&&this.options.panEnabled){var t=er.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},nr.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),"pan"===this.state&&(this.state="none")},nr.prototype.handleTouchStart=function(e,t){if(1==e.touches.length)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=er.getTouchPoint(e,this.svg,0),o=er.getTouchPoint(e,this.svg,1);this.firstDistance=Jo.calculateDistance(n,o),n.x=(n.x+o.x)/2,n.y=(n.y+o.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},nr.prototype.handleTouchMove=function(e){if(1==e.touches.length)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=er.getTouchPoint(e,this.svg,0),n=er.getTouchPoint(e,this.svg,1),o=this.svg.createSVGPoint();if(o.x=(t.x+n.x)/2,o.y=(t.y+n.y)/2,"pan"===this.state&&this.options.panEnabled){var r=o.matrixTransform(this.firstEventCTM.inverse()),i=this.firstEventCTM.translate(r.x-this.stateOrigin.x,r.y-this.stateOrigin.y);this.viewport.setCTM(i)}if(this.options.zoomEnabled){var a=Jo.calculateDistance(t,n)/this.firstDistance,s=this.svg.getScreenCTM().inverse(),l=o.matrixTransform(s);this.zoomAtPoint(this.firstZoomLevel*a,l,!0)}}},nr.prototype.handleTouchEnd=function(e){if(0==e.touches.length)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),1==e.touches.length)this.stateOrigin=er.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=er.getTouchPoint(e,this.svg,0),n=er.getTouchPoint(e,this.svg,1);this.firstDistance=Jo.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},nr.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},nr.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},nr.prototype.center=function(){var e=this.viewport.getViewBox(),t=.5*(this.width-(e.width+2*e.x)*this.getZoom()),n=.5*(this.height-(e.height+2*e.y)*this.getZoom());this.getPublicInstance().pan({x:t,y:n})},nr.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},nr.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},nr.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},nr.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},nr.prototype.resize=function(){var e=er.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},nr.prototype.destroy=function(){var e=this;for(var t in this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,null!=this.options.customEventsHandler&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()}),this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?ir:rr);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),this.reset(),ar=ar.filter((function(t){return t.svg!==e.svg})),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},nr.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=null===t?null:Jo.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=null===t?null:Jo.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,Qo.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,Qo.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=null===t?null:Jo.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=null===t?null:Jo.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=null===t?null:Jo.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var ar=[],sr=function(e,t){var n=Jo.getSvg(e);if(null===n)return null;for(var o=ar.length-1;o>=0;o--)if(ar[o].svg===n)return ar[o].instance.getPublicInstance();return ar.push({svg:n,instance:new nr(n,t)}),ar[ar.length-1].instance.getPublicInstance()};const lr={fitToContents(){return this.fit().center().zoomOut().zoomOut(),this},getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const o=e.width/n,r=e.height/n;return{box:{top:-t.y,bottom:r-t.y,left:-t.x,right:o-t.x},center:{x:o/2-t.x,y:r/2-t.y}}},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const o=Math.min(1e-4,t),r=Math.max(o,n),i=Math.max(Math.min(r,e),o),a=this.getRealZoom()/this.getZoom();this.setMinZoom(o/a).setMaxZoom(r/a).zoom(i/a)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function cr(e,t){var n,o,r,i,a,s;const l=null!=(o=null==(n=t.customEventsHandler)?void 0:n.init)?o:e=>{},c=null!=(i=null==(r=t.customEventsHandler)?void 0:r.destroy)?i:e=>{},u=null!=(s=null==(a=t.customEventsHandler)?void 0:a.haltEventListeners)?s:[];return void 0===t.mouseWheelZoomEnabled&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:e=>{!function(e,t){var n,o;const r=e;r._isPanEnabled=null==(n=t.panEnabled)||n,r._isZoomEnabled=null==(o=null==t?void 0:t.zoomEnabled)||o,r._internalIsPanEnabled=r.isPanEnabled,r._internalEnablePan=r.enablePan,r._internalDisablePan=r.disablePan,r._internalIsZoomEnabled=r.isZoomEnabled,r._internalEnableZoom=r.enableZoom,r._internalDisableZoom=r.disableZoom,Object.assign(e,lr)}(e.instance,t),l(e)},destroy:e=>c(e),haltEventListeners:u},sr(e,t)}var ur,dr;function hr(e,n){const o=t.ref();let r=0;const i=[],a=[];t.onMounted((()=>{var t,s,l,c,u,d;const h=tt(e.value,"<svg>"),p=null!=(s=null==(t=n.customEventsHandler)?void 0:t.init)?s:e=>{},f=null!=(c=null==(l=n.customEventsHandler)?void 0:l.destroy)?c:e=>{},v=null!=(d=null==(u=n.customEventsHandler)?void 0:u.haltEventListeners)?d:[];n.customEventsHandler={init:e=>{o.value=e.instance,p(e),r=1,i.forEach((e=>e())),i.length=0},destroy:e=>{r=2,a.forEach((e=>e())),a.length=0,f(e)},haltEventListeners:v},cr(h,n)})),t.onUnmounted((()=>{var e;null==(e=o.value)||e.destroy()}));return{svgPanZoom:o,onSvgPanZoomMounted:e=>{0===r?i.push(e):1===r&&e()},onSvgPanZoomUnmounted:e=>{0===r||1===r?a.push(e):e()}}}(dr=ur||(ur={}))[dr.INITIAL=0]="INITIAL",dr[dr.MOUNTED=1]="MOUNTED",dr[dr.UNMOUNTED=2]="UNMOUNTED";const pr=Symbol("zoomLevel");function fr(){return tt(t.inject(pr),"zoomLevel")}const vr=["paths","nodes","focusring","edges","base","grid","background","root"],gr=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],mr=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],yr=t.defineComponent({props:{baseX:{type:Number,default:0},baseY:{type:Number,default:0},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=fr(),i=t.ref(o.baseX),a=t.ref(o.baseY),s=t.ref(0),l=t.ref("#000000"),c=t.ref(void 0),u=t.ref(0),d=t.ref(0),h=t.ref(0),p=t.ref(0);return t.watchEffect((()=>{var e;const t=r.value;s.value=o.config.strokeWidth*t,l.value=null!=(e=o.config.strokeColor)?e:"none",c.value=ht(o.config.strokeDasharray,t),"circle"===o.config.type?(i.value=o.baseX,a.value=o.baseY,u.value=o.config.radius*t):(d.value=o.config.width*t,h.value=o.config.height*t,p.value=o.config.borderRadius*t,i.value=o.baseX-d.value/2,a.value=o.baseY-h.value/2)})),n({x:i,y:a,strokeWidth:s,strokeColor:l,strokeDasharray:c,radius:u,width:d,height:h,borderRadius:p}),(n,o)=>"circle"===e.config.type?(t.openBlock(),t.createElementBlock("circle",{key:0,class:"v-shape-circle",cx:i.value,cy:a.value,r:u.value,fill:e.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":c.value},null,8,gr)):(t.openBlock(),t.createElementBlock("rect",{key:1,class:"v-shape-rect",x:i.value,y:a.value,width:d.value,height:h.value,rx:p.value,ry:p.value,fill:e.config.color,stroke:l.value,"stroke-width":s.value,"stroke-dasharray":c.value},null,8,mr))}}),br=["rx","ry","fill","transform"],wr=["x","y","font-family","font-size","fill"],xr=["x","dy"],kr=t.defineComponent({props:{text:{type:String,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e;function r(e,t,n){var o;const r=e.getBBox();t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height,n.value=null!=(o=e.getAttribute("transform"))?o:void 0}const i=t.useAttrs(),{scale:a}=fr(),s=t.computed((()=>o.text.split(/\r?\n/))),l=t.computed((()=>{var e;return null!=(e=i["font-size"])?e:o.config.fontSize*a.value})),c=t.computed((()=>l.value*o.config.lineHeight)),u=t.computed((()=>{const e=i["dominant-baseline"];return"hanging"===e?0:"central"===e?-c.value*(s.value.length-1)/2:-c.value*(s.value.length-1)})),d=t.ref(),h=t.ref(""),p=t.reactive({x:0,y:0,width:0,height:0}),f=t.computed((()=>{var e,t;const n=o.config.background;if(!n)return p;let r,i;n.padding instanceof Object?(r=n.padding.vertical,i=n.padding.horizontal):(r=null!=(e=n.padding)?e:0,i=null!=(t=n.padding)?t:0);const s=c.value-l.value;return{x:p.x-i*a.value,y:p.y-r*a.value-s/2,width:p.width+2*i*a.value,height:p.height+2*r*a.value+s}}));let v;const g=()=>{o.config.background&&o.config.background.visible?!v&&d.value&&(v=function(e,t,n){const o=new MutationObserver((()=>{r(e,t,n)}));return o.observe(e,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),r(e,t,n),o}(d.value,p,h)):(null==v||v.disconnect(),v=void 0)};return t.onMounted((()=>g())),t.watch((()=>o.config.background&&o.config.background.visible),((e,t)=>{e!=t&&g()})),t.onUnmounted((()=>{null==v||v.disconnect(),v=void 0})),n({fontSize:l,element:d,transform:h,backgroundRectPos:f,scale:a}),(n,o)=>{var r,i,p,v,g,m;return t.openBlock(),t.createElementBlock(t.Fragment,null,[e.config.background&&e.config.background.visible?(t.openBlock(),t.createElementBlock("rect",t.mergeProps({key:0,class:"v-text-background"},t.unref(f),{rx:(null!=(i=null==(r=e.config.background)?void 0:r.borderRadius)?i:0)*t.unref(a),ry:(null!=(v=null==(p=e.config.background)?void 0:p.borderRadius)?v:0)*t.unref(a),fill:null!=(m=null==(g=e.config.background)?void 0:g.color)?m:"#ffffff",transform:h.value}),null,16,br)):t.createCommentVNode("",!0),t.createElementVNode("text",t.mergeProps({ref:(e,t)=>{t.element=e,d.value=e},class:"v-text"},n.$attrs,{x:e.x,y:e.y,"font-family":n.$attrs["font-family"]?`${n.$attrs["font-family"]}`:e.config.fontFamily,"font-size":t.unref(l),fill:n.$attrs.fill?`${n.$attrs.fill}`:e.config.color}),[t.unref(s).length<=1?(t.openBlock(),t.createElementBlock(t.Fragment,{key:0},[t.createTextVNode(t.toDisplayString(e.text),1)],64)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(s),((n,o)=>(t.openBlock(),t.createElementBlock("tspan",{key:o,x:e.x,dy:0==o?t.unref(u):t.unref(c)},t.toDisplayString(n),9,xr)))),128))],16,wr)],64)}}});var Er=(e,t)=>{for(const[n,o]of t)e[n]=o;return e};const Sr=["transform"];var Pr=Er(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(n,{expose:o}){const r=n,i=t.computed((()=>{var e;return(null==(e=r.pos)?void 0:e.x)||0})),a=t.computed((()=>{var e;return(null==(e=r.pos)?void 0:e.y)||0})),s=_n(),{scale:l}=fr(),{handleNodePointerDownEvent:c,handleNodePointerOverEvent:u,handleNodePointerOutEvent:d}=Ao(),h=t.computed((()=>{var e;return!!r.state.label.visible&&(null!=(e=r.state.labelText)&&e)})),p=t.computed((()=>r.state.label.direction===e.NodeLabelDirection.CENTER?0:r.state.label.margin*l.value)),f=t.ref(0),v=t.ref(0),g=t.ref(0),m=t.ref(0);t.watchEffect((()=>{const e=l.value,t=r.state.shape;if("circle"==t.type){const n=t.radius*e,o=n+p.value,r=Math.sqrt(__pow(o,2)/2);f.value=n+p.value,v.value=n+p.value,g.value=r,m.value=r}else{const n=t.borderRadius*e,o=t.width*e,r=t.height*e,i=n+p.value,a=Math.sqrt(__pow(i,2)/2);f.value=r/2+p.value,v.value=o/2+p.value,g.value=r/2-n+a,m.value=o/2-n+a}}));const y=t.computed((()=>{switch(r.state.label.direction){case e.NodeLabelDirection.CENTER:case e.NodeLabelDirection.NORTH:case e.NodeLabelDirection.SOUTH:return"middle";case e.NodeLabelDirection.EAST:case e.NodeLabelDirection.NORTH_EAST:case e.NodeLabelDirection.SOUTH_EAST:return"start";case e.NodeLabelDirection.WEST:case e.NodeLabelDirection.NORTH_WEST:case e.NodeLabelDirection.SOUTH_WEST:default:return"end"}})),b=t.computed((()=>{switch(r.state.label.direction){case e.NodeLabelDirection.NORTH:case e.NodeLabelDirection.NORTH_EAST:case e.NodeLabelDirection.NORTH_WEST:return"text-top";case e.NodeLabelDirection.SOUTH:case e.NodeLabelDirection.SOUTH_EAST:case e.NodeLabelDirection.SOUTH_WEST:return"hanging";case e.NodeLabelDirection.CENTER:case e.NodeLabelDirection.EAST:case e.NodeLabelDirection.WEST:default:return"central"}})),w=t.computed((()=>{switch(r.state.label.direction){case e.NodeLabelDirection.CENTER:case e.NodeLabelDirection.NORTH:case e.NodeLabelDirection.SOUTH:return 0;case e.NodeLabelDirection.EAST:return v.value;case e.NodeLabelDirection.WEST:return-v.value;case e.NodeLabelDirection.NORTH_EAST:case e.NodeLabelDirection.SOUTH_EAST:return m.value;case e.NodeLabelDirection.NORTH_WEST:case e.NodeLabelDirection.SOUTH_WEST:default:return-m.value}})),x=t.computed((()=>{switch(r.state.label.direction){case e.NodeLabelDirection.NORTH:return-f.value;case e.NodeLabelDirection.SOUTH:return f.value;case e.NodeLabelDirection.CENTER:case e.NodeLabelDirection.EAST:case e.NodeLabelDirection.WEST:return 0;case e.NodeLabelDirection.NORTH_EAST:case e.NodeLabelDirection.NORTH_WEST:return-g.value;case e.NodeLabelDirection.SOUTH_EAST:case e.NodeLabelDirection.SOUTH_WEST:default:return g.value}}));return o({x:i,y:a,config:s,labelVisibility:h,handleNodePointerDownEvent:c,handleNodePointerOverEvent:u,handleNodePointerOutEvent:d,textAnchor:y,dominantBaseline:b,labelX:w,labelY:x,scale:l}),(e,o)=>(t.openBlock(),t.createElementBlock("g",{class:t.normalizeClass({"v-node":!0,hover:n.state.hovered,selected:n.state.selected}),transform:`translate(${t.unref(i)} ${t.unref(a)})`,onPointerdown:o[0]||(o[0]=t.withModifiers((e=>t.unref(c)(n.id,e)),["prevent","stop"])),onPointerenterPassive:o[1]||(o[1]=e=>t.unref(u)(n.id,e)),onPointerleavePassive:o[2]||(o[2]=e=>t.unref(d)(n.id,e))},[t.renderSlot(e.$slots,"override-node",{nodeId:n.id,scale:t.unref(l),config:n.state.shape,class:t.normalizeClass({draggable:n.state.draggable,selectable:n.state.selectable})},(()=>[t.createVNode(yr,{config:n.state.shape,class:t.normalizeClass({draggable:n.state.draggable,selectable:n.state.selectable})},null,8,["config","class"])]),!0),t.unref(h)?t.renderSlot(e.$slots,"override-node-label",{key:0,nodeId:n.id,scale:t.unref(l),text:n.state.labelText,x:t.unref(w),y:t.unref(x),config:n.state.label,shape:n.state.shape,textAnchor:t.unref(y),dominantBaseline:t.unref(b)},(()=>[t.createVNode(kr,{text:n.state.labelText,x:t.unref(w),y:t.unref(x),config:n.state.label,"text-anchor":t.unref(y),"dominant-baseline":t.unref(b)},null,8,["text","x","y","config","text-anchor","dominant-baseline"])]),!0):t.createCommentVNode("",!0)],42,Sr))}}),[["__scopeId","data-v-4754dd0c"]]);var _r=Er(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},pos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,r=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.x)||0})),i=t.computed((()=>{var e;return(null==(e=o.pos)?void 0:e.y)||0})),a=_n(),s=t.reactive({});return t.watchEffect((()=>{var e,t,n;const r=o.state.shape;if("circle"===r.type){const t={type:"circle",radius:r.radius+(null!=(e=r.strokeWidth)?e:0)/2+a.focusring.padding+a.focusring.width/2,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(s,t)}else{const e={type:"rect",width:r.width+(null!=(t=r.strokeWidth)?t:0)+2*a.focusring.padding+a.focusring.width,height:r.height+(null!=(n=r.strokeWidth)?n:0)+2*a.focusring.padding+a.focusring.width,borderRadius:r.borderRadius>0?r.borderRadius+a.focusring.padding:0,color:"none",strokeWidth:a.focusring.width,strokeColor:a.focusring.color,strokeDasharray:a.focusring.dasharray};Object.assign(s,e)}})),n({x:r,y:i,shapeConfig:s}),(e,n)=>(t.openBlock(),t.createBlock(yr,{class:"v-node-focus-ring","base-x":t.unref(r),"base-y":t.unref(i),config:t.unref(s)},null,8,["base-x","base-y","config"]))}}),[["__scopeId","data-v-4f2bee14"]]);const Or=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"];var Mr=Er(t.defineComponent({props:{x1:{type:Number,required:!0},y1:{type:Number,required:!0},x2:{type:Number,required:!0},y2:{type:Number,required:!0},config:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=fr(),i=t.computed((()=>o.config.width*r.value)),a=t.computed((()=>ht(o.config.dasharray,r.value))),s=t.computed((()=>{const e=!!o.config.animate&&pt(o.config.dasharray)*o.config.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({strokeWidth:i,strokeDasharray:a,animationSpeed:s}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line":!0,animate:e.config.animate}),d:`M ${e.x1} ${e.y1} L ${e.x2} ${e.y2}`,stroke:e.config.color,"stroke-width":t.unref(i),"stroke-dasharray":t.unref(a),"stroke-linecap":e.config.linecap,style:t.normalizeStyle(t.unref(s))},null,14,Or))}}),[["__scopeId","data-v-1809a5d0"]]);function Br(e,t,n){var o=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(n=n>r?r:n)<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(r);++o<r;)i[o]=e[o+t];return i}var zr=Math.ceil,Nr=Math.max;function Cr(e,t,n){t=(n?wn(e,t,n):void 0===t)?1:Nr(_t(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var r=0,i=0,a=Array(zr(o/t));r<o;)a[i++]=Br(e,r,r+=t);return a}const jr=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"];var Tr=Er(t.defineComponent({props:{state:{type:Object,required:!0},config:{type:Object,required:!0},markerStart:{type:String,required:!1,default:void 0},markerEnd:{type:String,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,{scale:r}=fr(),i=t.computed((()=>{var e,t;const n=o.state.position,r=[...null!=(t=null==(e=o.state.curve)?void 0:e.control)?t:[],{x:n.x2,y:n.y2}],i=[];return i.push(`M ${n.x1} ${n.y1}`),Cr(r,2).forEach((([e,t])=>i.push(`Q ${e.x} ${e.y} ${t.x} ${t.y}`))),i.join(" ")})),a=t.computed((()=>o.config.width*r.value)),s=t.computed((()=>ht(o.config.dasharray,r.value))),l=t.computed((()=>{const e=!!o.config.animate&&pt(o.config.dasharray)*o.config.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({strokeWidth:a,strokeDasharray:s,animationSpeed:l}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line":!0,animate:e.config.animate}),d:t.unref(i),fill:"none",stroke:e.config.color,"stroke-width":t.unref(a),"stroke-dasharray":t.unref(s),"stroke-linecap":e.config.linecap,style:t.normalizeStyle(t.unref(l)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,jr))}}),[["__scopeId","data-v-1fa4fd0c"]]);var Ar=Er(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=On();return n({config:o}),(n,r)=>"straight"!=t.unref(o).type&&e.state.curve?(t.openBlock(),t.createBlock(Tr,{key:1,class:t.normalizeClass({selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected}),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url(#${e.state.sourceMarkerId})`:void 0,"marker-end":e.state.targetMarkerId?`url(#${e.state.targetMarkerId})`:void 0},null,8,["class","state","config","marker-start","marker-end"])):(t.openBlock(),t.createBlock(Mr,t.mergeProps({key:0},e.state.position,{class:{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url(#${e.state.sourceMarkerId})`:void 0,"marker-end":e.state.targetMarkerId?`url(#${e.state.targetMarkerId})`:void 0}),null,16,["class","config","marker-start","marker-end"]))}}),[["__scopeId","data-v-7a62c7be"]]);const Ir=t.defineComponent({props:{edges:{type:Object,required:!0},layouts:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,r=On(),{edgeStates:i}=Oo(),a=t.ref({x1:0,y1:0,x2:0,y2:0}),s=t.ref({x:0,y:0});return t.watchEffect((()=>{const e=Object.keys(o.edges)[0];a.value=i[e].position,s.value={x:(a.value.x1+a.value.x2)/2,y:(a.value.y1+a.value.y2)/2}})),n({config:r,pos:a,centerPos:s}),(n,o)=>(t.openBlock(),t.createElementBlock("g",null,[t.createVNode(Mr,t.mergeProps(a.value,{config:t.unref(r).summarized.stroke}),null,16,["config"]),t.createVNode(yr,{"base-x":s.value.x,"base-y":s.value.y,config:t.unref(r).summarized.shape},null,8,["base-x","base-y","config"]),t.createVNode(kr,{text:Object.keys(e.edges).length.toString(),x:s.value.x,y:s.value.y,config:t.unref(r).summarized.label,"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])]))}}),Dr=t.defineComponent({setup(e,{expose:n}){const{edgeStates:o,edgeGroupStates:r,layouts:i}=Oo();return n({edgeStates:o,edgeGroupStates:r,layouts:i}),(e,n)=>(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).edgeGroups,(({summarize:e,edges:n},r)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[e?(t.openBlock(),t.createBlock(Ir,{key:r,edges:n,layouts:t.unref(i).nodes},null,8,["edges","layouts"])):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(n,((e,n)=>(t.openBlock(),t.createBlock(Ar,{key:n,id:n,state:t.unref(o)[n],"source-pos":t.unref(i).nodes[e.source],"target-pos":t.unref(i).nodes[e.target]},null,8,["id","state","source-pos","target-pos"])))),128))],64)))),256))}});const Lr=["d","stroke-width"];var Zr=Er(t.defineComponent({props:{id:{type:String,required:!0},state:{type:Object,required:!0},sourcePos:{type:Object,required:!1,default:void 0},targetPos:{type:Object,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,{scale:r}=fr(),i=On(),{handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:l}=Ao(),c=t.computed((()=>{const e=o.state.position;if("straight"!==i.type&&o.state.curve){const t=[...o.state.curve.control,{x:e.x2,y:e.y2}],n=[];return n.push(`M ${e.x1} ${e.y1}`),Cr(t,2).forEach((([e,t])=>n.push(`Q ${e.x} ${e.y} ${t.x} ${t.y}`))),n.join(" ")}return`M ${e.x1} ${e.y1} L ${e.x2} ${e.y2}`})),u=t.computed((()=>(o.state.line.stroke.width+10)*r.value));return n({config:i,handleEdgePointerDownEvent:a,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:l}),(n,o)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-line-background":!0,selectable:e.state.selectable}),d:t.unref(c),stroke:"transparent","stroke-width":t.unref(u),fill:"none",onPointerdown:o[0]||(o[0]=t.withModifiers((n=>t.unref(a)(e.id,n)),["prevent","stop"])),onPointerenterPassive:o[1]||(o[1]=n=>t.unref(s)(e.id,n)),onPointerleavePassive:o[2]||(o[2]=n=>t.unref(l)(e.id,n))},null,42,Lr))}}),[["__scopeId","data-v-7730d87a"]]);const $r=t.defineComponent({setup(e,{expose:n}){const{edgeStates:o,edgeGroupStates:r,layouts:i}=Oo();return n({edgeStates:o,edgeGroupStates:r,layouts:i}),(e,n)=>(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(r).edgeGroups,(({summarize:e,edges:n})=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[e?t.createCommentVNode("",!0):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(n,((e,n)=>(t.openBlock(),t.createBlock(Zr,{key:n,id:n,state:t.unref(o)[n],"source-pos":t.unref(i).nodes[e.source],"target-pos":t.unref(i).nodes[e.target]},null,8,["id","state","source-pos","target-pos"])))),128))],64)))),256))}});const qr={class:"v-edge-labels"};var Vr=Er(t.defineComponent({setup(e,{expose:n}){const o=On(),{nodeStates:r,edgeStates:i,edgeGroupStates:a,layouts:s}=Oo(),{scale:l}=fr(),c=t.computed((()=>Object.fromEntries(Object.entries(a.edgeGroups).filter((([e,t])=>!t.summarize&&Object.keys(t.edges).length>0))))),u=t.computed((()=>(e,t,n,r)=>function(e,t,n,o,r){const i=qn(e),a=i.v.clone().normalize(),s=0===o?i.source:i.source.clone().add(a.clone().multiplyScalar(o*r)),l=0===o?i.target:i.target.clone().subtract(a.clone().multiplyScalar(o*r)),c=(t.width/2+n)*r,u=$n.fromArray([-a.y,a.x]).multiplyScalar(c);let d=s.clone().subtract(u).toObject(),h=s.clone().add(u).toObject(),p=l.clone().subtract(u).toObject(),f=l.clone().add(u).toObject();const v=i.v.angleDeg();return(v<-90||v>=90)&&([d,h]=[h,d],[p,f]=[f,p]),{source:{above:d,below:h},target:{above:p,below:f}}}(i[e].labelPosition,r,o.label.margin,o.label.padding,l.value))),d=t.computed((()=>e=>{var t;return{pos:null!=(t=s.nodes[e])?t:{x:0,y:0},shape:r[e].shape}}));return n({indivisualEdgeGroups:c,labelAreaPosition:u,nodeShape:d,edgeStates:i,edgeConfig:o,scale:l}),(e,n)=>(t.openBlock(),t.createElementBlock("g",qr,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(c),((n,r)=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:r},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.edges,((n,r)=>t.renderSlot(e.$slots,"edge-label",{key:r,edgeId:r,edge:n,config:t.unref(o).label,area:t.unref(u)(r,t.unref(d)(n.source),t.unref(d)(n.target),t.unref(i)[r].line.stroke),hovered:t.unref(i)[r].hovered,selected:t.unref(i)[r].selected,scale:t.unref(l)},void 0,!0))),128))],64)))),128))]))}}),[["__scopeId","data-v-260bb874"]]);const Rr=t.defineComponent({setup(e,{expose:n}){const{svg:o}=rt(),r=t.ref(),i=t.ref(),a=(e,t,n)=>{e.forEach((e=>{var o;return t.setAttribute(e,null!=(o=n.getAttribute(e))?o:"")}))},s=new MutationObserver((e=>{if(!r.value||!i.value)return;const t=e.map((e=>{var t;return null!=(t=e.attributeName)?t:""})).filter(Boolean);a(t,r.value,i.value)}));return t.onMounted((()=>{const e=tt(o.value.querySelector(".v-viewport"),"v-viewport");i.value=e;const t=["transform","style"];s.observe(i.value,{attributes:!0,attributeFilter:t}),r.value&&a(t,r.value,e)})),t.onUnmounted((()=>{s.disconnect()})),n({background:r}),(e,n)=>(t.openBlock(),t.createElementBlock("g",{ref:(e,t)=>{t.background=e,r.value=e},class:"v-background-viewport"},[t.renderSlot(e.$slots,"default")],512))}});const Wr={class:"v-background-grid","shape-rendering":"crispEdges"},Hr=["d"],Fr=["d"],Xr=["d"],Ur=["d"],Yr=t.defineComponent({setup(e,{expose:n}){const{emitter:o}=Lo(),{container:r,svgPanZoom:i}=rt(),{scale:a}=fr(),s=Pn("view"),l=t.ref({x:0,y:0}),c=t.ref({width:500,height:500});t.onMounted((()=>{var e;const t=null==(e=i.value)?void 0:e.getPan();t&&(l.value={x:-t.x,y:-t.y});const n=r.value.getBoundingClientRect();c.value={width:n.width,height:n.height}})),o.on("view:resize",(e=>{c.value={width:e.width,height:e.height}})),o.on("view:pan",(e=>{l.value={x:-e.x,y:-e.y}})),o.on("view:zoom",(()=>{var e;const t=null==(e=i.value)?void 0:e.getPan();t&&(l.value={x:-t.x,y:-t.y})}));const u=t.ref([]),d=t.ref([]),h=t.ref([]),p=t.ref([]);return t.watchEffect((()=>{const e=[],t=[],n=[],o=[],r=a.value,i=s.grid.interval,f=l.value.x*r,v=l.value.y*r,g=Math.floor(c.value.width/i+1)*i,m=Math.floor(c.value.height/i+1)*i,y=(l.value.x+g)*r,b=(l.value.y+m)*r,w=s.grid.thickIncrements,x=s.grid.line.dasharray,k=s.grid.thick.dasharray;let E={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":k,"stroke-dashoffset":k?f/r:void 0},S={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":x,"stroke-dashoffset":x?f/r:void 0};const P=(l.value.x+g)*r;for(let a=v;a<=b;a+=i){const t=Math.floor(a/i);w&&t%w==0?e.push([t,t*i,f,P,E]):n.push([t,t*i,f,P,S])}E=__spreadValues({},E),E["stroke-dashoffset"]=k?v/r:void 0,S=__spreadValues({},S),S["stroke-dashoffset"]=x?v/r:void 0;const _=(l.value.y+m)*r;for(let a=f;a<=y;a+=i){const e=Math.floor(a/i);w&&e%w==0?t.push([e,e*i,v,_,E]):o.push([e,e*i,v,_,S])}d.value=e,u.value=t,p.value=n,h.value=o})),n({thickVerticals:u,thickHorizontals:d,normalVerticals:h,normalHorizontals:p}),(e,n)=>(t.openBlock(),t.createElementBlock("g",Wr,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(p.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`nv${e}`,d:`M ${o} ${n} L ${r} ${n}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Hr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(h.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`nh${e}`,d:`M ${n} ${o} L ${n} ${r}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Fr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`tv${e}`,d:`M ${o} ${n} L ${r} ${n}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Xr)))),128)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(u.value,(([e,n,o,r,i])=>(t.openBlock(),t.createElementBlock("path",t.mergeProps({key:`th${e}`,d:`M ${n} ${o} L ${n} ${r}`},i,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Ur)))),128))]))}});const Gr=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"];var Kr=Er(t.defineComponent({props:{points:{type:Array,required:!0},path:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,{scale:r}=fr(),i=Mn(),a=t.computed((()=>{let e=!0;return o.points.map((t=>{if(null!==t){if(t instanceof Array){t=[...t];const e=[];if(t.length%2==1){const n=t[0];t=t.slice(1),e.push(`L ${n.x} ${n.y}`)}return Cr(t,2).map((([t,n])=>e.push(`Q ${t.x} ${t.y} ${n.x} ${n.y}`))),e.join(" ")}{const n=e;return e=!1,`${n?"M ":"L "}${t.x} ${t.y}`}}e=!0})).join(" ")})),s=t.computed((()=>it.values(i.path,o.path))),l=t.computed((()=>ht(s.value.dasharray,r.value))),c=t.computed((()=>{const e=!!s.value.animate&&pt(s.value.dasharray)*s.value.animationSpeed*r.value;return e?`--animation-speed:${e}`:void 0}));return n({d:a,scale:r,config:s,strokeDasharray:l,animationSpeed:c}),(e,n)=>(t.openBlock(),t.createElementBlock("path",{class:t.normalizeClass({"v-path-line":!0,animate:t.unref(s).animate}),d:t.unref(a),fill:"none",stroke:t.unref(s).color,"stroke-width":t.unref(s).width*t.unref(r),"stroke-dasharray":t.unref(l),"stroke-linecap":t.unref(s).linecap,"stroke-linejoin":t.unref(s).linejoin,style:t.normalizeStyle(t.unref(c))},null,14,Gr))}}),[["__scopeId","data-v-d5817f5c"]]);var Qr=Er(t.defineComponent({props:{paths:{type:Array,required:!0},edges:{type:Object,required:!0}},setup(e,{expose:n}){const o=e,r=100*Number.EPSILON,i=Mn(),{nodeStates:a,edgeStates:s,layouts:l}=Oo(),{scale:c}=fr(),{emitter:u}=Lo(),d=t.computed((()=>{const e=[];for(const t of o.paths){const n=t.edges.map((e=>({edgeId:e,edge:o.edges[e]}))).filter((e=>e.edge));n.length===t.edges.length&&e.push({path:t,edges:n})}return e})),h=t.computed((()=>e=>{if(0===e.edges.length)return[];const t=it.value(i.margin,e.path)*c.value;return function(e,t,n,o,r,i,a,s){var l;const c=e.edges,u=function(e){const t=e.length;if(t<=1)return[!0];const n=[];let o=null;for(let r=0;r<t;r++){const i=e[r].edge.source,a=e[r].edge.target;let s;if(0===r)if(t>2){const t=[i,a].sort(),n=[e[1].edge.source,e[1].edge.target].sort();if(t[0]===n[0]&&t[1]===n[1]){s=[e[2].edge.source,e[2].edge.target].includes(e[1].edge.target)?a===e[1].edge.source:a===e[1].edge.target}else s=[e[1].edge.source,e[1].edge.target].includes(a)}else s=[e[1].edge.source,e[1].edge.target].includes(a);else s=o===i;n.push(s),o=s?a:i}return n}(c),d=c.map(((e,t)=>function(e,t,n){let o=n.origin,r=e.edge.source,i=e.edge.target,a=n.curve;t||(o=function(e){return{x1:e.x2,y1:e.y2,x2:e.x1,y2:e.y1}}(o),r=e.edge.target,i=e.edge.source,a&&(a=__spreadProps(__spreadValues({},a),{theta:-a.theta})));const s=qn(o);return{edgeId:e.edgeId,source:r,target:i,line:s,curve:a}}(e,u[t],o[e.edgeId]))),h=[];let p=!1,y=!1;{const e=d[0];let o=f(t[e.source].shape)*r;const i=s+("edgeOfNode"===a?o:0),l=i<=0?e.line.source:v(e,i,n,!0);if(h.push(l),o=f(t[e.target].shape)*r,s>0){Kn(e.line.source,e.line.target)<=i+o&&(p=!0)}}const b=c.length;for(let v=1;v<b;v++){const e=d[v-1],o=d[v],a=o.source,s=$n.fromObject(null!=(l=n[a])?l:{x:0,y:0}),c=g(e,o,s),u=f(t[a].shape)*r,p=Math.max(u*(2/3),u-4*r),y=m(e,s,p,!0),b=m(o,s,p,!1),w=m(e,s,u,!0),x=m(o,s,u,!1);let k;if(c){const t=Kn(c,s);if(t<p)k=[vt(y,w,e.line.target),c,vt(b,x,o.line.source)];else if(t<=u){let t,n;t=w&&y?Kn(c,y)<Kn(c,w)?y:w:w||e.line.target,n=x&&b?Kn(c,b)<Kn(c,x)?b:x:x||o.line.source,k=[t,c,n]}else k=y&&b?[y,s,b]:w&&x?[w,s,x]:[vt(y,w,e.line.target),s,vt(b,x,o.line.source)]}else k=y&&b?[y,s,b]:w&&x?[w,s,x]:[e.line.target,s,o.line.source];if(e.curve){const t=h[h.length-1];if(t){const n=t instanceof Array?t[t.length-1]:t;let o;o=k instanceof Array?i?k[0]:k[1]:k;const r=So(n,e.curve.circle.center,o,e.curve.theta);k instanceof Array&&i?h.push([...r,...k]):h.push([...r,o])}}else!i&&k instanceof Array?o.curve?h.push(k[1]):h.push(k[0],k[2]):h.push(k)}{const e=d[d.length-1];let o=f(t[e.target].shape)*r;const i=s+("edgeOfNode"===a?o:0),l=i<=0?e.line.target:v(e,i,n,!1);o=f(t[e.source].shape)*r;const c=e.curve;if(c){const e=h[h.length-1],t=So(e instanceof Array?e[e.length-1]:e,c.circle.center,l,c.theta);h.push([...t,l])}else h.push(l);if(s>0){Kn(e.line.source,e.line.target)<=i+o&&(y=!0)}}p&&(h.shift(),h[0]instanceof Array&&h.unshift(h[0][0]));y&&h.pop();return h}(e,a,l.nodes,s,c.value,i.curveInNode,i.end,t)})),p=e=>{i.clickable&&u.emit("path:click",e)};function f(e){return"circle"==e.type?e.radius:Math.min(e.width,e.height)/2}function v(e,t,n,o){const r=o?e.source:e.target,i=e.curve;if(i){let n=t/i.circle.radius;return i.theta>0&&(n*=-1),o||(n*=-1),$n.fromObject(ko(o?e.line.source:e.line.target,i.circle.center,n))}{let i,a;o?(i=e.line.target,a=e.line.source):(i=e.line.source,a=e.line.target);const s=Fn(i,a,$n.fromObject(n[r]),t);return null===s?i:s}}function g(e,t,n){let o=null;if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();o=Un(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else o=function(e,t,n,o,r){if(!(t.clone().subtract(n).lengthSq()-o*o<=Math.pow(1,-10)))return null;const i=Rn(e,t),a=Hn(n,i),s=a.clone().subtract(n).length();if(o<s)return null;if(o===s)return a;const l=Math.sqrt(__pow(o,2)-__pow(s,2)),c=i.v.normalize().multiplyScalar(l),u=a.clone().add(c),d=a.clone().subtract(c),h=Kn(r,u),p=Kn(r,d);return Math.abs(h-p)<2?d:h<p?u:d}(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)o=Fn(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const n=y(e.line),i=y(t.line);o=!isFinite(n)&&!isFinite(i)||Math.abs(n-i)<r?null:Xn(e.line,t.line)}return o}function m(e,t,n,o){return e.curve?Un(t,n,e.curve.circle.center,e.curve.circle.radius,$n.fromObject(e.curve.center)):Fn(o?e.line.source:e.line.target,o?e.line.target:e.line.source,t,n)}function y(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}return n({pathConfig:i,pathList:d,calcPathPoints:h,emitPathClicked:p}),(e,n)=>(t.openBlock(),t.createBlock(t.TransitionGroup,{name:t.unref(i).transition,css:!!t.unref(i).transition,tag:"g",class:"v-paths"},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(d),((e,n)=>(t.openBlock(),t.createBlock(Kr,{key:n,points:t.unref(h)(e),class:t.normalizeClass({clickable:t.unref(i).clickable}),path:e.path,onClick:t.withModifiers((t=>p(e.path)),["prevent","stop"])},null,8,["points","class","path","onClick"])))),128))])),_:1},8,["name","css"]))}}),[["__scopeId","data-v-3bbe2e44"]]);const Jr=["points","fill"],ei=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const n=e,o=t.computed((()=>{const e=n.width,t=n.height;return n.isSource?`${e} ${t}, 0 ${t/2}, ${e} 0`:`0 0, ${e} ${t/2}, 0 ${t}`}));return(n,r)=>(t.openBlock(),t.createElementBlock("polygon",{points:t.unref(o),fill:e.color},null,8,Jr))}}),ti=["points","stroke-width","stroke"],ni=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup(e){const n=e,o=t.computed((()=>"strokeWidth"===n.units?1:Math.min(n.width,n.height)/5)),r=t.computed((()=>{const e=o.value/2,t=n.width,r=n.height;return n.isSource?`${t-e} ${r-e}, ${e} ${r/2}, ${t-e} ${e}`:`${e} ${e}, ${t-e} ${r/2}, ${e} ${r-e}`}));return(n,i)=>(t.openBlock(),t.createElementBlock("polyline",{points:t.unref(r),fill:"none","stroke-width":t.unref(o),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,ti))}}),oi=["fill","cx","cy","rx","ry"],ri=t.defineComponent({props:{width:{type:Number,required:!0},height:{type:Number,required:!0},refX:{type:Number,required:!0},color:{type:String,required:!0},isSource:{type:Boolean,required:!0},units:{type:String,required:!0}},setup:e=>(n,o)=>(t.openBlock(),t.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,oi))}),ii=["id","markerWidth","markerHeight","refX","refY","markerUnits"],ai=t.defineComponent({props:{id:{type:String,required:!0},marker:{type:Object,required:!0},scale:{type:Number,required:!0}},setup(e){const n=e,o={arrow:ei,angle:ni,circle:ri},r=t.computed((()=>n.marker.width*("strokeWidth"===n.marker.units?1:n.scale))),i=t.computed((()=>n.marker.height*("strokeWidth"===n.marker.units?1:n.scale))),a=t.computed((()=>{const e=n.marker.margin*("strokeWidth"===n.marker.units?1:n.scale);return n.marker.isSource?r.value+e:-e}));return(n,s)=>"none"!==e.marker.type&&"custom"!==e.marker.type?(t.openBlock(),t.createElementBlock("marker",{key:0,id:e.id,markerWidth:t.unref(r),markerHeight:t.unref(i),refX:t.unref(a),refY:t.unref(i)/2,orient:"auto",markerUnits:e.marker.units,class:"v-marker"},[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(o[e.marker.type]),{width:t.unref(r),height:t.unref(i),refX:t.unref(a),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,ii)):t.createCommentVNode("",!0)}});const si=["override-node","override-node-label","edge-label"],li=t.defineComponent({components:{VNode:Pr,VNodeFocusRing:_r,VEdgeGroups:Dr,VEdgeBackgrounds:$r,VEdgeLabels:Vr,VBackgroundViewport:Rr,VBackgroundGrid:Yr,VPaths:Qr,VMarkerHead:ai},props:{nodes:{type:Object,default:()=>({})},edges:{type:Object,default:()=>({})},layouts:{type:Object,default:()=>({})},zoomLevel:{type:Number,default:1},selectedNodes:{type:Array,default:()=>[]},selectedEdges:{type:Array,default:()=>[]},configs:{type:Object,default:()=>({})},paths:{type:Array,default:()=>[]},layers:{type:Object,default:()=>({})},eventHandlers:{type:Object,default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:layouts"],setup(e,{emit:n,slots:o}){const r=Do();Object.entries(e.eventHandlers).forEach((([e,t])=>{r.on(e,t)}));const i=function(e){const n=t.reactive(En()),o=Object.keys(n);for(const r of o)t.watch((()=>e[r]),(()=>{kn(n[r],e[r]||{})}),{immediate:!0,deep:!0});return t.provide(Sn,n),n}(e.configs),a=t.computed((()=>{const t=new Set(Object.keys(o));si.forEach((e=>t.delete(e)));const n=Object.fromEntries(vr.map((e=>[e,[]])));return Object.assign(n,Object.entries(e.layers).reduce(((e,[n,o])=>(t.delete(n),o in e?e[o].push(n):e[o]=[n],e)),{})),n.root.push(...t),n})),s=t.computed((()=>i.view.grid.visible)),l=t.computed((()=>{const e=a.value;return s.value||e.background.length>0||e.grid.length>0})),c=t.computed((()=>"override-node"in o)),u=t.computed((()=>"override-node-label"in o)),d=t.computed((()=>"edge-label"in o)),h=t.ref(),p=t.ref(),f=t.ref(!1),v=function(e,n,o,r){if(r){const i=t.ref(r(e[n])),a=t=>{Je(t,i.value)||(i.value=t),Je(t,e[n])||o(`update:${n}`,t)};return t.watch((()=>r(i.value)),a),t.watch((()=>e[n]),(e=>a(r(e)))),i.value!==e[n]&&o(`update:${n}`,i.value),i}const i=t.ref(e[n]);return t.watch((()=>e[n]),(e=>{Je(e,i.value)||(i.value=e)})),t.watch(i,(t=>{Je(t,e[n])||o(`update:${n}`,t)})),i}(e,"zoomLevel",n,(e=>(e=Math.max(e,i.view.minZoomLevel),e=Math.min(e,i.view.maxZoomLevel)))),{svgPanZoom:g,onSvgPanZoomMounted:m,onSvgPanZoomUnmounted:y}=hr(p,{viewportSelector:".v-viewport",minZoom:i.view.minZoomLevel,maxZoom:i.view.maxZoomLevel,fit:!0,center:!0,zoomEnabled:i.view.zoomEnabled,onZoom:e=>{var t,n;const o=null!=(n=null==(t=g.value)?void 0:t.getRealZoom())?n:1;Math.abs(v.value-o)>=1e-6&&(v.value=o,r.emit("view:zoom",o))},panEnabled:i.view.panEnabled,onPan:e=>r.emit("view:pan",e)});var b;b={container:h,svg:p,svgPanZoom:g},t.provide(ot,b);const w={width:0,height:0},x=new ResizeObserver((()=>{var e,t,n;null==(e=g.value)||e.resize();const o=null==(t=h.value)?void 0:t.getBoundingClientRect();if(o){const e=-(w.width-o.width)/2,t=-(w.height-o.height)/2;null==(n=g.value)||n.panBy({x:e,y:t});const{width:i,height:a}=o;Object.assign(w,{width:i,height:a}),r.emit("view:resize",{x:o.x,y:o.y,width:i,height:a})}}));m((()=>{var e,t;const n=tt(h.value,"svg-pan-zoom container");x.observe(n),null==(t=(e=i.view).onSvgPanZoomInitialized)||t.call(e,tt(g.value,"svg-pan-zoom instance"));const o=n.getBoundingClientRect(),{width:r,height:a}=o;Object.assign(w,{width:r,height:a})})),y((()=>{x.disconnect()}));const k=e=>{var t;null==(t=g.value)||t.applyAbsoluteZoomLevel(e,i.view.minZoomLevel,i.view.maxZoomLevel)};t.watch((()=>i.view.panEnabled),(e=>{var t;null==(t=g.value)||t.setPanEnabled(e)})),t.watch((()=>i.view.zoomEnabled),(e=>{var t;null==(t=g.value)||t.setZoomEnabled(e)})),t.watch(v,(e=>k(e))),t.watch((()=>[i.view.minZoomLevel,i.view.maxZoomLevel]),(e=>{k(v.value)}));const{scale:E}=function(e,n){const o=t.computed((()=>n.scalingObjects?1:1/e.value));return t.provide(pr,{zoomLevel:e,scale:o}),{scale:o}}(v,i.view);m((()=>{const t=e.zoomLevel;k(t)}));const S=n=>{var o;Object.keys(e.nodes).length>0?(null==(o=g.value)||o.updateBBox(),t.nextTick(n)):n()},P=()=>{S((()=>{var e;null==(e=g.value)||e.fitToContents(),r.emit("view:fit",void 0)}))},_=()=>{S((()=>{var e;null==(e=g.value)||e.center()}))},O=nt(e,"selectedNodes",e.nodes,n);t.watch(O,(e=>r.emit("node:select",Array.from(e))));const M=nt(e,"selectedEdges",e.edges,n);t.watch(M,(e=>r.emit("edge:select",Array.from(e))));const B=et(new Set),z=et(new Set),N=et({nodes:{}});t.watch((()=>e.layouts),(()=>Object.assign(N,e.layouts)),{deep:!0,immediate:!0}),t.watch(N,(()=>n("update:layouts",N)),{deep:!0});const C=t.computed((()=>i.node.focusring.visible)),j=(t.provide(Nn,Bn),Bn),T=t.ref(!1);r.on("node:dragstart",(e=>T.value=!0)),r.on("node:dragend",(e=>T.value=!1)),r.on("view:mode",(e=>{var t,n,o,r;i.view.panEnabled&&("default"===e?null==(t=g.value)||t.enablePan():null==(n=g.value)||n.disablePan()),i.view.zoomEnabled&&("default"===e?null==(o=g.value)||o.enableZoom():null==(r=g.value)||r.disableZoom())}));const{nodeStates:A,edgeStates:I}=function(e,n,o,r,i,a,s,l,c){const u=t.reactive({}),d=t.reactive({});Object.keys(e).forEach((t=>{Bo(u,e,t,o.has(t),!1,s.node)})),t.watch((()=>[...o]),((e,t)=>{const n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));n.forEach((e=>{const t=u[e];t&&!t.selected&&(t.selected=!0)})),o.forEach((e=>{const t=u[e];t&&t.selected&&(t.selected=!1)}))})),t.watch((()=>[...i]),((e,t)=>{const n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));n.forEach((e=>{const t=u[e];t&&!t.hovered&&(t.hovered=!0)})),o.forEach((e=>{const t=u[e];t&&t.hovered&&(t.hovered=!1)}))})),t.watch((()=>new Set(Object.keys(e))),((t,n)=>{for(const o of t)n.has(o)||Bo(u,e,o,!1,!1,s.node);const r=l.nodes;for(const e of n)t.has(e)||(delete r[e],o.delete(e),i.delete(e),delete u[e])}));const h=Tn(e,n,s);Object.keys(n).forEach((e=>{No(d,h,u,n,e,r.has(e),s.edge,l.nodes,c)})),t.watch((()=>[...r]),((e,t)=>{const n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));n.forEach((e=>{const t=d[e];t&&!t.selected&&(t.selected=!0)})),o.forEach((e=>{const t=d[e];t&&t.selected&&(t.selected=!1)}))})),t.watch((()=>[...a]),((e,t)=>{const n=e.filter((e=>!t.includes(e))),o=t.filter((t=>!e.includes(t)));n.forEach((e=>{const t=d[e];t&&!t.hovered&&(t.hovered=!0)})),o.forEach((e=>{const t=d[e];t&&t.hovered&&(t.hovered=!1)}))})),t.watch((()=>new Set(Object.keys(n))),((e,t)=>{for(const o of e)t.has(o)||No(d,h,u,n,o,!1,s.edge,l.nodes,c);for(const n of t)e.has(n)||(r.delete(n),a.delete(n),d[n].stopWatchHandle(),delete d[n])}));const p={nodeStates:u,edgeStates:d,edgeGroupStates:h,layouts:l};return t.provide(Po,p),p}(t.readonly(e.nodes),t.readonly(e.edges),O,M,B,z,t.readonly(i),N,E);To(p,t.readonly(N.nodes),t.readonly(v),A,I,O,M,B,z,r);const D=t.computed((()=>i.path.visible)),L=()=>({layouts:et(N.nodes),nodes:t.readonly(e.nodes),edges:t.readonly(e.edges),configs:t.readonly(i),scale:t.readonly(E),emitter:r,svgPanZoom:tt(g.value)});return t.watch((()=>i.view.layoutHandler),((e,t)=>{t.deactivate(),e.activate(L())})),m((()=>{S((()=>{const n=tt(g.value,"svg-pan-zoom");n.center(),i.view.layoutHandler.activate(L()),t.nextTick((()=>{if(Object.keys(e.nodes).length>0)i.view.fit?P():_();else{const e=n.getSizes();n.pan({x:e.width/2,y:e.height/2})}r.emit("view:load"),f.value=!0}))}))})),y((()=>{r.emit("view:unload"),i.view.layoutHandler.deactivate()})),{container:h,svg:p,show:f,svgPanZoom:g,allConfigs:i,layerDefs:a,isShowGrid:s,isShowBackgroundViewport:l,overrideNodes:c,overrideNodeLabels:u,overrideEdgeLabels:d,scale:E,nodeStates:A,currentSelectedNodes:O,markers:j,dragging:T,currentLayouts:N,visibleNodeFocusRing:C,visiblePaths:D,fitToContents:P,panToCenter:_}},methods:{zoomIn(){var e;null==(e=this.svgPanZoom)||e.zoomIn()},zoomOut(){var e;null==(e=this.svgPanZoom)||e.zoomOut()},panTo(e){var t;null==(t=this.svgPanZoom)||t.pan(e)},panBy(e){var t;null==(t=this.svgPanZoom)||t.panBy(e)},getPan(){return tt(this.svgPanZoom).getPan()},getSizes(){const e=tt(this.svgPanZoom).getSizes();return{width:e.width,height:e.height,viewBox:e.viewBox}},getAsSvg(){const e=this.svg,t=null==e?void 0:e.querySelector(".v-viewport"),n=null==e?void 0:e.cloneNode(!0);if(t){const e=t.getBBox(),o=1/this.scale,r={x:Math.floor((e.x-10)*o),y:Math.floor((e.y-10)*o),width:Math.ceil((e.width+20)*o),height:Math.ceil((e.height+20)*o)};n.setAttribute("width",r.width.toString()),n.setAttribute("height",r.height.toString());const i=n.querySelector(".v-viewport");i.setAttribute("transform",`translate(${-r.x} ${-r.y}), scale(${o})`),i.removeAttribute("style"),n.setAttribute("viewBox",`0 0 ${r.width} ${r.height}`)}let o=n.outerHTML;return o=o.replaceAll(/ data-v-[0-9a-z]+=""/g,""),o=o.replaceAll(/<!--[\s\S]*?-->/gm,""),o}}}),ci={ref:"container",class:"v-network-graph"},ui={key:0},di={class:"v-viewport"},hi={class:"v-layer-edges"},pi={key:1,class:"v-layer-nodes-selections"};var fi=Er(li,[["render",function(e,n,o,r,i,a){const s=t.resolveComponent("v-marker-head"),l=t.resolveComponent("v-background-grid"),c=t.resolveComponent("v-background-viewport"),u=t.resolveComponent("v-edge-backgrounds"),d=t.resolveComponent("v-edge-groups"),h=t.resolveComponent("v-edge-labels"),p=t.resolveComponent("v-node-focus-ring"),f=t.resolveComponent("v-node"),v=t.resolveComponent("v-paths");return t.openBlock(),t.createElementBlock("div",ci,[(t.openBlock(),t.createElementBlock("svg",{ref:"svg",class:t.normalizeClass(["v-canvas",{show:e.show,dragging:e.dragging}]),width:"500",height:"500",viewBox:"0 0 500 500"},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.root,(n=>t.renderSlot(e.$slots,n,{key:n,scale:e.scale},void 0,!0))),128)),Object.keys(e.markers).length>0?(t.openBlock(),t.createElementBlock("defs",ui,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.markers,((n,o)=>(t.openBlock(),t.createBlock(s,{id:o,key:o,marker:n,scale:e.scale},null,8,["id","marker","scale"])))),128))])):t.createCommentVNode("",!0),e.isShowBackgroundViewport?(t.openBlock(),t.createBlock(c,{key:1},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.background,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.isShowGrid?(t.openBlock(),t.createBlock(l,{key:0})):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.grid,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128))])),_:3})):t.createCommentVNode("",!0),t.createElementVNode("g",di,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.base,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),t.createElementVNode("g",hi,[t.createVNode(u),t.createVNode(d)]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.edges,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.overrideEdgeLabels?(t.openBlock(),t.createBlock(h,{key:0},{"edge-label":t.withCtx((n=>[t.renderSlot(e.$slots,"edge-label",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)])),_:3})):t.createCommentVNode("",!0),e.visibleNodeFocusRing?(t.openBlock(),t.createElementBlock("g",pi,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.currentSelectedNodes,(n=>(t.openBlock(),t.createBlock(p,{id:n,key:n,state:e.nodeStates[n],pos:e.currentLayouts.nodes[n]},null,8,["id","state","pos"])))),128))])):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.focusring,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),t.createVNode(t.TransitionGroup,{name:e.allConfigs.node.transition,css:!!e.allConfigs.node.transition,tag:"g",class:"v-layer-nodes"},{default:t.withCtx((()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.nodeStates,((n,o)=>(t.openBlock(),t.createBlock(f,{id:o.toString(),key:o,state:n,pos:e.currentLayouts.nodes[o]},t.createSlots({_:2},[e.overrideNodes?{name:"override-node",fn:t.withCtx((n=>[t.renderSlot(e.$slots,"override-node",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)]))}:void 0,e.overrideNodeLabels?{name:"override-node-label",fn:t.withCtx((n=>[t.renderSlot(e.$slots,"override-node-label",t.normalizeProps(t.guardReactiveProps(n)),void 0,!0)]))}:void 0]),1032,["id","state","pos"])))),128))])),_:3},8,["name","css"]),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.nodes,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128)),e.visiblePaths?(t.openBlock(),t.createBlock(v,{key:2,paths:e.paths,edges:e.edges},null,8,["paths","edges"])):t.createCommentVNode("",!0),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.layerDefs.paths,(n=>(t.openBlock(),t.createElementBlock("g",{key:n,class:"v-layer"},[t.renderSlot(e.$slots,n,{scale:e.scale},void 0,!0)])))),128))])],2))],512)}],["__scopeId","data-v-f92e6cce"]]);const vi=t.defineComponent({props:{area:{type:Object,required:!0},config:{type:Object,required:!0},text:{type:String,required:!1,default:""},align:{type:String,required:!1,default:"center"},verticalAlign:{type:String,required:!1,default:"center"},edge:{type:Object,required:!1,default:void 0},hovered:{type:Boolean,required:!1,default:!1},selected:{type:Boolean,required:!1,default:!1},scale:{type:Number,required:!1,default:void 0}},setup(e,{expose:n}){const o=e,r=t.ref(0),i=t.ref(0),a=t.ref("middle"),s=t.ref("central"),l=t.ref(0);t.watchEffect((()=>{const e=o.area.source,t=o.area.target;"source"===o.align?(e.above.x==t.above.x?a.value=e.above.y>t.above.y?"start":"end":a.value=e.above.x<t.above.x?"start":"end","above"===o.verticalAlign?(r.value=e.above.x,i.value=e.above.y,s.value="text-top"):"below"===o.verticalAlign?(r.value=e.below.x,i.value=e.below.y,s.value="hanging"):(r.value=(e.above.x+e.below.x)/2,i.value=(e.above.y+e.below.y)/2,s.value="central")):"target"===o.align?(e.above.x==t.above.x?a.value=e.above.y<t.above.y?"start":"end":a.value=e.above.x>t.above.x?"start":"end","above"===o.verticalAlign?(r.value=t.above.x,i.value=t.above.y,s.value="text-top"):"below"===o.verticalAlign?(r.value=t.below.x,i.value=t.below.y,s.value="hanging"):(r.value=(t.above.x+t.below.x)/2,i.value=(t.above.y+t.below.y)/2,s.value="central")):(a.value="middle","above"===o.verticalAlign?(r.value=(e.above.x+t.above.x)/2,i.value=(e.above.y+t.above.y)/2,s.value="text-top"):"below"===o.verticalAlign?(r.value=(e.below.x+t.below.x)/2,i.value=(e.below.y+t.below.y)/2,s.value="hanging"):(r.value=(e.above.x+t.below.x)/2,i.value=(e.above.y+t.below.y)/2,s.value="central"));let n=Vn(e.above,t.above).v.angleDeg();(n<-90||n>=90)&&(n+=180,n>180&&(n-=360)),l.value=n}));const c=t.computed((()=>"central"!==s.value||o.config.background?o.config:__spreadProps(__spreadValues({},o.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}})));return n({x:r,y:i,textAnchor:a,dominantBaseline:s,angle:l,updatedConfig:c}),(n,o)=>(t.openBlock(),t.createBlock(kr,{class:"v-edge-label",text:e.text,x:r.value,y:i.value,config:t.unref(c),"text-anchor":a.value,"dominant-baseline":s.value,transform:`rotate(${l.value} ${r.value} ${i.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}});var gi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",VNetworkGraph:fi,VEdgeLabel:vi,VLabelText:kr});e.Config=it,e.GridLayout=class extends At{constructor(e={}){super(),this.options=e}setNodePosition(e,t){const n=this.options.grid||10;e.value.x=Math.floor(t.x/n)*n,e.value.y=Math.floor(t.y/n)*n}},e.LayerPositions=vr,e.SimpleLayout=At,e.VEdgeLabel=vi,e.VLabelText=kr,e.VNetworkGraph=fi,e.configsWithType=function(e){return e},e.default=function(e){Object.entries(gi).forEach((([t,n])=>{e.component(t,n)}))},e.getFullConfigs=function(e){const t=En();return e&&kn(t,e),t},e.useStates=Oo,e.withSelf=st,Object.defineProperty(e,"__esModule",{value:!0}),e[Symbol.toStringTag]="Module"}));
//# sourceMappingURL=index.umd.js.map
