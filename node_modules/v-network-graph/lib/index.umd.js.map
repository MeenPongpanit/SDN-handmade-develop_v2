{"version":3,"file":"index.umd.js","sources":["../node_modules/lodash-es/eq.js","../node_modules/lodash-es/_assocIndexOf.js","../node_modules/lodash-es/_listCacheDelete.js","../node_modules/lodash-es/_ListCache.js","../node_modules/lodash-es/_listCacheClear.js","../node_modules/lodash-es/_listCacheGet.js","../node_modules/lodash-es/_listCacheHas.js","../node_modules/lodash-es/_listCacheSet.js","../node_modules/lodash-es/_freeGlobal.js","../node_modules/lodash-es/_root.js","../node_modules/lodash-es/_Symbol.js","../node_modules/lodash-es/_getRawTag.js","../node_modules/lodash-es/_objectToString.js","../node_modules/lodash-es/_baseGetTag.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/_isMasked.js","../node_modules/lodash-es/_coreJsData.js","../node_modules/lodash-es/_toSource.js","../node_modules/lodash-es/_baseIsNative.js","../node_modules/lodash-es/_getNative.js","../node_modules/lodash-es/_getValue.js","../node_modules/lodash-es/_Map.js","../node_modules/lodash-es/_nativeCreate.js","../node_modules/lodash-es/_hashGet.js","../node_modules/lodash-es/_hashHas.js","../node_modules/lodash-es/_Hash.js","../node_modules/lodash-es/_getMapData.js","../node_modules/lodash-es/_isKeyable.js","../node_modules/lodash-es/_MapCache.js","../node_modules/lodash-es/_hashClear.js","../node_modules/lodash-es/_hashDelete.js","../node_modules/lodash-es/_hashSet.js","../node_modules/lodash-es/_mapCacheClear.js","../node_modules/lodash-es/_mapCacheDelete.js","../node_modules/lodash-es/_mapCacheGet.js","../node_modules/lodash-es/_mapCacheHas.js","../node_modules/lodash-es/_mapCacheSet.js","../node_modules/lodash-es/_Stack.js","../node_modules/lodash-es/_stackClear.js","../node_modules/lodash-es/_stackDelete.js","../node_modules/lodash-es/_stackGet.js","../node_modules/lodash-es/_stackHas.js","../node_modules/lodash-es/_stackSet.js","../node_modules/lodash-es/_SetCache.js","../node_modules/lodash-es/_arraySome.js","../node_modules/lodash-es/_setCacheAdd.js","../node_modules/lodash-es/_setCacheHas.js","../node_modules/lodash-es/_equalArrays.js","../node_modules/lodash-es/_cacheHas.js","../node_modules/lodash-es/_Uint8Array.js","../node_modules/lodash-es/_mapToArray.js","../node_modules/lodash-es/_setToArray.js","../node_modules/lodash-es/_equalByTag.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_getSymbols.js","../node_modules/lodash-es/_arrayFilter.js","../node_modules/lodash-es/stubArray.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/_baseIsArguments.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isBuffer.js","../node_modules/lodash-es/stubFalse.js","../node_modules/lodash-es/_isIndex.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/_baseIsTypedArray.js","../node_modules/lodash-es/_baseUnary.js","../node_modules/lodash-es/_nodeUtil.js","../node_modules/lodash-es/isTypedArray.js","../node_modules/lodash-es/_arrayLikeKeys.js","../node_modules/lodash-es/_baseTimes.js","../node_modules/lodash-es/_isPrototype.js","../node_modules/lodash-es/_overArg.js","../node_modules/lodash-es/_nativeKeys.js","../node_modules/lodash-es/_baseKeys.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/keys.js","../node_modules/lodash-es/_getAllKeys.js","../node_modules/lodash-es/_baseGetAllKeys.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_equalObjects.js","../node_modules/lodash-es/_DataView.js","../node_modules/lodash-es/_Promise.js","../node_modules/lodash-es/_Set.js","../node_modules/lodash-es/_WeakMap.js","../node_modules/lodash-es/_getTag.js","../node_modules/lodash-es/_baseIsEqualDeep.js","../node_modules/lodash-es/_baseIsEqual.js","../node_modules/lodash-es/isEqual.js","../src/common/common.ts","../src/common/props.ts","../src/composables/container.ts","../src/common/configs.ts","../src/common/utility.ts","../node_modules/lodash-es/_trimmedEndIndex.js","../node_modules/lodash-es/_baseTrim.js","../node_modules/lodash-es/isSymbol.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/toFinite.js","../node_modules/lodash-es/toInteger.js","../node_modules/lodash-es/_baseToString.js","../node_modules/lodash-es/_arrayMap.js","../node_modules/lodash-es/toString.js","../node_modules/lodash-es/_createRound.js","../node_modules/lodash-es/round.js","../src/layouts/simple.ts","../node_modules/lodash-es/_defineProperty.js","../node_modules/lodash-es/_baseAssignValue.js","../node_modules/lodash-es/_assignMergeValue.js","../node_modules/lodash-es/_createBaseFor.js","../node_modules/lodash-es/_cloneBuffer.js","../node_modules/lodash-es/_cloneTypedArray.js","../node_modules/lodash-es/_cloneArrayBuffer.js","../node_modules/lodash-es/_baseCreate.js","../node_modules/lodash-es/_getPrototype.js","../node_modules/lodash-es/isPlainObject.js","../node_modules/lodash-es/_safeGet.js","../node_modules/lodash-es/_assignValue.js","../node_modules/lodash-es/_baseKeysIn.js","../node_modules/lodash-es/_nativeKeysIn.js","../node_modules/lodash-es/keysIn.js","../node_modules/lodash-es/toPlainObject.js","../node_modules/lodash-es/_copyObject.js","../node_modules/lodash-es/_baseMergeDeep.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/_copyArray.js","../node_modules/lodash-es/_initCloneObject.js","../node_modules/lodash-es/_baseMerge.js","../node_modules/lodash-es/identity.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/_overRest.js","../node_modules/lodash-es/_baseSetToString.js","../node_modules/lodash-es/constant.js","../node_modules/lodash-es/_shortOut.js","../node_modules/lodash-es/_setToString.js","../node_modules/lodash-es/_baseRest.js","../node_modules/lodash-es/_isIterateeCall.js","../node_modules/lodash-es/_createAssigner.js","../node_modules/lodash-es/merge.js","../src/common/config-defaults.ts","../src/composables/config.ts","../src/composables/marker.ts","../src/common/edge-group.ts","../node_modules/victor/index.js","../src/common/vector.ts","../node_modules/lodash-es/_isStrictComparable.js","../node_modules/lodash-es/_matchesStrictComparable.js","../node_modules/lodash-es/_baseMatches.js","../node_modules/lodash-es/_getMatchData.js","../node_modules/lodash-es/_baseIsMatch.js","../node_modules/lodash-es/_isKey.js","../node_modules/lodash-es/memoize.js","../node_modules/lodash-es/_stringToPath.js","../node_modules/lodash-es/_memoizeCapped.js","../node_modules/lodash-es/_castPath.js","../node_modules/lodash-es/_toKey.js","../node_modules/lodash-es/_baseGet.js","../node_modules/lodash-es/_baseHasIn.js","../node_modules/lodash-es/hasIn.js","../node_modules/lodash-es/_hasPath.js","../node_modules/lodash-es/_baseMatchesProperty.js","../node_modules/lodash-es/get.js","../node_modules/lodash-es/property.js","../node_modules/lodash-es/_baseProperty.js","../node_modules/lodash-es/_basePropertyDeep.js","../node_modules/lodash-es/_baseLt.js","../node_modules/lodash-es/minBy.js","../node_modules/lodash-es/_baseExtremum.js","../node_modules/lodash-es/_baseIteratee.js","../src/common/2d.ts","../src/composables/state.ts","../src/composables/mouse.ts","../src/composables/event-emitter.ts","../node_modules/mitt/dist/mitt.mjs","../node_modules/@dash14/svg-pan-zoom/src/utilities.js","../node_modules/@dash14/svg-pan-zoom/src/uniwheel.js","../node_modules/@dash14/svg-pan-zoom/src/svg-utilities.js","../node_modules/@dash14/svg-pan-zoom/src/control-icons.js","../node_modules/@dash14/svg-pan-zoom/src/shadow-viewport.js","../node_modules/@dash14/svg-pan-zoom/src/svg-pan-zoom.js","../src/utility/svg-pan-zoom-ex.ts","../src/composables/svg-pan-zoom.ts","../src/composables/zoom.ts","../src/common/types.ts","../src/components/shape.vue","../src/components/label-text.vue","../plugin-vue:export-helper","../src/components/node.vue","../src/components/node-focus-ring.vue","../src/components/line.vue","../node_modules/lodash-es/_baseSlice.js","../node_modules/lodash-es/chunk.js","../src/components/edge-curved.vue","../src/components/edge.vue","../src/components/edge-summarized.vue","../src/components/edge-groups.vue","../src/components/edge-background.vue","../src/components/edge-backgrounds.vue","../src/components/edge-labels.vue","../src/components/background-viewport.vue","../src/components/background-grid.vue","../src/components/path-line.vue","../src/components/paths.vue","../src/components/marker-head-arrow.vue","../src/components/marker-head-angle.vue","../src/components/marker-head.vue","../src/components/network-graph.vue","../src/components/edge-label.vue","../src/layouts/grid.ts","../src/index.ts"],"sourcesContent":["/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import { isReactive, reactive } from \"vue\"\n\n/* ------------------------------------------ *\n * Utility\n * ------------------------------------------ */\n\nexport type RecursivePartial<T> = {\n  [P in keyof T]?: T[P] extends (infer U)[]\n    ? RecursivePartial<U>[]\n    : T[P] extends (infer U)[] | undefined\n    ? RecursivePartial<U>[]\n    : // eslint-disable-next-line @typescript-eslint/ban-types\n    T[P] extends object\n    ? RecursivePartial<T[P]>\n    : // eslint-disable-next-line @typescript-eslint/ban-types\n    T[P] extends object | undefined\n    ? RecursivePartial<T[P]>\n    : T[P]\n}\n\ndeclare class Id<T extends string> {\n  private IDENTITY: T\n}\n\nexport type Reactive<T> = Id<\"Reactive\"> & T\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport function Reactive<T extends object>(value: T): Reactive<T> {\n  if (isReactive(value)) {\n    return value as Reactive<T>\n  } else {\n    return reactive(value) as Reactive<T>\n  }\n}\n\nexport interface ReadonlyRef<T> {\n  readonly value: T\n}\n\nexport function nonNull<T>(val?: T | null, name = \"Parameter\"): T {\n  if (val === undefined || val === null) {\n    throw new Error(`${name} is null`)\n  }\n  return val\n}\n","import { watch, reactive, ref, Ref } from \"vue\"\nimport isEqual from \"lodash-es/isEqual\"\nimport { Reactive } from \"./common\"\n\nexport function bindProp<T, K extends string & keyof T>(\n  props: T,\n  name: K,\n  emit: (event: `update:${K}`, ...args: any[]) => void,\n  filter?: (arg: T[K]) => T[K]\n): Ref<T[K]> {\n  // Build two-way binding ties.\n\n  // Since it is not always passed in props (emit does not\n  // rewrite it), always keep a ref for self management.\n\n  if (filter) {\n    const prop = ref<T[K]>(filter(props[name])) as Ref<T[K]>\n    const update = (filtered: T[K]) => {\n      if (!isEqual(filtered, prop.value)) {\n        prop.value = filtered\n      }\n      if (!isEqual(filtered, props[name])) {\n        emit(`update:${name}` as const, filtered)\n      }\n    }\n    watch(() => filter(prop.value), update)\n    watch(() => props[name],v => update(filter(v)))\n    if (prop.value !== props[name]) {\n      emit(`update:${name}` as const, prop.value)\n    }\n    return prop\n  }\n\n  const prop = ref<T[K]>(props[name]) as Ref<T[K]>\n  watch(\n    () => props[name],\n    v => {\n      if (!isEqual(v, prop.value)) {\n        prop.value = v\n      }\n    }\n  )\n  watch(prop, v => {\n    if (!isEqual(v, props[name])) {\n      emit(`update:${name}` as const, v)\n    }\n  })\n  return prop\n}\n\ntype KeysOfType<Obj, Val> = {\n  [K in keyof Obj]-?: Obj[K] extends Val ? K : never\n}[keyof Obj]\n\nexport function bindPropKeySet<T, K extends string & KeysOfType<T, string[]>>(\n  props: T,\n  name: K,\n  sourceObject: { [name: string]: any },\n  emit: (event: `update:${K}`, ...args: any[]) => void\n): Reactive<Set<string>> {\n  // Generate two-way bindings for a given prop.\n  // Assumes that the specified prop indicates the key of the object.\n  const bound = reactive<Set<string>>(new Set())\n  watch(\n    () => props[name],\n    () => {\n      // Since it is not recognized as a string[] by type checking,\n      // use any for now.\n      const prop: string[] = props[name] as any\n      const filtered = prop.filter(n => n in sourceObject)\n      if (!isEqual(filtered, bound)) {\n        bound.clear()\n        filtered.forEach(bound.add, bound)\n      }\n    },\n    { immediate: true }\n  )\n  watch(bound, () => {\n    const array = Array.from(bound)\n    if (!isEqual(props[name], array)) {\n      emit(`update:${name}` as const, array)\n    }\n  })\n  return Reactive(bound)\n}\n","import { provide, inject, InjectionKey, Ref } from \"vue\"\nimport { SvgPanZoomInstance } from \"../utility/svg-pan-zoom-ex\"\nimport { nonNull } from \"../common/common\"\n\ninterface ProvideContainers {\n  container: Ref<HTMLDivElement>\n  svg: Ref<SVGElement>\n  svgPanZoom: Ref<SvgPanZoomInstance | undefined>\n}\n\ninterface Containers {\n  container: Ref<HTMLDivElement | undefined>\n  svg: Ref<SVGElement | undefined>\n  svgPanZoom: Ref<SvgPanZoomInstance | undefined>\n}\n\nconst containersKey = Symbol(\"containers\") as InjectionKey<Containers>\n\nexport function provideContainers(containers: Containers): void {\n  provide(containersKey, containers)\n}\n\nexport function useContainers(): ProvideContainers {\n  const containers = nonNull(inject(containersKey), \"containers\")\n  return {\n    container: containers.container as Ref<HTMLDivElement>,\n    svg: containers.svg as Ref<SVGElement>,\n    svgPanZoom: containers.svgPanZoom\n  }\n}\n","import { SvgPanZoomInstance } from \"../utility/svg-pan-zoom-ex\"\nimport { LayoutHandler } from \"../layouts/handler\"\nimport { RecursivePartial } from \"./common\"\nimport { Node, Edge, Edges, Path } from \"./types\"\n\ntype CallableValue<V, T> = V | ((target: T) => V)\n\ntype CallableValues<V, T> = {\n  [K in keyof V]: CallableValue<V[K], T>\n}\n\nexport class Config {\n  static value<V, T>(value: CallableValue<V, T>, target: T): V {\n    return value instanceof Function ? value(target) : value\n  }\n\n  static values<V, T>(value: CallableValues<V, T>, target: T): V {\n    if (Object.values(value).filter(v => v instanceof Function).length === 0) {\n      return value as V  // all config are literals\n    }\n    return Object.fromEntries(\n      Object.entries(value).map(([k, v]) => [k, v instanceof Function ? v(target) : v])\n    ) as V\n  }\n}\n\n/* View configuration */\n\nexport interface GridLine {\n  color: string\n  width: number\n  dasharray?: string | number\n}\n\nexport interface GridConfig {\n  visible: boolean\n  interval: number\n  thickIncrements: number | false\n  line: GridLine\n  thick: GridLine\n}\n\nexport interface ViewConfig {\n  scalingObjects: boolean\n  panEnabled: true\n  zoomEnabled: true\n  minZoomLevel: number\n  maxZoomLevel: number\n  fit: boolean\n  layoutHandler: LayoutHandler\n  onSvgPanZoomInitialized?: (instance: SvgPanZoomInstance) => void\n  grid: GridConfig\n}\n\n/* Shape style */\n\nexport interface ShapeStyleBase {\n  strokeWidth: number\n  strokeColor?: string\n  strokeDasharray?: string | number\n  color: string\n}\n\nexport type ShapeType = \"circle\" | \"rect\"\n\ninterface CircleShape extends ShapeStyleBase {\n  radius: number\n}\n\ninterface RectangleShape extends ShapeStyleBase {\n  width: number\n  height: number\n  borderRadius: number\n}\n\n// `Shape` is an object whose fields can change depending on\n// the type value.\n// Normally, Union Types would be used, but in order to minimize\n// the use of type guards when users build and use the configuration,\n// we define it as an object that contains all fields.\n\ntype ShapeBase<T extends ShapeType = ShapeType> = {\n  type: T\n}\n\nexport type ShapeStyle = ShapeBase & CircleShape & RectangleShape\nexport type CircleShapeStyle = ShapeBase<\"circle\"> & CircleShape\nexport type RectangleShapeStyle = ShapeBase<\"rect\"> & RectangleShape\nexport type AnyShapeStyle = CircleShapeStyle | RectangleShapeStyle\n\n/* Label style */\n\ninterface Padding {\n  vertical: number\n  horizontal: number\n}\nexport interface LabelBackgroundStyle {\n  visible: boolean\n  color?: string,\n  padding?: number | Padding,\n  borderRadius?: number\n}\n\nexport interface LabelStyle {\n  fontFamily?: string\n  fontSize: number\n  color: string\n  background?: LabelBackgroundStyle\n  lineHeight: number\n}\n\n/* Node style */\n\nexport enum NodeLabelDirection {\n  CENTER = 0,\n  NORTH = 1,\n  NORTH_EAST = 2,\n  EAST = 3,\n  SOUTH_EAST = 4,\n  SOUTH = 5,\n  SOUTH_WEST = 6,\n  WEST = 7,\n  NORTH_WEST = 8,\n}\n\nexport interface NodeLabelStyle extends LabelStyle {\n  visible: boolean\n  margin: number\n  direction: NodeLabelDirection\n  text: string\n}\n\nexport interface NodeFocusRingStyle {\n  visible: boolean\n  width: number\n  padding: number\n  color: string\n  dasharray?: string | number\n}\n\nexport interface NodeConfig<N extends Node = Node> {\n  normal: CallableValues<ShapeStyle, N>\n  hover?: CallableValues<ShapeStyle, N>\n  selected?: CallableValues<ShapeStyle, N>\n  draggable: CallableValue<boolean, N>\n  selectable: CallableValue<boolean, N> | number\n  label: CallableValues<NodeLabelStyle, N>\n  focusring: NodeFocusRingStyle\n  transition?: string\n}\n\n/* Edge style */\n\nexport interface StrokeStyle {\n  width: number\n  color: string\n  dasharray?: string | number\n  linecap?: \"butt\" | \"round\" | \"square\"\n  animate: boolean\n  animationSpeed: number\n}\n\nexport interface EdgeLabelStyle extends LabelStyle {\n  margin: number\n  padding: number\n}\n\nexport type EdgeHeadType = \"none\" | \"arrow\" | \"angle\" | \"circle\" | \"custom\"\nexport type MarkerUnits = \"strokeWidth\" | \"userSpaceOnUse\"\n\nexport interface MarkerStyle {\n  type: EdgeHeadType\n  width: number\n  height: number\n  margin: number\n  units: MarkerUnits\n  color: string | null\n  customId?: string\n}\n\nexport type EdgeType = \"straight\" | \"curve\"\n\n// Orientation to be considered when keeping multiple edge alignments.\n//   \"clock\": Keep the forward/backward when viewed as a clock.\n//   \"vertical\": Keep the vertical alignment.\n//   \"horizontal\": Keep the horizontal alignment.\nexport type EdgeKeepOrderType = \"clock\" | \"vertical\" | \"horizontal\"\n\nexport interface EdgeConfig<E extends Edge = Edge> {\n  normal: CallableValues<StrokeStyle, E>\n  hover?: CallableValues<StrokeStyle, E>\n  selected: CallableValues<StrokeStyle, E>\n  selectable: CallableValue<boolean, E> | number\n  gap: number | ((edges: Edges, configs: Configs) => number)\n  type: EdgeType\n  marker: {\n    source: CallableValues<MarkerStyle, [E, StrokeStyle]>\n    target: CallableValues<MarkerStyle, [E, StrokeStyle]>\n  }\n  margin: number | null\n  summarize: boolean | ((edges: Edges, configs: Configs) => boolean | null)\n  summarized: {\n    label: LabelStyle\n    shape: ShapeStyle\n    stroke: StrokeStyle\n  }\n  keepOrder: EdgeKeepOrderType\n  label: EdgeLabelStyle\n}\n\n/* Path config */\nexport interface PathStrokeStyle extends StrokeStyle {\n  linejoin: \"miter\" | \"round\" | \"bevel\"\n}\n\nexport type PathEndType = \"centerOfNode\" | \"edgeOfNode\"\n\nexport interface PathConfig<P extends Path = Path> {\n  visible: boolean\n  clickable: boolean\n  curveInNode: boolean\n  end: PathEndType\n  margin: CallableValue<number, P>\n  path: CallableValues<PathStrokeStyle, P>\n  transition?: string\n}\n\n/* Configuration */\n\nexport interface Configs<N extends Node = Node, E extends Edge = Edge, P extends Path = Path> {\n  view: ViewConfig\n  node: NodeConfig<N>\n  edge: EdgeConfig<E>\n  path: PathConfig<P>\n}\n\n/** For specification by the user */\nexport type UserConfigs<N extends Node = Node, E extends Edge = Edge, P extends Path = Path> = RecursivePartial<Configs<N, E, P>>\n\n/** Make a config with self object */\nexport function withSelf<T extends {[name: string]: any}>(callback: (self: T) => T): T {\n  const self = {} as T\n  return Object.assign(self, callback(self))\n}\n\nexport function configsWithType<N extends Node = Node, E extends Edge = Edge, P extends Path = Path>(configs: UserConfigs<N, E, P>): UserConfigs {\n  return configs as UserConfigs\n}\n","import { Node, Position, Size } from \"./types\"\nimport { Config, NodeConfig } from \"./configs\"\nimport isEqual from \"lodash-es/isEqual\"\n\nexport function keyOf<T>(obj: T): (keyof T)[] {\n  return Object.keys(obj) as (keyof T)[]\n}\n\nexport function entriesOf<T, K extends keyof T>(obj: T): [K, T[K]][] {\n  return Object.entries(obj) as [K, T[K]][]\n}\n\nexport function updateObjectDiff<T extends Record<string, any>>(target: T, from: T) {\n  const keys = new Set<keyof T>(Object.keys(target))\n  entriesOf(from).forEach(([key, value]) => {\n    if (!isEqual(target[key], value)) {\n      target[key] = value\n    }\n    keys.delete(key)\n  })\n  keys.forEach(k => delete target[k])\n}\n\nexport function getNodeSize(node: Node, style: NodeConfig, scale: number): Size {\n  const shape = Config.values(style.normal, node)\n  if (shape.type == \"circle\") {\n    return {\n      width: shape.radius * 2 * scale,\n      height: shape.radius * 2 * scale,\n    }\n  } else {\n    return {\n      width: shape.width * scale,\n      height: shape.height * scale,\n    }\n  }\n}\n\nexport function areNodesCollision(\n  nodePos: Position,\n  nodeSize: Size,\n  targetNodePos: Position,\n  targetNodeSize: Size\n): boolean {\n  // x\n  const distanceX = Math.abs(nodePos.x - targetNodePos.x)\n  const collisionX = distanceX < nodeSize.width / 2 + targetNodeSize.width / 2\n\n  // y\n  const distanceY = Math.abs(nodePos.y - targetNodePos.y)\n  const collisionY = distanceY < nodeSize.height / 2 + targetNodeSize.height / 2\n  return collisionX && collisionY\n}\n\nexport function applyScaleToDasharray(dasharray: number | string | undefined, scale: number) {\n  let result: number | string = 0\n  if (scale === 1 || dasharray === undefined || dasharray === \"none\") {\n    result = dasharray ?? 0\n  } else if (typeof dasharray === \"string\") {\n    result = dasharray\n      .split(/\\s+/)\n      .map(v => parseInt(v) * scale)\n      .filter(v => !isNaN(v))\n      .join(\" \")\n  } else {\n    result = dasharray * scale\n  }\n  return result && result !== \"0\" ? result : undefined\n}\n\nexport function getDasharrayUnit(dasharray: number | string | undefined) {\n  let result: number | string = 0\n  if (dasharray === undefined || dasharray === \"none\") {\n    result = 0\n  } else if (typeof dasharray === \"string\") {\n    const array = dasharray\n      .split(/\\s+/)\n      .map(v => parseInt(v))\n      .filter(v => !isNaN(v))\n    if (array.length % 2 === 0) {\n      // ex: 1 2 -> -  -  -  - ...\n      result = array.reduce((s, n) => s + n, 0)\n    } else {\n      // ex: 1 2 3 -> -  --- --   -  --- ...\n      result = array.reduce((s, n) => s + n, 0) * 2\n    }\n  } else {\n    result = dasharray * 2 // 2 <- border and space\n  }\n  return result\n}\n\nexport class MapUtil {\n  static valueOf<K, V>(map: Map<K, V>) {\n    return Array.from(map.values())\n  }\n}\n\ntype Args<T> = [...(T | null)[], T]\n\nexport function findFirstNonNull<T>(...values: Args<T>): T {\n  return values.find(v => !!v) as T\n}\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import toFinite from './toFinite.js';\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nexport default toInteger;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import root from './_root.js';\nimport toInteger from './toInteger.js';\nimport toNumber from './toNumber.js';\nimport toString from './toString.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsFinite = root.isFinite,\n    nativeMin = Math.min;\n\n/**\n * Creates a function like `_.round`.\n *\n * @private\n * @param {string} methodName The name of the `Math` method to use when rounding.\n * @returns {Function} Returns the new round function.\n */\nfunction createRound(methodName) {\n  var func = Math[methodName];\n  return function(number, precision) {\n    number = toNumber(number);\n    precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n    if (precision && nativeIsFinite(number)) {\n      // Shift with exponential notation to avoid floating-point issues.\n      // See [MDN](https://mdn.io/round#Examples) for more details.\n      var pair = (toString(number) + 'e').split('e'),\n          value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n      pair = (toString(value) + 'e').split('e');\n      return +(pair[0] + 'e' + (+pair[1] - precision));\n    }\n    return func(number);\n  };\n}\n\nexport default createRound;\n","import createRound from './_createRound.js';\n\n/**\n * Computes `number` rounded to `precision`.\n *\n * @static\n * @memberOf _\n * @since 3.10.0\n * @category Math\n * @param {number} number The number to round.\n * @param {number} [precision=0] The precision to round to.\n * @returns {number} Returns the rounded number.\n * @example\n *\n * _.round(4.006);\n * // => 4\n *\n * _.round(4.006, 2);\n * // => 4.01\n *\n * _.round(4060, -2);\n * // => 4100\n */\nvar round = createRound('round');\n\nexport default round;\n","import { Ref, toRef, watch } from \"vue\"\nimport { NodePositions, OnDragHandler, Position } from \"../common/types\"\nimport { getNodeSize, areNodesCollision } from \"../common/utility\"\nimport { LayoutActivateParameters, LayoutHandler } from \"./handler\"\nimport round from \"lodash-es/round\"\n\nconst NEW_NODE_POSITION_MARGIN = 20\n\nexport class SimpleLayout implements LayoutHandler {\n  private onDeactivate?: () => void\n\n  activate(parameters: LayoutActivateParameters): void {\n    const { layouts, nodes, configs, emitter, scale, svgPanZoom } = parameters\n    const onDrag: OnDragHandler = positions => {\n      for (const [id, pos] of Object.entries(positions)) {\n        const layout = this.getOrCreateNodePosition(layouts, id)\n        this.setNodePosition(layout, pos)\n      }\n    }\n\n    const setNewNodePositions = (nodeIds: string[]) => {\n      // decide new node's position\n      const newNodes = nodeIds.filter(n => !(n in layouts))\n      const area = svgPanZoom.getViewArea()\n      const s = scale.value\n      for (const nodeId of newNodes) {\n        const node = nodes[nodeId]\n        const nodeSize = getNodeSize(node, configs.node, s)\n        const candidate = { ...area.center }\n        for (;;) {\n          let collision = false\n          for (const [id, pos] of Object.entries(layouts)) {\n            if (nodeId === id) continue\n            const targetNode = nodes[id]\n            if (!targetNode) continue\n            const targetNodeSize = getNodeSize(targetNode, configs.node, s)\n            collision = areNodesCollision(candidate, nodeSize, pos, targetNodeSize)\n            if (collision) {\n              break\n            }\n          }\n          if (collision) {\n            // Slide the width of one node + margin in the horizontal direction.\n            // If it reaches the edge of the display area, it moves downward.\n            candidate.x += nodeSize.width + NEW_NODE_POSITION_MARGIN * s\n            if (candidate.x + nodeSize.width / 2 > area.box.right) {\n              candidate.x = area.center.x\n              candidate.y += nodeSize.height + NEW_NODE_POSITION_MARGIN * s\n            }\n          } else {\n            break\n          }\n        }\n        const layout = this.getOrCreateNodePosition(layouts, nodeId)\n        this.setNodePosition(layout, candidate)\n      }\n    }\n\n    setNewNodePositions(Object.keys(nodes))\n    const stopNodeWatch = watch(() => Object.keys(nodes), setNewNodePositions)\n\n    emitter.on(\"node:dragstart\", onDrag)\n    emitter.on(\"node:pointermove\", onDrag)\n    emitter.on(\"node:dragend\", onDrag)\n\n    this.onDeactivate = () => {\n      stopNodeWatch()\n      emitter.off(\"node:dragstart\", onDrag)\n      emitter.off(\"node:pointermove\", onDrag)\n      emitter.off(\"node:dragend\", onDrag)\n    }\n  }\n\n  deactivate(): void {\n    if (this.onDeactivate) {\n      this.onDeactivate()\n    }\n  }\n\n  protected setNodePosition(nodeLayout: Ref<Position>, pos: Position) {\n    nodeLayout.value.x = round(pos.x, 3)\n    nodeLayout.value.y = round(pos.y, 3)\n  }\n\n  private getOrCreateNodePosition(layouts: NodePositions, node: string) {\n    const layout = toRef(layouts, node)\n    if (!layout.value) {\n      layout.value = { x: 0, y: 0 }\n    }\n    return layout\n  }\n}\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import { NodeLabelDirection, Configs, withSelf, Config, UserConfigs } from \"./configs\"\nimport { Node, Edge, Path, Edges } from \"./types\"\nimport { SimpleLayout } from \"../layouts/simple\"\nimport merge from \"lodash-es/merge\"\n\n/**\n * Get all default configs.\n * @returns configs\n */\nexport function getConfigDefaults(): Configs {\n  return {\n    view: {\n      scalingObjects: false,\n      panEnabled: true,\n      zoomEnabled: true,\n      minZoomLevel: 0.1,\n      maxZoomLevel: 64,\n      fit: false,\n      layoutHandler: new SimpleLayout(),\n      onSvgPanZoomInitialized: undefined,\n      grid: {\n        visible: false,\n        interval: 10,\n        thickIncrements: 5,\n        line: {\n          color: \"#e0e0e0\",\n          width: 1,\n          dasharray: 1,\n        },\n        thick: {\n          color: \"#cccccc\",\n          width: 1,\n          dasharray: 0,\n        },\n      },\n    },\n    node: withSelf(self => ({\n      normal: {\n        type: \"circle\",\n        radius: 16,\n        // for rect -->\n        width: 32,\n        height: 32,\n        borderRadius: 4,\n        // <-- for rect\n        color: \"#4466cc\",\n        strokeWidth: 0,\n        strokeColor: \"#000000\",\n        strokeDasharray: 0,\n      },\n      hover: {\n        type: node => Config.value(self.normal.type, node) as any,\n        radius: node => (Config.value(self.normal.radius, node) ?? 0) + 2,\n        width: node => (Config.value(self.normal.width, node) ?? 0) + 2,\n        height: node => (Config.value(self.normal.height, node) ?? 0) + 2,\n        borderRadius: node => Config.value(self.normal.borderRadius, node) ?? 0,\n        strokeWidth: node => Config.value(self.normal.strokeWidth, node),\n        strokeColor: node => Config.value(self.normal.strokeColor, node),\n        strokeDasharray: node => Config.value(self.normal.strokeDasharray, node),\n        color: \"#3355bb\",\n      },\n      selected: undefined,\n      draggable: true,\n      selectable: false,\n      label: {\n        visible: true,\n        fontFamily: undefined,\n        fontSize: 11,\n        lineHeight: 1.1,\n        color: \"#000000\",\n        background: undefined,\n        // background: {\n        //   visible: true,\n        //   color: \"#ffffff\",\n        //   padding: {\n        //     vertical: 1,\n        //     horizontal: 4,\n        //   },\n        //   borderRadius: 2\n        // },\n        margin: 4,\n        direction: NodeLabelDirection.SOUTH,\n        text: \"name\",\n      },\n      focusring: {\n        visible: true,\n        width: 4,\n        padding: 3,\n        color: \"#eebb00\",\n      },\n      transition: undefined\n    })),\n    edge: withSelf(self => ({\n      normal: {\n        width: 2,\n        color: \"#4466cc\",\n        dasharray: 0,\n        linecap: \"butt\",\n        animate: false,\n        animationSpeed: 50,\n      },\n      hover: {\n        width: edge => Config.value(self.normal.width, edge) + 1,\n        color: \"#3355bb\",\n        dasharray: edge => Config.value(self.normal.dasharray, edge),\n        linecap: edge => Config.value(self.normal.linecap, edge),\n        animate: edge => Config.value(self.normal.animate, edge),\n        animationSpeed: edge => Config.value(self.normal.animationSpeed, edge),\n      },\n      selected: {\n        width: edge => Config.value(self.normal.width, edge) + 1,\n        color: \"#dd8800\",\n        dasharray: edge => {\n          const w = Config.value(self.normal.width, edge)\n          return `${w * 1.5} ${w * 2}`\n        },\n        linecap: edge => Config.value(self.normal.linecap, edge),\n        animate: edge => Config.value(self.normal.animate, edge),\n        animationSpeed: edge => Config.value(self.normal.animationSpeed, edge),\n      },\n      selectable: false,\n      gap: 3,\n      type: \"straight\",\n      marker: {\n        source: {\n          type: \"none\",\n          width: 5,\n          height: 5,\n          margin: -1,\n          units: \"strokeWidth\",\n          color: null\n        },\n        target: {\n          type: \"none\",\n          width: 5,\n          height: 5,\n          margin: -1,\n          units: \"strokeWidth\",\n          color: null\n        },\n      },\n      margin: null,\n      summarize: (_edges: Edges, configs: Configs) => {\n        return configs.edge.type == \"curve\" ? false : null\n      },\n      summarized: {\n        label: {\n          fontSize: 10,\n          lineHeight: 1,\n          color: \"#4466cc\",\n        },\n        shape: {\n          type: \"rect\",\n          // for circle -->\n          radius: 6,\n          // <-- for circle\n          width: 12,\n          height: 12,\n          borderRadius: 3,\n          color: \"#ffffff\",\n          strokeWidth: 1,\n          strokeColor: \"#4466cc\",\n          strokeDasharray: undefined,\n        },\n        stroke: {\n          width: 5,\n          color: \"#4466cc\",\n          dasharray: undefined,\n          linecap: undefined,\n          animate: false,\n          animationSpeed: 50,\n        },\n      },\n      keepOrder: \"clock\",\n      label: {\n        fontFamily: undefined,\n        fontSize: 11,\n        lineHeight: 1.1,\n        color: \"#000000\",\n        background: undefined,\n        // background: {\n        //   visible: true,\n        //   color: \"#ffffff\",\n        //   padding: {\n        //     vertical: 1,\n        //     horizontal: 4,\n        //   },\n        //   borderRadius: 2\n        // },\n        margin: 4,\n        padding: 4\n      },\n    })),\n    path: {\n      visible: false,\n      clickable: false,\n      curveInNode: false,\n      end: \"centerOfNode\",\n      margin: 0,\n      path: {\n        width: 6,\n        color: p => {\n          const list = [\n            \"#d5000088\",\n            \"#c5116288\",\n            \"#aa00ff88\",\n            \"#6200ea88\",\n            \"#304ffe88\",\n            \"#2962ff88\",\n            \"#0091ea88\",\n            \"#00b8d488\",\n            \"#00bfa588\",\n            \"#00c85388\",\n            \"#64dd1788\",\n            \"#aeea0088\",\n            \"#ffd60088\",\n            \"#ffab0088\",\n            \"#ff6d0088\",\n            \"#dd2c0088\",\n          ]\n          const hash = p.edges\n            .map(s =>\n              s.split(\"\").reduce((a, b) => {\n                a = (a << 5) - a + b.charCodeAt(0)\n                return a & a\n              }, 0)\n            )\n            .reduce((a, b) => a + b, 0)\n          return list[Math.abs(hash) % list.length]\n        },\n        dasharray: undefined,\n        linecap: \"round\",\n        linejoin: \"round\",\n        animate: false,\n        animationSpeed: 50,\n      },\n      transition: undefined\n    },\n  }\n}\n\nexport function getFullConfigs<N extends Node = Node, E extends Edge = Edge, P extends Path = Path>(config?: UserConfigs<N, E, P>): Configs {\n  const configs = getConfigDefaults()\n  if (config) {\n    merge(configs, config)\n  }\n  return configs\n}\n","\nimport { nonNull } from \"../common/common\"\nimport { Configs, UserConfigs } from \"../common/configs\"\nimport { getConfigDefaults } from \"../common/config-defaults\"\nimport { inject, InjectionKey, provide, reactive, watch } from \"vue\"\nimport merge from \"lodash-es/merge\"\n\nconst injectionKey = Symbol(\"style\") as InjectionKey<Configs>\n\nexport function provideConfigs(configs: UserConfigs) {\n  const results: Configs = reactive(getConfigDefaults())\n  const styleKeys = Object.keys(results) as (keyof Configs)[]\n  for (const key of styleKeys) {\n    watch(() => configs[key], () => {\n      merge(results[key], configs[key] || {})\n    }, { immediate: true, deep: true })\n  }\n\n  provide(injectionKey, results)\n  return results\n}\n\nfunction injectConfig<T extends keyof Configs>(key: T) {\n  return nonNull(inject(injectionKey), `Configs(${key})`)[key]\n}\n\nexport function useAllConfigs() {\n  return nonNull(inject(injectionKey))\n}\n\nexport function useViewConfig() {\n  return injectConfig(\"view\")\n}\n\nexport function useNodeConfig() {\n  return injectConfig(\"node\")\n}\n\nexport function useEdgeConfig() {\n  return injectConfig(\"edge\")\n}\n\nexport function usePathConfig() {\n  return injectConfig(\"path\")\n}\n","import { MarkerStyle } from \"../common/configs\"\nimport { InjectionKey, provide, reactive } from \"vue\"\n\nexport type MarkerBuilder = (marker: MarkerStyle | null, isSource?: boolean) => string\n\nexport interface HeadMarker extends MarkerStyle {\n  color: string\n  isSource: boolean\n}\n\nconst markers: Record<string, HeadMarker> = reactive({})\nconst referenceCount: Record<string, number> = {}\n\nconst markersKey = Symbol(\"markers\") as InjectionKey<typeof markers>\n\nexport function provideMarkers() {\n  provide(markersKey, markers)\n  return markers\n}\n\nfunction toHeadMarker(marker: MarkerStyle, isSource: boolean, strokeColor: string) {\n  return {\n    ...marker,\n    color: marker.color ?? strokeColor,\n    isSource\n  }\n}\n\nfunction buildKey(m: HeadMarker) {\n  return `marker_${m.type}_${m.width}_${m.height}_${m.margin}_${m.color.replace(\"#\", \"\")}_${m.isSource ? \"L\" : \"R\"}_${m.units === \"strokeWidth\" ? \"rel\" : \"abs\"}`\n}\n\nfunction addMarker(key: string, marker: HeadMarker) {\n  const m = referenceCount[key] ?? 0\n  referenceCount[key] = m + 1\n  if (!m) {\n    markers[key] = marker\n  }\n}\n\nfunction removeMarker(key: string) {\n  const m = referenceCount[key] ?? 0\n  if (m) {\n    if (m - 1 === 0) {\n      delete markers[key]\n      delete referenceCount[key]\n    } else {\n      referenceCount[key] = m - 1\n    }\n  }\n}\n\nexport function clearMarker(id: string | undefined) {\n  if (id) {\n    removeMarker(id)\n  }\n}\n\nexport function makeMarker(marker: MarkerStyle, isSource: boolean, previousId: string | undefined, strokeColor: string) {\n  if (marker.type === \"none\") {\n    clearMarker(previousId)\n    return undefined\n  }\n\n  if (marker.type === \"custom\") {\n    clearMarker(previousId)\n    return marker.customId\n  }\n\n  const headMarker = toHeadMarker(marker, isSource, strokeColor)\n  const id = buildKey(headMarker)\n  if (id === previousId) {\n    return id\n  }\n  clearMarker(previousId)\n  addMarker(id, headMarker)\n  return id\n}\n","import { watchEffect } from \"vue\"\nimport { Reactive } from \"./common\"\nimport { Config, Configs, EdgeKeepOrderType } from \"./configs\"\nimport { Edge, Edges, LinePosition, Nodes, Position } from \"./types\"\nimport { updateObjectDiff } from \"./utility\"\n\n// -----------------------------------------------------------------------\n// Type definition\n// -----------------------------------------------------------------------\n\ninterface EdgeLayoutPoint {\n  edge: Edge\n  pointInGroup: number\n  groupWidth: number\n}\n\nexport interface EdgeGroup {\n  edges: Edges\n  groupWidth: number\n  summarize: boolean\n}\n\nexport interface EdgeGroupStates {\n  edgeLayoutPoints: Record<string, EdgeLayoutPoint>\n  edgeGroups: Record<string, EdgeGroup>\n  summarizedEdges: Record<string, true>\n}\n\n// -----------------------------------------------------------------------\n// Exported functions\n// -----------------------------------------------------------------------\n\n/**\n * Make the states for edge group.\n * @param nodes nodes\n * @param edges edges\n * @param configs configs\n * @returns the states object for edge group\n */\nexport function makeEdgeGroupStates(\n  nodes: Readonly<Nodes>,\n  edges: Readonly<Edges>,\n  configs: Readonly<Configs>\n): Reactive<EdgeGroupStates> {\n  // Calculate position map\n  const state = Reactive<EdgeGroupStates>({\n    edgeLayoutPoints: {},\n    edgeGroups: {},\n    summarizedEdges: {},\n  })\n\n  watchEffect(() => {\n    const { edgeLayoutPoints, edgeGroups } = calculateEdgeGroupAndPositions(configs, nodes, edges)\n    updateObjectDiff(state.edgeLayoutPoints, edgeLayoutPoints)\n    updateObjectDiff(state.edgeGroups, edgeGroups)\n  })\n\n  // calc layout and check summarize\n  watchEffect(() => {\n    const summarizedEdges: Record<string, true> = {}\n    for (const [id, { edges, groupWidth }] of Object.entries(state.edgeGroups)) {\n      let summarize = false\n      if (groupWidth == 0) {\n        summarize = false\n      } else if (configs.edge.summarize instanceof Function) {\n        const s = configs.edge.summarize(edges, configs)\n        if (s === null) {\n          summarize = defaultCheckSummarize(nodes, edges, configs, groupWidth)\n        } else {\n          summarize = s\n        }\n      } else if (configs.edge.summarize) {\n        summarize = defaultCheckSummarize(nodes, edges, configs, groupWidth)\n      } else {\n        summarize = false\n      }\n      state.edgeGroups[id].summarize = summarize\n      if (summarize) {\n        Object.keys(edges).forEach(id => (summarizedEdges[id] = true))\n      }\n    }\n    updateObjectDiff(state.summarizedEdges, summarizedEdges)\n  })\n\n  return state\n}\n\n/**\n * Calculate the edge position by applying a shift.\n * @param p relative layout information of edges\n * @param isSummarized summarize or not\n * @param source position of source node\n * @param target position of target node\n * @param scale scale factor\n * @param keepOrder edge positional type config\n * @returns the edge position by applying a shift\n */\nexport function calculateEdgeShiftedPosition(\n  p: EdgeLayoutPoint,\n  isSummarized: boolean,\n  source: Position,\n  target: Position,\n  scale: number,\n  keepOrder: EdgeKeepOrderType\n): LinePosition {\n  if (!p) {\n    return { x1: 0, y1: 0, x2: 0, y2: 0 } // sanitized\n  }\n  if (isSummarized) {\n    // summarize\n    return calculateEdgePositionInner(p.edge, source, target, scale, 0, 0, keepOrder)\n  } else {\n    return calculateEdgePositionInner(\n      p.edge,\n      source,\n      target,\n      scale,\n      p.groupWidth,\n      p.pointInGroup,\n      keepOrder\n    )\n  }\n}\n\n// -----------------------------------------------------------------------\n// Private functions\n// -----------------------------------------------------------------------\n\nfunction calculateEdgeGroupAndPositions(configs: Configs, nodes: Nodes, edges: Edges) {\n  const edgeLayoutPoints: Record<string, EdgeLayoutPoint> = {}\n  const edgeGroups: Record<string, EdgeGroup> = {}\n\n  // make edge groups that between same nodes\n  const map: Record<string, Edges> = {}\n  for (const [id, edge] of Object.entries(edges)) {\n    if (!(edge.source in nodes && edge.target in nodes)) {\n      // reject if no node ID is found on the nodes\n      continue\n    }\n    const key = [edge.source, edge.target].sort().join(\"<=>\")\n    const values = map[key] || {}\n    values[id] = edge\n    map[key] = values\n  }\n\n  // Calculate the following:\n  // - the starting point of each line\n  // - the width between the centers of the lines at both ends\n  // *Note*: the drawing position of the line is the center of the line.\n  const calcGap =\n    configs.edge.gap instanceof Function\n      ? configs.edge.gap\n      : (_e: Edges, _c: Configs) => configs.edge.gap as number\n  for (const [key, edges] of Object.entries(map)) {\n    const edgeLen = Object.keys(edges).length\n    if (edgeLen == 0) continue\n\n    const gap = calcGap(edges, configs)\n    const [edgeId, edge] = Object.entries(edges)[0]\n    if (edgeLen === 1) {\n      edgeLayoutPoints[edgeId] = { edge, pointInGroup: 0, groupWidth: 0 }\n      edgeGroups[key] = { edges, groupWidth: 0, summarize: false }\n    } else {\n      let pointInGroup = 0\n      const lineHalfWidths = Object.values(edges).map(edge => {\n        return Config.value(configs.edge.normal.width, edge) / 2\n      })\n      const points = Object.entries(edges).map(([edgeId, edge], i) => {\n        if (i > 0) {\n          pointInGroup += lineHalfWidths[i - 1] + gap + lineHalfWidths[i]\n        }\n        return [edgeId, edge, pointInGroup] as [string, Edge, number]\n      })\n      const groupWidth = pointInGroup\n      points.forEach(([edgeId, edge, pointInGroup]) => {\n        edgeLayoutPoints[edgeId] = { edge, pointInGroup, groupWidth }\n      })\n      edgeGroups[key] = { edges, groupWidth, summarize: false }\n    }\n  }\n\n  return { edgeLayoutPoints, edgeGroups }\n}\n\nfunction defaultCheckSummarize(nodes: Nodes, edges: Edges, configs: Configs, width: number) {\n  // aggregate if the edge width and gap width exceed the size of the node\n  const edgeCount = Object.entries(edges).length\n  if (edgeCount === 1) return false\n\n  // const width =\n  //   Object.values(edges)\n  //     .map(e => Config.value(configs.edge.normal.width, e))\n  //     .reduce((sum, v) => sum + v, 0) +\n  //   configs.edge.gap * (edgeCount - 1)\n\n  const minWidth = Math.min(\n    ...Object.values(edges)\n      .flatMap(e => [nodes[e.source], nodes[e.target]])\n      .filter(v => v)\n      .map(node => {\n        const shape = Config.values(configs.node.normal, node)\n        if (shape.type === \"circle\") {\n          return shape.radius * 2\n        } else {\n          return Math.min(shape.width, shape.height)\n        }\n      })\n  )\n  return width > minWidth\n}\n\nfunction calculateEdgePositionInner(\n  edge: Edge,\n  source: Position | undefined,\n  target: Position | undefined,\n  scale: number,\n  groupWidth: number,\n  pointInGroup: number,\n  keepOrder: EdgeKeepOrderType\n): LinePosition {\n  let x1, y1, x2, y2\n  if (edge.source < edge.target) {\n    [x1, y1, x2, y2] = calculateLinePosition(\n      source?.x ?? 0,\n      source?.y ?? 0,\n      target?.x ?? 0,\n      target?.y ?? 0,\n      scale,\n      groupWidth,\n      pointInGroup,\n      keepOrder\n    )\n  } else {\n    [x2, y2, x1, y1] = calculateLinePosition(\n      target?.x ?? 0,\n      target?.y ?? 0,\n      source?.x ?? 0,\n      source?.y ?? 0,\n      scale,\n      groupWidth,\n      pointInGroup,\n      keepOrder\n    )\n  }\n  return { x1, y1, x2, y2 }\n}\n\nfunction calculateLinePosition(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  scale: number,\n  groupWidth: number,\n  pointInGroup: number,\n  keepOrder: EdgeKeepOrderType\n): [number, number, number, number] {\n  const dx = x2 - x1\n  const dy = y2 - y1\n\n  // Shifting width from center\n  let diff = (groupWidth / 2 - pointInGroup) * scale\n\n  // Adjust the relative position.\n  if (diff !== 0 && keepOrder !== \"clock\") {\n    const radian = Math.atan2(y2 - y1, x2 - x1)\n    if (keepOrder === \"vertical\") {\n      // Keep the vertical alignment of multiple edges.\n      const perpendicular = Math.PI / 2\n      if (radian < -perpendicular || radian >= perpendicular) {\n        diff *= -1\n      }\n    } else if (keepOrder === \"horizontal\") {\n      // Keep the horizontal alignment of multiple edges.\n      if (radian < 0) {\n        diff *= -1\n      }\n    }\n  }\n\n  if (dx === 0) {\n    const sign = dy < 0 ? -1 : 1\n    return [x1 + diff * sign, y1, x2 + diff * sign, y2]\n  } else if (dy === 0) {\n    const sign = dx < 0 ? 1 : -1\n    return [x1, y1 + diff * sign, x2, y2 + diff * sign]\n  } else {\n    const slope = dy / dx\n    const moveSlope = -1 / slope\n    if (dy < 0) {\n      diff = -diff\n    }\n    const diffX = diff / Math.sqrt(1 + Math.pow(moveSlope, 2))\n    return [x1 + diffX, y1 + diffX * moveSlope, x2 + diffX, y2 + diffX * moveSlope]\n  }\n}\n","exports = module.exports = Victor;\n\n/**\n * # Victor - A JavaScript 2D vector class with methods for common vector operations\n */\n\n/**\n * Constructor. Will also work without the `new` keyword\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = Victor(42, 1337);\n *\n * @param {Number} x Value of the x axis\n * @param {Number} y Value of the y axis\n * @return {Victor}\n * @api public\n */\nfunction Victor (x, y) {\n\tif (!(this instanceof Victor)) {\n\t\treturn new Victor(x, y);\n\t}\n\n\t/**\n\t * The X axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.x;\n\t *     // => 42\n\t *\n\t * @api public\n\t */\n\tthis.x = x || 0;\n\n\t/**\n\t * The Y axis\n\t *\n\t * ### Examples:\n\t *     var vec = new Victor.fromArray(42, 21);\n\t *\n\t *     vec.y;\n\t *     // => 21\n\t *\n\t * @api public\n\t */\n\tthis.y = y || 0;\n};\n\n/**\n * # Static\n */\n\n/**\n * Creates a new instance from an array\n *\n * ### Examples:\n *     var vec = Victor.fromArray([42, 21]);\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromArray\n * @param {Array} array Array with the x and y values at index 0 and 1 respectively\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromArray = function (arr) {\n\treturn new Victor(arr[0] || 0, arr[1] || 0);\n};\n\n/**\n * Creates a new instance from an object\n *\n * ### Examples:\n *     var vec = Victor.fromObject({ x: 42, y: 21 });\n *\n *     vec.toString();\n *     // => x:42, y:21\n *\n * @name Victor.fromObject\n * @param {Object} obj Object with the values for x and y\n * @return {Victor} The new instance\n * @api public\n */\nVictor.fromObject = function (obj) {\n\treturn new Victor(obj.x || 0, obj.y || 0);\n};\n\n/**\n * # Manipulation\n *\n * These functions are chainable.\n */\n\n/**\n * Adds another vector's X axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addX(vec2);\n *     vec1.toString();\n *     // => x:30, y:10\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addX = function (vec) {\n\tthis.x += vec.x;\n\treturn this;\n};\n\n/**\n * Adds another vector's Y axis to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.addY(vec2);\n *     vec1.toString();\n *     // => x:10, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addY = function (vec) {\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds another vector to this one\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.add(vec2);\n *     vec1.toString();\n *     // => x:30, y:40\n *\n * @param {Victor} vector The other vector you want to add to this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.add = function (vec) {\n\tthis.x += vec.x;\n\tthis.y += vec.y;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to both vector axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalar(2);\n *     vec.toString();\n *     // => x: 3, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalar = function (scalar) {\n\tthis.x += scalar;\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the X axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarX(2);\n *     vec.toString();\n *     // => x: 3, y: 2\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarX = function (scalar) {\n\tthis.x += scalar;\n\treturn this;\n};\n\n/**\n * Adds the given scalar to the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(1, 2);\n *\n *     vec.addScalarY(2);\n *     vec.toString();\n *     // => x: 1, y: 4\n *\n * @param {Number} scalar The scalar to add\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.addScalarY = function (scalar) {\n\tthis.y += scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the X axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractX(vec2);\n *     vec1.toString();\n *     // => x:80, y:50\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractX = function (vec) {\n\tthis.x -= vec.x;\n\treturn this;\n};\n\n/**\n * Subtracts the Y axis of another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtractY(vec2);\n *     vec1.toString();\n *     // => x:100, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractY = function (vec) {\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts another vector from this one\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(20, 30);\n *\n *     vec1.subtract(vec2);\n *     vec1.toString();\n *     // => x:80, y:20\n *\n * @param {Victor} vector The other vector you want subtract from this one\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtract = function (vec) {\n\tthis.x -= vec.x;\n\tthis.y -= vec.y;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalar(20);\n *     vec.toString();\n *     // => x: 80, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalar = function (scalar) {\n\tthis.x -= scalar;\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarX(20);\n *     vec.toString();\n *     // => x: 80, y: 200\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarX = function (scalar) {\n\tthis.x -= scalar;\n\treturn this;\n};\n\n/**\n * Subtracts the given scalar from the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 200);\n *\n *     vec.subtractScalarY(20);\n *     vec.toString();\n *     // => x: 100, y: 180\n *\n * @param {Number} scalar The scalar to subtract\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.subtractScalarY = function (scalar) {\n\tthis.y -= scalar;\n\treturn this;\n};\n\n/**\n * Divides the X axis by the x component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.divideX(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideX = function (vector) {\n\tthis.x /= vector.x;\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.divideY(vec2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Victor} vector The other vector you want divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideY = function (vector) {\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by a axis values of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.divide(vec2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Victor} vector The vector to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divide = function (vector) {\n\tthis.x /= vector.x;\n\tthis.y /= vector.y;\n\treturn this;\n};\n\n/**\n * Divides both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalar(2);\n *     vec.toString();\n *     // => x:50, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalar = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t}\n\n\treturn this;\n};\n\n/**\n * Divides the X axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarX(2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarX = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.x /= scalar;\n\t} else {\n\t\tthis.x = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Divides the Y axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.divideScalarY(2);\n *     vec.toString();\n *     // => x:100, y:25\n *\n * @param {Number} The scalar to divide by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.divideScalarY = function (scalar) {\n\tif (scalar !== 0) {\n\t\tthis.y /= scalar;\n\t} else {\n\t\tthis.y = 0;\n\t}\n\treturn this;\n};\n\n/**\n * Inverts the X axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertX();\n *     vec.toString();\n *     // => x:-100, y:50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertX = function () {\n\tthis.x *= -1;\n\treturn this;\n};\n\n/**\n * Inverts the Y axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invertY();\n *     vec.toString();\n *     // => x:100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invertY = function () {\n\tthis.y *= -1;\n\treturn this;\n};\n\n/**\n * Inverts both axis\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.invert();\n *     vec.toString();\n *     // => x:-100, y:-50\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.invert = function () {\n\tthis.invertX();\n\tthis.invertY();\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by X component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 0);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyX = function (vector) {\n\tthis.x *= vector.x;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by Y component of given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(0, 2);\n *\n *     vec.multiplyX(vec2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Victor} vector The vector to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyY = function (vector) {\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by values from a given vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     var vec2 = new Victor(2, 2);\n *\n *     vec.multiply(vec2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Victor} vector The vector to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiply = function (vector) {\n\tthis.x *= vector.x;\n\tthis.y *= vector.y;\n\treturn this;\n};\n\n/**\n * Multiplies both vector axis by the given scalar value\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalar(2);\n *     vec.toString();\n *     // => x:200, y:100\n *\n * @param {Number} The scalar to multiply by\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalar = function (scalar) {\n\tthis.x *= scalar;\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the X axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarX(2);\n *     vec.toString();\n *     // => x:200, y:50\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarX = function (scalar) {\n\tthis.x *= scalar;\n\treturn this;\n};\n\n/**\n * Multiplies the Y axis by the given scalar\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.multiplyScalarY(2);\n *     vec.toString();\n *     // => x:100, y:100\n *\n * @param {Number} The scalar to multiply the axis with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.multiplyScalarY = function (scalar) {\n\tthis.y *= scalar;\n\treturn this;\n};\n\n/**\n * Normalize\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.normalize = function () {\n\tvar length = this.length();\n\n\tif (length === 0) {\n\t\tthis.x = 1;\n\t\tthis.y = 0;\n\t} else {\n\t\tthis.divide(Victor(length, length));\n\t}\n\treturn this;\n};\n\nVictor.prototype.norm = Victor.prototype.normalize;\n\n/**\n * If the absolute vector axis is greater than `max`, multiplies the axis by `factor`\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.limit(80, 0.9);\n *     vec.toString();\n *     // => x:90, y:50\n *\n * @param {Number} max The maximum value for both x and y axis\n * @param {Number} factor Factor by which the axis are to be multiplied with\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.limit = function (max, factor) {\n\tif (Math.abs(this.x) > max){ this.x *= factor; }\n\tif (Math.abs(this.y) > max){ this.y *= factor; }\n\treturn this;\n};\n\n/**\n * Randomizes both vector axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomize(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:67, y:73\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomize = function (topLeft, bottomRight) {\n\tthis.randomizeX(topLeft, bottomRight);\n\tthis.randomizeY(topLeft, bottomRight);\n\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeX(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:55, y:50\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeX = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.x, bottomRight.x);\n\tvar max = Math.max(topLeft.x, bottomRight.x);\n\tthis.x = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomizes the y axis with a value between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeY(new Victor(50, 60), new Victor(70, 80`));\n *     vec.toString();\n *     // => x:100, y:66\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeY = function (topLeft, bottomRight) {\n\tvar min = Math.min(topLeft.y, bottomRight.y);\n\tvar max = Math.max(topLeft.y, bottomRight.y);\n\tthis.y = random(min, max);\n\treturn this;\n};\n\n/**\n * Randomly randomizes either axis between 2 vectors\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.randomizeAny(new Victor(50, 60), new Victor(70, 80));\n *     vec.toString();\n *     // => x:100, y:77\n *\n * @param {Victor} topLeft first vector\n * @param {Victor} bottomRight second vector\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.randomizeAny = function (topLeft, bottomRight) {\n\tif (!! Math.round(Math.random())) {\n\t\tthis.randomizeX(topLeft, bottomRight);\n\t} else {\n\t\tthis.randomizeY(topLeft, bottomRight);\n\t}\n\treturn this;\n};\n\n/**\n * Rounds both axis to an integer value\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.unfloat = function () {\n\tthis.x = Math.round(this.x);\n\tthis.y = Math.round(this.y);\n\treturn this;\n};\n\n/**\n * Rounds both axis to a certain precision\n *\n * ### Examples:\n *     var vec = new Victor(100.2, 50.9);\n *\n *     vec.unfloat();\n *     vec.toString();\n *     // => x:100, y:51\n *\n * @param {Number} Precision (default: 8)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.toFixed = function (precision) {\n\tif (typeof precision === 'undefined') { precision = 8; }\n\tthis.x = this.x.toFixed(precision);\n\tthis.y = this.y.toFixed(precision);\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the X axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixX(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:100\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixX = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.x = (1 - amount) * this.x + amount * vec.x;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation of the Y axis towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mixY(vec2, 0.5);\n *     vec.toString();\n *     // => x:100, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mixY = function (vec, amount) {\n\tif (typeof amount === 'undefined') {\n\t\tamount = 0.5;\n\t}\n\n\tthis.y = (1 - amount) * this.y + amount * vec.y;\n\treturn this;\n};\n\n/**\n * Performs a linear blend / interpolation towards another vector\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 100);\n *     var vec2 = new Victor(200, 200);\n *\n *     vec1.mix(vec2, 0.5);\n *     vec.toString();\n *     // => x:150, y:150\n *\n * @param {Victor} vector The other vector\n * @param {Number} amount The blend amount (optional, default: 0.5)\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.mix = function (vec, amount) {\n\tthis.mixX(vec, amount);\n\tthis.mixY(vec, amount);\n\treturn this;\n};\n\n/**\n * # Products\n */\n\n/**\n * Creates a clone of this vector\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = vec1.clone();\n *\n *     vec2.toString();\n *     // => x:10, y:10\n *\n * @return {Victor} A clone of the vector\n * @api public\n */\nVictor.prototype.clone = function () {\n\treturn new Victor(this.x, this.y);\n};\n\n/**\n * Copies another vector's X component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyX(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:10\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyX = function (vec) {\n\tthis.x = vec.x;\n\treturn this;\n};\n\n/**\n * Copies another vector's Y component in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copyY(vec1);\n *\n *     vec2.toString();\n *     // => x:10, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copyY = function (vec) {\n\tthis.y = vec.y;\n\treturn this;\n};\n\n/**\n * Copies another vector's X and Y components in to its own\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *     var vec2 = new Victor(20, 20);\n *     var vec2 = vec1.copy(vec1);\n *\n *     vec2.toString();\n *     // => x:20, y:20\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.copy = function (vec) {\n\tthis.copyX(vec);\n\tthis.copyY(vec);\n\treturn this;\n};\n\n/**\n * Sets the vector to zero (0,0)\n *\n * ### Examples:\n *     var vec1 = new Victor(10, 10);\n *\t\t var1.zero();\n *     vec1.toString();\n *     // => x:0, y:0\n *\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.zero = function () {\n\tthis.x = this.y = 0;\n\treturn this;\n};\n\n/**\n * Calculates the dot product of this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.dot(vec2);\n *     // => 23000\n *\n * @param {Victor} vector The second vector\n * @return {Number} Dot product\n * @api public\n */\nVictor.prototype.dot = function (vec2) {\n\treturn this.x * vec2.x + this.y * vec2.y;\n};\n\nVictor.prototype.cross = function (vec2) {\n\treturn (this.x * vec2.y ) - (this.y * vec2.x );\n};\n\n/**\n * Projects a vector onto another vector, setting itself to the result.\n *\n * ### Examples:\n *     var vec = new Victor(100, 0);\n *     var vec2 = new Victor(100, 100);\n *\n *     vec.projectOnto(vec2);\n *     vec.toString();\n *     // => x:50, y:50\n *\n * @param {Victor} vector The other vector you want to project this vector onto\n * @return {Victor} `this` for chaining capabilities\n * @api public\n */\nVictor.prototype.projectOnto = function (vec2) {\n    var coeff = ( (this.x * vec2.x)+(this.y * vec2.y) ) / ((vec2.x*vec2.x)+(vec2.y*vec2.y));\n    this.x = coeff * vec2.x;\n    this.y = coeff * vec2.y;\n    return this;\n};\n\n\nVictor.prototype.horizontalAngle = function () {\n\treturn Math.atan2(this.y, this.x);\n};\n\nVictor.prototype.horizontalAngleDeg = function () {\n\treturn radian2degrees(this.horizontalAngle());\n};\n\nVictor.prototype.verticalAngle = function () {\n\treturn Math.atan2(this.x, this.y);\n};\n\nVictor.prototype.verticalAngleDeg = function () {\n\treturn radian2degrees(this.verticalAngle());\n};\n\nVictor.prototype.angle = Victor.prototype.horizontalAngle;\nVictor.prototype.angleDeg = Victor.prototype.horizontalAngleDeg;\nVictor.prototype.direction = Victor.prototype.horizontalAngle;\n\nVictor.prototype.rotate = function (angle) {\n\tvar nx = (this.x * Math.cos(angle)) - (this.y * Math.sin(angle));\n\tvar ny = (this.x * Math.sin(angle)) + (this.y * Math.cos(angle));\n\n\tthis.x = nx;\n\tthis.y = ny;\n\n\treturn this;\n};\n\nVictor.prototype.rotateDeg = function (angle) {\n\tangle = degrees2radian(angle);\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateTo = function(rotation) {\n\treturn this.rotate(rotation-this.angle());\n};\n\nVictor.prototype.rotateToDeg = function(rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateTo(rotation);\n};\n\nVictor.prototype.rotateBy = function (rotation) {\n\tvar angle = this.angle() + rotation;\n\n\treturn this.rotate(angle);\n};\n\nVictor.prototype.rotateByDeg = function (rotation) {\n\trotation = degrees2radian(rotation);\n\treturn this.rotateBy(rotation);\n};\n\n/**\n * Calculates the distance of the X axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceX(vec2);\n *     // => -100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceX = function (vec) {\n\treturn this.x - vec.x;\n};\n\n/**\n * Same as `distanceX()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.absDistanceX(vec2);\n *     // => 100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceX = function (vec) {\n\treturn Math.abs(this.distanceX(vec));\n};\n\n/**\n * Calculates the distance of the Y axis between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => -10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceY = function (vec) {\n\treturn this.y - vec.y;\n};\n\n/**\n * Same as `distanceY()` but always returns an absolute number\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceY(vec2);\n *     // => 10\n *\n * @param {Victor} vector The second vector\n * @return {Number} Absolute distance\n * @api public\n */\nVictor.prototype.absDistanceY = function (vec) {\n\treturn Math.abs(this.distanceY(vec));\n};\n\n/**\n * Calculates the euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distance(vec2);\n *     // => 100.4987562112089\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distance = function (vec) {\n\treturn Math.sqrt(this.distanceSq(vec));\n};\n\n/**\n * Calculates the squared euclidean distance between this vector and another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(200, 60);\n *\n *     vec1.distanceSq(vec2);\n *     // => 10100\n *\n * @param {Victor} vector The second vector\n * @return {Number} Distance\n * @api public\n */\nVictor.prototype.distanceSq = function (vec) {\n\tvar dx = this.distanceX(vec),\n\t\tdy = this.distanceY(vec);\n\n\treturn dx * dx + dy * dy;\n};\n\n/**\n * Calculates the length or magnitude of the vector\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.length();\n *     // => 111.80339887498948\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.length = function () {\n\treturn Math.sqrt(this.lengthSq());\n};\n\n/**\n * Squared length / magnitude\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *\n *     vec.lengthSq();\n *     // => 12500\n *\n * @return {Number} Length / Magnitude\n * @api public\n */\nVictor.prototype.lengthSq = function () {\n\treturn this.x * this.x + this.y * this.y;\n};\n\nVictor.prototype.magnitude = Victor.prototype.length;\n\n/**\n * Returns a true if vector is (0, 0)\n *\n * ### Examples:\n *     var vec = new Victor(100, 50);\n *     vec.zero();\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isZero = function() {\n\treturn this.x === 0 && this.y === 0;\n};\n\n/**\n * Returns a true if this vector is the same as another\n *\n * ### Examples:\n *     var vec1 = new Victor(100, 50);\n *     var vec2 = new Victor(100, 50);\n *     vec1.isEqualTo(vec2);\n *\n *     // => true\n *\n * @return {Boolean}\n * @api public\n */\nVictor.prototype.isEqualTo = function(vec2) {\n\treturn this.x === vec2.x && this.y === vec2.y;\n};\n\n/**\n * # Utility Methods\n */\n\n/**\n * Returns an string representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toString();\n *     // => x:10, y:20\n *\n * @return {String}\n * @api public\n */\nVictor.prototype.toString = function () {\n\treturn 'x:' + this.x + ', y:' + this.y;\n};\n\n/**\n * Returns an array representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toArray();\n *     // => [10, 20]\n *\n * @return {Array}\n * @api public\n */\nVictor.prototype.toArray = function () {\n\treturn [ this.x, this.y ];\n};\n\n/**\n * Returns an object representation of the vector\n *\n * ### Examples:\n *     var vec = new Victor(10, 20);\n *\n *     vec.toObject();\n *     // => { x: 10, y: 20 }\n *\n * @return {Object}\n * @api public\n */\nVictor.prototype.toObject = function () {\n\treturn { x: this.x, y: this.y };\n};\n\n\nvar degrees = 180 / Math.PI;\n\nfunction random (min, max) {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nfunction radian2degrees (rad) {\n\treturn rad * degrees;\n}\n\nfunction degrees2radian (deg) {\n\treturn deg / degrees;\n}\n","import Vector from \"victor\"\nimport { LinePosition, Position } from \"./types\"\n\nexport interface Line {\n  source: Vector\n  target: Vector\n  v: Vector\n}\n\nexport function fromLinePosition(line: LinePosition): Line {\n  const source = Vector.fromArray([line.x1, line.y1])\n  const target = Vector.fromArray([line.x2, line.y2])\n  return {\n    source,\n    target,\n    v: toLineVector(source, target),\n  }\n}\n\nexport function fromPositions(sourcePos: Position, targetPos: Position): Line {\n  const source = Vector.fromObject(sourcePos)\n  const target = Vector.fromObject(targetPos)\n  return {\n    source,\n    target,\n    v: toLineVector(source, target),\n  }\n}\n\nexport function fromVectors(source: Vector, target: Vector): Line {\n  return {\n    source,\n    target,\n    v: toLineVector(source, target),\n  }\n}\n\nexport function toLineVector(source: Vector, target: Vector) {\n  return target.clone().subtract(source)\n}\n\nexport function toVectorsFromLinePosition(line: LinePosition): [Vector, Vector] {\n  return [Vector.fromArray([line.x1, line.y1]), Vector.fromArray([line.x2, line.y2])]\n}\n\nexport function getCenterOfLinePosition(line: LinePosition) {\n  return Vector.fromArray([(line.x1 + line.x2) / 2, (line.y1 + line.y2) / 2])\n}\n\n/**\n * Calculate the nearest point from a point to a line.\n * @param p point\n * @param line line\n * @returns point on the line\n */\nexport function getNearestPoint(p: Vector, line: Line): Vector {\n  const n = line.v.clone().normalize()\n\n  // Let `a` be a vector from any one point on a line to a point\n  const lp = line.source\n  const a = p.clone().subtract(lp)\n\n  // Inner product of `n` and `a`\n  const dot = n.dot(a)\n\n  // The nearest point is the sum of a point on the line and a\n  // vector of n multiplied by dot.\n  const near = lp.clone().add(n.multiplyScalar(dot))\n\n  return near\n}\n\n/**\n * Calculate the distance of nearest point from a point to a line.\n * @param p point\n * @param line line\n * @returns distance\n */\nexport function getDistanceToNearestPoint(p: Vector, line: Line): number {\n  const p2 = line.source\n  const v2 = line.v\n\n  const v2len = v2.lengthSq()\n  if (v2len === 0) {\n    return 0\n  }\n  const t = v2.clone().dot(p.clone().subtract(p2)) / v2len\n\n  const tv2 = v2.clone().multiplyScalar(t)\n  const h = p2.clone().add(tv2)\n  return h.subtract(p).length()\n}\n\nexport function getIntersectionOfLineTargetAndCircle(\n  source: Vector,\n  target: Vector,\n  center: Vector,\n  radius: number\n): Vector | null {\n  // Does the node contain a point?\n  const p = target.clone()\n  const length = p.subtract(center).lengthSq()\n  const contains = length - (radius * radius) <= Math.pow(1, -10)\n\n  if (!contains) return null // Not contained.\n\n  // If contained, calculate the intersection point.\n\n  // Find the nearest point `h` between `c` and the line\n  const line = fromVectors(source, target)\n  const h = getNearestPoint(center, line)\n\n  // Let `hp` be the vector from `c` to `h`.\n  const hp = h.clone().subtract(center)\n  const hpLen = hp.length()\n\n  // If `hpLen` is larger than the radius of the circle,\n  // there is no intersection.\n  if (radius < hpLen) return null\n\n  // When a straight line and a circle are tangent, `hpLen` is `r`.\n  // Then the point of contact is the nearest point between the\n  // center and the line.\n  if (radius === hpLen) return h\n\n  // Let `t` be the distance from `h` to the contact point, and\n  // derive t from the Three Square Theorem.\n  const t = Math.sqrt(radius ** 2 - hpLen ** 2)\n\n  // Let `tv` be the vector of the normalized direction vector of\n  // the line multiplied by t\n  // - intersection point 1p + tv\n  // - intersection point 2p - tv\n  const tv = line.v.normalize().multiplyScalar(t)\n\n  // Calculate the addition or subtraction depending on which side\n  // of the line to focus on.\n  return h.subtract(tv)\n}\n\nexport function getIntersectionOfLineTargetAndCircle2(\n  source: Vector,\n  target: Vector,\n  center: Vector,\n  radius: number,\n  nearBy: Vector\n): Vector | null {\n  // Does the node contain a point?\n  const p = target.clone()\n  const length = p.subtract(center).lengthSq()\n  const contains = length - (radius * radius) <= Math.pow(1, -10)\n\n  if (!contains) return null // Not contained.\n\n  // If contained, calculate the intersection point.\n\n  // Find the nearest point `h` between `c` and the line\n  const line = fromVectors(source, target)\n  const h = getNearestPoint(center, line)\n\n  // Let `hp` be the vector from `c` to `h`.\n  const hp = h.clone().subtract(center)\n  const hpLen = hp.length()\n\n  // If `hpLen` is larger than the radius of the circle,\n  // there is no intersection.\n  if (radius < hpLen) return null\n\n  // When a straight line and a circle are tangent, `hpLen` is `r`.\n  // Then the point of contact is the nearest point between the\n  // center and the line.\n  if (radius === hpLen) return h\n\n  // Let `t` be the distance from `h` to the contact point, and\n  // derive t from the Three Square Theorem.\n  const t = Math.sqrt(radius ** 2 - hpLen ** 2)\n\n  // Let `tv` be the vector of the normalized direction vector of\n  // the line multiplied by t\n  // - intersection point 1p + tv\n  // - intersection point 2p - tv\n  const tv = line.v.normalize().multiplyScalar(t)\n  const ip1 = h.clone().add(tv)\n  const ip2 = h.clone().subtract(tv)\n\n  const d1 = calculateDistance(nearBy, ip1)\n  const d2 = calculateDistance(nearBy, ip2)\n\n  if (Math.abs(d1 - d2) < 2) {\n    // Calculate the addition or subtraction depending on which side\n    // of the line to focus on.\n    return ip2\n  }\n\n  return d1 < d2 ? ip1 : ip2\n}\n\n/**\n * Calculate the intersection of two lines.\n * @param line1 line 1\n * @param line2 line 2\n * @returns intersection point\n */\nexport function getIntersectionPointOfLines(line1: Line, line2: Line): Vector {\n  const p2 = line2.source\n  const v = p2.clone().subtract(line1.source)\n\n  const v1 = line1.v\n  const v2 = line2.v\n\n  const t2 = v.cross(v1) / v1.cross(v2)\n\n  return p2.clone().add(v2.clone().multiplyScalar(t2))\n}\n\nexport function getIntersectionOfCircles(\n  center1: Vector,\n  radius1: number,\n  center2: Vector,\n  radius2: number,\n  near: Vector\n): Vector | null {\n  const c1 = center1\n  const c2 = center2\n\n  // vector of C1-->C2\n  const vC1C2 = c2.clone().subtract(c1)\n\n  // length of C1--C2\n  const a = vC1C2.magnitude()\n\n  const sumR = radius1 + radius2\n  if (sumR < a) return null // no overlap\n\n  // When a circle is contained, there is no contact point.\n  const subR = Math.abs(radius1 - radius2)\n  if (a < subR) return null\n\n  // When the circles are circumscribed, [a] and the sum of\n  // radius of two circles are equal. And there is only one\n  // contact point.\n  if (a === sumR) {\n    const n = vC1C2.clone().normalize()\n    const p = center1.clone().add(n.multiplyScalar(radius1))\n    return p\n  }\n\n  // When the circles are inscribed, [a] and the difference\n  // between the radius of two circles are equal. And there\n  // is only one point of contact.\n  if (a === subR) {\n    const n = vC1C2.clone().normalize()\n    const isLarge = radius1 > radius2\n    // Let [P] be the contact point:\n    // * C1 is larger : P = C1 + r1 * n\n    // * C1 is smaller: P = C1 - r1 * n\n    const p = center1.clone().add(n.multiplyScalar(isLarge ? radius1 : -radius1))\n    return p\n  }\n\n  // All three sides of triangle C1C2P are known.\n  // [b] := length of C1--P\n  // [c] := length of C2--P\n  const b = radius1\n  const c = radius2\n\n  // The cos  of angle C1 is given by the cosine theorem:\n  const cos = (a ** 2 + b ** 2 - c ** 2) / (2 * a * b)\n\n  // Let [H] be the point where the vertical line from [P] to\n  // C1--C2 is dropped, and let [rc] be the length of C1--H.\n  const rc = b * cos\n\n  // Let the length of the H--P be [rs]\n  const rs = Math.sqrt(b ** 2 - rc ** 2)\n\n  // normalized vector of vC1C2\n  const n1 = vC1C2.clone().normalize()\n\n  // vector with n1 rotated 90 degrees to the left\n  const n2 = Vector.fromArray([-n1.y, n1.x])\n\n  // The point of intersection [P]\n  // P  = C1 + tn1 + sn2\n  // P' = C1 + tn1 - sn2\n  const tn1 = n1.clone().multiplyScalar(rc)\n  const sn2 = n2.clone().multiplyScalar(rs)\n\n  const result1 = center1.clone().add(tn1).add(sn2)\n  const result2 = center1.clone().add(tn1).subtract(sn2)\n\n  const d1 = calculateDistance(result1, near)\n  const d2 = calculateDistance(result2, near)\n\n  return d1 < d2 ? result1 : result2\n}\n\nexport function calculatePerpendicularLine(line: Line) {\n  const n1 = line.v\n    .clone()\n    .normalize()\n    .rotate(Math.PI / 2)\n  return fromVectors(line.target, line.target.clone().add(n1))\n}\n\nexport function calculateRelativeAngleRadian(line1: Line, line2: Line) {\n  return Math.atan2(\n    line1.v.y * line2.v.x - line1.v.x * line2.v.y,\n    line1.v.x * line2.v.x + line1.v.y * line2.v.y\n  )\n}\n\nexport function calculateCircleCenterAndRadiusBy3Points(\n  p1: Vector,\n  p2: Vector,\n  p3: Vector\n): [Vector, number] {\n  const x1 = p1.x\n  const y1 = p1.y\n  const x2 = p2.x\n  const y2 = p2.y\n  const x3 = p3.x\n  const y3 = p3.y\n  const x12 = x1 - x2\n  const y12 = y1 - y2\n  const x32 = x3 - x2\n  const y32 = y3 - y2\n\n  const x =\n    (y32 * (x12 * (x1 + x2) + y12 * (y1 + y2)) - y12 * (x32 * (x3 + x2) + y32 * (y3 + y2))) /\n    (2 * x12 * y32 - 2 * y12 * x32)\n  const y =\n    (-x32 * (x12 * (x1 + x2) + y12 * (y1 + y2)) + x12 * (x32 * (x3 + x2) + y32 * (y3 + y2))) /\n    (2 * x12 * y32 - 2 * y12 * x32)\n\n  const radius = Math.sqrt(Math.pow(x1 - x, 2) + Math.pow(y1 - y, 2))\n  const center = Vector.fromArray([x, y])\n  return [center, radius]\n}\n\n/**\n * Calculate the distance of the line.\n * @param pos1 Vector\n * @param pos2 Vector\n * @returns distance\n */\nexport function calculateDistance(pos1: Vector, pos2: Vector) {\n  const x = pos2.x - pos1.x\n  const y = pos2.y - pos1.y\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\n}\n\nexport { Vector }\n","import isObject from './isObject.js';\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nexport default isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nexport default matchesStrictComparable;\n","import baseIsMatch from './_baseIsMatch.js';\nimport getMatchData from './_getMatchData.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nexport default baseMatches;\n","import isStrictComparable from './_isStrictComparable.js';\nimport keys from './keys.js';\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nexport default getMatchData;\n","import Stack from './_Stack.js';\nimport baseIsEqual from './_baseIsEqual.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport default baseIsMatch;\n","import isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nexport default isKey;\n","import MapCache from './_MapCache.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nexport default memoize;\n","import memoizeCapped from './_memoizeCapped.js';\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nexport default stringToPath;\n","import memoize from './memoize.js';\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nexport default memoizeCapped;\n","import isArray from './isArray.js';\nimport isKey from './_isKey.js';\nimport stringToPath from './_stringToPath.js';\nimport toString from './toString.js';\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nexport default castPath;\n","import isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default toKey;\n","import castPath from './_castPath.js';\nimport toKey from './_toKey.js';\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nexport default baseGet;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nexport default baseHasIn;\n","import baseHasIn from './_baseHasIn.js';\nimport hasPath from './_hasPath.js';\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nexport default hasIn;\n","import castPath from './_castPath.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isIndex from './_isIndex.js';\nimport isLength from './isLength.js';\nimport toKey from './_toKey.js';\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nexport default hasPath;\n","import baseIsEqual from './_baseIsEqual.js';\nimport get from './get.js';\nimport hasIn from './hasIn.js';\nimport isKey from './_isKey.js';\nimport isStrictComparable from './_isStrictComparable.js';\nimport matchesStrictComparable from './_matchesStrictComparable.js';\nimport toKey from './_toKey.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nexport default baseMatchesProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nexport default get;\n","import baseProperty from './_baseProperty.js';\nimport basePropertyDeep from './_basePropertyDeep.js';\nimport isKey from './_isKey.js';\nimport toKey from './_toKey.js';\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nexport default property;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseGet from './_baseGet.js';\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nexport default basePropertyDeep;\n","/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nexport default baseLt;\n","import baseExtremum from './_baseExtremum.js';\nimport baseIteratee from './_baseIteratee.js';\nimport baseLt from './_baseLt.js';\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nexport default minBy;\n","import isSymbol from './isSymbol.js';\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nexport default baseExtremum;\n","import baseMatches from './_baseMatches.js';\nimport baseMatchesProperty from './_baseMatchesProperty.js';\nimport identity from './identity.js';\nimport isArray from './isArray.js';\nimport property from './property.js';\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nexport default baseIteratee;\n","import { AnyShapeStyle, RectangleShapeStyle, StrokeStyle } from \"./configs\"\nimport { LinePosition, Position } from \"./types\"\nimport * as V from \"../common/vector\"\nimport minBy from \"lodash-es/minBy\"\n\ninterface Line {\n  source: Position\n  target: Position\n}\n\n/**\n * Convert `LinePosition` to list of `Position`\n * @param line `LinePosition` instance\n * @returns list of `Position` instance\n */\nexport function lineTo2Positions(line: LinePosition): [Position, Position] {\n  const { x1, x2, y1, y2 } = line\n  return [\n    { x: x1, y: y1 },\n    { x: x2, y: y2 },\n  ]\n}\n\n/**\n * Convert two `Position` to `LinePosition`\n * @param p1 source position of the line\n * @param p2 target position of the line\n * @returns `LinePosition` instance\n */\nexport function positionsToLinePosition(p1: Position, p2: Position): LinePosition {\n  return { x1: p1.x, y1: p1.y, x2: p2.x, y2: p2.y }\n}\n\n/**\n * Calculate the intersection of a line and a circle.\n * @param line line\n * @param targetSide side of the line where the node is located. true: target side, false: source side\n * @param center center of the circle\n * @param radius radius of the circle\n * @returns intersection point\n */\nexport function getIntersectionOfLineAndCircle(\n  line: Line,\n  targetSide: boolean,\n  center: Position,\n  radius: number\n): Position | null {\n  return (\n    V.getIntersectionOfLineTargetAndCircle(\n      V.Vector.fromObject(targetSide ? line.source : line.target),\n      V.Vector.fromObject(targetSide ? line.target : line.source),\n      V.Vector.fromObject(center),\n      radius\n    )?.toObject() ?? null\n  )\n}\n\n/**\n * Calculate the intersection of two lines.\n * @param line1 line 1\n * @param line2 line 2\n * @returns intersection point\n */\nexport function getIntersectionPointOfLines(line1: Line, line2: Line): Position {\n  const l1 = V.fromPositions(line1.source, line1.target)\n  const l2 = V.fromPositions(line2.source, line2.target)\n  return V.getIntersectionPointOfLines(l1, l2).toObject()\n}\n\n/**\n * Calculate whether a point is contained in a circle.\n * @param point point\n * @param center center of the circle\n * @param radius radius of the circle\n * @returns whether point is contained in a circle\n */\nexport function isPointContainedInCircle(\n  point: Position,\n  center: Position,\n  radius: number\n): boolean {\n  const p = V.Vector.fromObject(point)\n  const c = V.Vector.fromObject(center)\n  const v = p.subtract(c)\n  return v.lengthSq() < radius * radius\n}\n\n/**\n * Calculate the distance of the line.\n * @param line line\n * @returns distance\n */\nexport function calculateDistance(line: LinePosition) {\n  const x = line.x2 - line.x1\n  const y = line.y2 - line.y1\n  return Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2))\n}\n\n/**\n * Get the distance that a line should be away from the\n * edge to avoid contacting a rounded rectangle.\n * @param sourcePos source position of the line\n * @param targetPos target position of the line\n * @param rect rectangle style\n * @param scale scale factor\n * @returns distance from target position\n */\nfunction calculateDistanceToAvoidOverlapsWithRect(\n  sourcePos: Position,\n  targetPos: Position, // \n  rect: RectangleShapeStyle,\n  scale: number\n) {\n  const centerLine = V.fromPositions(sourcePos, targetPos)\n  const left = targetPos.x - (rect.width / 2) * scale\n  const top = targetPos.y - (rect.height / 2) * scale\n  const right = targetPos.x + (rect.width / 2) * scale\n  const bottom = targetPos.y + (rect.height / 2) * scale\n  const vertexes = []\n  const borderRadius = rect.borderRadius * scale\n\n  // Calculate the nearest neighbor points of the vertices\n  // and lines of a figure.\n  if (borderRadius == 0) {\n    // Since it is a simple rectangle, the four corners are the vertices.\n    vertexes.push(\n      V.Vector.fromArray([left, top]),\n      V.Vector.fromArray([left, bottom]),\n      V.Vector.fromArray([right, top]),\n      V.Vector.fromArray([right, bottom])\n    )\n  } else {\n    // The edge of each line and the center of the rounded corner are\n    // the vertices.\n    const hypo = borderRadius * Math.sin(Math.PI / 4) // 45deg\n    vertexes.push(\n      V.Vector.fromArray([left + borderRadius, top]),\n      V.Vector.fromArray([left, top + borderRadius]),\n      V.Vector.fromArray([left + borderRadius - hypo, top + borderRadius - hypo]),\n      V.Vector.fromArray([left + borderRadius, bottom]),\n      V.Vector.fromArray([left, bottom - borderRadius]),\n      V.Vector.fromArray([left + borderRadius - hypo, bottom - borderRadius + hypo]),\n      V.Vector.fromArray([right - borderRadius, top]),\n      V.Vector.fromArray([right, top + borderRadius]),\n      V.Vector.fromArray([right - borderRadius + hypo, top + borderRadius - hypo]),\n      V.Vector.fromArray([right - borderRadius, bottom]),\n      V.Vector.fromArray([right, bottom - borderRadius]),\n      V.Vector.fromArray([right - borderRadius + hypo, bottom - borderRadius + hypo])\n    )\n  }\n  const hits = vertexes.map(p => V.getNearestPoint(p, centerLine))\n  const minP =\n    minBy(hits, p => V.toLineVector(centerLine.source, p).lengthSq()) ?? centerLine.target\n  return V.toLineVector(minP, centerLine.target).length()\n}\n\n/**\n * Calculate the position to display the edge label from the\n * positions of the edge.\n * @param linePos line segment between the outermost of the nodes\n * @param edgeStyle stroke style of edges\n * @param margin margin from line\n * @param padding padding from outside\n * @param scale scale factor\n * @returns edge label display area\n */\nexport function calculateEdgeLabelArea(\n  linePos: LinePosition,\n  edgeStyle: StrokeStyle,\n  margin: number,\n  padding: number,\n  scale: number\n) {\n  // the line segment between the outermost of the nodes\n  const line = V.fromLinePosition(linePos)\n  const normalized = line.v.clone().normalize()\n\n  // source side\n  const sv =\n    padding === 0\n      ? line.source\n      : line.source.clone().add(normalized.clone().multiplyScalar(padding * scale))\n\n  // target side\n  const tv =\n    padding === 0\n      ? line.target\n      : line.target.clone().subtract(normalized.clone().multiplyScalar(padding * scale))\n\n  // margin for edges\n  const labelMargin = (edgeStyle.width / 2 + margin) * scale\n  const vMargin = V.Vector.fromArray([-normalized.y, normalized.x]).multiplyScalar(labelMargin)\n  let sourceAbove = sv.clone().subtract(vMargin).toObject() as Position\n  let sourceBelow = sv.clone().add(vMargin).toObject() as Position\n  let targetAbove = tv.clone().subtract(vMargin).toObject() as Position\n  let targetBelow = tv.clone().add(vMargin).toObject() as Position\n\n  const angle = line.v.angleDeg()\n  if (angle < -90 || angle >= 90) {\n    // upside down\n    [sourceAbove, sourceBelow] = [sourceBelow, sourceAbove]\n    ;[targetAbove, targetBelow] = [targetBelow, targetAbove]\n  }\n  return {\n    source: { above: sourceAbove, below: sourceBelow },\n    target: { above: targetAbove, below: targetBelow },\n  }\n}\n\n/**\n * Calculate the distances between center of node and edge of node.\n * @param sourceNodePos position of source node\n * @param targetNodePos position of target node\n * @param sourceNodeShape shape config of source node\n * @param targetNodeShape shape config of target node\n * @returns the distances\n */\nexport function calculateDistancesFromCenterOfNodeToEndOfNode(\n  sourceNodePos: Position,\n  targetNodePos: Position,\n  sourceNodeShape: AnyShapeStyle,\n  targetNodeShape: AnyShapeStyle\n): [number, number] {\n  // source side\n  let distance1: number\n  if (sourceNodeShape.type === \"circle\") {\n    distance1 = sourceNodeShape.radius\n  } else {\n    distance1 = calculateDistanceToAvoidOverlapsWithRect(\n      targetNodePos,\n      sourceNodePos,\n      sourceNodeShape,\n      1 // scale\n    )\n  }\n\n  // target side\n  let distance2: number\n  if (targetNodeShape.type === \"circle\") {\n    distance2 = targetNodeShape.radius\n  } else {\n    distance2 = calculateDistanceToAvoidOverlapsWithRect(\n      sourceNodePos,\n      targetNodePos,\n      targetNodeShape,\n      1 // scale\n    )\n  }\n\n  return [distance1, distance2]\n}\n\n/**\n * Calculates the line position to which the margin is applied.\n * @param linePos original position of the line\n * @param sourceMargin margin for source side\n * @param targetMargin margin for target side\n * @returns the line position\n */\nexport function applyMarginToLine(\n  linePos: LinePosition,\n  sourceMargin: number,\n  targetMargin: number\n): LinePosition {\n  const line = V.fromLinePosition(linePos)\n  return applyMarginToLineInner(line, sourceMargin, targetMargin)\n}\n\nfunction applyMarginToLineInner(line: V.Line, sourceMargin: number, targetMargin: number) {\n  const normalized = line.v.clone().normalize()\n\n  line.v.angle()\n\n  const sv = line.source.clone().add(normalized.clone().multiplyScalar(sourceMargin))\n\n  const tv = line.target.clone().subtract(normalized.clone().multiplyScalar(targetMargin))\n\n  let [x1, y1] = sv.toArray()\n  let [x2, y2] = tv.toArray()\n\n  const check = V.toLineVector(sv, tv)\n  if (line.v.angle() * check.angle() < 0) {\n    // reversed\n    const c1 = V.Vector.fromArray([(x1 + x2) / 2, (y1 + y2) / 2])\n    const c2 = c1.clone().add(normalized.multiplyScalar(0.5))\n    ;[x1, y1] = c1.toArray()\n    ;[x2, y2] = c2.toArray()\n  }\n\n  return { x1, y1, x2, y2 }\n}\n\n/**\n * Calculates the position of a given distance along the circumference.\n * @param pos original position\n * @param center center of the circle\n * @param radian radius of the circle\n * @returns the moved position\n */\nexport function moveOnCircumference(pos: Position, center: Position, radian: number) {\n  const { x, y } = pos\n  const dx = x - center.x\n  const dy = y - center.y\n\n  return {\n    x: dx * Math.cos(radian) - dy * Math.sin(radian) + center.x,\n    y: dx * Math.sin(radian) + dy * Math.cos(radian) + center.y,\n  }\n}\n\n/**\n * Reverse the direction of the angle.\n * @param theta angle\n * @returns reversed angle\n */\nexport function reverseAngleRadian(theta: number): number {\n  if (theta > 0) {\n    return -(Math.PI * 2 - theta)\n  } else {\n    return Math.PI * 2 + theta\n  }\n}\n\nexport function inverseLine(line: LinePosition): LinePosition {\n  return {\n    x1: line.x2,\n    y1: line.y2,\n    x2: line.x1,\n    y2: line.y1\n  }\n}\n\nexport function calculateBezierCurveControlPoint(\n  p1: V.Vector,\n  center: V.Vector,\n  p2: V.Vector,\n  theta0: number\n): V.Vector[] {\n  const control: V.Vector[] = []\n  const centerToSource = V.fromVectors(center, p1)\n  const centerToTarget = V.fromVectors(center, p2)\n\n  let theta = V.calculateRelativeAngleRadian(centerToSource, centerToTarget)\n  if (theta0 * theta < 0) {\n    theta = reverseAngleRadian(theta)\n  }\n  const middle = V.Vector.fromObject(moveOnCircumference(p1, center, -theta / 2))\n  const centerToMp = V.fromVectors(center, middle)\n  const mpTangent = V.calculatePerpendicularLine(centerToMp)\n\n  const theta1 = V.calculateRelativeAngleRadian(centerToSource, centerToMp)\n  let tangent = V.calculatePerpendicularLine(centerToSource)\n  if (Math.abs(theta1) < Math.PI / 2) {\n    const cp = V.getIntersectionPointOfLines(tangent, mpTangent)\n    control.push(cp)\n  } else {\n    // If greater than 90 degrees, go through the midpoint.\n    const mp = V.Vector.fromObject(moveOnCircumference(middle, center, theta1 / 2))\n    const tangent2 = V.calculatePerpendicularLine(V.fromVectors(center, V.Vector.fromObject(mp)))\n    const cp1 = V.getIntersectionPointOfLines(tangent, tangent2)\n    const cp2 = V.getIntersectionPointOfLines(tangent2, mpTangent)\n    control.push(cp1, mp, cp2)\n  }\n\n  control.push(middle)\n\n  const theta2 = V.calculateRelativeAngleRadian(centerToTarget, centerToMp)\n  tangent = V.calculatePerpendicularLine(centerToTarget)\n  if (Math.abs(theta2) < Math.PI / 2) {\n    const cp = V.getIntersectionPointOfLines(tangent, mpTangent)\n    control.push(cp)\n  } else {\n    // If greater than 90 degrees, go through the midpoint.\n    const mp = V.Vector.fromObject(moveOnCircumference(middle, center, theta2 / 2))\n    const tangent2 = V.calculatePerpendicularLine(V.fromVectors(center, V.Vector.fromObject(mp)))\n    const cp1 = V.getIntersectionPointOfLines(mpTangent, tangent2)\n    const cp2 = V.getIntersectionPointOfLines(tangent2, tangent)\n    control.push(cp1, mp, cp2)\n  }\n\n  return control\n}\n","// the states of nodes and edges\n\nimport { computed, ComputedRef, reactive, Ref, toRef, unref, UnwrapRef } from \"vue\"\nimport { watch, watchEffect, WatchStopHandle } from \"vue\"\nimport { inject, InjectionKey, provide } from \"vue\"\nimport { nonNull, Reactive } from \"../common/common\"\nimport { Config, Configs, EdgeConfig, MarkerStyle, NodeConfig } from \"../common/configs\"\nimport { ShapeStyle, NodeLabelStyle, StrokeStyle } from \"../common/configs\"\nimport { Edge, Edges, Layouts, Node, Nodes } from \"../common/types\"\nimport { LinePosition, NodePositions, Position } from \"../common/types\"\nimport { EdgeGroupStates } from \"../common/edge-group\"\nimport { clearMarker, makeMarker } from \"./marker\"\nimport * as EdgeGroup from \"../common/edge-group\"\nimport * as v2d from \"../common/2d\"\nimport * as V from \"../common/vector\"\n\n// -----------------------------------------------------------------------\n// Type definitions\n// -----------------------------------------------------------------------\n\nexport type { EdgeGroupStates }\n\n// States of nodes\n\ninterface NodeStateDatum {\n  shape: Ref<ShapeStyle>\n  staticShape: Ref<ShapeStyle>\n  label: Ref<NodeLabelStyle>\n  labelText: Ref<string>\n  selected: boolean\n  hovered: boolean\n  draggable: Ref<boolean>\n  selectable: Ref<boolean | number>\n}\n\nexport type NodeState = UnwrapRef<NodeStateDatum>\nexport type NodeStates = Record<string, NodeState>\n\n// States of edges\ninterface Line {\n  stroke: StrokeStyle\n  normalWidth: number // stroke width when not hovered\n  source: MarkerStyle\n  target: MarkerStyle\n}\n\nexport interface Curve {\n  center: V.Vector\n  theta: number // theta: direction of source to center\n  circle: {\n    center: V.Vector\n    radius: number\n  }\n  control: Position[]\n}\n\ninterface EdgeStateDatum {\n  line: Ref<Line>\n  selectable: Ref<boolean | number>\n  selected: boolean\n  hovered: boolean\n  origin: LinePosition // line segment between center of nodes\n  labelPosition: LinePosition // line segment between the outermost of the nodes for labels\n  position: LinePosition // line segments to be displayed with margins applied\n  curve?: Curve\n  sourceMarkerId?: string\n  targetMarkerId?: string\n  stopWatchHandle: WatchStopHandle\n}\n\nexport type EdgeState = UnwrapRef<EdgeStateDatum>\nexport type EdgeStates = Record<string, EdgeState>\n\n// Provide states\n\ninterface States {\n  nodeStates: NodeStates\n  edgeStates: EdgeStates\n  edgeGroupStates: EdgeGroupStates\n  layouts: Layouts\n}\n\nexport type ReadonlyStates = Readonly<States>\n\n// -----------------------------------------------------------------------\n// Constants\n// -----------------------------------------------------------------------\n\nconst statesKey = Symbol(\"states\") as InjectionKey<States>\n\nconst NONE_MARKER: MarkerStyle = {\n  type: \"none\",\n  width: 0,\n  height: 0,\n  margin: 0,\n  units: \"strokeWidth\",\n  color: null,\n}\n\n// -----------------------------------------------------------------------\n// Exported functions\n// -----------------------------------------------------------------------\n\nexport function provideStates(\n  nodes: Readonly<Nodes>,\n  edges: Readonly<Edges>,\n  selectedNodes: Reactive<Set<string>>,\n  selectedEdges: Reactive<Set<string>>,\n  hoveredNodes: Reactive<Set<string>>,\n  hoveredEdges: Reactive<Set<string>>,\n  configs: Readonly<Configs>,\n  layouts: Reactive<Layouts>,\n  scale: ComputedRef<number>\n) {\n  const nodeStates: NodeStates = reactive({})\n  const edgeStates: EdgeStates = reactive({})\n\n  // -----------------------------------------------------------------------\n  // States for nodes\n  // -----------------------------------------------------------------------\n\n  Object.keys(nodes).forEach(id => {\n    createNodeState(nodeStates, nodes, id, selectedNodes.has(id), false, configs.node)\n  })\n\n  // update `node.selected` flag\n  watch(\n    () => [...selectedNodes],\n    (nodes, prev) => {\n      const append = nodes.filter(n => !prev.includes(n))\n      const removed = prev.filter(n => !nodes.includes(n))\n      append.forEach(id => {\n        const state = nodeStates[id]\n        if (state && !state.selected) state.selected = true\n      })\n      removed.forEach(id => {\n        const state = nodeStates[id]\n        if (state && state.selected) state.selected = false\n      })\n    }\n  )\n\n  // update `node.hovered` flag\n  watch(\n    () => [...hoveredNodes],\n    (nodes, prev) => {\n      const append = nodes.filter(n => !prev.includes(n))\n      const removed = prev.filter(n => !nodes.includes(n))\n      append.forEach(id => {\n        const state = nodeStates[id]\n        if (state && !state.hovered) state.hovered = true\n      })\n      removed.forEach(id => {\n        const state = nodeStates[id]\n        if (state && state.hovered) state.hovered = false\n      })\n    }\n  )\n\n  // handle increase/decrease nodes\n  watch(\n    () => new Set(Object.keys(nodes)),\n    (idSet, prev) => {\n      for (const nodeId of idSet) {\n        if (prev.has(nodeId)) continue\n        // node added\n        createNodeState(nodeStates, nodes, nodeId, false, false, configs.node)\n        // adding to layouts is done by layout handler\n      }\n\n      const positions = layouts.nodes\n      for (const nodeId of prev) {\n        if (idSet.has(nodeId)) continue\n        // node removed\n        delete positions[nodeId]\n        selectedNodes.delete(nodeId)\n        hoveredNodes.delete(nodeId)\n        delete nodeStates[nodeId]\n      }\n    }\n  )\n\n  // -----------------------------------------------------------------------\n  // States for edges\n  // -----------------------------------------------------------------------\n\n  // grouping\n  const edgeGroupStates = EdgeGroup.makeEdgeGroupStates(nodes, edges, configs)\n\n  Object.keys(edges).forEach(id => {\n    createEdgeState(\n      edgeStates,\n      edgeGroupStates,\n      nodeStates,\n      edges,\n      id,\n      selectedEdges.has(id),\n      configs.edge,\n      layouts.nodes,\n      scale\n    )\n  })\n\n  // update `edge.selected` flag\n  watch(\n    () => [...selectedEdges],\n    (nodes, prev) => {\n      const append = nodes.filter(n => !prev.includes(n))\n      const removed = prev.filter(n => !nodes.includes(n))\n      append.forEach(id => {\n        const state = edgeStates[id]\n        if (state && !state.selected) state.selected = true\n      })\n      removed.forEach(id => {\n        const state = edgeStates[id]\n        if (state && state.selected) state.selected = false\n      })\n    }\n  )\n\n  // update `edge.hovered` flag\n  watch(\n    () => [...hoveredEdges],\n    (nodes, prev) => {\n      const append = nodes.filter(n => !prev.includes(n))\n      const removed = prev.filter(n => !nodes.includes(n))\n\n      append.forEach(id => {\n        const state = edgeStates[id]\n        if (state && !state.hovered) {\n          state.hovered = true\n        }\n      })\n\n      removed.forEach(id => {\n        const state = edgeStates[id]\n        if (state && state.hovered) {\n          state.hovered = false\n        }\n      })\n    }\n  )\n\n  // handle increase/decrease edges\n  watch(\n    () => new Set(Object.keys(edges)),\n    (idSet, prev) => {\n      for (const edgeId of idSet) {\n        if (prev.has(edgeId)) continue\n        // edge added\n        createEdgeState(\n          edgeStates,\n          edgeGroupStates,\n          nodeStates,\n          edges,\n          edgeId,\n          false, // selected\n          configs.edge,\n          layouts.nodes,\n          scale\n        )\n      }\n\n      for (const edgeId of prev) {\n        if (idSet.has(edgeId)) continue\n        // remove edge\n        selectedEdges.delete(edgeId)\n        hoveredEdges.delete(edgeId)\n        edgeStates[edgeId].stopWatchHandle()\n        delete edgeStates[edgeId]\n      }\n    }\n  )\n\n  const states = { nodeStates, edgeStates, edgeGroupStates, layouts }\n  provide(statesKey, states)\n  return states\n}\n\nexport function useStates() {\n  return nonNull(inject(statesKey), \"states\") as ReadonlyStates\n}\n\n// -----------------------------------------------------------------------\n// Local functions\n// -----------------------------------------------------------------------\n\nfunction getNodeShape(node: Node, selected: boolean, hovered: boolean, config: NodeConfig) {\n  if (hovered && config.hover) {\n    return Config.values(config.hover, node)\n  } else {\n    return getNodeStaticShape(node, selected, config)\n  }\n}\n\nfunction getNodeStaticShape(node: Node, selected: boolean, config: NodeConfig) {\n  // get shape without hovered state\n  if (selected && config.selected) {\n    return Config.values(config.selected, node)\n  } else {\n    return Config.values(config.normal, node)\n  }\n}\n\nfunction getEdgeStroke(edge: Edge, selected: boolean, hovered: boolean, config: EdgeConfig) {\n  if (selected) {\n    return Config.values(config.selected, edge)\n  } else if (hovered && config.hover) {\n    return Config.values(config.hover, edge)\n  } else {\n    return Config.values(config.normal, edge)\n  }\n}\n\nfunction createNodeState(\n  states: NodeStates,\n  nodes: Nodes,\n  id: string,\n  selected: boolean,\n  hovered: boolean,\n  config: NodeConfig\n) {\n  states[id] = { selected, hovered } as any\n  const state = states[id] as any as NodeStateDatum\n  state.shape = computed(() => getNodeShape(nodes[id], state.selected, state.hovered, config))\n  state.staticShape = computed(() => getNodeStaticShape(nodes[id], state.selected, config))\n  state.label = computed(() => Config.values(config.label, nodes[id]))\n  state.labelText = computed(() => {\n    if (config.label.text instanceof Function) {\n      return unref(state.label).text\n    } else {\n      return nodes[id]?.[unref(state.label).text] ?? \"\"\n    }\n  })\n  state.draggable = computed(() => Config.value(config.draggable, nodes[id]))\n  state.selectable = computed(() => Config.value(config.selectable, nodes[id]))\n}\n\nfunction toEdgeMarker(marker: MarkerStyle): MarkerStyle {\n  if (marker.type === \"none\") {\n    return NONE_MARKER\n  } else {\n    return marker\n  }\n}\n\nfunction createEdgeState(\n  states: EdgeStates,\n  groupStates: Reactive<EdgeGroupStates>,\n  nodeStates: NodeStates,\n  edges: Edges,\n  id: string,\n  selected: boolean,\n  config: EdgeConfig,\n  layouts: NodePositions,\n  scale: ComputedRef<number>\n) {\n  const edge = edges[id]\n  if (!edge) return\n\n  states[id] = {\n    line: undefined as any, // specify later\n    selectable: false, // specify later\n    selected,\n    hovered: false,\n    curve: undefined,\n    origin: { x1: 0, y1: 0, x2: 0, y2: 0 },\n    labelPosition: { x1: 0, y1: 0, x2: 0, y2: 0 },\n    position: { x1: 0, y1: 0, x2: 0, y2: 0 },\n    stopWatchHandle: () => {},\n  }\n\n  const state = states[id] as any as EdgeStateDatum\n\n  const line = computed<Line>(() => {\n    const edge = edges[id]\n    const stroke = getEdgeStroke(edge, state.selected, state.hovered, config)\n    const normalWidth = Config.value(config.normal.width, edge)\n    const source = toEdgeMarker(Config.values(config.marker.source, [edge, stroke]))\n    const target = toEdgeMarker(Config.values(config.marker.target, [edge, stroke]))\n    return { stroke, normalWidth, source, target }\n  })\n  state.line = line\n  state.selectable = computed(() => Config.value(config.selectable, edges[id]))\n\n  const edgeLayoutPoint = toRef(groupStates.edgeLayoutPoints, id)\n  const isEdgeSummarized = toRef(groupStates.summarizedEdges, id)\n\n  const stopCalcHandle = watchEffect(() => {\n    const edge = edges[id]\n    if (!edge) return\n\n    const source = layouts[edge?.source]\n    const target = layouts[edge?.target]\n\n    const sourceShape = nodeStates[edge?.source]?.staticShape\n    const targetShape = nodeStates[edge?.target]?.staticShape\n    if (!source || !target || !sourceShape || !targetShape) {\n      return\n    }\n\n    // calculate the line segment between center of nodes\n    const shiftedPosition = EdgeGroup.calculateEdgeShiftedPosition(\n      edgeLayoutPoint.value,\n      isEdgeSummarized.value,\n      source,\n      target,\n      scale.value,\n      config.keepOrder\n    )\n\n    const [sourceShapeMargin, targetShapeMargin] =\n      v2d.calculateDistancesFromCenterOfNodeToEndOfNode(source, target, sourceShape, targetShape)\n\n    const s = scale.value\n\n    // calculate the line segment between the outermost of the nodes\n    state.labelPosition = v2d.applyMarginToLine(\n      shiftedPosition,\n      sourceShapeMargin * s,\n      targetShapeMargin * s\n    )\n\n    // calculate margins\n    let sourceMargin = 0\n    let targetMargin = 0\n    const l = line.value\n    if (l.source.type !== \"none\") {\n      const marker = l.source\n      sourceMargin = marker.margin + marker.width\n      if (marker.units === \"strokeWidth\") {\n        sourceMargin *= l.normalWidth\n      }\n    }\n    if (l.target.type !== \"none\") {\n      const marker = l.target\n      targetMargin = marker.margin + marker.width\n      if (marker.units === \"strokeWidth\") {\n        targetMargin *= l.normalWidth\n      }\n    }\n\n    if (config.margin === null || config.margin === undefined) {\n      if (l.source.type !== \"none\" || l.target.type !== \"none\") {\n        sourceMargin += sourceShapeMargin\n        targetMargin += targetShapeMargin\n      }\n    } else {\n      sourceMargin += config.margin + sourceShapeMargin\n      targetMargin += config.margin + targetShapeMargin\n    }\n\n    // calculate the line segments to be displayed with margins applied\n    const type = config.type\n    if (type === \"straight\") {\n      state.origin = shiftedPosition\n      state.curve = undefined\n      if (sourceMargin === 0 && targetMargin === 0) {\n        state.position = state.origin\n      } else {\n        state.position = v2d.applyMarginToLine(state.origin, sourceMargin * s, targetMargin * s)\n      }\n    } else {\n      // curve\n      state.origin = v2d.positionsToLinePosition(source, target)\n      const shift = edgeLayoutPoint.value.groupWidth / 2 - edgeLayoutPoint.value.pointInGroup\n\n      const [position, curve] = calculateCurvePositionAndState(\n        state.origin,\n        shiftedPosition,\n        shift,\n        sourceMargin * s,\n        targetMargin * s\n      )\n      state.position = position\n      state.curve = curve\n    }\n  })\n\n  const stopUpdateMarkerHandle = watchEffect(() => {\n    if (!edges[id]) return\n    state.sourceMarkerId = makeMarker(\n      line.value.source,\n      true /* isSource */,\n      state.sourceMarkerId,\n      line.value.stroke.color\n    )\n    state.targetMarkerId = makeMarker(\n      line.value.target,\n      false /* isSource */,\n      state.targetMarkerId,\n      line.value.stroke.color\n    )\n  })\n\n  states[id].stopWatchHandle = () => {\n    stopCalcHandle()\n    stopUpdateMarkerHandle()\n    clearMarker(state.sourceMarkerId)\n    clearMarker(state.targetMarkerId)\n  }\n}\n\nfunction calculateCurvePositionAndState(\n  originPosition: LinePosition,\n  shiftedPosition: LinePosition,\n  shift: number,\n  sourceMargin: number,\n  targetMargin: number\n): [LinePosition, Curve | undefined] {\n  // The curve is assumed to be part of a perfect circle and is drawn\n  // as a Bezier curve.\n\n  const origin = V.fromLinePosition(originPosition)\n  const shifted = V.fromLinePosition(shiftedPosition)\n  const shiftedCenter = V.getCenterOfLinePosition(shiftedPosition)\n\n  // Calculate the center and radius of the circle of the curve.\n  const [center, radius] = V.calculateCircleCenterAndRadiusBy3Points(\n    origin.source,\n    origin.target,\n    shiftedCenter\n  )\n\n  let position: LinePosition\n  let curve: Curve | undefined = undefined\n\n  if (shift === 0) {\n    // The line connecting the centers of the nodes is regarded as a straight line.\n    if (sourceMargin === 0 && targetMargin === 0) {\n      position = originPosition\n    } else {\n      position = v2d.applyMarginToLine(originPosition, sourceMargin, targetMargin)\n    }\n    return [position, curve]\n  }\n\n  // Apply margin to the line.\n  const centerToTop = V.fromVectors(center, shiftedCenter)\n\n  // Direction of rotation from source to center:\n  const theta0 = V.calculateRelativeAngleRadian(V.fromVectors(center, origin.source), centerToTop)\n\n  if (sourceMargin === 0 && targetMargin === 0) {\n    position = originPosition\n  } else {\n    // The endpoints of the display line are the point on the circumference\n    // moved by the margin from the origin end points.\n    let sourceMoveRad = sourceMargin / radius\n    let targetMoveRad = targetMargin / radius\n\n    // Determine which direction to move.\n    if (theta0 > 0) {\n      sourceMoveRad *= -1\n      targetMoveRad *= -1\n    }\n    position = v2d.positionsToLinePosition(\n      v2d.moveOnCircumference(origin.source, center, sourceMoveRad),\n      v2d.moveOnCircumference(origin.target, center, -targetMoveRad)\n    )\n\n    // If the endpoints are swapped by applying the margin,\n    // a short line is shown at the center.\n    let theta1 = V.calculateRelativeAngleRadian(\n      V.fromVectors(center, origin.source),\n      V.fromVectors(center, origin.target)\n    )\n    let theta2 = V.calculateRelativeAngleRadian(\n      V.fromPositions(center, { x: position.x1, y: position.y1 }),\n      V.fromPositions(center, { x: position.x2, y: position.y2 })\n    )\n    if (theta0 * theta1 < 0) {\n      theta1 = v2d.reverseAngleRadian(theta1)\n      if (theta0 * theta2 < 0) {\n        theta2 = v2d.reverseAngleRadian(theta2)\n      }\n    }\n    if (theta1 * theta2 < 0) {\n      // reversed\n      const c = shiftedCenter.clone().add(shifted.v.normalize().multiplyScalar(0.5))\n      position = v2d.positionsToLinePosition(shiftedCenter, c)\n      return [position, curve]\n    }\n  }\n\n  // Calculate the control/via points of a Bezier curve.\n  const [p1, p2] = V.toVectorsFromLinePosition(position)\n  const control = v2d.calculateBezierCurveControlPoint(p1, center, p2, theta0).map(p => p.toObject())\n\n  curve = {\n    center: shiftedCenter,\n    theta: theta0,\n    circle: { center, radius },\n    control,\n  }\n  return [position, curve]\n}\n","// Module responsible for selection state and mouse/touch operations\n\nimport { inject, InjectionKey, onMounted, onUnmounted, provide, Ref, watch } from \"vue\"\nimport { Emitter } from \"mitt\"\nimport { nonNull, Reactive, ReadonlyRef } from \"../common/common\"\nimport { Events, NodePositions, Position } from \"../common/types\"\nimport { entriesOf, MapUtil } from \"../common/utility\"\nimport { EdgeStates, NodeStates } from \"./state\"\n\ntype NodeEventHandler = (node: string, event: PointerEvent) => void\ntype EdgeEventHandler = (edge: string, event: PointerEvent) => void\n\ninterface MouseEventHandlers {\n  selectedNodes: Reactive<Set<string>>\n  hoveredNodes: Reactive<Set<string>>\n  selectedEdges: Reactive<Set<string>>\n  hoveredEdges: Reactive<Set<string>>\n  handleNodePointerDownEvent: NodeEventHandler\n  handleNodePointerOverEvent: NodeEventHandler\n  handleNodePointerOutEvent: NodeEventHandler\n  handleEdgePointerDownEvent: EdgeEventHandler\n  handleEdgePointerOverEvent: EdgeEventHandler\n  handleEdgePointerOutEvent: EdgeEventHandler\n}\nconst mouseEventHandlersKey = Symbol(\"mouseEventHandlers\") as InjectionKey<MouseEventHandlers>\n\nconst MOVE_DETECTION_THRESHOLD = 3 // Sensitivity to start dragging\n\n// state for each pointer of multi touch\ninterface NodePointerState {\n  pointerId: number // pointer ID provided by the event\n  nodeId: string // pointer down node ID\n  moveCounter: number // count for pointermove event occurred\n  dragBasePosition: Position // drag started position\n  nodeBasePosition: Position // node position at drag started\n  latestPosition: Position // latest position\n}\n\ninterface EdgePointerState {\n  pointerId: number // pointer ID provided by the event\n  edgeId: string // pointer down edge ID\n}\n\ninterface State {\n  container: {\n    moveCounter: number\n    pointerCounter: number\n  }\n  nodePointers: Map<number, NodePointerState> // <PointerId, ...>\n  follow: {\n    followedPointerId: number\n    nodeBasePositions: { [name: string]: Position }\n  }\n  hoveredNodes: Reactive<Set<string>>\n  hoveredNodesPre: Set<string> // to keep the hover state while dragging\n  hoveredEdges: Reactive<Set<string>>\n  edgePointers: Map<number, EdgePointerState> // <PointerId, ...>\n  edgePointerPeekCount: number\n}\n\ntype PointerPosition = Pick<PointerEvent, \"pageX\" | \"pageY\" | \"pointerId\">\n\nfunction _unwrapNodePosition(nodes: Readonly<NodePositions>, node: string) {\n  const pos = nodes[node] ?? { x: 0, y: 0 }\n  return { ...pos } // unwrap reactivity\n}\n\nexport function provideMouseOperation(\n  container: Ref<SVGElement | undefined>,\n  nodePositions: Readonly<NodePositions>,\n  zoomLevel: ReadonlyRef<number>,\n  nodeStates: NodeStates,\n  edgeStates: EdgeStates,\n  selectedNodes: Reactive<Set<string>>,\n  selectedEdges: Reactive<Set<string>>,\n  hoveredNodes: Reactive<Set<string>>,\n  hoveredEdges: Reactive<Set<string>>,\n  emitter: Emitter<Events>\n): MouseEventHandlers {\n  onMounted(() => {\n    container.value?.addEventListener(\"pointerdown\", handleContainerPointerDownEvent, {\n      passive: true,\n    })\n  })\n\n  onUnmounted(() => {\n    container.value?.removeEventListener(\"pointerdown\", handleContainerPointerDownEvent)\n  })\n\n  const state: State = {\n    // measure the number of move events in the pointerdown state\n    // and use it to determine the click when pointerup.\n    container: {\n      moveCounter: 0,\n      pointerCounter: 0,\n    },\n    nodePointers: new Map(),\n    follow: {\n      followedPointerId: -1,\n      nodeBasePositions: {},\n    },\n    hoveredNodes,\n    hoveredNodesPre: new Set(),\n    hoveredEdges,\n    edgePointers: new Map(),\n    edgePointerPeekCount: 0,\n  }\n\n  const containerPointerHandlers = {\n    pointermove: handleContainerPointerMoveEvent,\n    pointerup: handleContainerPointerUpEvent,\n    pointercancel: handleContainerPointerUpEvent,\n  }\n  const nodePointerHandlers = {\n    pointermove: handleNodePointerMoveEvent,\n    pointerup: handleNodePointerUpEvent,\n    pointercancel: handleNodePointerCancelEvent,\n  }\n  const edgePointerHandlers = {\n    pointerup: handleEdgePointerUpEvent,\n    pointercancel: handleEdgePointerCancelEvent,\n  }\n\n  function handleContainerPointerDownEvent(_: PointerEvent) {\n    state.container.moveCounter = 0\n    if (state.container.pointerCounter === 0) {\n      // Add to event listener\n      entriesOf(containerPointerHandlers).forEach(([ev, handler]) => {\n        container.value?.addEventListener(ev, handler, { passive: true })\n      })\n    }\n    state.container.pointerCounter++\n  }\n\n  function handleContainerPointerMoveEvent(_: PointerEvent) {\n    state.container.moveCounter++\n  }\n\n  function handleContainerPointerUpEvent(event: PointerEvent) {\n    state.container.pointerCounter--\n    if (state.container.pointerCounter === 0) {\n      // Remove from event listener\n      entriesOf(containerPointerHandlers).forEach(([ev, handler]) => {\n        container.value?.removeEventListener(ev, handler)\n      })\n      if (state.container.moveCounter <= MOVE_DETECTION_THRESHOLD) {\n        // Click container (without mouse move)\n        if (event.shiftKey && (selectedNodes.size > 0 || selectedEdges.size > 0)) {\n          return\n        }\n        selectedNodes.clear()\n        selectedEdges.clear()\n      }\n    }\n  }\n\n  // -----------------------------------------------------------------------\n  // Event handler for nodes\n  // -----------------------------------------------------------------------\n\n  function _updateFollowNodes(pointerState: NodePointerState) {\n    const isFollowed = state.follow.followedPointerId === pointerState.pointerId\n    const isSelectedNode = selectedNodes.has(pointerState.nodeId)\n\n    const removed = !(pointerState.pointerId in state.nodePointers)\n    if ((isFollowed && removed) || (isFollowed && !isSelectedNode)) {\n      // selected => unselected\n      const candidate = MapUtil.valueOf(state.nodePointers).find(p => selectedNodes.has(p.nodeId))\n      if (!candidate) {\n        state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n        return\n      }\n      pointerState = candidate\n      state.follow.followedPointerId = pointerState.pointerId\n    } else {\n      const followed = state.nodePointers.get(state.follow.followedPointerId)\n      if (!followed) {\n        state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n        return\n      }\n      pointerState = followed\n    }\n\n    if (isFollowed || isSelectedNode) {\n      // reset state for following:\n      // followed by selected nodes without user grabs\n      const userGrabs = MapUtil.valueOf(state.nodePointers).map(n => n.nodeId)\n      state.follow.nodeBasePositions = Object.fromEntries(\n        Array.from(selectedNodes)\n          .filter(n => !userGrabs.includes(n))\n          .filter(n => nodeStates[n]?.draggable)\n          .map(n => [n, _unwrapNodePosition(nodePositions, n)])\n      )\n      pointerState.dragBasePosition = { ...pointerState.latestPosition }\n      pointerState.nodeBasePosition = _unwrapNodePosition(nodePositions, pointerState.nodeId)\n    }\n  }\n\n  watch(selectedNodes, () => {\n    const pointerState = state.nodePointers.get(state.follow.followedPointerId)\n    if (pointerState) {\n      _updateFollowNodes(pointerState)\n    }\n  })\n\n  function _calculateNodeNewPosition(pointerState: NodePointerState, event: PointerPosition) {\n    const dx = pointerState.dragBasePosition.x - event.pageX\n    const dy = pointerState.dragBasePosition.y - event.pageY\n    const positions =\n      state.follow.followedPointerId == pointerState.pointerId\n        ? {\n            [pointerState.nodeId]: pointerState.nodeBasePosition,\n            ...state.follow.nodeBasePositions,\n          }\n        : { [pointerState.nodeId]: pointerState.nodeBasePosition }\n    const z = zoomLevel.value\n\n    return Object.fromEntries(\n      Object.entries(positions).map(([node, pos]) => [\n        node,\n        {\n          x: pos.x - dx / z,\n          y: pos.y - dy / z,\n        },\n      ])\n    )\n  }\n\n  function handleNodeClickEvent(node: string, event: PointerEvent) {\n    if (event.shiftKey && selectedEdges.size > 0) {\n      return\n    }\n\n    selectedEdges.clear()\n\n    const selectable = nodeStates[node]?.selectable ?? false\n    if (selectable) {\n      const isTouchAnySelectedNode =\n        MapUtil.valueOf(state.nodePointers).filter(\n          p => p.pointerId != event.pointerId && selectedNodes.has(p.nodeId)\n        ).length > 0\n      if (event.shiftKey || isTouchAnySelectedNode) {\n        // select multiple nodes\n        if (selectedNodes.has(node)) {\n          selectedNodes.delete(node)\n        } else if (\n          !(\n            typeof selectable === \"number\" &&\n            selectedNodes.size >= selectable\n          )\n        ) {\n          selectedNodes.add(node)\n        }\n      } else if (!selectedNodes.has(node)) {\n        // make the selectedNodes the clicked one\n        selectedNodes.clear()\n        selectedNodes.add(node)\n      }\n    }\n    emitter.emit(\"node:click\", { node, event })\n  }\n\n  function handleNodePointerMoveEvent(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const pointerState = state.nodePointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n    pointerState.latestPosition = { x: event.pageX, y: event.pageY }\n    pointerState.moveCounter++\n\n    if (pointerState.moveCounter <= MOVE_DETECTION_THRESHOLD) {\n      return // pending for click and drag distinguish\n    }\n\n    if (!nodeStates[pointerState.nodeId]?.draggable) {\n      return\n    }\n\n    if (pointerState.moveCounter === MOVE_DETECTION_THRESHOLD + 1) {\n      const draggingNodes = _calculateNodeNewPosition(pointerState, {\n        pointerId: pointerState.pointerId,\n        pageX: pointerState.dragBasePosition.x,\n        pageY: pointerState.dragBasePosition.y,\n      })\n      emitter.emit(\"node:dragstart\", draggingNodes)\n    }\n    const draggingNodes = _calculateNodeNewPosition(pointerState, event)\n    emitter.emit(\"node:pointermove\", draggingNodes)\n  }\n\n  function handleNodePointerCancelEvent(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    let pointerState = state.nodePointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    for (pointerState of state.nodePointers.values()) {\n      const node = pointerState.nodeId\n\n      const isMoved = pointerState.moveCounter > MOVE_DETECTION_THRESHOLD\n      if (isMoved) {\n        // pageX/Y in cancel event are zero => use latest position\n        const draggingNodes = _calculateNodeNewPosition(pointerState, {\n          pointerId: pointerState.pointerId,\n          pageX: pointerState.latestPosition.x,\n          pageY: pointerState.latestPosition.y,\n        })\n        emitter.emit(\"node:dragend\", draggingNodes)\n      }\n      emitter.emit(\"node:pointerup\", { node, event })\n      // no click event\n    }\n\n    // reset state\n    state.nodePointers.clear()\n    state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n    entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n      document.removeEventListener(ev, handler)\n    })\n    emitter.emit(\"view:mode\", \"default\")\n  }\n\n  function handleNodePointerUpEvent(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const pointerState = state.nodePointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    state.nodePointers.delete(event.pointerId)\n\n    const node = pointerState.nodeId\n\n    const isMoved = pointerState.moveCounter > MOVE_DETECTION_THRESHOLD\n    if (isMoved) {\n      if (nodeStates[pointerState.nodeId]?.draggable) {\n        const draggingNodes = _calculateNodeNewPosition(pointerState, event)\n        emitter.emit(\"node:dragend\", draggingNodes)\n        emitter.emit(\"node:pointerup\", { node, event })\n      }\n    } else {\n      emitter.emit(\"node:pointerup\", { node, event })\n      handleNodeClickEvent(node, event)\n    }\n\n    if (state.nodePointers.size == 0) {\n      // re-initialize state\n      state.follow = { followedPointerId: -1, nodeBasePositions: {} }\n      entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      emitter.emit(\"view:mode\", \"default\")\n    } else {\n      _updateFollowNodes(pointerState)\n    }\n\n    // reflect changes while dragging.\n    state.hoveredNodes.clear()\n    state.hoveredNodesPre.forEach(state.hoveredNodes.add, state.hoveredNodes)\n  }\n\n  function handleNodePointerDownEvent(node: string, event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (state.edgePointers.size !== 0) {\n      return\n    }\n\n    if (state.nodePointers.size == 0) {\n      // Add event listeners\n      emitter.emit(\"view:mode\", \"node\")\n      entriesOf(nodePointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n    }\n\n    // Create new pointer state\n    const pointerState: NodePointerState = {\n      pointerId: event.pointerId,\n      nodeId: node,\n      moveCounter: 0,\n      nodeBasePosition: _unwrapNodePosition(nodePositions, node),\n      dragBasePosition: { x: event.pageX, y: event.pageY },\n      latestPosition: { x: event.pageX, y: event.pageY },\n    }\n    state.nodePointers.set(event.pointerId, pointerState)\n\n    if (selectedNodes.has(node)) {\n      if (state.follow.followedPointerId < 0) {\n        // pointer followed by selected nodes\n        state.follow.followedPointerId = event.pointerId\n        _updateFollowNodes(pointerState)\n      } else {\n        // current pointer is in charge of this node.\n        // do not follow another node anymore.\n        delete state.follow.nodeBasePositions[pointerState.nodeId]\n      }\n    }\n\n    emitter.emit(\"node:pointerdown\", { node, event })\n  }\n\n  function handleNodePointerOverEvent(node: string, event: PointerEvent) {\n    state.hoveredNodesPre.add(node)\n    if (state.nodePointers.size > 0) {\n      return // dragging\n    }\n    state.hoveredNodes.add(node)\n    emitter.emit(\"node:pointerover\", { node, event })\n  }\n\n  function handleNodePointerOutEvent(node: string, event: PointerEvent) {\n    state.hoveredNodesPre.delete(node)\n    if (state.nodePointers.size > 0) {\n      return // dragging\n    }\n    state.hoveredNodes.delete(node)\n    emitter.emit(\"node:pointerout\", { node, event })\n  }\n\n  // -----------------------------------------------------------------------\n  // Event handler for edges\n  // -----------------------------------------------------------------------\n\n  function handleEdgePointerDownEvent(edge: string, event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    if (state.nodePointers.size !== 0) {\n      return\n    }\n\n    if (state.edgePointers.size == 0) {\n      // Add event listeners\n      emitter.emit(\"view:mode\", \"edge\")\n      entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n        document.addEventListener(ev, handler)\n      })\n      state.edgePointerPeekCount = 0\n    }\n\n    state.edgePointerPeekCount++\n\n    // Create new pointer state\n    const pointerState: EdgePointerState = {\n      pointerId: event.pointerId,\n      edgeId: edge,\n    }\n    state.edgePointers.set(event.pointerId, pointerState)\n\n    emitter.emit(\"edge:pointerdown\", { edge, event })\n  }\n\n  function handleEdgePointerUpEvent(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const pointerState = state.edgePointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    state.edgePointers.delete(event.pointerId)\n\n    const edge = pointerState.edgeId\n\n    emitter.emit(\"edge:pointerup\", { edge, event })\n\n    if (state.edgePointers.size > 0 || state.edgePointerPeekCount === 1) {\n      handleEdgeClickEvent(edge, event)\n    }\n\n    if (state.edgePointers.size === 0) {\n      // reset state\n      state.edgePointerPeekCount = 0\n      entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n        document.removeEventListener(ev, handler)\n      })\n      emitter.emit(\"view:mode\", \"default\")\n    }\n  }\n\n  function handleEdgePointerCancelEvent(event: PointerEvent) {\n    event.preventDefault()\n    event.stopPropagation()\n\n    const pointerState = state.edgePointers.get(event.pointerId)\n    if (!pointerState) {\n      return\n    }\n\n    for (const pointerState of state.edgePointers.values()) {\n      const edge = pointerState.edgeId\n      emitter.emit(\"edge:pointerup\", { edge, event })\n    }\n\n    // reset state\n    state.edgePointers.clear()\n    state.edgePointerPeekCount = 0\n    entriesOf(edgePointerHandlers).forEach(([ev, handler]) => {\n      document.removeEventListener(ev, handler)\n    })\n    emitter.emit(\"view:mode\", \"default\")\n  }\n\n  function handleEdgeClickEvent(edge: string, event: PointerEvent) {\n    if (event.shiftKey && selectedNodes.size > 0) {\n      return\n    }\n\n    selectedNodes.clear()\n\n    const selectable = edgeStates[edge]?.selectable\n    if (selectable) {\n      const isTouchAnySelectedEdge =\n        MapUtil.valueOf(state.edgePointers).filter(\n          p => p.pointerId != event.pointerId && selectedEdges.has(p.edgeId)\n        ).length > 0\n      if (event.shiftKey || isTouchAnySelectedEdge) {\n        if (selectedEdges.has(edge)) {\n          selectedEdges.delete(edge)\n        } else if (\n          !(\n            typeof selectable === \"number\" &&\n            selectedEdges.size >= selectable\n          )\n        ) {\n          selectedEdges.add(edge)\n        }\n      } else {\n        // make the selectedEdges the clicked one\n        selectedEdges.clear()\n        selectedEdges.add(edge)\n      }\n    }\n    emitter.emit(\"edge:click\", { edge, event })\n  }\n\n  function handleEdgePointerOverEvent(edge: string, event: PointerEvent) {\n    state.hoveredEdges.add(edge)\n    emitter.emit(\"edge:pointerover\", { edge, event })\n  }\n\n  function handleEdgePointerOutEvent(edge: string, event: PointerEvent) {\n    state.hoveredEdges.delete(edge)\n    emitter.emit(\"edge:pointerout\", { edge, event })\n  }\n\n  const provides = {\n    selectedNodes,\n    hoveredNodes,\n    selectedEdges,\n    hoveredEdges,\n    handleNodePointerDownEvent,\n    handleNodePointerOverEvent,\n    handleNodePointerOutEvent,\n    handleEdgePointerDownEvent,\n    handleEdgePointerOverEvent,\n    handleEdgePointerOutEvent,\n  }\n  provide(mouseEventHandlersKey, provides)\n  return provides\n}\n\nexport function useMouseOperation(): MouseEventHandlers {\n  return nonNull(inject(mouseEventHandlersKey), \"mouseEventHandlers\")\n}\n","import { provide, inject, InjectionKey } from \"vue\"\nimport mitt, { Emitter } from \"mitt\"\nimport { nonNull } from \"../common/common\"\nimport { Events } from \"../common/types\"\n\nconst eventEmitterKey = Symbol(\"emitter\") as InjectionKey<Emitter<Events>>\n\nexport function provideEventEmitter(): Emitter<Events> {\n  // event bus\n  const emitter = mitt<Events>()\n  provide(eventEmitterKey, emitter)\n  return emitter\n}\n\nexport function useEventEmitter() {\n  return {\n    emitter: nonNull(inject(eventEmitterKey), \"event emitter\"),\n  }\n}\n","export default function(n){return{all:n=n||new Map,on:function(t,e){var i=n.get(t);i?i.push(e):n.set(t,[e])},off:function(t,e){var i=n.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):n.set(t,[]))},emit:function(t,e){var i=n.get(t);i&&i.slice().map(function(n){n(e)}),(i=n.get(\"*\"))&&i.slice().map(function(n){n(t,e)})}}}\n//# sourceMappingURL=mitt.mjs.map\n","module.exports = {\n  /**\n   * Get global this object\n   *\n   * @return {Object}        global this object\n   */\n  getGlobalThis: function () {\n    if (typeof globalThis !== \"undefined\") return globalThis;\n    if (typeof self !== \"undefined\") return self;\n    if (typeof window !== \"undefined\") return window;\n    if (typeof global !== \"undefined\") return global;\n    // Note: this might still return the wrong result!\n    if (typeof this !== \"undefined\") return this;\n    throw new Error(\"Unable to locate global `this`\");\n  },\n\n  /**\n   * Extends an object\n   *\n   * @param  {Object} target object to extend\n   * @param  {Object} source object to take properties from\n   * @return {Object}        extended object\n   */\n  extend: function (target, source) {\n    target = target || {};\n    for (var prop in source) {\n      // Go recursively\n      if (this.isObject(source[prop])) {\n        target[prop] = this.extend(target[prop], source[prop]);\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n    return target;\n  },\n\n  /**\n   * Checks if an object is a DOM element\n   *\n   * @param  {Object}  o HTML element or String\n   * @return {Boolean}   returns true if object is a DOM element\n   */\n  isElement: function (o) {\n    return (\n      o instanceof HTMLElement ||\n      o instanceof SVGElement ||\n      o instanceof SVGSVGElement || //DOM2\n      (o &&\n        typeof o === \"object\" &&\n        o !== null &&\n        o.nodeType === 1 &&\n        typeof o.nodeName === \"string\")\n    );\n  },\n\n  /**\n   * Checks if an object is an Object\n   *\n   * @param  {Object}  o Object\n   * @return {Boolean}   returns true if object is an Object\n   */\n  isObject: function (o) {\n    return Object.prototype.toString.call(o) === \"[object Object]\";\n  },\n\n  /**\n   * Checks if variable is Number\n   *\n   * @param  {Integer|Float}  n\n   * @return {Boolean}   returns true if variable is Number\n   */\n  isNumber: function (n) {\n    return !isNaN(parseFloat(n)) && isFinite(n);\n  },\n\n  /**\n   * Search for an SVG element\n   *\n   * @param  {Object|String} elementOrSelector DOM Element or selector String\n   * @return {Object|Null}                   SVG or null\n   */\n  getSvg: function (elementOrSelector) {\n    var element, svg;\n\n    if (!this.isElement(elementOrSelector)) {\n      // If selector provided\n      if (\n        typeof elementOrSelector === \"string\" ||\n        elementOrSelector instanceof String\n      ) {\n        // Try to find the element\n        element = document.querySelector(elementOrSelector);\n\n        if (!element) {\n          throw new Error(\n            \"Provided selector did not find any elements. Selector: \" +\n              elementOrSelector\n          );\n          return null;\n        }\n      } else {\n        throw new Error(\"Provided selector is not an HTML object nor String\");\n        return null;\n      }\n    } else {\n      element = elementOrSelector;\n    }\n\n    if (element.tagName.toLowerCase() === \"svg\") {\n      svg = element;\n    } else {\n      if (element.tagName.toLowerCase() === \"object\") {\n        svg = element.contentDocument.documentElement;\n      } else {\n        if (element.tagName.toLowerCase() === \"embed\") {\n          svg = element.getSVGDocument().documentElement;\n        } else {\n          if (element.tagName.toLowerCase() === \"img\") {\n            throw new Error(\n              'Cannot script an SVG in an \"img\" element. Please use an \"object\" element or an in-line SVG.'\n            );\n          } else {\n            throw new Error(\"Cannot get SVG.\");\n          }\n          return null;\n        }\n      }\n    }\n\n    return svg;\n  },\n\n  /**\n   * Attach a given context to a function\n   * @param  {Function} fn      Function\n   * @param  {Object}   context Context\n   * @return {Function}           Function with certain context\n   */\n  proxy: function (fn, context) {\n    return function () {\n      return fn.apply(context, arguments);\n    };\n  },\n\n  /**\n   * Returns object type\n   * Uses toString that returns [object SVGPoint]\n   * And than parses object type from string\n   *\n   * @param  {Object} o Any object\n   * @return {String}   Object type\n   */\n  getType: function (o) {\n    return Object.prototype.toString\n      .apply(o)\n      .replace(/^\\[object\\s/, \"\")\n      .replace(/\\]$/, \"\");\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   */\n  mouseAndTouchNormalize: function (evt, svg) {\n    // If no clientX then fallback\n    if (evt.clientX === void 0 || evt.clientX === null) {\n      // Fallback\n      evt.clientX = 0;\n      evt.clientY = 0;\n\n      // If it is a touch event\n      if (evt.touches !== void 0 && evt.touches.length) {\n        if (evt.touches[0].clientX !== void 0) {\n          evt.clientX = evt.touches[0].clientX;\n          evt.clientY = evt.touches[0].clientY;\n        } else if (evt.touches[0].pageX !== void 0) {\n          var rect = svg.getBoundingClientRect();\n\n          evt.clientX = evt.touches[0].pageX - rect.left;\n          evt.clientY = evt.touches[0].pageY - rect.top;\n        }\n        // If it is a custom event\n      } else if (evt.originalEvent !== void 0) {\n        if (evt.originalEvent.clientX !== void 0) {\n          evt.clientX = evt.originalEvent.clientX;\n          evt.clientY = evt.originalEvent.clientY;\n        }\n      }\n    }\n  },\n\n  /**\n   * If it is a touch event than add clientX and clientY to event object\n   *\n   * @param  {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} touch\n   */\n  touchNormalize: function (evt, svg, touch) {\n    // If it is a touch event\n    if (evt.touches !== void 0 && evt.touches.length) {\n      if (evt.touches[touch].clientX !== void 0) {\n        evt.clientX = evt.touches[touch].clientX;\n        evt.clientY = evt.touches[touch].clientY;\n      } else if (evt.touches[touch].pageX !== void 0) {\n        var rect = svg.getBoundingClientRect();\n\n        evt.clientX = evt.touches[touch].pageX - rect.left;\n        evt.clientY = evt.touches[touch].pageY - rect.top;\n      }\n      // If it is a custom event\n    } else {\n      // If no clientX then fallback\n      if (evt.clientX === void 0 || evt.clientX === null) {\n        // Fallback\n        evt.clientX = 0;\n        evt.clientY = 0;\n        if (evt.originalEvent !== void 0) {\n          if (evt.originalEvent.clientX !== void 0) {\n            evt.clientX = evt.originalEvent.clientX;\n            evt.clientY = evt.originalEvent.clientY;\n          }\n        }\n      }\n    }\n  },\n\n  /**\n   * Check if an event is a double click/tap\n   * TODO: For touch gestures use a library (hammer.js) that takes in account other events\n   * (touchmove and touchend). It should take in account tap duration and traveled distance\n   *\n   * @param  {Event}  evt\n   * @param  {Event}  prevEvt Previous Event\n   * @return {Boolean}\n   */\n  isDblClick: function (evt, prevEvt) {\n    // Double click detected by browser\n    if (evt.detail === 2) {\n      return true;\n    }\n    // Try to compare events\n    else if (prevEvt !== void 0 && prevEvt !== null) {\n      var timeStampDiff = evt.timeStamp - prevEvt.timeStamp, // should be lower than 250 ms\n        touchesDistance = Math.sqrt(\n          Math.pow(evt.clientX - prevEvt.clientX, 2) +\n            Math.pow(evt.clientY - prevEvt.clientY, 2)\n        );\n\n      return timeStampDiff < 250 && touchesDistance < 10;\n    }\n\n    // Nothing found\n    return false;\n  },\n\n  /**\n   * Returns current timestamp as an integer\n   *\n   * @return {Number}\n   */\n  now:\n    Date.now ||\n    function () {\n      return new Date().getTime();\n    },\n\n  // From underscore.\n  // Returns a function, that, when invoked, will only be triggered at most once\n  // during a given window of time. Normally, the throttled function will run\n  // as much as it can, without ever going more than once per `wait` duration;\n  // but if you'd like to disable the execution on the leading edge, pass\n  // `{leading: false}`. To disable execution on the trailing edge, ditto.\n  throttle: function (func, wait, options) {\n    var that = this;\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) {\n      options = {};\n    }\n    var later = function () {\n      previous = options.leading === false ? 0 : that.now();\n      timeout = null;\n      result = func.apply(context, args);\n      if (!timeout) {\n        context = args = null;\n      }\n    };\n    return function () {\n      var now = that.now();\n      if (!previous && options.leading === false) {\n        previous = now;\n      }\n      var remaining = wait - (now - previous);\n      context = this; // eslint-disable-line consistent-this\n      args = arguments;\n      if (remaining <= 0 || remaining > wait) {\n        clearTimeout(timeout);\n        timeout = null;\n        previous = now;\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = args = null;\n        }\n      } else if (!timeout && options.trailing !== false) {\n        timeout = setTimeout(later, remaining);\n      }\n      return result;\n    };\n  },\n\n  /**\n   * Create a requestAnimationFrame simulation\n   *\n   * @param  {Number|String} refreshRate\n   * @return {Function}\n   */\n  createRequestAnimationFrame: function (refreshRate) {\n    var timeout = null;\n\n    // Convert refreshRate to timeout\n    if (refreshRate !== \"auto\" && refreshRate < 60 && refreshRate > 1) {\n      timeout = Math.floor(1000 / refreshRate);\n    }\n\n    if (timeout === null) {\n      return window.requestAnimationFrame || requestTimeout(33);\n    } else {\n      return requestTimeout(timeout);\n    }\n  },\n\n  /**\n   * Calculate distance of points\n   *\n   * @param  {SVGPoint} point1\n   * @param  {SVGPoint} point2\n   * @return {Number}\n   */\n  calculateDistance: function (point1, point2) {\n    var dx = point1.x - point2.x;\n    var dy = point1.y - point2.y;\n    return Math.sqrt(dx * dx + dy * dy);\n  },\n};\n\n/**\n * Create a callback that will execute after a given timeout\n *\n * @param  {Function} timeout\n * @return {Function}\n */\nfunction requestTimeout(timeout) {\n  return function (callback) {\n    window.setTimeout(callback, timeout);\n  };\n}\n","// uniwheel 0.1.2 (customized)\n// A unified cross browser mouse wheel event handler\n// https://github.com/teemualap/uniwheel\n\nvar Utils = require(\"./utilities\");\n\nmodule.exports = (function() {\n  //Full details: https://developer.mozilla.org/en-US/docs/Web/Reference/Events/wheel\n\n  var prefix = \"\",\n    _addEventListener,\n    _removeEventListener,\n    support,\n    fns = [];\n  var passiveTrueOption = { passive: true };\n  var passiveFalseOption = { passive: false };\n\n  // detect event model\n  if (Utils.getGlobalThis().addEventListener) {\n    _addEventListener = \"addEventListener\";\n    _removeEventListener = \"removeEventListener\";\n  } else {\n    _addEventListener = \"attachEvent\";\n    _removeEventListener = \"detachEvent\";\n    prefix = \"on\";\n  }\n\n  function getSupport() {\n    if (!support) {\n      support =\n        \"onwheel\" in document.createElement(\"div\")\n          ? \"wheel\" // Modern browsers support \"wheel\"\n          : document.onmousewheel !== undefined\n          ? \"mousewheel\" // Webkit and IE support at least \"mousewheel\"\n          : \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n    }\n    return support;\n  }\n\n  function createCallback(element, callback) {\n    // detect available wheel event\n\n    var fn = function(originalEvent) {\n      !originalEvent && (originalEvent = window.event);\n\n      // create a normalized event object\n      var event = {\n        // keep a ref to the original event object\n        originalEvent: originalEvent,\n        target: originalEvent.target || originalEvent.srcElement,\n        type: \"wheel\",\n        deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n        deltaX: 0,\n        delatZ: 0,\n        preventDefault: function() {\n          originalEvent.preventDefault\n            ? originalEvent.preventDefault()\n            : (originalEvent.returnValue = false);\n        }\n      };\n\n      // calculate deltaY (and deltaX) according to the event\n      if (getSupport() == \"mousewheel\") {\n        event.deltaY = (-1 / 40) * originalEvent.wheelDelta;\n        // Webkit also support wheelDeltaX\n        originalEvent.wheelDeltaX &&\n          (event.deltaX = (-1 / 40) * originalEvent.wheelDeltaX);\n      } else {\n        event.deltaY = originalEvent.detail;\n      }\n\n      // it's time to fire the callback\n      return callback(event);\n    };\n\n    fns.push({\n      element: element,\n      fn: fn\n    });\n\n    return fn;\n  }\n\n  function getCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns[i].fn;\n      }\n    }\n    return function() {};\n  }\n\n  function removeCallback(element) {\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i].element === element) {\n        return fns.splice(i, 1);\n      }\n    }\n  }\n\n  function _addWheelListener(elem, eventName, callback, isPassiveListener) {\n    var cb;\n\n    if (getSupport() === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = createCallback(elem, callback);\n    }\n\n    elem[_addEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveTrueOption : passiveFalseOption\n    );\n  }\n\n  function _removeWheelListener(elem, eventName, callback, isPassiveListener) {\n    var cb;\n\n    if (getSupport() === \"wheel\") {\n      cb = callback;\n    } else {\n      cb = getCallback(elem);\n    }\n\n    elem[_removeEventListener](\n      prefix + eventName,\n      cb,\n      isPassiveListener ? passiveTrueOption : passiveFalseOption\n    );\n\n    removeCallback(elem);\n  }\n\n  function addWheelListener(elem, callback, isPassiveListener) {\n    _addWheelListener(elem, getSupport(), callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (getSupport() == \"DOMMouseScroll\") {\n      _addWheelListener(\n        elem,\n        \"MozMousePixelScroll\",\n        callback,\n        isPassiveListener\n      );\n    }\n  }\n\n  function removeWheelListener(elem, callback, isPassiveListener) {\n    _removeWheelListener(elem, getSupport(), callback, isPassiveListener);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (getSupport() == \"DOMMouseScroll\") {\n      _removeWheelListener(\n        elem,\n        \"MozMousePixelScroll\",\n        callback,\n        isPassiveListener\n      );\n    }\n  }\n\n  return {\n    on: addWheelListener,\n    off: removeWheelListener\n  };\n})();\n","var Utils = require(\"./utilities\"),\n  _browser = \"unknown\";\n\n// http://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser\nif (\n  /*@cc_on!@*/ false ||\n  (typeof document != \"undefined\" && !!document.documentMode)\n) {\n  // internet explorer\n  _browser = \"ie\";\n}\n\nmodule.exports = {\n  svgNS: \"http://www.w3.org/2000/svg\",\n  xmlNS: \"http://www.w3.org/XML/1998/namespace\",\n  xmlnsNS: \"http://www.w3.org/2000/xmlns/\",\n  xlinkNS: \"http://www.w3.org/1999/xlink\",\n  evNS: \"http://www.w3.org/2001/xml-events\",\n\n  /**\n   * Get svg dimensions: width and height\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {Object}     {width: 0, height: 0}\n   */\n  getBoundingClientRectNormalized: function (svg) {\n    if (svg.clientWidth && svg.clientHeight) {\n      return { width: svg.clientWidth, height: svg.clientHeight };\n    } else if (!!svg.getBoundingClientRect()) {\n      return svg.getBoundingClientRect();\n    } else {\n      throw new Error(\"Cannot get BoundingClientRect for SVG.\");\n    }\n  },\n\n  /**\n   * Gets g element with class of \"viewport\" or creates it if it doesn't exist\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGElement}     g (group) element\n   */\n  getOrCreateViewport: function (svg, selector) {\n    var viewport = null;\n\n    if (Utils.isElement(selector)) {\n      viewport = selector;\n    } else {\n      viewport = svg.querySelector(selector);\n    }\n\n    // Check if there is just one main group in SVG\n    if (!viewport) {\n      var childNodes = Array.prototype.slice\n        .call(svg.childNodes || svg.children)\n        .filter(function (el) {\n          return el.nodeName !== \"defs\" && el.nodeName !== \"#text\";\n        });\n\n      // Node name should be SVGGElement and should have no transform attribute\n      // Groups with transform are not used as viewport because it involves parsing of all transform possibilities\n      if (\n        childNodes.length === 1 &&\n        childNodes[0].nodeName === \"g\" &&\n        childNodes[0].getAttribute(\"transform\") === null\n      ) {\n        viewport = childNodes[0];\n      }\n    }\n\n    // If no favorable group element exists then create one\n    if (!viewport) {\n      var viewportId =\n        \"viewport-\" + new Date().toISOString().replace(/\\D/g, \"\");\n      viewport = document.createElementNS(this.svgNS, \"g\");\n      viewport.setAttribute(\"id\", viewportId);\n\n      // Internet Explorer (all versions?) can't use childNodes, but other browsers prefer (require?) using childNodes\n      var svgChildren = svg.childNodes || svg.children;\n      if (!!svgChildren && svgChildren.length > 0) {\n        for (var i = svgChildren.length; i > 0; i--) {\n          // Move everything into viewport except defs\n          if (svgChildren[svgChildren.length - i].nodeName !== \"defs\") {\n            viewport.appendChild(svgChildren[svgChildren.length - i]);\n          }\n        }\n      }\n      svg.appendChild(viewport);\n    }\n\n    // Parse class names\n    var classNames = [];\n    if (viewport.getAttribute(\"class\")) {\n      classNames = viewport.getAttribute(\"class\").split(\" \");\n    }\n\n    // Set class (if not set already)\n    if (!~classNames.indexOf(\"svg-pan-zoom_viewport\")) {\n      classNames.push(\"svg-pan-zoom_viewport\");\n      viewport.setAttribute(\"class\", classNames.join(\" \"));\n    }\n\n    return viewport;\n  },\n\n  /**\n   * Set SVG attributes\n   *\n   * @param  {SVGSVGElement} svg\n   */\n  setupSvgAttributes: function (svg) {\n    // Setting default attributes\n    svg.setAttribute(\"xmlns\", this.svgNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:xlink\", this.xlinkNS);\n    svg.setAttributeNS(this.xmlnsNS, \"xmlns:ev\", this.evNS);\n\n    // Needed for Internet Explorer, otherwise the viewport overflows\n    if (svg.parentNode !== null) {\n      var style = svg.getAttribute(\"style\") || \"\";\n      if (style.toLowerCase().indexOf(\"overflow\") === -1) {\n        svg.setAttribute(\"style\", \"overflow: hidden; \" + style);\n      }\n    }\n  },\n\n  /**\n   * How long Internet Explorer takes to finish updating its display (ms).\n   */\n  internetExplorerRedisplayInterval: 300,\n\n  /**\n   * Forces the browser to redisplay all SVG elements that rely on an\n   * element defined in a 'defs' section. It works globally, for every\n   * available defs element on the page.\n   * The throttling is intentionally global.\n   *\n   * This is only needed for IE. It is as a hack to make markers (and 'use' elements?)\n   * visible after pan/zoom when there are multiple SVGs on the page.\n   * See bug report: https://connect.microsoft.com/IE/feedback/details/781964/\n   * also see svg-pan-zoom issue: https://github.com/ariutta/svg-pan-zoom/issues/62\n   */\n  refreshDefsGlobal: Utils.throttle(\n    function () {\n      var allDefs = document.querySelectorAll(\"defs\");\n      var allDefsCount = allDefs.length;\n      for (var i = 0; i < allDefsCount; i++) {\n        var thisDefs = allDefs[i];\n        thisDefs.parentNode.insertBefore(thisDefs, thisDefs);\n      }\n    },\n    this ? this.internetExplorerRedisplayInterval : null\n  ),\n\n  /**\n   * Sets the current transform matrix of an element\n   *\n   * @param {SVGElement} element\n   * @param {SVGMatrix} matrix  CTM\n   * @param {SVGElement} defs\n   */\n  setCTM: function (element, matrix, defs) {\n    var that = this,\n      s =\n        \"matrix(\" +\n        matrix.a +\n        \",\" +\n        matrix.b +\n        \",\" +\n        matrix.c +\n        \",\" +\n        matrix.d +\n        \",\" +\n        matrix.e +\n        \",\" +\n        matrix.f +\n        \")\";\n\n    element.setAttributeNS(null, \"transform\", s);\n    if (\"transform\" in element.style) {\n      element.style.transform = s;\n    } else if (\"-ms-transform\" in element.style) {\n      element.style[\"-ms-transform\"] = s;\n    } else if (\"-webkit-transform\" in element.style) {\n      element.style[\"-webkit-transform\"] = s;\n    }\n\n    // IE has a bug that makes markers disappear on zoom (when the matrix \"a\" and/or \"d\" elements change)\n    // see http://stackoverflow.com/questions/17654578/svg-marker-does-not-work-in-ie9-10\n    // and http://srndolha.wordpress.com/2013/11/25/svg-line-markers-may-disappear-in-internet-explorer-11/\n    if (_browser === \"ie\" && !!defs) {\n      // this refresh is intended for redisplaying the SVG during zooming\n      defs.parentNode.insertBefore(defs, defs);\n      // this refresh is intended for redisplaying the other SVGs on a page when panning a given SVG\n      // it is also needed for the given SVG itself, on zoomEnd, if the SVG contains any markers that\n      // are located under any other element(s).\n      window.setTimeout(function () {\n        that.refreshDefsGlobal();\n      }, that.internetExplorerRedisplayInterval);\n    }\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}     point\n   */\n  getEventPoint: function (evt, svg) {\n    var point = svg.createSVGPoint();\n\n    Utils.mouseAndTouchNormalize(evt, svg);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Instantiate an SVGPoint object with given touch event coordinates\n   *\n   * @param {Event} evt\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} touch\n   * @return {SVGPoint}     point\n   */\n  getTouchPoint: function (evt, svg, touch) {\n    var point = svg.createSVGPoint();\n\n    Utils.touchNormalize(evt, svg, touch);\n\n    point.x = evt.clientX;\n    point.y = evt.clientY;\n\n    return point;\n  },\n\n  /**\n   * Get SVG center point\n   *\n   * @param  {SVGSVGElement} svg\n   * @return {SVGPoint}\n   */\n  getSvgCenterPoint: function (svg, width, height) {\n    return this.createSVGPoint(svg, width / 2, height / 2);\n  },\n\n  /**\n   * Create a SVGPoint with given x and y\n   *\n   * @param  {SVGSVGElement} svg\n   * @param  {Number} x\n   * @param  {Number} y\n   * @return {SVGPoint}\n   */\n  createSVGPoint: function (svg, x, y) {\n    var point = svg.createSVGPoint();\n    point.x = x;\n    point.y = y;\n\n    return point;\n  },\n};\n","var SvgUtils = require(\"./svg-utilities\");\n\nmodule.exports = {\n  enable: function (instance) {\n    // Select (and create if necessary) defs\n    var defs = instance.svg.querySelector(\"defs\");\n    if (!defs) {\n      defs = document.createElementNS(SvgUtils.svgNS, \"defs\");\n      instance.svg.appendChild(defs);\n    }\n\n    // Check for style element, and create it if it doesn't exist\n    var styleEl = defs.querySelector(\"style#svg-pan-zoom-controls-styles\");\n    if (!styleEl) {\n      var style = document.createElementNS(SvgUtils.svgNS, \"style\");\n      style.setAttribute(\"id\", \"svg-pan-zoom-controls-styles\");\n      style.setAttribute(\"type\", \"text/css\");\n      style.textContent =\n        \".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }\";\n      defs.appendChild(style);\n    }\n\n    // Zoom Group\n    var zoomGroup = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomGroup.setAttribute(\"id\", \"svg-pan-zoom-controls\");\n    zoomGroup.setAttribute(\n      \"transform\",\n      \"translate(\" +\n        (instance.width - 70) +\n        \" \" +\n        (instance.height - 76) +\n        \") scale(0.75)\"\n    );\n    zoomGroup.setAttribute(\"class\", \"svg-pan-zoom-control\");\n\n    // Control elements\n    zoomGroup.appendChild(this._createZoomIn(instance));\n    zoomGroup.appendChild(this._createZoomReset(instance));\n    zoomGroup.appendChild(this._createZoomOut(instance));\n\n    // Finally append created element\n    instance.svg.appendChild(zoomGroup);\n\n    // Cache control instance\n    instance.controlIcons = zoomGroup;\n  },\n\n  _createZoomIn: function (instance) {\n    var zoomIn = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomIn.setAttribute(\"id\", \"svg-pan-zoom-zoom-in\");\n    zoomIn.setAttribute(\"transform\", \"translate(30.5 5) scale(0.015)\");\n    zoomIn.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomIn.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n    zoomIn.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().zoomIn();\n      },\n      false\n    );\n\n    var zoomInBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomInBackground.setAttribute(\"x\", \"0\");\n    zoomInBackground.setAttribute(\"y\", \"0\");\n    zoomInBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomInBackground.setAttribute(\"height\", \"1400\");\n    zoomInBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomIn.appendChild(zoomInBackground);\n\n    var zoomInShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomInShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z\"\n    );\n    zoomInShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomIn.appendChild(zoomInShape);\n\n    return zoomIn;\n  },\n\n  _createZoomReset: function (instance) {\n    // reset\n    var resetPanZoomControl = document.createElementNS(SvgUtils.svgNS, \"g\");\n    resetPanZoomControl.setAttribute(\"id\", \"svg-pan-zoom-reset-pan-zoom\");\n    resetPanZoomControl.setAttribute(\"transform\", \"translate(5 35) scale(0.4)\");\n    resetPanZoomControl.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    resetPanZoomControl.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n    resetPanZoomControl.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().reset();\n      },\n      false\n    );\n\n    var resetPanZoomControlBackground = document.createElementNS(\n      SvgUtils.svgNS,\n      \"rect\"\n    ); // TODO change these background space fillers to rounded rectangles so they look prettier\n    resetPanZoomControlBackground.setAttribute(\"x\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"y\", \"2\");\n    resetPanZoomControlBackground.setAttribute(\"width\", \"182\"); // larger than expected because the whole group is transformed to scale down\n    resetPanZoomControlBackground.setAttribute(\"height\", \"58\");\n    resetPanZoomControlBackground.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-background\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlBackground);\n\n    var resetPanZoomControlShape1 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"d\",\n      \"M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z\"\n    );\n    resetPanZoomControlShape1.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape1);\n\n    var resetPanZoomControlShape2 = document.createElementNS(\n      SvgUtils.svgNS,\n      \"path\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"d\",\n      \"M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z\"\n    );\n    resetPanZoomControlShape2.setAttribute(\n      \"class\",\n      \"svg-pan-zoom-control-element\"\n    );\n    resetPanZoomControl.appendChild(resetPanZoomControlShape2);\n\n    return resetPanZoomControl;\n  },\n\n  _createZoomOut: function (instance) {\n    // zoom out\n    var zoomOut = document.createElementNS(SvgUtils.svgNS, \"g\");\n    zoomOut.setAttribute(\"id\", \"svg-pan-zoom-zoom-out\");\n    zoomOut.setAttribute(\"transform\", \"translate(30.5 70) scale(0.015)\");\n    zoomOut.setAttribute(\"class\", \"svg-pan-zoom-control\");\n    zoomOut.addEventListener(\n      \"click\",\n      function () {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n    zoomOut.addEventListener(\n      \"touchstart\",\n      function () {\n        instance.getPublicInstance().zoomOut();\n      },\n      false\n    );\n\n    var zoomOutBackground = document.createElementNS(SvgUtils.svgNS, \"rect\"); // TODO change these background space fillers to rounded rectangles so they look prettier\n    zoomOutBackground.setAttribute(\"x\", \"0\");\n    zoomOutBackground.setAttribute(\"y\", \"0\");\n    zoomOutBackground.setAttribute(\"width\", \"1500\"); // larger than expected because the whole group is transformed to scale down\n    zoomOutBackground.setAttribute(\"height\", \"1400\");\n    zoomOutBackground.setAttribute(\"class\", \"svg-pan-zoom-control-background\");\n    zoomOut.appendChild(zoomOutBackground);\n\n    var zoomOutShape = document.createElementNS(SvgUtils.svgNS, \"path\");\n    zoomOutShape.setAttribute(\n      \"d\",\n      \"M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z\"\n    );\n    zoomOutShape.setAttribute(\"class\", \"svg-pan-zoom-control-element\");\n    zoomOut.appendChild(zoomOutShape);\n\n    return zoomOut;\n  },\n\n  disable: function (instance) {\n    if (instance.controlIcons) {\n      instance.controlIcons.parentNode.removeChild(instance.controlIcons);\n      instance.controlIcons = null;\n    }\n  },\n};\n","var SvgUtils = require(\"./svg-utilities\"),\n  Utils = require(\"./utilities\");\n\nvar ShadowViewport = function (viewport, options) {\n  this.init(viewport, options);\n};\n\n/**\n * Initialization\n *\n * @param  {SVGElement} viewport\n * @param  {Object} options\n */\nShadowViewport.prototype.init = function (viewport, options) {\n  // DOM Elements\n  this.viewport = viewport;\n  this.options = options;\n\n  // State cache\n  this.originalState = { zoom: 1, x: 0, y: 0 };\n  this.activeState = { zoom: 1, x: 0, y: 0 };\n\n  this.updateCTMCached = Utils.proxy(this.updateCTM, this);\n\n  // Create a custom requestAnimationFrame taking in account refreshRate\n  this.requestAnimationFrame = Utils.createRequestAnimationFrame(\n    this.options.refreshRate\n  );\n\n  // ViewBox\n  this.viewBox = { x: 0, y: 0, width: 0, height: 0 };\n  this.cacheViewBox();\n\n  // Process CTM\n  var newCTM = this.processCTM();\n\n  // Update viewport CTM and cache zoom and pan\n  this.setCTM(newCTM);\n\n  // Update CTM in this frame\n  this.updateCTM();\n};\n\n/**\n * Cache initial viewBox value\n * If no viewBox is defined, then use viewport size/position instead for viewBox values\n */\nShadowViewport.prototype.cacheViewBox = function () {\n  var svgViewBox = this.options.svg.getAttribute(\"viewBox\");\n\n  if (svgViewBox) {\n    var viewBoxValues = svgViewBox\n      .split(/[\\s\\,]/)\n      .filter(function (v) {\n        return v;\n      })\n      .map(parseFloat);\n\n    // Cache viewbox x and y offset\n    this.viewBox.x = viewBoxValues[0];\n    this.viewBox.y = viewBoxValues[1];\n    this.viewBox.width = viewBoxValues[2];\n    this.viewBox.height = viewBoxValues[3];\n\n    var zoom = Math.min(\n      this.options.width / this.viewBox.width,\n      this.options.height / this.viewBox.height\n    );\n\n    // Update active state\n    this.activeState.zoom = zoom;\n    this.activeState.x = (this.options.width - this.viewBox.width * zoom) / 2;\n    this.activeState.y = (this.options.height - this.viewBox.height * zoom) / 2;\n\n    // Force updating CTM\n    this.updateCTMOnNextFrame();\n\n    this.options.svg.removeAttribute(\"viewBox\");\n  } else {\n    this.simpleViewBoxCache();\n  }\n};\n\n/**\n * Recalculate viewport sizes and update viewBox cache\n */\nShadowViewport.prototype.simpleViewBoxCache = function () {\n  var bBox = this.viewport.getBBox();\n\n  this.viewBox.x = bBox.x;\n  this.viewBox.y = bBox.y;\n  this.viewBox.width = bBox.width;\n  this.viewBox.height = bBox.height;\n};\n\n/**\n * Returns a viewbox object. Safe to alter\n *\n * @return {Object} viewbox object\n */\nShadowViewport.prototype.getViewBox = function () {\n  return Utils.extend({}, this.viewBox);\n};\n\n/**\n * Get initial zoom and pan values. Save them into originalState\n * Parses viewBox attribute to alter initial sizes\n *\n * @return {CTM} CTM object based on options\n */\nShadowViewport.prototype.processCTM = function () {\n  var newCTM = this.getCTM();\n\n  if (this.options.fit || this.options.contain) {\n    var newScale;\n    if (this.options.fit) {\n      newScale = Math.min(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    } else {\n      newScale = Math.max(\n        this.options.width / this.viewBox.width,\n        this.options.height / this.viewBox.height\n      );\n    }\n\n    newCTM.a = newScale; //x-scale\n    newCTM.d = newScale; //y-scale\n    newCTM.e = -this.viewBox.x * newScale; //x-transform\n    newCTM.f = -this.viewBox.y * newScale; //y-transform\n  }\n\n  if (this.options.center) {\n    var offsetX =\n        (this.options.width -\n          (this.viewBox.width + this.viewBox.x * 2) * newCTM.a) *\n        0.5,\n      offsetY =\n        (this.options.height -\n          (this.viewBox.height + this.viewBox.y * 2) * newCTM.a) *\n        0.5;\n\n    newCTM.e = offsetX;\n    newCTM.f = offsetY;\n  }\n\n  // Cache initial values. Based on activeState and fix+center opitons\n  this.originalState.zoom = newCTM.a;\n  this.originalState.x = newCTM.e;\n  this.originalState.y = newCTM.f;\n\n  return newCTM;\n};\n\n/**\n * Return originalState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getOriginalState = function () {\n  return Utils.extend({}, this.originalState);\n};\n\n/**\n * Return actualState object. Safe to alter\n *\n * @return {Object}\n */\nShadowViewport.prototype.getState = function () {\n  return Utils.extend({}, this.activeState);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getZoom = function () {\n  return this.activeState.zoom;\n};\n\n/**\n * Get zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.getRelativeZoom = function () {\n  return this.activeState.zoom / this.originalState.zoom;\n};\n\n/**\n * Compute zoom scale for pubilc usage\n *\n * @return {Float} zoom scale\n */\nShadowViewport.prototype.computeRelativeZoom = function (scale) {\n  return scale / this.originalState.zoom;\n};\n\n/**\n * Get pan\n *\n * @return {Object}\n */\nShadowViewport.prototype.getPan = function () {\n  return { x: this.activeState.x, y: this.activeState.y };\n};\n\n/**\n * Return cached viewport CTM value that can be safely modified\n *\n * @return {SVGMatrix}\n */\nShadowViewport.prototype.getCTM = function () {\n  var safeCTM = this.options.svg.createSVGMatrix();\n\n  // Copy values manually as in FF they are not itterable\n  safeCTM.a = this.activeState.zoom;\n  safeCTM.b = 0;\n  safeCTM.c = 0;\n  safeCTM.d = this.activeState.zoom;\n  safeCTM.e = this.activeState.x;\n  safeCTM.f = this.activeState.y;\n\n  return safeCTM;\n};\n\n/**\n * Set a new CTM\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.setCTM = function (newCTM) {\n  var willZoom = this.isZoomDifferent(newCTM),\n    willPan = this.isPanDifferent(newCTM);\n\n  if (willZoom || willPan) {\n    // Before zoom\n    if (willZoom) {\n      // If returns false then cancel zooming\n      if (\n        this.options.beforeZoom(\n          this.getRelativeZoom(),\n          this.computeRelativeZoom(newCTM.a)\n        ) === false\n      ) {\n        newCTM.a = newCTM.d = this.activeState.zoom;\n        willZoom = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onZoom(this.getRelativeZoom());\n      }\n    }\n\n    // Before pan\n    if (willPan) {\n      var preventPan = this.options.beforePan(this.getPan(), {\n          x: newCTM.e,\n          y: newCTM.f,\n        }),\n        // If prevent pan is an object\n        preventPanX = false,\n        preventPanY = false;\n\n      // If prevent pan is Boolean false\n      if (preventPan === false) {\n        // Set x and y same as before\n        newCTM.e = this.getPan().x;\n        newCTM.f = this.getPan().y;\n\n        preventPanX = preventPanY = true;\n      } else if (Utils.isObject(preventPan)) {\n        // Check for X axes attribute\n        if (preventPan.x === false) {\n          // Prevent panning on x axes\n          newCTM.e = this.getPan().x;\n          preventPanX = true;\n        } else if (Utils.isNumber(preventPan.x)) {\n          // Set a custom pan value\n          newCTM.e = preventPan.x;\n        }\n\n        // Check for Y axes attribute\n        if (preventPan.y === false) {\n          // Prevent panning on x axes\n          newCTM.f = this.getPan().y;\n          preventPanY = true;\n        } else if (Utils.isNumber(preventPan.y)) {\n          // Set a custom pan value\n          newCTM.f = preventPan.y;\n        }\n      }\n\n      // Update willPan flag\n      // Check if newCTM is still different\n      if ((preventPanX && preventPanY) || !this.isPanDifferent(newCTM)) {\n        willPan = false;\n      } else {\n        this.updateCache(newCTM);\n        this.options.onPan(this.getPan());\n      }\n    }\n\n    // Check again if should zoom or pan\n    if (willZoom || willPan) {\n      this.updateCTMOnNextFrame();\n    }\n  }\n};\n\nShadowViewport.prototype.isZoomDifferent = function (newCTM) {\n  return this.activeState.zoom !== newCTM.a;\n};\n\nShadowViewport.prototype.isPanDifferent = function (newCTM) {\n  return this.activeState.x !== newCTM.e || this.activeState.y !== newCTM.f;\n};\n\n/**\n * Update cached CTM and active state\n *\n * @param {SVGMatrix} newCTM\n */\nShadowViewport.prototype.updateCache = function (newCTM) {\n  this.activeState.zoom = newCTM.a;\n  this.activeState.x = newCTM.e;\n  this.activeState.y = newCTM.f;\n};\n\nShadowViewport.prototype.pendingUpdate = false;\n\n/**\n * Place a request to update CTM on next Frame\n */\nShadowViewport.prototype.updateCTMOnNextFrame = function () {\n  if (!this.pendingUpdate) {\n    // Lock\n    this.pendingUpdate = true;\n\n    // Throttle next update\n    this.requestAnimationFrame.call(window, this.updateCTMCached);\n  }\n};\n\n/**\n * Update viewport CTM with cached CTM\n */\nShadowViewport.prototype.updateCTM = function () {\n  var ctm = this.getCTM();\n\n  // Updates SVG element\n  SvgUtils.setCTM(this.viewport, ctm, this.defs);\n\n  // Free the lock\n  this.pendingUpdate = false;\n\n  // Notify about the update\n  if (this.options.onUpdatedCTM) {\n    this.options.onUpdatedCTM(ctm);\n  }\n};\n\nmodule.exports = function (viewport, options) {\n  return new ShadowViewport(viewport, options);\n};\n","var Wheel = require(\"./uniwheel\"),\n  ControlIcons = require(\"./control-icons\"),\n  Utils = require(\"./utilities\"),\n  SvgUtils = require(\"./svg-utilities\"),\n  ShadowViewport = require(\"./shadow-viewport\");\n\nvar SvgPanZoom = function (svg, options) {\n  this.init(svg, options);\n};\n\nvar optionsDefaults = {\n  viewportSelector: \".svg-pan-zoom_viewport\", // Viewport selector. Can be querySelector string or SVGElement\n  panEnabled: true, // enable or disable panning (default enabled)\n  controlIconsEnabled: false, // insert icons to give user an option in addition to mouse events to control pan/zoom (default disabled)\n  zoomEnabled: true, // enable or disable zooming (default enabled)\n  dblClickZoomEnabled: true, // enable or disable zooming by double clicking (default enabled)\n  mouseWheelZoomEnabled: true, // enable or disable zooming by mouse wheel (default enabled)\n  preventMouseEventsDefault: true, // enable or disable preventDefault for mouse events\n  zoomScaleSensitivity: 0.1, // Zoom sensitivity\n  minZoom: 0.5, // Minimum Zoom level\n  maxZoom: 10, // Maximum Zoom level\n  fit: true, // enable or disable viewport fit in SVG (default true)\n  contain: false, // enable or disable viewport contain the svg (default false)\n  center: true, // enable or disable viewport centering in SVG (default true)\n  refreshRate: \"auto\", // Maximum number of frames per second (altering SVG's viewport)\n  beforeZoom: null,\n  onZoom: null,\n  beforePan: null,\n  onPan: null,\n  customEventsHandler: null,\n  eventsListenerElement: null,\n  onUpdatedCTM: null,\n};\n\nvar passiveListenerTrueOption = { passive: true };\nvar passiveListenerFalseOption = { passive: false };\n\nSvgPanZoom.prototype.init = function (svg, options) {\n  var that = this;\n\n  this.svg = svg;\n  this.defs = svg.querySelector(\"defs\");\n\n  // Add default attributes to SVG\n  SvgUtils.setupSvgAttributes(this.svg);\n\n  // Set options\n  this.options = Utils.extend(Utils.extend({}, optionsDefaults), options);\n\n  // Set default state\n  this.state = \"none\";\n\n  // Get dimensions\n  var boundingClientRectNormalized =\n    SvgUtils.getBoundingClientRectNormalized(svg);\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Init shadow viewport\n  this.viewport = ShadowViewport(\n    SvgUtils.getOrCreateViewport(this.svg, this.options.viewportSelector),\n    {\n      svg: this.svg,\n      width: this.width,\n      height: this.height,\n      fit: this.options.fit,\n      contain: this.options.contain,\n      center: this.options.center,\n      refreshRate: this.options.refreshRate,\n      // Put callbacks into functions as they can change through time\n      beforeZoom: function (oldScale, newScale) {\n        if (that.viewport && that.options.beforeZoom) {\n          return that.options.beforeZoom(oldScale, newScale);\n        }\n      },\n      onZoom: function (scale) {\n        if (that.viewport && that.options.onZoom) {\n          return that.options.onZoom(scale);\n        }\n      },\n      beforePan: function (oldPoint, newPoint) {\n        if (that.viewport && that.options.beforePan) {\n          return that.options.beforePan(oldPoint, newPoint);\n        }\n      },\n      onPan: function (point) {\n        if (that.viewport && that.options.onPan) {\n          return that.options.onPan(point);\n        }\n      },\n      onUpdatedCTM: function (ctm) {\n        if (that.viewport && that.options.onUpdatedCTM) {\n          return that.options.onUpdatedCTM(ctm);\n        }\n      },\n    }\n  );\n\n  // Wrap callbacks into public API context\n  var publicInstance = this.getPublicInstance();\n  publicInstance.setBeforeZoom(this.options.beforeZoom);\n  publicInstance.setOnZoom(this.options.onZoom);\n  publicInstance.setBeforePan(this.options.beforePan);\n  publicInstance.setOnPan(this.options.onPan);\n  publicInstance.setOnUpdatedCTM(this.options.onUpdatedCTM);\n\n  if (this.options.controlIconsEnabled) {\n    ControlIcons.enable(this);\n  }\n\n  // Init events handlers\n  this.lastMouseWheelEventTime = Date.now();\n  this.setupHandlers();\n};\n\n/**\n * Register event handlers\n */\nSvgPanZoom.prototype.setupHandlers = function () {\n  var that = this,\n    prevEvt = null; // use for touchstart event to detect double tap\n\n  this.eventListeners = {\n    // Mouse down group\n    mousedown: function (evt) {\n      var result = that.handleMouseDown(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n    touchstart: function (evt) {\n      var result = that.handleTouchStart(evt, prevEvt);\n      prevEvt = evt;\n      return result;\n    },\n\n    // Mouse up group\n    mouseup: function (evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchend: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n\n    // Mouse move group\n    mousemove: function (evt) {\n      return that.handleMouseMove(evt);\n    },\n    touchmove: function (evt) {\n      return that.handleTouchMove(evt);\n    },\n\n    // Mouse leave group\n    mouseleave: function (evt) {\n      return that.handleMouseUp(evt);\n    },\n    touchleave: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n    touchcancel: function (evt) {\n      return that.handleTouchEnd(evt);\n    },\n  };\n\n  // Init custom events handler if available\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.init({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance(),\n    });\n\n    // Custom event handler may halt builtin listeners\n    var haltEventListeners =\n      this.options.customEventsHandler.haltEventListeners;\n    if (haltEventListeners && haltEventListeners.length) {\n      for (var i = haltEventListeners.length - 1; i >= 0; i--) {\n        if (this.eventListeners.hasOwnProperty(haltEventListeners[i])) {\n          delete this.eventListeners[haltEventListeners[i]];\n        }\n      }\n    }\n  }\n\n  // Bind eventListeners\n  for (var event in this.eventListeners) {\n    // Attach event to eventsListenerElement or SVG if not available\n    (this.options.eventsListenerElement || this.svg).addEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault\n        ? passiveListenerTrueOption\n        : passiveListenerFalseOption\n    );\n  }\n\n  // Zoom using mouse wheel\n  if (this.options.mouseWheelZoomEnabled) {\n    this.options.mouseWheelZoomEnabled = false; // set to false as enable will set it back to true\n    this.enableMouseWheelZoom();\n  }\n};\n\n/**\n * Enable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.enableMouseWheelZoom = function () {\n  if (!this.options.mouseWheelZoomEnabled) {\n    var that = this;\n\n    // Mouse wheel listener\n    this.wheelListener = function (evt) {\n      return that.handleMouseWheel(evt);\n    };\n\n    // Bind wheelListener\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.on(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n\n    this.options.mouseWheelZoomEnabled = true;\n  }\n};\n\n/**\n * Disable ability to zoom using mouse wheel\n */\nSvgPanZoom.prototype.disableMouseWheelZoom = function () {\n  if (this.options.mouseWheelZoomEnabled) {\n    var isPassiveListener = !this.options.preventMouseEventsDefault;\n    Wheel.off(\n      this.options.eventsListenerElement || this.svg,\n      this.wheelListener,\n      isPassiveListener\n    );\n    this.options.mouseWheelZoomEnabled = false;\n  }\n};\n\n/**\n * Handle mouse wheel event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseWheel = function (evt) {\n  if (!this.options.zoomEnabled || this.state !== \"none\") {\n    return;\n  }\n\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Default delta in case that deltaY is not available\n  var delta = evt.deltaY || 1,\n    timeDelta = Date.now() - this.lastMouseWheelEventTime,\n    divider = 3 + Math.max(0, 30 - timeDelta);\n\n  // Update cache\n  this.lastMouseWheelEventTime = Date.now();\n\n  // Make empirical adjustments for browsers that give deltaY in pixels (deltaMode=0)\n  if (\"deltaMode\" in evt && evt.deltaMode === 0 && evt.wheelDelta) {\n    delta = evt.deltaY === 0 ? 0 : Math.abs(evt.wheelDelta) / evt.deltaY;\n  }\n\n  delta =\n    -0.3 < delta && delta < 0.3\n      ? delta\n      : ((delta > 0 ? 1 : -1) * Math.log(Math.abs(delta) + 10)) / divider;\n\n  var inversedScreenCTM = this.svg.getScreenCTM().inverse(),\n    relativeMousePoint = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      inversedScreenCTM\n    ),\n    zoom = Math.pow(1 + this.options.zoomScaleSensitivity, -1 * delta); // multiplying by neg. 1 so as to make zoom in/out behavior match Google maps behavior\n\n  this.zoomAtPoint(zoom, relativeMousePoint);\n};\n\n/**\n * Zoom in at a SVG point\n *\n * @param  {SVGPoint} point\n * @param  {Float} zoomScale    Number representing how much to zoom\n * @param  {Boolean} zoomAbsolute Default false. If true, zoomScale is treated as an absolute value.\n *                                Otherwise, zoomScale is treated as a multiplied (e.g. 1.10 would zoom in 10%)\n */\nSvgPanZoom.prototype.zoomAtPoint = function (zoomScale, point, zoomAbsolute) {\n  var originalState = this.viewport.getOriginalState();\n\n  if (!zoomAbsolute) {\n    // Fit zoomScale in set bounds\n    if (\n      this.getZoom() * zoomScale <\n      this.options.minZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.minZoom * originalState.zoom) / this.getZoom();\n    } else if (\n      this.getZoom() * zoomScale >\n      this.options.maxZoom * originalState.zoom\n    ) {\n      zoomScale = (this.options.maxZoom * originalState.zoom) / this.getZoom();\n    }\n  } else {\n    // Fit zoomScale in set bounds\n    zoomScale = Math.max(\n      this.options.minZoom * originalState.zoom,\n      Math.min(this.options.maxZoom * originalState.zoom, zoomScale)\n    );\n    // Find relative scale to achieve desired scale\n    zoomScale = zoomScale / this.getZoom();\n  }\n\n  var oldCTM = this.viewport.getCTM(),\n    relativePoint = point.matrixTransform(oldCTM.inverse()),\n    modifier = this.svg\n      .createSVGMatrix()\n      .translate(relativePoint.x, relativePoint.y)\n      .scale(zoomScale)\n      .translate(-relativePoint.x, -relativePoint.y),\n    newCTM = oldCTM.multiply(modifier);\n\n  if (newCTM.a !== oldCTM.a) {\n    this.viewport.setCTM(newCTM);\n  }\n};\n\n/**\n * Zoom at center point\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.zoom = function (scale, absolute) {\n  this.zoomAtPoint(\n    scale,\n    SvgUtils.getSvgCenterPoint(this.svg, this.width, this.height),\n    absolute\n  );\n};\n\n/**\n * Zoom used by public instance\n *\n * @param  {Float} scale\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoom = function (scale, absolute) {\n  if (absolute) {\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  this.zoom(scale, absolute);\n};\n\n/**\n * Zoom at point used by public instance\n *\n * @param  {Float} scale\n * @param  {SVGPoint|Object} point    An object that has x and y attributes\n * @param  {Boolean} absolute Marks zoom scale as relative or absolute\n */\nSvgPanZoom.prototype.publicZoomAtPoint = function (scale, point, absolute) {\n  if (absolute) {\n    // Transform zoom into a relative value\n    scale = this.computeFromRelativeZoom(scale);\n  }\n\n  // If not a SVGPoint but has x and y then create a SVGPoint\n  if (Utils.getType(point) !== \"SVGPoint\") {\n    if (\"x\" in point && \"y\" in point) {\n      point = SvgUtils.createSVGPoint(this.svg, point.x, point.y);\n    } else {\n      throw new Error(\"Given point is invalid\");\n    }\n  }\n\n  this.zoomAtPoint(scale, point, absolute);\n};\n\n/**\n * Get zoom scale\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getZoom = function () {\n  return this.viewport.getZoom();\n};\n\n/**\n * Get zoom scale for public usage\n *\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.getRelativeZoom = function () {\n  return this.viewport.getRelativeZoom();\n};\n\n/**\n * Compute actual zoom from public zoom\n *\n * @param  {Float} zoom\n * @return {Float} zoom scale\n */\nSvgPanZoom.prototype.computeFromRelativeZoom = function (zoom) {\n  return zoom * this.viewport.getOriginalState().zoom;\n};\n\n/**\n * Set zoom to initial state\n */\nSvgPanZoom.prototype.resetZoom = function () {\n  var originalState = this.viewport.getOriginalState();\n\n  this.zoom(originalState.zoom, true);\n};\n\n/**\n * Set pan to initial state\n */\nSvgPanZoom.prototype.resetPan = function () {\n  this.pan(this.viewport.getOriginalState());\n};\n\n/**\n * Set pan and zoom to initial state\n */\nSvgPanZoom.prototype.reset = function () {\n  this.resetZoom();\n  this.resetPan();\n};\n\n/**\n * Handle double click event\n * See handleMouseDown() for alternate detection method\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleDblClick = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  // Check if target was a control button\n  if (this.options.controlIconsEnabled) {\n    var targetClass = evt.target.getAttribute(\"class\") || \"\";\n    if (targetClass.indexOf(\"svg-pan-zoom-control\") > -1) {\n      return false;\n    }\n  }\n\n  var zoomFactor;\n\n  if (evt.shiftKey) {\n    zoomFactor = 1 / ((1 + this.options.zoomScaleSensitivity) * 2); // zoom out when shift key pressed\n  } else {\n    zoomFactor = (1 + this.options.zoomScaleSensitivity) * 2;\n  }\n\n  var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n    this.svg.getScreenCTM().inverse()\n  );\n  this.zoomAtPoint(zoomFactor, point);\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseDown = function (evt, prevEvt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  Utils.mouseAndTouchNormalize(evt, this.svg);\n\n  // Double click detection; more consistent than ondblclick\n  if (this.options.dblClickZoomEnabled && Utils.isDblClick(evt, prevEvt)) {\n    this.handleDblClick(evt);\n  } else {\n    // Pan mode\n    this.state = \"pan\";\n    this.firstEventCTM = this.viewport.getCTM();\n    this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n      this.firstEventCTM.inverse()\n    );\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleMouseMove = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\" && this.options.panEnabled) {\n    // Pan mode\n    var point = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      ),\n      viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n\n    this.viewport.setCTM(viewportCTM);\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleMouseUp = function (evt) {\n  if (this.options.preventMouseEventsDefault) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    } else {\n      evt.returnValue = false;\n    }\n  }\n\n  if (this.state === \"pan\") {\n    // Quit pan mode\n    this.state = \"none\";\n  }\n};\n\n/**\n * Handle click event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleTouchStart = function (evt, prevEvt) {\n  if (evt.touches.length == 1) {\n    this.handleMouseDown(evt, prevEvt);\n  } else {\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n\n    this.firstEventCTM = this.viewport.getCTM();\n    var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n    var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n    this.firstDistance = Utils.calculateDistance(touch1, touch2);\n    touch1.x = (touch1.x + touch2.x) / 2;\n    touch1.y = (touch1.y + touch2.y) / 2;\n    this.stateOrigin = touch1.matrixTransform(this.firstEventCTM.inverse());\n    this.firstZoomLevel = this.getZoom();\n  }\n};\n\n/**\n * Handle mouse move event\n *\n * @param  {Event} evt\n */\nSvgPanZoom.prototype.handleTouchMove = function (evt) {\n  if (evt.touches.length == 1) {\n    this.handleMouseMove(evt);\n  } else {\n    // pan and zoom\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n    if (!this.options.panEnabled && !this.options.zoomEnabled) {\n      return;\n    }\n\n    var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n    var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n    var center = this.svg.createSVGPoint();\n    center.x = (touch1.x + touch2.x) / 2;\n    center.y = (touch1.y + touch2.y) / 2;\n\n    if (this.state === \"pan\" && this.options.panEnabled) {\n      // Pan mode\n      var point = center.matrixTransform(this.firstEventCTM.inverse());\n      var viewportCTM = this.firstEventCTM.translate(\n        point.x - this.stateOrigin.x,\n        point.y - this.stateOrigin.y\n      );\n      this.viewport.setCTM(viewportCTM);\n    }\n\n    if (this.options.zoomEnabled) {\n      // zoom\n      var distance = Utils.calculateDistance(touch1, touch2);\n      var scale = distance / this.firstDistance;\n      var inversedScreenCTM = this.svg.getScreenCTM().inverse();\n      var relativeTouchPoint = center.matrixTransform(inversedScreenCTM);\n      this.zoomAtPoint(this.firstZoomLevel * scale, relativeTouchPoint, true);\n    }\n  }\n};\n\n/**\n * Handle mouse button release event\n *\n * @param {Event} evt\n */\nSvgPanZoom.prototype.handleTouchEnd = function (evt) {\n  if (evt.touches.length == 0) {\n    this.handleMouseUp(evt);\n  } else {\n    if (this.options.preventMouseEventsDefault) {\n      if (evt.preventDefault) {\n        evt.preventDefault();\n      } else {\n        evt.returnValue = false;\n      }\n    }\n\n    this.firstEventCTM = this.viewport.getCTM();\n    if (evt.touches.length == 1) {\n      this.stateOrigin = SvgUtils.getEventPoint(evt, this.svg).matrixTransform(\n        this.firstEventCTM.inverse()\n      );\n    } else {\n      var touch1 = SvgUtils.getTouchPoint(evt, this.svg, 0);\n      var touch2 = SvgUtils.getTouchPoint(evt, this.svg, 1);\n      this.firstDistance = Utils.calculateDistance(touch1, touch2);\n      touch1.x = (touch1.x + touch2.x) / 2;\n      touch1.y = (touch1.y + touch2.y) / 2;\n      this.stateOrigin = touch1.matrixTransform(this.firstEventCTM.inverse());\n    }\n  }\n};\n\n/**\n * Adjust viewport size (only) so it will fit in SVG\n * Does not center image\n */\nSvgPanZoom.prototype.fit = function () {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.min(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport size (only) so it will contain the SVG\n * Does not center image\n */\nSvgPanZoom.prototype.contain = function () {\n  var viewBox = this.viewport.getViewBox(),\n    newScale = Math.max(\n      this.width / viewBox.width,\n      this.height / viewBox.height\n    );\n\n  this.zoom(newScale, true);\n};\n\n/**\n * Adjust viewport pan (only) so it will be centered in SVG\n * Does not zoom/fit/contain image\n */\nSvgPanZoom.prototype.center = function () {\n  var viewBox = this.viewport.getViewBox(),\n    offsetX =\n      (this.width - (viewBox.width + viewBox.x * 2) * this.getZoom()) * 0.5,\n    offsetY =\n      (this.height - (viewBox.height + viewBox.y * 2) * this.getZoom()) * 0.5;\n\n  this.getPublicInstance().pan({ x: offsetX, y: offsetY });\n};\n\n/**\n * Update content cached BorderBox\n * Use when viewport contents change\n */\nSvgPanZoom.prototype.updateBBox = function () {\n  this.viewport.simpleViewBoxCache();\n};\n\n/**\n * Pan to a rendered position\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.pan = function (point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e = point.x;\n  viewportCTM.f = point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Relatively pan the graph by a specified rendered position vector\n *\n * @param  {Object} point {x: 0, y: 0}\n */\nSvgPanZoom.prototype.panBy = function (point) {\n  var viewportCTM = this.viewport.getCTM();\n  viewportCTM.e += point.x;\n  viewportCTM.f += point.y;\n  this.viewport.setCTM(viewportCTM);\n};\n\n/**\n * Get pan vector\n *\n * @return {Object} {x: 0, y: 0}\n */\nSvgPanZoom.prototype.getPan = function () {\n  var state = this.viewport.getState();\n\n  return { x: state.x, y: state.y };\n};\n\n/**\n * Recalculates cached svg dimensions and controls position\n */\nSvgPanZoom.prototype.resize = function () {\n  // Get dimensions\n  var boundingClientRectNormalized = SvgUtils.getBoundingClientRectNormalized(\n    this.svg\n  );\n  this.width = boundingClientRectNormalized.width;\n  this.height = boundingClientRectNormalized.height;\n\n  // Recalculate original state\n  var viewport = this.viewport;\n  viewport.options.width = this.width;\n  viewport.options.height = this.height;\n  viewport.processCTM();\n\n  // Reposition control icons by re-enabling them\n  if (this.options.controlIconsEnabled) {\n    this.getPublicInstance().disableControlIcons();\n    this.getPublicInstance().enableControlIcons();\n  }\n};\n\n/**\n * Unbind mouse events, free callbacks and destroy public instance\n */\nSvgPanZoom.prototype.destroy = function () {\n  var that = this;\n\n  // Free callbacks\n  this.beforeZoom = null;\n  this.onZoom = null;\n  this.beforePan = null;\n  this.onPan = null;\n  this.onUpdatedCTM = null;\n\n  // Destroy custom event handlers\n  // eslint-disable-next-line eqeqeq\n  if (this.options.customEventsHandler != null) {\n    this.options.customEventsHandler.destroy({\n      svgElement: this.svg,\n      eventsListenerElement: this.options.eventsListenerElement,\n      instance: this.getPublicInstance(),\n    });\n  }\n\n  // Unbind eventListeners\n  for (var event in this.eventListeners) {\n    (this.options.eventsListenerElement || this.svg).removeEventListener(\n      event,\n      this.eventListeners[event],\n      !this.options.preventMouseEventsDefault\n        ? passiveListenerTrueOption\n        : passiveListenerFalseOption\n    );\n  }\n\n  // Unbind wheelListener\n  this.disableMouseWheelZoom();\n\n  // Remove control icons\n  this.getPublicInstance().disableControlIcons();\n\n  // Reset zoom and pan\n  this.reset();\n\n  // Remove instance from instancesStore\n  instancesStore = instancesStore.filter(function (instance) {\n    return instance.svg !== that.svg;\n  });\n\n  // Delete options and its contents\n  delete this.options;\n\n  // Delete viewport to make public shadow viewport functions uncallable\n  delete this.viewport;\n\n  // Destroy public instance and rewrite getPublicInstance\n  delete this.publicInstance;\n  delete this.pi;\n  this.getPublicInstance = function () {\n    return null;\n  };\n};\n\n/**\n * Returns a public instance object\n *\n * @return {Object} Public instance object\n */\nSvgPanZoom.prototype.getPublicInstance = function () {\n  var that = this;\n\n  // Create cache\n  if (!this.publicInstance) {\n    this.publicInstance = this.pi = {\n      // Pan\n      enablePan: function () {\n        that.options.panEnabled = true;\n        return that.pi;\n      },\n      disablePan: function () {\n        that.options.panEnabled = false;\n        return that.pi;\n      },\n      isPanEnabled: function () {\n        return !!that.options.panEnabled;\n      },\n      pan: function (point) {\n        that.pan(point);\n        return that.pi;\n      },\n      panBy: function (point) {\n        that.panBy(point);\n        return that.pi;\n      },\n      getPan: function () {\n        return that.getPan();\n      },\n      // Pan event\n      setBeforePan: function (fn) {\n        that.options.beforePan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnPan: function (fn) {\n        that.options.onPan =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zoom and Control Icons\n      enableZoom: function () {\n        that.options.zoomEnabled = true;\n        return that.pi;\n      },\n      disableZoom: function () {\n        that.options.zoomEnabled = false;\n        return that.pi;\n      },\n      isZoomEnabled: function () {\n        return !!that.options.zoomEnabled;\n      },\n      enableControlIcons: function () {\n        if (!that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = true;\n          ControlIcons.enable(that);\n        }\n        return that.pi;\n      },\n      disableControlIcons: function () {\n        if (that.options.controlIconsEnabled) {\n          that.options.controlIconsEnabled = false;\n          ControlIcons.disable(that);\n        }\n        return that.pi;\n      },\n      isControlIconsEnabled: function () {\n        return !!that.options.controlIconsEnabled;\n      },\n      // Double click zoom\n      enableDblClickZoom: function () {\n        that.options.dblClickZoomEnabled = true;\n        return that.pi;\n      },\n      disableDblClickZoom: function () {\n        that.options.dblClickZoomEnabled = false;\n        return that.pi;\n      },\n      isDblClickZoomEnabled: function () {\n        return !!that.options.dblClickZoomEnabled;\n      },\n      // Mouse wheel zoom\n      enableMouseWheelZoom: function () {\n        that.enableMouseWheelZoom();\n        return that.pi;\n      },\n      disableMouseWheelZoom: function () {\n        that.disableMouseWheelZoom();\n        return that.pi;\n      },\n      isMouseWheelZoomEnabled: function () {\n        return !!that.options.mouseWheelZoomEnabled;\n      },\n      // Zoom scale and bounds\n      setZoomScaleSensitivity: function (scale) {\n        that.options.zoomScaleSensitivity = scale;\n        return that.pi;\n      },\n      setMinZoom: function (zoom) {\n        that.options.minZoom = zoom;\n        return that.pi;\n      },\n      setMaxZoom: function (zoom) {\n        that.options.maxZoom = zoom;\n        return that.pi;\n      },\n      // Zoom event\n      setBeforeZoom: function (fn) {\n        that.options.beforeZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      setOnZoom: function (fn) {\n        that.options.onZoom =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Zooming\n      zoom: function (scale) {\n        that.publicZoom(scale, true);\n        return that.pi;\n      },\n      zoomBy: function (scale) {\n        that.publicZoom(scale, false);\n        return that.pi;\n      },\n      zoomAtPoint: function (scale, point) {\n        that.publicZoomAtPoint(scale, point, true);\n        return that.pi;\n      },\n      zoomAtPointBy: function (scale, point) {\n        that.publicZoomAtPoint(scale, point, false);\n        return that.pi;\n      },\n      zoomIn: function () {\n        this.zoomBy(1 + that.options.zoomScaleSensitivity);\n        return that.pi;\n      },\n      zoomOut: function () {\n        this.zoomBy(1 / (1 + that.options.zoomScaleSensitivity));\n        return that.pi;\n      },\n      getZoom: function () {\n        return that.getRelativeZoom();\n      },\n      // CTM update\n      setOnUpdatedCTM: function (fn) {\n        that.options.onUpdatedCTM =\n          fn === null ? null : Utils.proxy(fn, that.publicInstance);\n        return that.pi;\n      },\n      // Reset\n      resetZoom: function () {\n        that.resetZoom();\n        return that.pi;\n      },\n      resetPan: function () {\n        that.resetPan();\n        return that.pi;\n      },\n      reset: function () {\n        that.reset();\n        return that.pi;\n      },\n      // Fit, Contain and Center\n      fit: function () {\n        that.fit();\n        return that.pi;\n      },\n      contain: function () {\n        that.contain();\n        return that.pi;\n      },\n      center: function () {\n        that.center();\n        return that.pi;\n      },\n      // Size and Resize\n      updateBBox: function () {\n        that.updateBBox();\n        return that.pi;\n      },\n      resize: function () {\n        that.resize();\n        return that.pi;\n      },\n      getSizes: function () {\n        return {\n          width: that.width,\n          height: that.height,\n          realZoom: that.getZoom(),\n          viewBox: that.viewport.getViewBox(),\n        };\n      },\n      // Destroy\n      destroy: function () {\n        that.destroy();\n        return that.pi;\n      },\n    };\n  }\n\n  return this.publicInstance;\n};\n\n/**\n * Stores pairs of instances of SvgPanZoom and SVG\n * Each pair is represented by an object {svg: SVGSVGElement, instance: SvgPanZoom}\n *\n * @type {Array}\n */\nvar instancesStore = [];\n\nvar svgPanZoom = function (elementOrSelector, options) {\n  var svg = Utils.getSvg(elementOrSelector);\n\n  if (svg === null) {\n    return null;\n  } else {\n    // Look for existent instance\n    for (var i = instancesStore.length - 1; i >= 0; i--) {\n      if (instancesStore[i].svg === svg) {\n        return instancesStore[i].instance.getPublicInstance();\n      }\n    }\n\n    // If instance not found - create one\n    instancesStore.push({\n      svg: svg,\n      instance: new SvgPanZoom(svg, options),\n    });\n\n    // Return just pushed instance\n    return instancesStore[\n      instancesStore.length - 1\n    ].instance.getPublicInstance();\n  }\n};\n\nmodule.exports = svgPanZoom;\n","import svgPanZoom, * as SvgPanZoom from \"@dash14/svg-pan-zoom\"\n\ninterface Box {\n  top: number\n  bottom: number\n  left: number\n  right: number\n}\n\ninterface ViewArea {\n  box: Box\n  center: SvgPanZoom.Point\n}\n\nexport interface SvgPanZoomInstance extends SvgPanZoom.Instance {\n  fitToContents(): SvgPanZoomInstance\n  getViewArea(): ViewArea\n  getRealZoom(): number\n  applyAbsoluteZoomLevel(zoomLevel: number, minZoomLevel: number, maxZoomLevel: number): void\n  setPanEnabled(enabled: boolean): SvgPanZoomInstance\n  setZoomEnabled(enabled: boolean): SvgPanZoomInstance\n}\n\nexport interface CustomEventOptions {\n  svgElement: SVGSVGElement;\n  instance: SvgPanZoomInstance;\n}\n\nexport interface CustomEventHandler {\n  init: (options: CustomEventOptions) => void;\n  haltEventListeners: string[];\n  destroy: (options: CustomEventOptions) => void;\n}\n\nexport interface SvgPanZoomOptions extends Omit<SvgPanZoom.Options, \"customEventsHandler\"> {\n  customEventsHandler?: CustomEventHandler; // (default null)\n}\n\nexport interface SvgPanZoomInternal extends SvgPanZoomInstance {\n  _isPanEnabled: boolean\n  _isZoomEnabled: boolean\n  _internalIsPanEnabled(): boolean\n  _internalEnablePan(): void\n  _internalDisablePan(): void\n  _internalIsZoomEnabled(): boolean\n  _internalEnableZoom(): void\n  _internalDisableZoom(): void\n}\n\nconst methods: Partial<SvgPanZoomInternal> = {\n  fitToContents(this: SvgPanZoomInternal) {\n    this.fit()\n      .center()\n      .zoomOut() // Zoom out two steps.\n      .zoomOut()\n    return this\n  },\n  getViewArea(this: SvgPanZoomInternal) {\n    const sizes = this.getSizes()\n    const pan = this.getPan()\n    const scale = sizes.realZoom\n    pan.x /= scale\n    pan.y /= scale\n    const viewport = {\n      width: sizes.width / scale,\n      height: sizes.height / scale,\n    }\n    return {\n      box: {\n        top: -pan.y,\n        bottom: viewport.height - pan.y,\n        left: -pan.x,\n        right: viewport.width - pan.x,\n      },\n      center: {\n        x: viewport.width / 2 - pan.x,\n        y: viewport.height / 2 - pan.y,\n      },\n    }\n  },\n  getRealZoom(this: SvgPanZoomInternal) {\n    return this.getSizes().realZoom\n  },\n  applyAbsoluteZoomLevel(this: SvgPanZoomInternal, zoomLevel: number, minZoomLevel: number, maxZoomLevel: number) {\n    // normalize\n    const min = Math.min(0.0001, minZoomLevel)\n    const max = Math.max(min, maxZoomLevel)\n    const zoom = Math.max(Math.min(max, zoomLevel), min)\n\n    const realZoom = this.getRealZoom()\n    const relativeZoom = this.getZoom()\n    const originalZoom = realZoom / relativeZoom\n\n    this.setMinZoom(min / originalZoom)\n      .setMaxZoom(max / originalZoom)\n      .zoom(zoom / originalZoom)\n  },\n  isPanEnabled(this: SvgPanZoomInternal) {\n    return this._isPanEnabled\n  },\n  enablePan(this: SvgPanZoomInternal) {\n    this._isPanEnabled = true\n    this._internalEnablePan()\n    return this\n  },\n  disablePan(this: SvgPanZoomInternal) {\n    this._isPanEnabled = false\n    this._internalDisablePan()\n    return this\n  },\n  isZoomEnabled(this: SvgPanZoomInternal) {\n    return this._isZoomEnabled\n  },\n  enableZoom(this: SvgPanZoomInternal) {\n    this._isZoomEnabled = true\n    this._internalEnableZoom()\n    return this\n  },\n  disableZoom(this: SvgPanZoomInternal) {\n    this._isZoomEnabled = false\n    this._internalDisableZoom()\n    return this\n  },\n  setPanEnabled(this: SvgPanZoomInternal, enabled: boolean) {\n    if (enabled) {\n      this.enablePan()\n    } else {\n      this.disablePan()\n    }\n    return this\n  },\n  setZoomEnabled(this: SvgPanZoomInternal, enabled: boolean) {\n    if (enabled) {\n      this.enableZoom()\n      this.enableDblClickZoom()\n    } else {\n      this.disableZoom()\n      this.disableDblClickZoom()\n    }\n    return this\n  },\n}\n\nfunction constructor(\n  svgPanZoom: SvgPanZoom.Instance,\n  options: SvgPanZoomOptions,\n): SvgPanZoomInternal {\n  const instance = svgPanZoom as SvgPanZoomInternal\n  instance._isPanEnabled = options.panEnabled ?? true\n  instance._isZoomEnabled = options?.zoomEnabled ?? true\n  instance._internalIsPanEnabled = instance.isPanEnabled\n  instance._internalEnablePan = instance.enablePan\n  instance._internalDisablePan = instance.disablePan\n  instance._internalIsZoomEnabled = instance.isZoomEnabled\n  instance._internalEnableZoom = instance.enableZoom\n  instance._internalDisableZoom = instance.disableZoom\n  Object.assign(svgPanZoom, methods)\n  return instance\n}\n\nexport function createSvgPanZoomEx(\n  svg: SVGElement,\n  options: SvgPanZoomOptions\n): SvgPanZoomInstance {\n\n  const userInit = options.customEventsHandler?.init ?? ((_: any) => {})\n  const userDestroy = options.customEventsHandler?.destroy ?? ((_: any) => {})\n  const haltEventListeners = options.customEventsHandler?.haltEventListeners ?? []\n\n  if (options.mouseWheelZoomEnabled === undefined) {\n    options.mouseWheelZoomEnabled = options.zoomEnabled\n  }\n\n  options.customEventsHandler = {\n    init: o => {\n      constructor(o.instance, options)\n      userInit(o)\n    },\n    destroy: o => userDestroy(o),\n    haltEventListeners\n  }\n\n  return svgPanZoom(svg, options as SvgPanZoom.Options) as SvgPanZoomInternal\n}\n","import { ref, Ref, onMounted, onUnmounted } from \"vue\"\nimport { nonNull } from \"../common/common\"\nimport { createSvgPanZoomEx, SvgPanZoomInstance, SvgPanZoomOptions } from \"../utility/svg-pan-zoom-ex\"\n\ntype Callback = () => void\n\nenum State {\n  INITIAL = 0,\n  MOUNTED = 1,\n  UNMOUNTED = 2\n}\n\nexport function useSvgPanZoom(svg: Ref<SVGElement | undefined>, options: SvgPanZoomOptions) {\n  const instance = ref<SvgPanZoomInstance>()\n  let state = State.INITIAL\n  const mountedCallbacks: Callback[] = []\n  const unmountedCallbacks: Callback[] = []\n\n  const instanceMounted = () => {\n    state = State.MOUNTED\n    mountedCallbacks.forEach(c => c())\n    mountedCallbacks.length = 0 // clear\n  }\n\n  const instanceUnmounted = () => {\n    state = State.UNMOUNTED\n    unmountedCallbacks.forEach(c => c())\n    unmountedCallbacks.length = 0 // clear\n  }\n\n  onMounted(() => {\n    const element = nonNull(svg.value, \"<svg>\")\n    // hook init/destroy custom events\n    const userInit = options.customEventsHandler?.init ?? ((_: any) => {})\n    const userDestroy = options.customEventsHandler?.destroy ?? ((_: any) => {})\n    const haltEventListeners = options.customEventsHandler?.haltEventListeners ?? []\n\n    options.customEventsHandler = {\n      init: o => {\n        instance.value = o.instance\n        userInit(o)\n        instanceMounted()\n      },\n      destroy: o => {\n        instanceUnmounted()\n        userDestroy(o)\n      },\n      haltEventListeners\n    }\n\n    createSvgPanZoomEx(element, options)\n  })\n\n  onUnmounted(() => {\n    instance.value?.destroy()\n  })\n\n  const onSvgPanZoomMounted = (callback: Callback) => {\n    if (state === State.INITIAL) {\n      mountedCallbacks.push(callback)\n    } else if (state === State.MOUNTED) {\n      callback()\n    }\n  }\n\n  const onSvgPanZoomUnmounted = (callback: Callback) => {\n    if (state === State.INITIAL || state === State.MOUNTED) {\n      unmountedCallbacks.push(callback)\n    } else {\n      callback()\n    }\n  }\n\n  return { svgPanZoom: instance, onSvgPanZoomMounted, onSvgPanZoomUnmounted }\n}\n","import { nonNull } from \"../common/common\"\nimport { ViewConfig } from \"../common/configs\"\nimport { provide, inject, InjectionKey, Ref, computed } from \"vue\"\n\ninterface ZoomProvides {\n  zoomLevel: Ref<number>,\n  scale: Ref<number>\n}\n\nconst zoomLevelKey = Symbol(\"zoomLevel\") as InjectionKey<ZoomProvides>\n\nexport function provideZoomLevel(zoomLevel: Ref<number>, viewStyle: ViewConfig) {\n  const scale = computed(() => {\n    return viewStyle.scalingObjects ? 1 : (1 / zoomLevel.value)\n  })\n  provide(zoomLevelKey, {\n    zoomLevel,\n    scale\n  })\n  return { scale }\n}\n\nexport function useZoomLevel(): ZoomProvides {\n  return nonNull(inject(zoomLevelKey), \"zoomLevel\")\n}\n","import { RecursivePartial } from \"./common\"\n\n/* ------------------------------------------ *\n * Network graph elements\n * ------------------------------------------ */\n\nexport interface Node {\n  name?: string\n  // any properties\n  [x: string]: any\n}\n\nexport type Nodes = Record<string, Node>\n\nexport interface Edge {\n  source: string\n  target: string\n  // any properties\n  [x: string]: any\n}\n\nexport type Edges = Record<string, Edge>\n\nexport interface LinePosition {\n  x1: number\n  y1: number\n  x2: number\n  y2: number\n}\n\nexport type LayerPosition =\n  \"paths\"\n  | \"nodes\"\n  | \"focusring\"\n  | \"edges\"\n  | \"base\"\n  | \"grid\"\n  | \"background\"\n  | \"root\"\nexport const LayerPositions: readonly LayerPosition[] = [\n  \"paths\",\n  \"nodes\",\n  \"focusring\",\n  \"edges\",\n  \"base\",\n  \"grid\",\n  \"background\",\n  \"root\",\n]\nexport type Layers = Record<string, LayerPosition>\n\n/* ------------------------------------------ *\n * Layouts\n * ------------------------------------------ */\n\nexport interface Position {\n  x: number\n  y: number\n}\n\nexport interface Size {\n  width: number\n  height: number\n}\n\nexport interface FixablePosition extends Position {\n  fixed?: boolean\n}\n\nexport type NodePositions = Record<string, FixablePosition>\n\nexport interface Layouts {\n  nodes: NodePositions\n}\n/**  optionalinterface */\nexport type UserLayouts = RecursivePartial<Layouts>\n\n/* ------------------------------------------ *\n * Edge labels\n * ------------------------------------------ */\n\nexport interface EdgeLabelArea {\n  source: {\n    above: Position\n    below: Position\n  }\n  target: {\n    above: Position\n    below: Position\n  }\n}\n\n/* ------------------------------------------ *\n * Paths\n * ------------------------------------------ */\n\nexport interface Path {\n  edges: string[]\n  // any properties\n  [x: string]: any\n}\n\nexport type Paths = Path[]\n\n// line: point | curve: [control-point, control-point, target-point] | move to next point: null\nexport type PositionOrCurve = Position | Position[] | null\n\n/* ------------------------------------------ *\n * Events\n * ------------------------------------------ */\n\nexport type NodePointerEvent = { node: string; event: PointerEvent }\nexport type EdgePointerEvent = { edge: string; event: PointerEvent }\n\nexport type Events = {\n  \"view:load\": undefined\n  \"view:unload\": undefined\n  \"view:mode\": \"default\" | \"node\" | \"edge\"\n  \"view:zoom\": number\n  \"view:pan\": { x: number; y: number }\n  \"view:fit\": undefined\n  \"view:resize\": { x: number; y: number; width: number; height: number }\n  \"node:click\": NodePointerEvent\n  \"node:pointerover\": NodePointerEvent\n  \"node:pointerout\": NodePointerEvent\n  \"node:pointerup\": NodePointerEvent\n  \"node:pointerdown\": NodePointerEvent\n  \"node:dragstart\": { [name: string]: Position }\n  \"node:pointermove\": { [name: string]: Position }\n  \"node:dragend\": { [name: string]: Position }\n  \"node:select\": string[]\n  \"edge:pointerup\": EdgePointerEvent\n  \"edge:pointerdown\": EdgePointerEvent\n  \"edge:click\": EdgePointerEvent\n  \"edge:pointerover\": EdgePointerEvent\n  \"edge:pointerout\": EdgePointerEvent\n  \"edge:select\": string[]\n  \"path:click\": Path\n}\n\nexport type EventHandlers = {\n  \"*\"?: <T extends keyof Events>(type: T, event: Events[T]) => void\n} & {\n  [K in keyof Events]?: (event: Events[K]) => void\n}\n\nexport type OnClickHandler = (param: NodePointerEvent) => void\nexport type OnDragHandler = (param: { [name: string]: Position }) => void\n\n/* ------------------------------------------ *\n * SVG area\n * ------------------------------------------ */\n\nexport interface Point {\n  x: number\n  y: number\n}\n\nexport interface Sizes {\n  width: number\n  height: number\n  viewBox: {\n    x: number\n    y: number\n    width: number\n    height: number\n  }\n}\n","<script setup lang=\"ts\">\nimport { PropType, ref, watchEffect } from \"vue\"\nimport { AnyShapeStyle } from \"../common/configs\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { applyScaleToDasharray } from \"../common/utility\"\n\nconst props = defineProps({\n  baseX: {\n    type: Number,\n    default: 0,\n  },\n  baseY: {\n    type: Number,\n    default: 0,\n  },\n  config: {\n    type: Object as PropType<AnyShapeStyle>,\n    required: true,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst x = ref(props.baseX)\nconst y = ref(props.baseY)\nconst strokeWidth = ref(0)\nconst strokeColor = ref(\"#000000\")\nconst strokeDasharray = ref<string | number | undefined>(undefined)\nconst radius = ref(0)\nconst width = ref(0)\nconst height = ref(0)\nconst borderRadius = ref(0)\n\nwatchEffect(() => {\n  const s = scale.value\n  strokeWidth.value = props.config.strokeWidth * s\n  strokeColor.value = props.config.strokeColor ?? \"none\"\n  strokeDasharray.value = applyScaleToDasharray(props.config.strokeDasharray, s)\n\n  if (props.config.type === \"circle\") {\n    x.value = props.baseX\n    y.value = props.baseY\n    radius.value = props.config.radius * s\n  } else {\n    width.value = props.config.width * s\n    height.value = props.config.height * s\n    borderRadius.value = props.config.borderRadius * s\n    x.value = props.baseX - width.value / 2\n    y.value = props.baseY - height.value / 2\n  }\n})\n\ndefineExpose({\n  x,\n  y,\n  strokeWidth,\n  strokeColor,\n  strokeDasharray,\n  radius,\n  width,\n  height,\n  borderRadius,\n})\n</script>\n\n<template>\n  <circle\n    v-if=\"config.type === 'circle'\"\n    class=\"v-shape-circle\"\n    :cx=\"x\"\n    :cy=\"y\"\n    :r=\"radius\"\n    :fill=\"config.color\"\n    :stroke=\"strokeColor\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n  />\n  <rect\n    v-else\n    class=\"v-shape-rect\"\n    :x=\"x\"\n    :y=\"y\"\n    :width=\"width\"\n    :height=\"height\"\n    :rx=\"borderRadius\"\n    :ry=\"borderRadius\"\n    :fill=\"config.color\"\n    :stroke=\"strokeColor\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType, reactive, Ref, ref, useAttrs, watch } from \"vue\"\nimport { onMounted, onUnmounted } from \"vue\"\nimport { LabelStyle } from \"../common/configs\"\nimport { useZoomLevel } from \"../composables/zoom\"\n\ntype Rect = { x: number; y: number; width: number; height: number }\n\nfunction updateBackgroundPosition(\n  element: SVGTextElement,\n  pos: Rect,\n  transform: Ref<string | undefined>\n) {\n  const bbox = element.getBBox()\n  pos.x = bbox.x\n  pos.y = bbox.y\n  pos.width = bbox.width\n  pos.height = bbox.height\n  transform.value = element.getAttribute(\"transform\") ?? undefined\n}\n\nfunction enableMutationObserver(\n  element: SVGTextElement,\n  pos: Rect,\n  transform: Ref<string | undefined>\n) {\n  const observer = new MutationObserver(() => {\n    updateBackgroundPosition(element, pos, transform)\n  })\n  observer.observe(element, {\n    attributes: true,\n    attributeFilter: [\"x\", \"y\", \"transform\", \"font-size\"],\n  })\n  updateBackgroundPosition(element, pos, transform)\n  return observer\n}\n\nconst props = defineProps({\n  text: {\n    type: String,\n    required: true,\n  },\n  x: {\n    type: Number,\n    required: true,\n  },\n  y: {\n    type: Number,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<LabelStyle>,\n    required: true,\n  },\n})\n\nconst attrs = useAttrs()\n\nconst { scale } = useZoomLevel()\n\nconst texts = computed(() => props.text.split(/\\r?\\n/))\n\nconst fontSize = computed(() => {\n  return attrs['font-size'] as number ?? (props.config.fontSize * scale.value)\n})\n\nconst lineHeight = computed(() => fontSize.value * props.config.lineHeight)\n\nconst topDeltaY = computed(() => {\n  const dominantBaseline = attrs['dominant-baseline'] as string\n  if (dominantBaseline === \"hanging\") {\n    return 0\n  } else if (dominantBaseline === \"central\") {\n    return -(lineHeight.value * (texts.value.length - 1)) / 2\n  } else {\n    // \"auto\", \"text-top\"\n    return -lineHeight.value * (texts.value.length - 1)\n  }\n})\n\nconst element = ref<SVGTextElement>()\nconst transform = ref(\"\") // copy from <text>\nconst pos = reactive<Rect>({ x: 0, y: 0, width: 0, height: 0 })\nconst backgroundRectPos = computed(() => {\n  const config = props.config.background\n  if (!config) return pos\n  let paddingVertical, paddingHorizontal\n  if (config.padding instanceof Object) {\n    paddingVertical = config.padding.vertical\n    paddingHorizontal = config.padding.horizontal\n  } else {\n    paddingVertical = config.padding ?? 0\n    paddingHorizontal = config.padding ?? 0\n  }\n  const lineMargin = lineHeight.value - fontSize.value\n  return {\n    x: pos.x - paddingHorizontal * scale.value,\n    y: pos.y - paddingVertical * scale.value - (lineMargin / 2),\n    width: pos.width + paddingHorizontal * 2 * scale.value,\n    height: pos.height + paddingVertical * 2 * scale.value + lineMargin,\n  }\n})\n\nlet observer: MutationObserver | undefined\nconst updateObserver = () => {\n  if (props.config.background && props.config.background.visible) {\n    if (!observer && element.value) {\n      observer = enableMutationObserver(element.value, pos, transform)\n    }\n  } else {\n    observer?.disconnect()\n    observer = undefined\n  }\n}\n\nonMounted(() => updateObserver())\nwatch(\n  () => props.config.background && props.config.background.visible,\n  (v, prev) => {\n    if (v == prev) return\n    updateObserver()\n  }\n)\nonUnmounted(() => {\n  observer?.disconnect()\n  observer = undefined\n})\n\ndefineExpose({ fontSize, element, transform, backgroundRectPos, scale })\n</script>\n\n<template>\n  <rect\n    v-if=\"config.background && config.background.visible\"\n    class=\"v-text-background\"\n    v-bind=\"backgroundRectPos\"\n    :rx=\"(config.background?.borderRadius ?? 0) * scale\"\n    :ry=\"(config.background?.borderRadius ?? 0) * scale\"\n    :fill=\"config.background?.color ?? '#ffffff'\"\n    :transform=\"transform\"\n  />\n  <text\n    ref=\"element\"\n    class=\"v-text\"\n    v-bind=\"$attrs\"\n    :x=\"x\"\n    :y=\"y\"\n    :font-family=\"$attrs['font-family'] ? `${$attrs['font-family']}` : config.fontFamily\"\n    :font-size=\"fontSize\"\n    :fill=\"$attrs.fill ? `${$attrs.fill}` : config.color\"\n  >\n    <template v-if=\"texts.length <= 1\">\n      {{ text }}\n    </template>\n    <template v-else>\n      <tspan\n        v-for=\"(t, i) in texts\"\n        :key=\"i\"\n        :x=\"x\"\n        :dy=\"i == 0 ? topDeltaY : lineHeight\"\n      >{{ t }}</tspan>\n    </template>\n  </text>\n</template>\n","\nexport default (sfc, props) => {\n  for (const [key, val] of props) {\n    sfc[key] = val\n  }\n  return sfc\n}\n","<script setup lang=\"ts\">\nimport { computed, PropType, ref, watchEffect } from \"vue\"\nimport { Position } from \"../common/types\"\nimport { NodeState } from \"../composables/state\"\nimport { NodeLabelDirection } from \"../common/configs\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { useNodeConfig } from \"../composables/config\"\nimport { useMouseOperation } from \"../composables/mouse\"\nimport VShape from \"./shape.vue\"\nimport VText from \"./label-text.vue\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<NodeState>,\n    required: true,\n  },\n  pos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst x = computed(() => props.pos?.x || 0)\nconst y = computed(() => props.pos?.y || 0)\n\nconst config = useNodeConfig()\nconst { scale } = useZoomLevel()\n\nconst {\n  handleNodePointerDownEvent,\n  handleNodePointerOverEvent,\n  handleNodePointerOutEvent,\n} = useMouseOperation()\n\nconst labelVisibility = computed(() => {\n  if (props.state.label.visible) {\n    return props.state.labelText ?? false\n  }\n  return false\n})\n\nconst labelMargin = computed(() => {\n  if (props.state.label.direction === NodeLabelDirection.CENTER) {\n    return 0\n  } else {\n    return props.state.label.margin * scale.value\n  }\n})\n\nconst labelShiftV = ref(0) // Amount of label shift (vertical)\nconst labelShiftH = ref(0) // Amount of label shift (horizontal)\nconst labelDiagonalShiftV = ref(0) // Amount of shift in diagonal direction (vertical)\nconst labelDiagonalShiftH = ref(0) // Amount of shift in diagonal direction (horizontal)\n\nwatchEffect(() => {\n  const s = scale.value\n  const shape = props.state.shape\n  if (shape.type == \"circle\") {\n    const radius = shape.radius * s\n    const m = radius + labelMargin.value\n    const diagonalMargin = Math.sqrt(m ** 2 / 2)\n    labelShiftV.value = radius + labelMargin.value\n    labelShiftH.value = radius + labelMargin.value\n    labelDiagonalShiftV.value = diagonalMargin\n    labelDiagonalShiftH.value = diagonalMargin\n  } else {\n    const borderRadius = shape.borderRadius * s\n    const width = shape.width * s\n    const height = shape.height * s\n    const m = borderRadius + labelMargin.value\n    const diagonalMargin = Math.sqrt(m ** 2 / 2)\n    labelShiftV.value = height / 2 + labelMargin.value\n    labelShiftH.value = width / 2 + labelMargin.value\n    labelDiagonalShiftV.value = height / 2 - borderRadius + diagonalMargin\n    labelDiagonalShiftH.value = width / 2 - borderRadius + diagonalMargin\n  }\n})\n\nconst textAnchor = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.SOUTH:\n      return \"middle\"\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.SOUTH_EAST:\n      return \"start\"\n    case NodeLabelDirection.WEST:\n    case NodeLabelDirection.NORTH_WEST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return \"end\"\n  }\n})\nconst dominantBaseline = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.NORTH_WEST:\n      return \"text-top\"\n    case NodeLabelDirection.SOUTH:\n    case NodeLabelDirection.SOUTH_EAST:\n    case NodeLabelDirection.SOUTH_WEST:\n      return \"hanging\"\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.WEST:\n    default:\n      return \"central\"\n  }\n})\nconst labelX = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.NORTH:\n    case NodeLabelDirection.SOUTH:\n      return 0\n    case NodeLabelDirection.EAST:\n      return labelShiftH.value\n    case NodeLabelDirection.WEST:\n      return -labelShiftH.value\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.SOUTH_EAST:\n      return labelDiagonalShiftH.value\n    case NodeLabelDirection.NORTH_WEST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return -labelDiagonalShiftH.value\n  }\n})\nconst labelY = computed(() => {\n  switch (props.state.label.direction) {\n    case NodeLabelDirection.NORTH:\n      return -labelShiftV.value\n    case NodeLabelDirection.SOUTH:\n      return labelShiftV.value\n    case NodeLabelDirection.CENTER:\n    case NodeLabelDirection.EAST:\n    case NodeLabelDirection.WEST:\n      return 0\n    case NodeLabelDirection.NORTH_EAST:\n    case NodeLabelDirection.NORTH_WEST:\n      return -labelDiagonalShiftV.value\n    case NodeLabelDirection.SOUTH_EAST:\n    case NodeLabelDirection.SOUTH_WEST:\n    default:\n      return labelDiagonalShiftV.value\n  }\n})\n\ndefineExpose({\n  x,\n  y,\n  config,\n  labelVisibility,\n  handleNodePointerDownEvent,\n  handleNodePointerOverEvent,\n  handleNodePointerOutEvent,\n  textAnchor,\n  dominantBaseline,\n  labelX,\n  labelY,\n  scale,\n})\n</script>\n\n<template>\n  <g\n    :class=\"{ 'v-node': true, hover: state.hovered, selected: state.selected }\"\n    :transform=\"`translate(${x} ${y})`\"\n    @pointerdown.prevent.stop=\"handleNodePointerDownEvent(id, $event)\"\n    @pointerenter.passive=\"handleNodePointerOverEvent(id, $event)\"\n    @pointerleave.passive=\"handleNodePointerOutEvent(id, $event)\"\n  >\n    <slot\n      name=\"override-node\"\n      :node-id=\"id\"\n      :scale=\"scale\"\n      :config=\"state.shape\"\n      :class=\"{ draggable: state.draggable, selectable: state.selectable }\"\n    >\n      <v-shape\n        :config=\"state.shape\"\n        :class=\"{ draggable: state.draggable, selectable: state.selectable }\"\n      />\n    </slot>\n    <slot\n      v-if=\"labelVisibility\"\n      name=\"override-node-label\"\n      :node-id=\"id\"\n      :scale=\"scale\"\n      :text=\"state.labelText\"\n      :x=\"labelX\"\n      :y=\"labelY\"\n      :config=\"state.label\"\n      :shape=\"state.shape\"\n      :text-anchor=\"textAnchor\"\n      :dominant-baseline=\"dominantBaseline\"\n    >\n      <v-text\n        :text=\"state.labelText\"\n        :x=\"labelX\"\n        :y=\"labelY\"\n        :config=\"state.label\"\n        :text-anchor=\"textAnchor\"\n        :dominant-baseline=\"dominantBaseline\"\n      />\n    </slot>\n  </g>\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n:where(.v-shape-circle) {\n  pointer-events: none;\n  transition: fill $transition, stroke $transition, stroke-width $transition,\n  r $transition;\n}\n:where(.v-shape-rect) {\n  pointer-events: none;\n  transition: fill $transition, stroke $transition, stroke-width $transition,\n    x $transition, y $transition, width $transition, height $transition;\n}\n.v-node {\n  :deep(.draggable),\n  :deep(.selectable) {\n    pointer-events: all;\n    cursor: pointer;\n  }\n  :deep(.v-text) {\n    pointer-events: none;\n    user-select: none;\n    cursor: default;\n  }\n  :where(.v-text) {\n    transition: x $transition, y $transition;\n  }\n}\n\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType, reactive, watchEffect } from \"vue\"\nimport { Position } from \"../common/types\"\nimport { NodeState } from \"../composables/state\"\nimport { CircleShapeStyle, RectangleShapeStyle, ShapeStyle } from \"../common/configs\"\nimport { useNodeConfig } from \"../composables/config\"\nimport VShape from \"./shape.vue\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<NodeState>,\n    required: true,\n  },\n  pos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst x = computed(() => props.pos?.x || 0)\nconst y = computed(() => props.pos?.y || 0)\n\nconst config = useNodeConfig()\nconst shapeConfig = reactive<ShapeStyle>({} as any)\n\nwatchEffect(() => {\n  const shapeStyle = props.state.shape\n  if (shapeStyle.type === \"circle\") {\n    const shape: CircleShapeStyle = {\n      type: \"circle\",\n      radius:\n        shapeStyle.radius +\n        (shapeStyle.strokeWidth ?? 0) / 2 +\n        config.focusring.padding +\n        config.focusring.width / 2,\n      color: \"none\",\n      strokeWidth: config.focusring.width,\n      strokeColor: config.focusring.color,\n      strokeDasharray: config.focusring.dasharray,\n    }\n    Object.assign(shapeConfig, shape)\n  } else {\n    const shape: RectangleShapeStyle = {\n      type: \"rect\",\n      width:\n        shapeStyle.width +\n        (shapeStyle.strokeWidth ?? 0) +\n        config.focusring.padding * 2 +\n        config.focusring.width,\n      height:\n        shapeStyle.height +\n        (shapeStyle.strokeWidth ?? 0) +\n        config.focusring.padding * 2 +\n        config.focusring.width,\n      borderRadius:\n        shapeStyle.borderRadius > 0 ? shapeStyle.borderRadius + config.focusring.padding : 0,\n      color: \"none\",\n      strokeWidth: config.focusring.width,\n      strokeColor: config.focusring.color,\n      strokeDasharray: config.focusring.dasharray,\n    }\n    Object.assign(shapeConfig, shape)\n  }\n})\n\ndefineExpose({ x, y, shapeConfig })\n</script>\n\n<template>\n  <v-shape\n    class=\"v-node-focus-ring\"\n    :base-x=\"x\"\n    :base-y=\"y\"\n    :config=\"shapeConfig\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n.v-node-focus-ring {\n  pointer-events: none;\n}\n\n:where(.v-shape-circle) {\n  transition: r $transition;\n}\n:where(.v-shape-rect) {\n  transition: x $transition, y $transition, width $transition, height $transition;\n}\n:where(.dragging .v-shape-circleg),\n:where(.dragging .v-shape-rect) {\n  transition: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { StrokeStyle } from \"../common/configs\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"../common/utility\"\n\nconst props = defineProps({\n  x1: {\n    type: Number,\n    required: true,\n  },\n  y1: {\n    type: Number,\n    required: true,\n  },\n  x2: {\n    type: Number,\n    required: true,\n  },\n  y2: {\n    type: Number,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<StrokeStyle>,\n    required: true,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst strokeWidth = computed(() => {\n  return props.config.width * scale.value\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(props.config.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = props.config.animate\n    ? getDasharrayUnit(props.config.dasharray) * props.config.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ strokeWidth, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-line': true, animate: config.animate }\"\n    :d=\"`M ${x1} ${y1} L ${x2} ${y2}`\"\n    :stroke=\"config.color\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :style=\"animationSpeed\"\n  />\n</template>\n\n<style scoped>\n.v-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","import baseSlice from './_baseSlice.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toInteger from './toInteger.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * Creates an array of elements split into groups the length of `size`.\n * If `array` can't be split evenly, the final chunk will be the remaining\n * elements.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to process.\n * @param {number} [size=1] The length of each chunk\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the new array of chunks.\n * @example\n *\n * _.chunk(['a', 'b', 'c', 'd'], 2);\n * // => [['a', 'b'], ['c', 'd']]\n *\n * _.chunk(['a', 'b', 'c', 'd'], 3);\n * // => [['a', 'b', 'c'], ['d']]\n */\nfunction chunk(array, size, guard) {\n  if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n    size = 1;\n  } else {\n    size = nativeMax(toInteger(size), 0);\n  }\n  var length = array == null ? 0 : array.length;\n  if (!length || size < 1) {\n    return [];\n  }\n  var index = 0,\n      resIndex = 0,\n      result = Array(nativeCeil(length / size));\n\n  while (index < length) {\n    result[resIndex++] = baseSlice(array, index, (index += size));\n  }\n  return result;\n}\n\nexport default chunk;\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { StrokeStyle } from \"../common/configs\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"../common/utility\"\nimport { EdgeState } from \"../composables/state\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<StrokeStyle>,\n    required: true,\n  },\n  markerStart: {\n    type: String,\n    required: false,\n    default: undefined\n  },\n  markerEnd: {\n    type: String,\n    required: false,\n    default: undefined\n  }\n})\n\nconst { scale } = useZoomLevel()\n\nconst pathD = computed(() => {\n  const p = props.state.position\n  const points = [ ...props.state.curve?.control ?? [], { x: p.x2, y: p.y2 }]\n  const d: string[] = []\n  d.push(`M ${p.x1} ${p.y1}`)\n  chunk(points, 2).forEach(([p1, p2]) => d.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n  return d.join(\" \")\n})\n\nconst strokeWidth = computed(() => {\n  return props.config.width * scale.value\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(props.config.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = props.config.animate\n    ? getDasharrayUnit(props.config.dasharray) * props.config.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ strokeWidth, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <!-- <circle\n    v-if=\"state.curve\"\n    :cx=\"state.curve.circle.center.x\"\n    :cy=\"state.curve.circle.center.y\"\n    :r=\"state.curve.circle.radius\"\n    fill=\"#ff000080\"\n  />\n  <circle\n    v-for=\"cp in state.curve?.control\"\n    :key=\"JSON.stringify(cp)\"\n    :cx=\"cp.x\"\n    :cy=\"cp.y\"\n    :r=\"2\"\n    fill=\"#0000ff\"\n  /> -->\n  <path\n    :class=\"{ 'v-line': true, animate: config.animate }\"\n    :d=\"pathD\"\n    fill=\"none\"\n    :stroke=\"config.color\"\n    :stroke-width=\"strokeWidth\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :style=\"animationSpeed\"\n    :marker-start=\"markerStart\"\n    :marker-end=\"markerEnd\"\n  />\n</template>\n\n<style scoped>\n.v-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { PropType } from \"vue\"\nimport { useEdgeConfig } from \"../composables/config\"\nimport { Position } from \"../common/types\"\nimport { EdgeState } from \"../composables/state\"\nimport VEdgeLine from \"./line.vue\"\nimport VEdgeCurved from \"./edge-curved.vue\"\n\ndefineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  sourcePos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n  targetPos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst config = useEdgeConfig()\n\ndefineExpose({ config })\n</script>\n\n<template>\n  <v-edge-line\n    v-if=\"config.type == 'straight' || !state.curve\"\n    v-bind=\"state.position\"\n    :class=\"{ selectable: state.selectable, hover: state.hovered, selected: state.selected }\"\n    :config=\"state.line.stroke\"\n    :marker-start=\"state.sourceMarkerId ? `url(#${state.sourceMarkerId})` : undefined\"\n    :marker-end=\"state.targetMarkerId ? `url(#${state.targetMarkerId})` : undefined\"\n  />\n  <v-edge-curved\n    v-else\n    :class=\"{ selectable: state.selectable, hover: state.hovered, selected: state.selected }\"\n    :state=\"state\"\n    :config=\"state.line.stroke\"\n    :marker-start=\"state.sourceMarkerId ? `url(#${state.sourceMarkerId})` : undefined\"\n    :marker-end=\"state.targetMarkerId ? `url(#${state.targetMarkerId})` : undefined\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n$transition: 0.1s linear;\n\n:where(.v-line) {\n  transition: stroke $transition, stroke-width $transition;\n  pointer-events: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { PropType, ref, watchEffect } from \"vue\"\nimport { Edges, NodePositions } from \"../common/types\"\nimport { useStates } from \"../composables/state\"\nimport { useEdgeConfig } from \"../composables/config\"\nimport VLine from \"./line.vue\"\nimport VShape from \"./shape.vue\"\nimport VText from \"./label-text.vue\"\n\nconst props = defineProps({\n  edges: {\n    type: Object as PropType<Edges>,\n    required: true,\n  },\n  layouts: {\n    type: Object as PropType<NodePositions>,\n    required: true,\n  },\n})\n\nconst config = useEdgeConfig()\nconst { edgeStates } = useStates()\n\n// Since the specified edges are in the same pair,\n// get the first one and draw it.\nconst pos = ref({ x1: 0, y1: 0, x2: 0, y2: 0 })\nconst centerPos = ref({ x: 0, y: 0 })\n\nwatchEffect(() => {\n  const edgeId = Object.keys(props.edges)[0]\n  pos.value = edgeStates[edgeId].position\n  centerPos.value = {\n    x: (pos.value.x1 + pos.value.x2) / 2,\n    y: (pos.value.y1 + pos.value.y2) / 2,\n  }\n})\n\ndefineExpose({ config, pos, centerPos })\n</script>\n\n<template>\n  <g>\n    <v-line\n      v-bind=\"pos\"\n      :config=\"config.summarized.stroke\"\n    />\n    <v-shape :base-x=\"centerPos.x\" :base-y=\"centerPos.y\" :config=\"config.summarized.shape\" />\n    <v-text\n      :text=\"Object.keys(edges).length.toString()\"\n      :x=\"centerPos.x\"\n      :y=\"centerPos.y\"\n      :config=\"config.summarized.label\"\n      text-anchor=\"middle\"\n      dominant-baseline=\"central\"\n    />\n  </g>\n</template>\n\n","<script setup lang=\"ts\">\nimport { useStates } from \"../composables/state\"\nimport VEdge from \"./edge.vue\"\nimport VEdgeSummarized from \"./edge-summarized.vue\"\n\nconst { edgeStates, edgeGroupStates, layouts } = useStates()\n\n// type FlattenEdge = {\n//     key: string\n//     summarize: true\n//     edges: Edges\n//     id?: undefined\n//     edge?: undefined\n// } | {\n//     key: string\n//     summarize: false\n//     edges?: undefined\n//     id: string\n//     edge: Edge\n// }\n\n// const flattenEdges = computed(() => {\n//   const results: FlattenEdge[] = []\n//   for (const [key, {summarize, edges}] of Object.entries(edgeGroupStates.edgeGroups)) {\n//     if (summarize) {\n//       results.push({ key, summarize, edges })\n//     } else {\n//       results.push(...Object.entries(edges).map(([id, edge]) => ({ key, summarize, id, edge })))\n//     }\n//   }\n//   return results\n// })\n\ndefineExpose({ edgeStates, edgeGroupStates, layouts })\n</script>\n\n<template>\n  <template v-for=\"({ summarize, edges }, key) in edgeGroupStates.edgeGroups\">\n    <template v-if=\"summarize\">\n      <v-edge-summarized\n        :key=\"key\"\n        :edges=\"edges\"\n        :layouts=\"layouts.nodes\"\n      />\n    </template>\n    <template v-for=\"(edge, id) in edges\" v-else :key=\"id\">\n      <v-edge\n        :id=\"id\"\n        :state=\"edgeStates[id]\"\n        :source-pos=\"layouts.nodes[edge.source]\"\n        :target-pos=\"layouts.nodes[edge.target]\"\n      />\n    </template>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { useEdgeConfig } from \"../composables/config\"\nimport { useMouseOperation } from \"../composables/mouse\"\nimport { Position } from \"../common/types\"\nimport { EdgeState } from \"../composables/state\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  state: {\n    type: Object as PropType<EdgeState>,\n    required: true,\n  },\n  sourcePos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n  targetPos: {\n    type: Object as PropType<Position>,\n    required: false,\n    default: undefined,\n  },\n})\n\nconst { scale } = useZoomLevel()\n\nconst config = useEdgeConfig()\nconst {\n  handleEdgePointerDownEvent,\n  handleEdgePointerOverEvent,\n  handleEdgePointerOutEvent,\n} = useMouseOperation()\n\nconst pathD = computed(() => {\n  const p = props.state.position\n  if (config.type === \"straight\" || !props.state.curve) {\n    return `M ${p.x1} ${p.y1} L ${p.x2} ${p.y2}`\n  } else {\n    const points = [ ...props.state.curve.control, { x: p.x2, y: p.y2 }]\n    const d: string[] = []\n    d.push(`M ${p.x1} ${p.y1}`)\n    chunk(points, 2).forEach(([p1, p2]) => d.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n    return d.join(\" \")\n  }\n})\n\nconst strokeWidth = computed(() => (props.state.line.stroke.width + 10) * scale.value)\n\ndefineExpose({\n  config,\n  handleEdgePointerDownEvent,\n  handleEdgePointerOverEvent,\n  handleEdgePointerOutEvent,\n})\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-line-background': true, selectable: state.selectable }\"\n    :d=\"pathD\"\n    stroke=\"transparent\"\n    :stroke-width=\"strokeWidth\"\n    fill=\"none\"\n    @pointerdown.prevent.stop=\"handleEdgePointerDownEvent(id, $event)\"\n    @pointerenter.passive=\"handleEdgePointerOverEvent(id, $event)\"\n    @pointerleave.passive=\"handleEdgePointerOutEvent(id, $event)\"\n  />\n</template>\n\n<style lang=\"scss\" scoped>\n.v-line-background {\n  &.selectable {\n    cursor: pointer;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useStates } from \"../composables/state\"\nimport VEdgeBackground from \"./edge-background.vue\"\n\nconst { edgeStates, edgeGroupStates, layouts } = useStates()\n\ndefineExpose({ edgeStates, edgeGroupStates, layouts })\n</script>\n\n<template>\n  <template v-for=\"({ summarize, edges }) in edgeGroupStates.edgeGroups\">\n    <template v-if=\"!summarize\">\n      <template v-for=\"(edge, id) in edges\" :key=\"id\">\n        <v-edge-background\n          :id=\"id\"\n          :state=\"edgeStates[id]\"\n          :source-pos=\"layouts.nodes[edge.source]\"\n          :target-pos=\"layouts.nodes[edge.target]\"\n        />\n      </template>\n    </template>\n  </template>\n</template>\n","<script setup lang=\"ts\">\nimport { computed } from \"vue\"\nimport { Position } from \"../common/types\"\nimport { useStates } from \"../composables/state\"\nimport { AnyShapeStyle, StrokeStyle } from \"../common/configs\"\nimport { useEdgeConfig } from \"../composables/config\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport * as v2d from \"../common/2d\"\n\ninterface NodeShape {\n  pos: Position\n  shape: AnyShapeStyle\n}\n\nconst edgeConfig = useEdgeConfig()\nconst { nodeStates, edgeStates, edgeGroupStates, layouts } = useStates()\nconst { scale } = useZoomLevel()\n\n// not summarized\nconst indivisualEdgeGroups = computed(() =>\n  Object.fromEntries(\n    Object.entries(edgeGroupStates.edgeGroups).filter(\n      ([_, group]) => !group.summarize && Object.keys(group.edges).length > 0\n    )\n  )\n)\n\nconst labelAreaPosition = computed(\n  () => (edgeId: string, source: NodeShape, target: NodeShape, edgeStyle: StrokeStyle) => {\n    return v2d.calculateEdgeLabelArea(\n      edgeStates[edgeId].labelPosition,\n      edgeStyle,\n      edgeConfig.label.margin,\n      edgeConfig.label.padding,\n      scale.value\n    )\n  }\n)\n\nconst nodeShape = computed(() => (node: string) => {\n  return {\n    pos: layouts.nodes[node] ?? { x: 0, y: 0 },\n    shape: nodeStates[node].shape,\n  }\n})\n\ndefineExpose({\n  indivisualEdgeGroups,\n  labelAreaPosition,\n  nodeShape,\n  edgeStates,\n  edgeConfig,\n  scale,\n})\n</script>\n\n<template>\n  <g class=\"v-edge-labels\">\n    <template v-for=\"(group, id) in indivisualEdgeGroups\" :key=\"id\">\n      <template v-for=\"(edge, edgeId) in group.edges\" :key=\"edgeId\">\n        <slot\n          name=\"edge-label\"\n          :edge-id=\"edgeId\"\n          :edge=\"edge\"\n          :config=\"edgeConfig.label\"\n          :area=\"\n            labelAreaPosition(\n              edgeId,\n              nodeShape(edge.source),\n              nodeShape(edge.target),\n              edgeStates[edgeId].line.stroke\n            )\n          \"\n          :hovered=\"edgeStates[edgeId].hovered\"\n          :selected=\"edgeStates[edgeId].selected\"\n          :scale=\"scale\"\n        />\n      </template>\n    </template>\n  </g>\n</template>\n\n<style lang=\"scss\" scoped>\n.v-edge-labels {\n  :deep(.v-text),\n  :deep(.v-text-background) {\n    pointer-events: none;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { onMounted, onUnmounted, ref } from \"vue\"\nimport { nonNull } from \"../common/common\"\nimport { useContainers } from \"../composables/container\"\n\n// By detecting and copying changes in the `transform` and `style`\n// attributes reflected by svg-pan-zoom, it follows changes in the\n// display area caused by panning and zooming.\n\nconst { svg } = useContainers()\n\n// ref=\"background\"\nconst background = ref<SVGGElement>()\nconst viewport = ref<SVGGElement>()\n\nconst updateAttributes = (attrs: string[], bgLayer: SVGGElement, vpLayer: SVGGElement) => {\n  attrs.forEach(attr => bgLayer.setAttribute(attr, vpLayer.getAttribute(attr) ?? \"\"))\n}\n\nconst observer = new MutationObserver(records => {\n  if (!background.value || !viewport.value) return\n  const attrs = records.map(r => r.attributeName ?? \"\").filter(Boolean)\n  updateAttributes(attrs, background.value, viewport.value)\n})\n\nonMounted(() => {\n  const vp = nonNull(svg.value.querySelector<SVGGElement>(\".v-viewport\"), \"v-viewport\")\n  viewport.value = vp\n  const attrs = [\"transform\", \"style\"]\n  observer.observe(viewport.value, {\n    attributes: true,\n    attributeFilter: attrs\n  })\n  if (!background.value) return\n  updateAttributes(attrs, background.value, vp)\n})\n\nonUnmounted(() => {\n  observer.disconnect()\n})\n\ndefineExpose({ background })\n</script>\n\n<template>\n  <g ref=\"background\" class=\"v-background-viewport\">\n    <slot />\n  </g>\n</template>\n","<script setup lang=\"ts\">\nimport { onMounted, ref, watchEffect } from \"vue\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { useContainers } from \"../composables/container\"\nimport { useEventEmitter } from \"../composables/event-emitter\"\nimport { Point, Size } from \"../common/types\"\nimport { useViewConfig } from \"../composables/config\"\n\n// [index, pos, start, end, attrs][]\ntype LineDefinitions = [number, number, number, number, Record<string, any>][]\n\nconst { emitter } = useEventEmitter()\nconst { container, svgPanZoom } = useContainers()\nconst { scale } = useZoomLevel()\nconst config = useViewConfig()\n\n// left-top point in SVG coordinates\nconst basePoint = ref<Point>({ x: 0, y: 0 })\n\n// container size in pixel\nconst viewport = ref<Size>({ width: 500, height: 500 })\n\nonMounted(() => {\n  const pan = svgPanZoom.value?.getPan()\n  if (pan) {\n    basePoint.value = {\n      x: -pan.x,\n      y: -pan.y,\n    }\n  }\n  const rect = container.value.getBoundingClientRect()\n  viewport.value = {\n    width: rect.width,\n    height: rect.height,\n  }\n})\n\nemitter.on(\"view:resize\", rect => {\n  viewport.value = { width: rect.width, height: rect.height }\n})\n\nemitter.on(\"view:pan\", pan => {\n  basePoint.value = { x: -pan.x, y: -pan.y }\n})\n\nemitter.on(\"view:zoom\", () => {\n  const pan = svgPanZoom.value?.getPan()\n  if (pan) {\n    basePoint.value = { x: -pan.x, y: -pan.y }\n  }\n})\n\nconst thickVerticals = ref<LineDefinitions>([])\nconst thickHorizontals = ref<LineDefinitions>([])\nconst normalVerticals = ref<LineDefinitions>([])\nconst normalHorizontals = ref<LineDefinitions>([])\n\n// make grid lines\nwatchEffect(() => {\n  const thickH: LineDefinitions = []\n  const thickV: LineDefinitions = []\n  const normalH: LineDefinitions = []\n  const normalV: LineDefinitions = []\n\n  const s = scale.value\n  const gi = config.grid.interval\n  const x = basePoint.value.x * s\n  const y = basePoint.value.y * s\n  const width = Math.floor(viewport.value.width / gi + 1) * gi\n  const height = Math.floor(viewport.value.height / gi + 1) * gi\n  const maxWidth = (basePoint.value.x + width) * s\n  const maxHeight = (basePoint.value.y + height) * s\n  const inc = config.grid.thickIncrements // interval to make the line thicker\n  const normalDasharray = config.grid.line.dasharray\n  const thickDasharray = config.grid.thick.dasharray\n\n  let thickAttrs = {\n    stroke: config.grid.thick.color,\n    \"stroke-width\": config.grid.thick.width,\n    \"stroke-dasharray\": thickDasharray,\n    \"stroke-dashoffset\": thickDasharray ? x / s : undefined\n  }\n\n  let normalAttrs = {\n    stroke: config.grid.line.color,\n    \"stroke-width\": config.grid.line.width,\n    \"stroke-dasharray\": normalDasharray,\n    \"stroke-dashoffset\": normalDasharray ? x / s : undefined\n  }\n\n  // horizontal lines\n  const w = (basePoint.value.x + width) * s\n  for (let i = y; i <= maxHeight; i += gi) {\n    const index = Math.floor(i / gi)\n    if (inc && index % inc === 0) {\n      thickH.push([index, index * gi, x, w, thickAttrs])\n    } else {\n      normalH.push([index, index * gi, x, w, normalAttrs])\n    }\n  }\n\n  thickAttrs = { ...thickAttrs }\n  thickAttrs[\"stroke-dashoffset\"] = thickDasharray ? y / s : undefined\n\n  normalAttrs = { ...normalAttrs }\n  normalAttrs[\"stroke-dashoffset\"] = normalDasharray ? y / s : undefined\n\n  // vertical lines\n  const h = (basePoint.value.y + height) * s\n  for (let i = x; i <= maxWidth; i += gi) {\n    const index = Math.floor(i / gi)\n    if (inc && index % inc === 0) {\n      thickV.push([index, index * gi, y, h, thickAttrs])\n    } else {\n      normalV.push([index, index * gi, y, h, normalAttrs])\n    }\n  }\n\n  thickHorizontals.value = thickH\n  thickVerticals.value = thickV\n  normalHorizontals.value = normalH\n  normalVerticals.value = normalV\n})\n\ndefineExpose({\n  thickVerticals,\n  thickHorizontals,\n  normalVerticals,\n  normalHorizontals,\n})\n</script>\n  \n<template>\n  <g class=\"v-background-grid\" shape-rendering=\"crispEdges\">\n    <!-- normal -->\n    <path\n      v-for=\"([i, v, x, w, attrs]) in normalHorizontals\"\n      :key=\"`nv${i}`\"\n      :d=\"`M ${x} ${v} L ${w} ${v}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <path\n      v-for=\"([i, v, y, h, attrs]) in normalVerticals\"\n      :key=\"`nh${i}`\"\n      :d=\"`M ${v} ${y} L ${v} ${h}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <!-- thick -->\n    <path\n      v-for=\"([i, v, x, w, attrs]) in thickHorizontals\"\n      :key=\"`tv${i}`\"\n      :d=\"`M ${x} ${v} L ${w} ${v}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n    <path\n      v-for=\"([i, v, y, h, attrs]) in thickVerticals\"\n      :key=\"`th${i}`\"\n      :d=\"`M ${v} ${y} L ${v} ${h}`\"\n      v-bind=\"attrs\"\n      style=\"vector-effect: non-scaling-stroke;\"\n    />\n  </g>\n</template>\n\n<style>\n.v-background-grid {\n  pointer-events: none;\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { usePathConfig } from \"../composables/config\"\nimport { Config } from \"../common/configs\"\nimport { Path, PositionOrCurve } from \"../common/types\"\nimport { applyScaleToDasharray, getDasharrayUnit } from \"../common/utility\"\nimport chunk from \"lodash-es/chunk\"\n\nconst props = defineProps({\n  points: {\n    type: Array as PropType<PositionOrCurve[]>,\n    required: true,\n  },\n  path: {\n    type: Object as PropType<Path>,\n    required: true,\n  }\n})\n\nconst { scale } = useZoomLevel()\nconst pathConfig = usePathConfig()\n\nconst d = computed(() => {\n  let move = true\n  return props.points.map(p => {\n    if (p === null) {\n      move = true\n    } else if (p instanceof Array) {\n      p = [...p]\n      const list = []\n      if (p.length % 2 === 1) {\n        const x = p[0]\n        p = p.slice(1)\n        list.push(`L ${x.x} ${x.y}`)\n      }\n      chunk(p, 2).map(([p1, p2]) => list.push(`Q ${p1.x} ${p1.y} ${p2.x} ${p2.y}`))\n      return list.join(\" \")\n    } else {\n      const m = move\n      move = false\n      return `${m ? \"M \" : \"L \"}${p.x} ${p.y}`\n    }\n  }).join(\" \")\n})\n\nconst config = computed(() => {\n  return Config.values(pathConfig.path, props.path)\n})\n\nconst strokeDasharray = computed(() => {\n  return applyScaleToDasharray(config.value.dasharray, scale.value)\n})\n\nconst animationSpeed = computed(() => {\n  const speed = config.value.animate\n    ? getDasharrayUnit(config.value.dasharray) * config.value.animationSpeed * scale.value\n    : false\n  return speed ? `--animation-speed:${speed}` : undefined\n})\n\ndefineExpose({ d, scale, config, strokeDasharray, animationSpeed })\n</script>\n\n<template>\n  <path\n    :class=\"{ 'v-path-line': true, animate: config.animate }\"\n    :d=\"d\"\n    fill=\"none\"\n    :stroke=\"config.color\"\n    :stroke-width=\"config.width * scale\"\n    :stroke-dasharray=\"strokeDasharray\"\n    :stroke-linecap=\"config.linecap\"\n    :stroke-linejoin=\"config.linejoin\"\n    :style=\"animationSpeed\"\n  />\n</template>\n\n<style scoped>\n.v-path-line.animate {\n  --animation-speed: 100;\n  animation: dash 10s linear infinite;\n  stroke-dashoffset: var(--animation-speed);\n}\n@keyframes dash {\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { Edge, Edges, NodePositions, Path, Paths, PositionOrCurve } from \"../common/types\"\nimport { findFirstNonNull } from \"../common/utility\"\nimport { Config } from \"../common/configs\"\nimport { EdgeStates, NodeStates, useStates, EdgeState, Curve } from \"../composables/state\"\nimport { usePathConfig } from \"../composables/config\"\nimport { useZoomLevel } from \"../composables/zoom\"\nimport { useEventEmitter } from \"../composables/event-emitter\"\nimport { AnyShapeStyle, PathEndType } from \"../common/configs\"\nimport * as v2d from \"../common/2d\"\nimport * as V from \"../common/vector\"\nimport VPathLine from \"./path-line.vue\"\n\ninterface EdgeObject {\n  edgeId: string\n  edge: Edge\n}\n\ninterface PathObject {\n  path: Path\n  edges: EdgeObject[]\n}\n\ninterface EdgeLine {\n  edgeId: string\n  source: string\n  target: string\n  line: V.Line\n  curve?: Curve\n}\n\nconst EPSILON = Number.EPSILON * 100 // 2.2204... x 1014.\n\nconst props = defineProps({\n  paths: {\n    type: Array as PropType<Paths>,\n    required: true,\n  },\n  edges: {\n    type: Object as PropType<Edges>,\n    required: true,\n  },\n})\n\nconst pathConfig = usePathConfig()\nconst { nodeStates, edgeStates, layouts } = useStates()\nconst { scale } = useZoomLevel()\nconst { emitter } = useEventEmitter()\n\nconst pathList = computed(() => {\n  const list: PathObject[] = []\n  for (const path of props.paths) {\n    const edges = path.edges\n      .map(edgeId => ({ edgeId, edge: props.edges[edgeId] }))\n      .filter(e => e.edge)\n    if (edges.length !== path.edges.length) {\n      continue // reject a path includes unknown edge ID\n    }\n    list.push({ path, edges })\n  }\n  return list\n})\n\nconst calcPathPoints = computed(() => (path: PathObject): PositionOrCurve[] => {\n  if (path.edges.length === 0) return []\n  const margin = Config.value(pathConfig.margin, path.path) * scale.value\n  return _calculatePathPoints(\n    path,\n    nodeStates,\n    layouts.nodes,\n    edgeStates,\n    scale.value,\n    pathConfig.curveInNode,\n    pathConfig.end,\n    margin\n  )\n})\n\nconst emitPathClicked = (path: Path) => {\n  if (!pathConfig.clickable) return\n  emitter.emit(\"path:click\", path)\n}\n\nfunction _calculatePathPoints(\n  path: PathObject,\n  nodeStates: NodeStates,\n  nodeLayouts: NodePositions,\n  edgeStates: EdgeStates,\n  scale: number,\n  curveInNode: boolean,\n  pathEndType: PathEndType,\n  margin: number\n): PositionOrCurve[] {\n  // The relationship between the source/target of a link and the connection\n  // by path can be different.\n  // Detect node at connection point and determine source/target for the path.\n  const edges = path.edges\n\n  // Edge ID list -> List of Edge locations\n  const directions = _detectDirectionsOfPathEdges(edges) // true: forward, false: reverse\n  const edgePos = edges.map((edge, i) => _getEdgeLine(edge, directions[i], edgeStates[edge.edgeId]))\n\n  // the results\n  const points: (V.Vector[] | V.Vector)[] = []\n\n  let isMarginOverRunStart = false\n  let isMarginOverRunEnd = false\n\n  // ----------------------------------------------------\n  // Determine the starting point.\n  // ----------------------------------------------------\n  {\n    const firstEdge = edgePos[0]\n    let nodeRadius = _getNodeRadius(nodeStates[firstEdge.source].shape) * scale\n    const lineMargin = margin + (pathEndType === \"edgeOfNode\" ? nodeRadius : 0)\n    const nextPoint =\n      lineMargin <= 0\n        ? firstEdge.line.source\n        : _calculateEdgeOfNode(firstEdge, lineMargin, nodeLayouts, true)\n    points.push(nextPoint)\n    nodeRadius = _getNodeRadius(nodeStates[firstEdge.target].shape) * scale\n    if (margin > 0) {\n      const distance = V.calculateDistance(firstEdge.line.source, firstEdge.line.target)\n      if (distance <= lineMargin + nodeRadius) {\n        isMarginOverRunStart = true\n      }\n    }\n  }\n\n  // ----------------------------------------------------\n  // Determine transit points.\n  // ----------------------------------------------------\n  const length = edges.length\n  for (let i = 1; i < length; i++) {\n    const prev = edgePos[i - 1]\n    const next = edgePos[i]\n\n    const nodeId = next.source\n    const nodePos = V.Vector.fromObject(nodeLayouts[nodeId] ?? { x: 0, y: 0 })\n\n    // The intersection point of two lines: [X]\n    const crossPoint = _getIntersectionOfLines(prev, next, nodePos)\n\n    // Place another small circle inside the node's circle and\n    // calculate transit points so that the path line is smooth.\n    //   Inner circle: [] radius: `nodeCoreRadius`\n    //   Node circle : []  radius: `nodeRadius`\n    const nodeRadius = _getNodeRadius(nodeStates[nodeId].shape) * scale\n    const nodeCoreRadius = Math.max(nodeRadius * (2 / 3), nodeRadius - 4 * scale)\n    const prevCoreIp = _getIntersectionOfLineAndNode(prev, nodePos, nodeCoreRadius, true)\n    const nextCoreIp = _getIntersectionOfLineAndNode(next, nodePos, nodeCoreRadius, false)\n    const prevNodeIp = _getIntersectionOfLineAndNode(prev, nodePos, nodeRadius, true)\n    const nextNodeIp = _getIntersectionOfLineAndNode(next, nodePos, nodeRadius, false)\n\n    // ----------------------------------------------------\n    // Calculate transit points in the node.\n    // ----------------------------------------------------\n    let pos: V.Vector | V.Vector[]\n    if (crossPoint) {\n      const d = V.calculateDistance(crossPoint, nodePos)\n      if (d < nodeCoreRadius) {\n        // (1) [] includes [X]:\n        //  * [X]: control point in bezier\n        //  * intersection with []: transit point\n        pos = [\n          findFirstNonNull(prevCoreIp, prevNodeIp, prev.line.target),\n          crossPoint,\n          findFirstNonNull(nextCoreIp, nextNodeIp, next.line.source),\n        ]\n      } else if (d <= nodeRadius) {\n        // (2) [] includes [X]:\n        //  * [X]: control point in bezier\n        let p1: V.Vector, p2: V.Vector\n        if (prevNodeIp && prevCoreIp) {\n          // the prev line intersects [] and []:\n          // Of []x[line], []x[line], use the one closer to [X] as the transit point.\n          p1 =\n            V.calculateDistance(crossPoint, prevCoreIp) <\n            V.calculateDistance(crossPoint, prevNodeIp)\n              ? prevCoreIp\n              : prevNodeIp\n        } else {\n          // the prev line intersects only with []:\n          // use []x[line] as the transit point.\n          p1 = prevNodeIp || prev.line.target\n        }\n        if (nextNodeIp && nextCoreIp) {\n          // the next line intersects with [] and []:\n          // Of []x[line], []x[line], use the one closer to [X] as the transit point.\n          p2 =\n            V.calculateDistance(crossPoint, nextCoreIp) <\n            V.calculateDistance(crossPoint, nextNodeIp)\n              ? nextCoreIp\n              : nextNodeIp\n        } else {\n          // the next line intersects only with []:\n          // use []x[line] as the transit point.\n          p2 = nextNodeIp || next.line.source\n        }\n        pos = [p1, crossPoint, p2]\n      } else {\n        // (3) [X] is out of the node([])\n        if (prevCoreIp && nextCoreIp) {\n          // both lines intersect with []:\n          // use the []x[line] as transit point, and\n          // center of the node as control point in bezier.\n          pos = [prevCoreIp, nodePos, nextCoreIp]\n        } else if (prevNodeIp && nextNodeIp) {\n          // both lines intersect with []:\n          // use the []x[line] as transit point, and\n          // center of the node as control point in bezier.\n          pos = [prevNodeIp, nodePos, nextNodeIp]\n        } else {\n          // either or both lines do not intersect the node:\n          // [X] as transit point in bezier, and not place control points.\n          // []x[line] or []x[line] or end of [line] as the transit points, and\n          // center of the node as control point in bezier.\n          pos = [\n            findFirstNonNull(prevCoreIp, prevNodeIp, prev.line.target),\n            nodePos,\n            findFirstNonNull(nextCoreIp, nextNodeIp, next.line.source),\n          ]\n        }\n      }\n    } else {\n      // There is no intersection of two lines:\n      // center of the node as control point in bezier.\n      if (prevCoreIp && nextCoreIp) {\n        // both lines intersect with []:\n        // []x[line] as transit point.\n        pos = [prevCoreIp, nodePos, nextCoreIp]\n      } else if (prevNodeIp && nextNodeIp) {\n        // both lines intersect with []:\n        // []x[line] as transit point.\n        pos = [prevNodeIp, nodePos, nextNodeIp]\n      } else {\n        // either or both lines do not intersect the node:\n        // the end of the line as transit point.\n        pos = [prev.line.target, nodePos, next.line.source]\n      }\n    }\n\n    // ----------------------------------------------------\n    // Specify points on the curve.\n    // ----------------------------------------------------\n    if (prev.curve) {\n      // The starting point has already been added to `points`.\n      const lastPoints = points[points.length - 1]\n      if (lastPoints) {\n        const lastPoint =\n          lastPoints instanceof Array ? lastPoints[lastPoints.length - 1] : lastPoints\n        let nextPoint\n        if (pos instanceof Array) {\n          // Curved lines always end at the center of the node.\n          // To avoid smoothness, use only a transit point.\n          nextPoint = curveInNode ? pos[0] : pos[1]\n        } else {\n          nextPoint = pos\n        }\n        const control = v2d.calculateBezierCurveControlPoint(\n          lastPoint,\n          prev.curve.circle.center,\n          nextPoint,\n          prev.curve.theta\n        )\n        if (pos instanceof Array && curveInNode) {\n          points.push([...control, ...pos])\n        } else {\n          points.push([...control, nextPoint])\n        }\n      }\n    } else {\n      if (curveInNode || !(pos instanceof Array)) {\n        points.push(pos)\n      } else {\n        if (next.curve) {\n          points.push(pos[1]) // use control point as transit point\n        } else {\n          points.push(pos[0], pos[2]) // without control point to avoid smoothness\n        }\n      }\n    }\n  }\n\n  // ----------------------------------------------------\n  // Determine the terminate point.\n  // ----------------------------------------------------\n  {\n    const lastEdge = edgePos[edgePos.length - 1]\n    let nodeRadius = _getNodeRadius(nodeStates[lastEdge.target].shape) * scale\n    const lineMargin = margin + (pathEndType === \"edgeOfNode\" ? nodeRadius : 0)\n    const nextPoint =\n      lineMargin <= 0\n        ? lastEdge.line.target\n        : _calculateEdgeOfNode(lastEdge, lineMargin, nodeLayouts, false)\n    nodeRadius = _getNodeRadius(nodeStates[lastEdge.source].shape) * scale\n    const curve = lastEdge.curve\n    if (curve) {\n      // curve\n      const pos = points[points.length - 1]\n      const lastPoint = pos instanceof Array ? pos[pos.length - 1] : pos\n      const control = v2d.calculateBezierCurveControlPoint(\n        lastPoint,\n        curve.circle.center,\n        nextPoint,\n        curve.theta\n      )\n      points.push([...control, nextPoint])\n    } else {\n      // straight\n      points.push(nextPoint)\n    }\n    if (margin > 0) {\n      const distance = V.calculateDistance(lastEdge.line.source, lastEdge.line.target)\n      if (distance <= lineMargin + nodeRadius) {\n        isMarginOverRunEnd = true\n      }\n    }\n  }\n\n  if (isMarginOverRunStart) {\n    points.shift()\n    if (points[0] instanceof Array) {\n      points.unshift(points[0][0])\n    }\n  }\n  if (isMarginOverRunEnd) {\n    points.pop()\n  }\n\n  return points\n}\n\nfunction _getNodeRadius(shape: AnyShapeStyle) {\n  if (shape.type == \"circle\") {\n    return shape.radius\n  } else {\n    return Math.min(shape.width, shape.height) / 2\n  }\n}\n\nfunction _detectDirectionsOfPathEdges(edges: EdgeObject[]): boolean[] {\n  const length = edges.length\n\n  if (length <= 1) {\n    return [true]\n  }\n\n  const directions: boolean[] = [] // true: forward, false: reverse\n  let lastNode: string | null = null\n  for (let i = 0; i < length; i++) {\n    const source = edges[i].edge.source\n    const target = edges[i].edge.target\n    let isForward\n    if (i === 0) {\n      if (length > 2) {\n        // If the next edge is an edge between the same nodes,\n        // check for more next edges.\n        const edge0 = [source, target].sort()\n        const edge1 = [edges[1].edge.source, edges[1].edge.target].sort()\n        if (edge0[0] === edge1[0] && edge0[1] === edge1[1]) {\n          const next = [edges[2].edge.source, edges[2].edge.target]\n          if (next.includes(edges[1].edge.target)) {\n            // edge1 is forward\n            isForward = target === edges[1].edge.source\n          } else {\n            // edge1 is reverse\n            isForward = target === edges[1].edge.target\n          }\n        } else {\n          isForward = [edges[1].edge.source, edges[1].edge.target].includes(target)\n        }\n      } else {\n        isForward = [edges[1].edge.source, edges[1].edge.target].includes(target)\n      }\n    } else {\n      isForward = lastNode === source\n    }\n    directions.push(isForward)\n    lastNode = isForward ? target : source\n  }\n  return directions\n}\n\nfunction _calculateEdgeOfNode(\n  edge: EdgeLine,\n  nodeRadius: number,\n  nodeLayouts: NodePositions,\n  direction: boolean\n) {\n  const nodeId = direction ? edge.source : edge.target\n  const curve = edge.curve\n  if (curve) {\n    let moveRad = nodeRadius / curve.circle.radius\n    if (curve.theta > 0) {\n      moveRad *= -1\n    }\n    if (!direction) {\n      moveRad *= -1\n    }\n    return V.Vector.fromObject(\n      v2d.moveOnCircumference(\n        direction ? edge.line.source : edge.line.target,\n        curve.circle.center,\n        moveRad\n      )\n    )\n  } else {\n    let source: V.Vector, target: V.Vector\n    if (direction) {\n      source = edge.line.target\n      target = edge.line.source\n    } else {\n      source = edge.line.source\n      target = edge.line.target\n    }\n    // straight\n    const p = V.getIntersectionOfLineTargetAndCircle(\n      source,\n      target,\n      V.Vector.fromObject(nodeLayouts[nodeId]),\n      nodeRadius\n    )\n    return p === null ? source : p\n  }\n}\n\nfunction _getIntersectionOfLines(\n  prev: EdgeLine,\n  next: EdgeLine,\n  nodePos: V.Vector\n): V.Vector | null {\n  let crossPoint: V.Vector | null = null\n  if (prev.curve) {\n    if (next.curve) {\n      if (prev.line.target.isEqualTo(next.line.source)) {\n        return prev.line.target.clone()\n      }\n      // curve -- curve\n      crossPoint = V.getIntersectionOfCircles(\n        prev.curve.circle.center,\n        prev.curve.circle.radius,\n        next.curve.circle.center,\n        next.curve.circle.radius,\n        prev.curve.center\n      )\n    } else {\n      // curve -- straight\n      crossPoint = V.getIntersectionOfLineTargetAndCircle2(\n        next.line.target,\n        next.line.source,\n        prev.curve.circle.center,\n        prev.curve.circle.radius,\n        nodePos\n      )\n    }\n  } else {\n    if (next.curve) {\n      // straight -- curve\n      crossPoint = V.getIntersectionOfLineTargetAndCircle(\n        prev.line.source,\n        prev.line.target,\n        next.curve.circle.center,\n        next.curve.circle.radius\n      )\n    } else {\n      // straight -- straight\n      const prevSlope = _getSlope(prev.line)\n      const nextSlope = _getSlope(next.line)\n      const isParallel =\n        (!isFinite(prevSlope) && !isFinite(nextSlope)) || Math.abs(prevSlope - nextSlope) < EPSILON\n      if (isParallel) {\n        crossPoint = null // not exist intersection point\n      } else {\n        crossPoint = V.getIntersectionPointOfLines(prev.line, next.line)\n      }\n    }\n  }\n  return crossPoint\n}\n\nfunction _getIntersectionOfLineAndNode(\n  edge: EdgeLine,\n  nodeCenter: V.Vector,\n  nodeRadius: number,\n  targetSide: boolean\n): V.Vector | null {\n  if (edge.curve) {\n    return V.getIntersectionOfCircles(\n      nodeCenter,\n      nodeRadius,\n      edge.curve.circle.center,\n      edge.curve.circle.radius,\n      V.Vector.fromObject(edge.curve.center)\n    )\n  } else {\n    return V.getIntersectionOfLineTargetAndCircle(\n      targetSide ? edge.line.source : edge.line.target,\n      targetSide ? edge.line.target : edge.line.source,\n      nodeCenter,\n      nodeRadius\n    )\n  }\n}\n\nfunction _getEdgeLine(edge: EdgeObject, direction: boolean, state: EdgeState): EdgeLine {\n  let position = state.origin\n  let source = edge.edge.source\n  let target = edge.edge.target\n  let curve = state.curve\n  if (!direction) {\n    position = v2d.inverseLine(position)\n    source = edge.edge.target\n    target = edge.edge.source\n    if (curve) {\n      curve = { ...curve, theta: -curve.theta }\n    }\n  }\n  const line = V.fromLinePosition(position)\n  const result: EdgeLine = {\n    edgeId: edge.edgeId,\n    source,\n    target,\n    line,\n    curve,\n  }\n  return result\n}\n\nfunction _getSlope(pos: V.Line) {\n  return (pos.target.y - pos.source.y) / (pos.target.x - pos.source.x)\n}\n\ndefineExpose({ pathConfig, pathList, calcPathPoints, emitPathClicked })\n</script>\n\n<template>\n  <transition-group\n    :name=\"pathConfig.transition\"\n    :css=\"!!pathConfig.transition\"\n    tag=\"g\"\n    class=\"v-paths\"\n  >\n    <v-path-line\n      v-for=\"(path, i) in pathList\"\n      :key=\"i\"\n      :points=\"calcPathPoints(path)\"\n      :class=\"{ clickable: pathConfig.clickable }\"\n      :path=\"path.path\"\n      @click.prevent.stop=\"emitPathClicked(path.path)\"\n    />\n  </transition-group>\n</template>\n\n<style lang=\"scss\" scoped>\n.v-path-line {\n  pointer-events: none;\n  &.clickable {\n    pointer-events: all;\n    cursor: pointer;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\n  import { computed, PropType } from \"vue\"\n  import { MarkerUnits } from \"../common/configs\"\n\nconst props = defineProps({\n  width: {\n    type: Number,\n    required: true,\n  },\n  height: {\n    type: Number,\n    required: true,\n  },\n  refX: {\n    type: Number,\n    required: true,\n  },\n  color: {\n    type: String,\n    required: true,\n  },\n  isSource: {\n    type: Boolean,\n    required: true,\n  },\n  units: {\n    type: String as PropType<MarkerUnits>,\n    required: true,\n  }\n})\n\nconst arrowPoints = computed(() => {\n  const w = props.width\n  const h = props.height\n  if (props.isSource) {\n    return `${w} ${h}, 0 ${h / 2}, ${w} 0`\n  } else {\n    return `0 0, ${w} ${h / 2}, 0 ${h}`\n  }\n})\n\n</script>\n\n<template>\n  <polygon :points=\"arrowPoints\" :fill=\"color\" />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { MarkerUnits } from \"../common/configs\"\n\nconst props = defineProps({\n  width: {\n    type: Number,\n    required: true,\n  },\n  height: {\n    type: Number,\n    required: true,\n  },\n  refX: {\n    type: Number,\n    required: true,\n  },\n  color: {\n    type: String,\n    required: true,\n  },\n  isSource: {\n    type: Boolean,\n    required: true,\n  },\n  units: {\n    type: String as PropType<MarkerUnits>,\n    required: true,\n  }\n})\n\nconst angleStroke = computed(() => {\n  return props.units === \"strokeWidth\" ? 1 : Math.min(props.width, props.height) / 5\n})\n\nconst anglePoints = computed(() => {\n  const m = angleStroke.value / 2\n  const w = props.width\n  const h = props.height\n  if (props.isSource) {\n    return `${w - m} ${h - m}, ${m} ${h / 2}, ${w - m} ${m}`\n  } else {\n    return `${m} ${m}, ${w - m} ${h / 2}, ${m} ${h - m}`\n  }\n})\n</script>\n\n<template>\n  <polyline\n    :points=\"anglePoints\"\n    fill=\"none\"\n    :stroke-width=\"angleStroke\"\n    :stroke=\"color\"\n    stroke-linecap=\"round\"\n    stroke-linejoin=\"round\"\n  />\n</template>\n","<script setup lang=\"ts\">\nimport { computed, PropType } from \"vue\"\nimport { EdgeHeadType } from \"../common/configs\"\nimport { HeadMarker } from \"../composables/marker\"\nimport VMarkerHeadArrow from \"./marker-head-arrow.vue\"\nimport VMarkerHeadAngle from \"./marker-head-angle.vue\"\nimport VMarkerHeadCircle from \"./marker-head-circle.vue\"\n\ntype MarkerType = Exclude<EdgeHeadType, \"none\" | \"custom\">\n\nconst types: Record<MarkerType, any> = {\n  arrow: VMarkerHeadArrow,\n  angle: VMarkerHeadAngle,\n  circle: VMarkerHeadCircle\n}\n\nconst props = defineProps({\n  id: {\n    type: String,\n    required: true,\n  },\n  marker: {\n    type: Object as PropType<HeadMarker>,\n    required: true,\n  },\n  scale: {\n    type: Number,\n    required: true,\n  },\n})\n\nconst width = computed(\n  () => props.marker.width * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n)\n\nconst height = computed(\n  () => props.marker.height * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n)\n\nconst refX = computed(() => {\n  const margin = props.marker.margin * (props.marker.units === \"strokeWidth\" ? 1 : props.scale)\n  return props.marker.isSource ? width.value + margin : -margin\n})\n\n</script>\n\n<template>\n  <marker\n    v-if=\"marker.type !== 'none' && marker.type !== 'custom'\"\n    :id=\"id\"\n    :markerWidth=\"width\"\n    :markerHeight=\"height\"\n    :refX=\"refX\"\n    :refY=\"height / 2\"\n    orient=\"auto\"\n    :markerUnits=\"marker.units\"\n    class=\"v-marker\"\n  >\n    <component\n      :is=\"types[marker.type]\"\n      :width=\"width\"\n      :height=\"height\"\n      :refX=\"refX\"\n      :color=\"marker.color\"\n      :is-source=\"marker.isSource\"\n      :units=\"marker.units\"\n    />\n  </marker>\n</template>\n","<template>\n  <div ref=\"container\" class=\"v-network-graph\">\n    <svg\n      ref=\"svg\"\n      class=\"v-canvas\"\n      :class=\"{ show, dragging }\"\n      width=\"500\"\n      height=\"500\"\n      viewBox=\"0 0 500 500\"\n    >\n      <!-- outside of viewport -->\n      <slot\n        v-for=\"layerName in layerDefs['root']\"\n        :key=\"layerName\"\n        :name=\"layerName\"\n        :scale=\"scale\"\n      />\n\n      <defs v-if=\"Object.keys(markers).length > 0\">\n        <v-marker-head\n          v-for=\"(marker, id) in markers\"\n          :id=\"id\"\n          :key=\"id\"\n          :marker=\"marker\"\n          :scale=\"scale\"\n        />\n      </defs>\n\n      <!-- background-viewport:\n           area outside the scope of SVG text retrieval but targeted by pan/zoom. -->\n      <v-background-viewport v-if=\"isShowBackgroundViewport\">\n        <g v-for=\"layerName in layerDefs['background']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- grid -->\n        <v-background-grid v-if=\"isShowGrid\" />\n\n        <g v-for=\"layerName in layerDefs['grid']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n      </v-background-viewport>\n\n      <!-- viewport: pan/zoom target and within the range of SVG text retrieval. -->\n      <g class=\"v-viewport\">\n        <g v-for=\"layerName in layerDefs['base']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- edges -->\n        <g class=\"v-layer-edges\">\n          <v-edge-backgrounds />\n          <v-edge-groups />\n        </g>\n\n        <g v-for=\"layerName in layerDefs['edges']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- edge labels -->\n        <v-edge-labels v-if=\"overrideEdgeLabels\">\n          <template #edge-label=\"slotProps\">\n            <slot name=\"edge-label\" v-bind=\"slotProps\" />\n          </template>\n        </v-edge-labels>\n\n        <!-- node selections (focus ring) -->\n        <g v-if=\"visibleNodeFocusRing\" class=\"v-layer-nodes-selections\">\n          <v-node-focus-ring\n            v-for=\"nodeId in currentSelectedNodes\"\n            :id=\"nodeId\"\n            :key=\"nodeId\"\n            :state=\"nodeStates[nodeId]\"\n            :pos=\"currentLayouts.nodes[nodeId]\"\n          />\n        </g>\n\n        <g v-for=\"layerName in layerDefs['focusring']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <!-- nodes -->\n        <transition-group\n          :name=\"allConfigs.node.transition\"\n          :css=\"!!allConfigs.node.transition\"\n          tag=\"g\"\n          class=\"v-layer-nodes\"\n        >\n          <v-node\n            v-for=\"(state, nodeId) in nodeStates\"\n            :id=\"nodeId.toString()\"\n            :key=\"nodeId\"\n            :state=\"state\"\n            :pos=\"currentLayouts.nodes[nodeId]\"\n          >\n            <!-- overide the node -->\n            <template v-if=\"overrideNodes\" #override-node=\"slotProps\">\n              <slot name=\"override-node\" v-bind=\"slotProps\" />\n            </template>\n            <!-- override the node label -->\n            <template v-if=\"overrideNodeLabels\" #override-node-label=\"slotProps\">\n              <slot name=\"override-node-label\" v-bind=\"slotProps\" />\n            </template>\n          </v-node>\n        </transition-group>\n\n        <g v-for=\"layerName in layerDefs['nodes']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n\n        <v-paths v-if=\"visiblePaths\" :paths=\"paths\" :edges=\"edges\" />\n\n        <g v-for=\"layerName in layerDefs['paths']\" :key=\"layerName\" class=\"v-layer\">\n          <slot :name=\"layerName\" :scale=\"scale\" />\n        </g>\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, PropType, readonly, ref } from \"vue\"\nimport { computed, nextTick, watch } from \"vue\"\nimport { bindProp, bindPropKeySet } from \"../common/props\"\nimport { provideContainers } from \"../composables/container\"\nimport { provideConfigs } from \"../composables/config\"\nimport { provideStates } from \"../composables/state\"\nimport { provideMouseOperation } from \"../composables/mouse\"\nimport { provideEventEmitter } from \"../composables/event-emitter\"\nimport { provideMarkers } from \"../composables/marker\"\nimport { useSvgPanZoom } from \"../composables/svg-pan-zoom\"\nimport { provideZoomLevel } from \"../composables/zoom\"\nimport { EventHandlers, Nodes, Edges, Paths, Layouts, UserLayouts } from \"../common/types\"\nimport { Layers, LayerPosition, LayerPositions, Point, Sizes } from \"../common/types\"\nimport { Reactive, nonNull } from \"../common/common\"\nimport { UserConfigs } from \"../common/configs\"\nimport VNode from \"./node.vue\"\nimport VNodeFocusRing from \"./node-focus-ring.vue\"\nimport VEdgeGroups from \"./edge-groups.vue\"\nimport VEdgeBackgrounds from \"./edge-backgrounds.vue\"\nimport VEdgeLabels from \"./edge-labels.vue\"\nimport VBackgroundViewport from \"./background-viewport.vue\"\nimport VBackgroundGrid from \"./background-grid.vue\"\nimport VPaths from \"./paths.vue\"\nimport VMarkerHead from \"./marker-head.vue\"\n\nconst SYSTEM_SLOTS = [\"override-node\", \"override-node-label\", \"edge-label\"]\n\nexport default defineComponent({\n  components: {\n    VNode,\n    VNodeFocusRing,\n    VEdgeGroups,\n    VEdgeBackgrounds,\n    VEdgeLabels,\n    VBackgroundViewport,\n    VBackgroundGrid,\n    VPaths,\n    VMarkerHead,\n  },\n  props: {\n    nodes: {\n      type: Object as PropType<Nodes>,\n      default: () => ({}),\n    },\n    edges: {\n      type: Object as PropType<Edges>,\n      default: () => ({}),\n    },\n    layouts: {\n      type: Object as PropType<UserLayouts>,\n      default: () => ({}),\n    },\n    zoomLevel: {\n      type: Number,\n      default: 1,\n    },\n    selectedNodes: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    selectedEdges: {\n      type: Array as PropType<string[]>,\n      default: () => [],\n    },\n    configs: {\n      type: Object as PropType<UserConfigs>,\n      default: () => ({}),\n    },\n    paths: {\n      type: Array as PropType<Paths>,\n      default: () => [],\n    },\n    layers: {\n      type: Object as PropType<Layers>,\n      default: () => ({}),\n    },\n    eventHandlers: {\n      // Since a large number of events will be issued, to avoid\n      // contaminating the event log of the development tools,\n      // events are designed to be notified to a handler function\n      // specified by the user.\n      type: Object as PropType<EventHandlers>,\n      default: () => ({}),\n    },\n  },\n  emits: [\"update:zoomLevel\", \"update:selectedNodes\", \"update:selectedEdges\", \"update:layouts\"],\n  setup(props, { emit, slots }) {\n    // Event Bus\n    const emitter = provideEventEmitter()\n    Object.entries(props.eventHandlers).forEach(([type, event]) => {\n      emitter.on(type as any, event as any)\n    })\n\n    // Style settings\n    const configs = provideConfigs(props.configs)\n\n    // Additional layers\n    const layerDefs = computed(() => {\n      const definedSlots = new Set(Object.keys(slots))\n      SYSTEM_SLOTS.forEach(s => definedSlots.delete(s))\n\n      const layers = Object.fromEntries(LayerPositions.map(n => [n, [] as string[]]))\n      Object.assign(\n        layers,\n        Object.entries(props.layers).reduce((accum, [name, type]) => {\n          definedSlots.delete(name)\n          if (type in accum) {\n            accum[type].push(name)\n          } else {\n            accum[type] = [name]\n          }\n          return accum\n        }, {} as Record<LayerPosition, string[]>)\n      )\n      // The default slot and any slots not defined in the layers into root.\n      layers[\"root\"].push(...definedSlots)\n      return layers as Record<LayerPosition, string[]>\n    })\n\n    // Grid layer\n    const isShowGrid = computed(() => configs.view.grid.visible)\n    const isShowBackgroundViewport = computed(() => {\n      const layers = layerDefs.value\n      return isShowGrid.value || layers[\"background\"].length > 0 || layers[\"grid\"].length > 0\n    })\n\n    // overrides\n    const overrideNodes = computed(() => \"override-node\" in slots)\n    const overrideNodeLabels = computed(() => \"override-node-label\" in slots)\n    const overrideEdgeLabels = computed(() => \"edge-label\" in slots)\n\n    // -----------------------------------------------------------------------\n    // SVG\n    // -----------------------------------------------------------------------\n    const container = ref<HTMLDivElement>()\n    const svg = ref<SVGElement>()\n    const show = ref<boolean>(false)\n\n    const zoomLevel = bindProp(props, \"zoomLevel\", emit, v => {\n      v = Math.max(v, configs.view.minZoomLevel)\n      v = Math.min(v, configs.view.maxZoomLevel)\n      return v\n    })\n\n    // SVG pan / zoom\n    const { svgPanZoom, onSvgPanZoomMounted, onSvgPanZoomUnmounted } = useSvgPanZoom(svg, {\n      viewportSelector: \".v-viewport\",\n      minZoom: configs.view.minZoomLevel, // temporary\n      maxZoom: configs.view.maxZoomLevel, // temporary\n      fit: true,\n      center: true,\n      zoomEnabled: configs.view.zoomEnabled,\n      onZoom: _ => {\n        const z = svgPanZoom.value?.getRealZoom() ?? 1\n        if (Math.abs(zoomLevel.value - z) >= 1.0e-6) {\n          zoomLevel.value = z\n          emitter.emit(\"view:zoom\", z)\n        }\n      },\n      panEnabled: configs.view.panEnabled,\n      onPan: p => emitter.emit(\"view:pan\", p),\n    })\n\n    provideContainers({ container, svg, svgPanZoom })\n\n    // Observe container resizing\n    const rectSize = { width: 0, height: 0 }\n    const resizeObserver = new ResizeObserver(() => {\n      svgPanZoom.value?.resize()\n      const r = container.value?.getBoundingClientRect()\n      if (r) {\n        const x = -(rectSize.width - r.width) / 2\n        const y = -(rectSize.height - r.height) / 2\n        svgPanZoom.value?.panBy({ x, y })\n        const { width, height } = r\n        Object.assign(rectSize, { width, height })\n        emitter.emit(\"view:resize\", { x: r.x, y: r.y, width, height })\n      }\n    })\n    onSvgPanZoomMounted(() => {\n      const c = nonNull(container.value, \"svg-pan-zoom container\")\n      resizeObserver.observe(c)\n      configs.view.onSvgPanZoomInitialized?.(nonNull(svgPanZoom.value, \"svg-pan-zoom instance\"))\n      const r = c.getBoundingClientRect()\n      const { width, height } = r\n      Object.assign(rectSize, { width, height })\n    })\n    onSvgPanZoomUnmounted(() => {\n      resizeObserver.disconnect()\n    })\n\n    const applyAbsoluteZoomLevel = (absoluteZoomLevel: number) => {\n      svgPanZoom.value?.applyAbsoluteZoomLevel(\n        absoluteZoomLevel,\n        configs.view.minZoomLevel,\n        configs.view.maxZoomLevel\n      )\n    }\n\n    watch(\n      () => configs.view.panEnabled,\n      v => {\n        svgPanZoom.value?.setPanEnabled(v)\n      }\n    )\n    watch(\n      () => configs.view.zoomEnabled,\n      v => {\n        svgPanZoom.value?.setZoomEnabled(v)\n      }\n    )\n\n    watch(zoomLevel, v => applyAbsoluteZoomLevel(v))\n    watch(\n      () => [configs.view.minZoomLevel, configs.view.maxZoomLevel],\n      _ => {\n        applyAbsoluteZoomLevel(zoomLevel.value)\n      }\n    )\n\n    // Provide zoom level / scaling parameter\n    const { scale } = provideZoomLevel(zoomLevel, configs.view)\n\n    onSvgPanZoomMounted(() => {\n      // apply initial zoom level\n      const initialZoomLevel = props.zoomLevel\n      applyAbsoluteZoomLevel(initialZoomLevel)\n    })\n\n    // To resolve the problem that the center position and\n    // magnification rate may not be recognized.\n    const updateBorderBox = (callback: () => void) => {\n      if (Object.keys(props.nodes).length > 0) {\n        svgPanZoom.value?.updateBBox()\n        nextTick(callback)\n      } else {\n        callback()\n      }\n    }\n\n    // Scales the content to fit in the SVG area.\n    const fitToContents = () => {\n      updateBorderBox(() => {\n        svgPanZoom.value?.fitToContents()\n        emitter.emit(\"view:fit\", undefined)\n      })\n    }\n\n    // Place content in the center of the SVG area.\n    const panToCenter = () => {\n      updateBorderBox(() => {\n        svgPanZoom.value?.center()\n      })\n    }\n\n    // -----------------------------------------------------------------------\n    // States of selected nodes/edges\n    // -----------------------------------------------------------------------\n    const currentSelectedNodes = bindPropKeySet(props, \"selectedNodes\", props.nodes, emit)\n    watch(currentSelectedNodes, nodes => emitter.emit(\"node:select\", Array.from(nodes)))\n\n    const currentSelectedEdges = bindPropKeySet(props, \"selectedEdges\", props.edges, emit)\n    watch(currentSelectedEdges, edges => emitter.emit(\"edge:select\", Array.from(edges)))\n\n    const hoveredNodes = Reactive(new Set<string>())\n    const hoveredEdges = Reactive(new Set<string>())\n    const currentLayouts = Reactive<Layouts>({ nodes: {} })\n\n    // two-way binding\n    watch(\n      () => props.layouts,\n      () => Object.assign(currentLayouts, props.layouts),\n      { deep: true, immediate: true }\n    )\n    watch(currentLayouts, () => emit(\"update:layouts\", currentLayouts), { deep: true })\n\n    const visibleNodeFocusRing = computed(() => {\n      return configs.node.focusring.visible\n    })\n\n    // -----------------------------------------------------------------------\n    // SVG Markers\n    // -----------------------------------------------------------------------\n    const markers = provideMarkers()\n\n    // -----------------------------------------------------------------------\n    // Mouse processing\n    // -----------------------------------------------------------------------\n\n    // mouse pointer change on dragging\n    const dragging = ref<boolean>(false)\n    emitter.on(\"node:dragstart\", _ => (dragging.value = true))\n    emitter.on(\"node:dragend\", _ => (dragging.value = false))\n    emitter.on(\"view:mode\", mode => {\n      // avoid pan/zoom when using nodes and edges with multi-touch\n      if (configs.view.panEnabled) {\n        if (mode === \"default\") {\n          svgPanZoom.value?.enablePan()\n        } else {\n          svgPanZoom.value?.disablePan()\n        }\n      }\n      if (configs.view.zoomEnabled) {\n        if (mode === \"default\") {\n          svgPanZoom.value?.enableZoom()\n        } else {\n          svgPanZoom.value?.disableZoom()\n        }\n      }\n    })\n\n    const { nodeStates, edgeStates } = provideStates(\n      readonly(props.nodes),\n      readonly(props.edges),\n      currentSelectedNodes,\n      currentSelectedEdges,\n      hoveredNodes,\n      hoveredEdges,\n      readonly(configs),\n      currentLayouts,\n      scale\n    )\n\n    // mouse and touch support\n    provideMouseOperation(\n      svg,\n      readonly(currentLayouts.nodes),\n      readonly(zoomLevel),\n      nodeStates,\n      edgeStates,\n      currentSelectedNodes,\n      currentSelectedEdges,\n      hoveredNodes,\n      hoveredEdges,\n      emitter\n    )\n\n    // -----------------------------------------------------------------------\n    // Paths\n    // -----------------------------------------------------------------------\n    const visiblePaths = computed(() => configs.path.visible)\n\n    // -----------------------------------------------------------------------\n    // Node layout handler\n    // -----------------------------------------------------------------------\n\n    const activateParams = () => ({\n      layouts: Reactive(currentLayouts.nodes),\n      nodes: readonly(props.nodes),\n      edges: readonly(props.edges),\n      configs: readonly(configs),\n      scale: readonly(scale),\n      emitter,\n      svgPanZoom: nonNull(svgPanZoom.value),\n    })\n    watch(\n      () => configs.view.layoutHandler,\n      (newHandler, oldHandler) => {\n        oldHandler.deactivate()\n        newHandler.activate(activateParams())\n      }\n    )\n\n    // -----------------------------------------------------------------------\n    // Events\n    // -----------------------------------------------------------------------\n\n    onSvgPanZoomMounted(() => {\n      updateBorderBox(() => {\n        // pan to center\n        const svg = nonNull(svgPanZoom.value, \"svg-pan-zoom\")\n        svg.center()\n\n        // activate layout handler.\n        // (calc the positions of nodes whose positions are not specified)\n        configs.view.layoutHandler.activate(activateParams())\n\n        nextTick(() => {\n          if (Object.keys(props.nodes).length > 0) {\n            // The center may change as a result of the position calculation above,\n            // so re-center.\n            if (configs.view.fit) {\n              fitToContents()\n            } else {\n              panToCenter()\n            }\n          } else {\n            // Pan (0, 0) to the center.\n            const sizes = svg.getSizes()\n            svg.pan({\n              x: sizes.width / 2,\n              y: sizes.height / 2\n            })\n          }\n\n          emitter.emit(\"view:load\")\n\n          // start displaying the svg\n          show.value = true\n        })\n      })\n    })\n\n    onSvgPanZoomUnmounted(() => {\n      emitter.emit(\"view:unload\")\n      configs.view.layoutHandler.deactivate()\n    })\n\n    return {\n      // html ref\n      container,\n      svg,\n      show,\n\n      // instance\n      svgPanZoom,\n\n      // properties\n      allConfigs: configs,\n      layerDefs,\n      isShowGrid,\n      isShowBackgroundViewport,\n      overrideNodes,\n      overrideNodeLabels,\n      overrideEdgeLabels,\n      scale,\n      nodeStates,\n      currentSelectedNodes,\n      markers,\n      dragging,\n      currentLayouts,\n      visibleNodeFocusRing,\n      visiblePaths,\n\n      // methods\n      fitToContents,\n      panToCenter,\n    }\n  },\n  methods: {\n    /**\n     * Zoom in\n     */\n    zoomIn() {\n      this.svgPanZoom?.zoomIn()\n    },\n    /**\n     * Zoom out\n     */\n    zoomOut() {\n      this.svgPanZoom?.zoomOut()\n    },\n    /**\n     * Pan to a rendered position\n     * @return {Point} point to pan\n     */\n    panTo(point: Point) {\n      this.svgPanZoom?.pan(point)\n    },\n    /**\n     * Relatively pan the graph by a specified rendered position vector\n     * @return {Point} relative point to pan\n     */\n    panBy(point: Point) {\n      this.svgPanZoom?.panBy(point)\n    },\n    /**\n     * Get pan vector\n     * @return {Point} pan vector\n     */\n    getPan(): Point {\n      return nonNull(this.svgPanZoom).getPan()\n    },\n    /**\n     * Get all calculate svg dimensions\n     */\n    getSizes(): Sizes {\n      const sizes = nonNull(this.svgPanZoom).getSizes()\n      return {\n        width: sizes.width,\n        height: sizes.height,\n        viewBox: sizes.viewBox,\n      }\n    },\n    /**\n     * Get graph as SVG text.\n     * @return {string} SVG text\n     */\n    getAsSvg(): string {\n      const element = this.svg\n      const viewport = element?.querySelector(\".v-viewport\") as SVGGElement\n\n      const target = element?.cloneNode(true) as SVGGElement\n\n      if (viewport) {\n        const box = viewport.getBBox()\n        const z = 1 / this.scale\n        const svg = {\n          x: Math.floor((box.x - 10) * z),\n          y: Math.floor((box.y - 10) * z),\n          width: Math.ceil((box.width + 20) * z),\n          height: Math.ceil((box.height + 20) * z),\n        }\n        target.setAttribute(\"width\",  svg.width.toString())\n        target.setAttribute(\"height\", svg.height.toString())\n\n        const v = target.querySelector(\".v-viewport\") as SVGGElement\n        v.setAttribute(\"transform\", `translate(${-svg.x} ${-svg.y}), scale(${z})`)\n        v.removeAttribute(\"style\")\n\n        target.setAttribute(\"viewBox\", `0 0 ${svg.width} ${svg.height}`)\n      }\n\n      let data = target.outerHTML\n\n      // cleanup\n      data = data.replaceAll(/ data-v-[0-9a-z]+=\"\"/g, \"\")\n      data = data.replaceAll(/<!--[\\s\\S]*?-->/mg, \"\")\n      return data\n    },\n  },\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.v-network-graph {\n  padding: 0;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n}\n.v-canvas {\n  width: 100%;\n  height: 100%;\n  // svgPanZoom\n  opacity: 0;\n  transition: opacity 0.5s linear;\n  &.show {\n    opacity: 1;\n  }\n}\n\n.v-canvas.dragging {\n  :deep(*) {\n    cursor: grabbing !important;\n  }\n  :deep(.v-line) {\n    transition: d 0s;\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { computed, PropType, Ref, ref, watchEffect } from \"vue\"\nimport { EdgeLabelStyle } from \"../common/configs\"\nimport { Edge, EdgeLabelArea } from \"../common/types\"\nimport * as V from \"../common/vector\"\nimport VText from \"./label-text.vue\"\n\nconst props = defineProps({\n  area: {\n    type: Object as PropType<EdgeLabelArea>,\n    required: true,\n  },\n  config: {\n    type: Object as PropType<EdgeLabelStyle>,\n    required: true,\n  },\n  text: {\n    type: String,\n    required: false,\n    default: \"\",\n  },\n  align: {\n    type: String as PropType<\"center\" | \"source\" | \"target\">,\n    required: false,\n    default: \"center\",\n  },\n  verticalAlign: {\n    type: String as PropType<\"center\" | \"above\" | \"below\">,\n    required: false,\n    default: \"center\",\n  },\n  // The followings are the definitions to avoid passing unwanted\n  // items to <text> when they are specified in v-bind.\n  edge: {\n    type: Object as PropType<Edge>,\n    required: false,\n    default: undefined\n  },\n  hovered: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  selected: {\n    type: Boolean,\n    required: false,\n    default: false\n  },\n  scale: {\n    type: Number,\n    required: false,\n    default: undefined\n  }\n})\n\nconst x = ref(0)\nconst y = ref(0)\nconst textAnchor: Ref<\"middle\" | \"start\" | \"end\"> = ref(\"middle\")\nconst dominantBaseline: Ref<\"text-top\" | \"hanging\" | \"central\"> = ref(\"central\")\nconst angle = ref(0)\n\nwatchEffect(() => {\n  const s = props.area.source\n  const t = props.area.target\n  if (props.align === \"source\") {\n    if (s.above.x == t.above.x) {\n      textAnchor.value = s.above.y > t.above.y ? \"start\" : \"end\"\n    } else {\n      textAnchor.value = s.above.x < t.above.x ? \"start\" : \"end\"\n    }\n    if (props.verticalAlign === \"above\") {\n      x.value = s.above.x\n      y.value = s.above.y\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = s.below.x\n      y.value = s.below.y\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (s.above.x + s.below.x) / 2\n      y.value = (s.above.y + s.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  } else if (props.align === \"target\") {\n    if (s.above.x == t.above.x) {\n      textAnchor.value = s.above.y < t.above.y ? \"start\" : \"end\"\n    } else {\n      textAnchor.value = s.above.x > t.above.x ? \"start\" : \"end\"\n    }\n    if (props.verticalAlign === \"above\") {\n      x.value = t.above.x\n      y.value = t.above.y\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = t.below.x\n      y.value = t.below.y\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (t.above.x + t.below.x) / 2\n      y.value = (t.above.y + t.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  } else {\n    // center\n    textAnchor.value = \"middle\"\n    if (props.verticalAlign === \"above\") {\n      x.value = (s.above.x + t.above.x) / 2\n      y.value = (s.above.y + t.above.y) / 2\n      dominantBaseline.value = \"text-top\"\n    } else if (props.verticalAlign === \"below\") {\n      x.value = (s.below.x + t.below.x) / 2\n      y.value = (s.below.y + t.below.y) / 2\n      dominantBaseline.value = \"hanging\"\n    } else {\n      // center\n      x.value = (s.above.x + t.below.x) / 2\n      y.value = (s.above.y + t.below.y) / 2\n      dominantBaseline.value = \"central\"\n    }\n  }\n  let degree = V.fromPositions(s.above, t.above).v.angleDeg()\n  if (degree < -90 || degree >= 90) {\n    degree = degree + 180\n    if (degree > 180) {\n      degree -= 360\n    }\n  }\n  angle.value = degree\n})\n\n// If there is no background config and text overlaps the line,\n// automatically set the background.\nconst updatedConfig = computed(() => {\n  if (dominantBaseline.value === \"central\" && !props.config.background) {\n    return {\n      ...props.config,\n      background: {\n        visible: true,\n        color: \"#ffffff\",\n        padding: {\n          vertical: 1,\n          horizontal: 4,\n        },\n        borderRadius: 2\n      }\n    }\n  } else {\n    return props.config\n  }\n})\n\ndefineExpose({ x, y, textAnchor, dominantBaseline, angle, updatedConfig })\n</script>\n\n<template>\n  <v-text\n    class=\"v-edge-label\"\n    :text=\"text\"\n    :x=\"x\"\n    :y=\"y\"\n    :config=\"updatedConfig\"\n    :text-anchor=\"textAnchor\"\n    :dominant-baseline=\"dominantBaseline\"\n    :transform=\"`rotate(${angle} ${x} ${y})`\"\n  />\n  <!-- <g>\n    <circle\n      :cx=\"area.source.above.x\"\n      :cy=\"area.source.above.y\"\n      r=\"3\"\n      fill=\"red\"\n    />\n    <circle\n      :cx=\"area.target.above.x\"\n      :cy=\"area.target.above.y\"\n      r=\"3\"\n      fill=\"green\"\n    />\n    <circle\n      :cx=\"area.source.below.x\"\n      :cy=\"area.source.below.y\"\n      r=\"3\"\n      fill=\"blue\"\n    />\n    <circle\n      :cx=\"area.target.below.x\"\n      :cy=\"area.target.below.y\"\n      r=\"3\"\n      fill=\"orange\"\n    />\n  </g> -->\n</template>\n","import { Ref } from \"vue\"\nimport { Position } from \"../common/types\"\nimport { SimpleLayout } from \"./simple\"\n\nconst DEFAULT_GRID = 10\n\nexport type GridLayoutParameters = {\n  grid?: number\n}\n\nexport class GridLayout extends SimpleLayout {\n  constructor(private options: GridLayoutParameters = {}) {\n    super()\n  }\n\n  protected setNodePosition(nodeLayout: Ref<Position>, pos: Position) {\n    const grid = this.options.grid || DEFAULT_GRID\n    nodeLayout.value.x = Math.floor(pos.x / grid) * grid\n    nodeLayout.value.y = Math.floor(pos.y / grid) * grid\n  }\n}\n","import { App, Plugin } from \"vue\"\n\n// Import vue components\nimport * as components from \"./components/index\"\n\n// install function executed by Vue.use()\nconst install: Exclude<Plugin[\"install\"], undefined> = function (app: App) {\n  Object.entries(components).forEach(([componentName, component]) => {\n    app.component(componentName, component)\n  })\n}\n\n// Create module definition for Vue.use()\nexport default install\n\n// To allow individual component use, export components\n// each can be registered via Vue.component()\nexport * from \"./components/index\"\n\nexport { getFullConfigs } from \"./common/config-defaults\"\n\nexport { SimpleLayout } from \"./layouts/simple\"\nexport { GridLayout } from \"./layouts/grid\"\n// export { ForceLayout } from \"./layouts/force\"\nexport type { LayoutHandler } from \"./layouts/handler\"\n\nexport * from \"./common/types\"\nexport * from \"./common/configs\"\n\n// Export for more advanced visualization. However, be aware of the\n// possibility of destructive specification changes in the future.\nexport { useStates } from \"./composables/state\"\n\n// // iife/cjs usage extends esm default export - so import it all\n// import plugin, * as components from '.';\n\n// // Attach named exports directly to plugin. IIFE/CJS will\n// // only expose one global var, with component exports exposed as properties of\n// // that global var (eg. plugin.component)\n// type NamedExports = Exclude<typeof components, 'default'>;\n// type ExtendedPlugin = typeof plugin & NamedExports;\n// Object.entries(components).forEach(([componentName, component]) => {\n//   if (componentName !== 'default') {\n//     const key = componentName as Exclude<keyof NamedExports, 'default'>;\n//     const val = component as Exclude<ExtendedPlugin, typeof plugin>;\n//     (plugin as ExtendedPlugin)[key] = val;\n//   }\n// });\n\n// export default plugin;"],"names":["value","other","array","key","length","eq","splice","Array","prototype","entries","index","clear","entry","set","__data__","size","data","this","assocIndexOf","pop","call","get","has","push","global","Object","freeSelf","self","freeGlobal","Function","root","Symbol","objectProto","hasOwnProperty","nativeObjectToString","toString","symToStringTag","toStringTag","isOwn","tag","unmasked","e","result","getRawTag","objectToString","type","isObject","baseGetTag","uid","maskSrcKey","exec","coreJsData","keys","IE_PROTO","funcToString","func","reIsHostCtor","funcProto","reIsNative","RegExp","replace","isFunction","test","toSource","object","getValue","baseIsNative","getNative","map","nativeCreate","hash","Hash","ListCache","string","getMapData","pairs","Map","LARGE_ARRAY_SIZE","MapCache","values","add","predicate","SetCache","bitmask","customizer","equalFunc","stack","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","arraySome","othValue2","othIndex","Uint8Array","forEach","symbolProto","symbolValueOf","valueOf","isArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","resIndex","arrayFilter","symbol","isObjectLike","isArguments","baseIsArguments","arguments","freeExports","exports2","nodeType","freeModule","module","Buffer","exports","isBuffer","reIsUint","typedArrayTags","freeProcess","process","nodeUtil","types","require","binding","nodeIsTypedArray","isTypedArray","isLength","inherited","isArr","isArg","isBuff","isType","skipIndexes","n","iteratee","baseTimes","String","isIndex","Ctor","constructor","transform","arg","overArg","isArrayLike","arrayLikeKeys","isPrototype","nativeKeys","baseKeys","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","mapTag","promiseTag","setTag","weakMapTag","dataViewTag","dataViewCtorString","DataView","mapCtorString","promiseCtorString","Promise","setCtorString","Set","weakMapCtorString","WeakMap","getTag","ArrayBuffer","resolve","ctorString","argsTag","arrayTag","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","Stack","equalArrays","byteLength","byteOffset","buffer","name","message","convert","mapToArray","setToArray","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","objStacked","skipCtor","objValue","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsEqual","isReactive","reactive","val","Error","props","sourceObject","emit","bound","filtered","filter","isEqual","immediate","from","Reactive","containersKey","containers","nonNull","inject","container","svg","svgPanZoom","target","v","fromEntries","k","NodeLabelDirection2","callback","self2","assign","obj","keys2","delete","node","style","scale","shape","Config","normal","width","radius","height","nodePos","nodeSize","targetNodePos","targetNodeSize","collisionX","Math","abs","x","collisionY","y","dasharray","split","parseInt","isNaN","join","reduce","s","NodeLabelDirection","find","reWhitespace","reTrimStart","slice","charAt","trimmedEndIndex","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isSymbol","baseTrim","isBinary","INFINITY","toNumber","toFinite","remainder","symbolToString","arrayMap","baseToString","nativeIsFinite","isFinite","nativeMin","min","round","methodName","number","precision","toInteger","pair","createRound","activate","parameters","layouts","nodes","configs","emitter","onDrag","id","pos","positions","layout","getOrCreateNodePosition","setNodePosition","setNewNodePositions","nodeIds","newNodes","area","svgPanZoom2","getViewArea","nodeId","getNodeSize","candidate","__spreadValues","center","collision","targetNode","areNodesCollision","box","right","stopNodeWatch","watch","on","onDeactivate","off","deactivate","nodeLayout","toRef","defineProperty","configurable","enumerable","writable","fromRight","iterable","Buffer2","allocUnsafe","typedArray","isDeep","arrayBuffer","objectCreate","create","proto","getPrototypeOf","objectCtorString","nativeKeysIn","isProto","baseKeysIn","source","isNew","newValue","copyObject","keysIn","srcIndex","mergeFunc","safeGet","srcValue","isCommon","isTyped","copyArray","copy","cloneBuffer","cloneTypedArray","getPrototype","isPlainObject","toPlainObject","baseCreate","initCloneObject","baseMerge","thisArg","args","apply","nativeMax","max","baseSetToString","identity","nativeNow","Date","now","setToString","count","lastCalled","stamp","remaining","shortOut","start","otherArgs","overRest","assigner","baseRest","sources","guard","isIterateeCall","view","scalingObjects","panEnabled","zoomEnabled","minZoomLevel","maxZoomLevel","fit","layoutHandler","SimpleLayout","onSvgPanZoomInitialized","grid","visible","interval","thickIncrements","line","color","thick","withSelf","borderRadius","strokeWidth","strokeColor","strokeDasharray","hover","selected","draggable","selectable","label","fontFamily","fontSize","lineHeight","background","margin","direction","SOUTH","text","focusring","padding","transition","edge","linecap","animate","animationSpeed","w","gap","marker","units","summarize","_edges","summarized","stroke","keepOrder","path","clickable","curveInNode","end","list","p","edges","a","b","charCodeAt","linejoin","injectionKey","injectConfig","markers","referenceCount","markersKey","m","isSource","previousId","customId","headMarker","__spreadProps","toHeadMarker","state","edgeLayoutPoints","edgeGroups","summarizedEdges","sort","calcGap","_e","_c","edges2","edgeLen","edgeId","pointInGroup","groupWidth","lineHalfWidths","edge2","points","edgeId2","i","pointInGroup2","calculateEdgeGroupAndPositions","defaultCheckSummarize","id2","flatMap","x1","y1","x2","y2","calculateLinePosition","dx","dy","diff","radian","atan2","perpendicular","PI","sign","moveSlope","diffX","sqrt","pow","Victor","fromArray","arr","fromObject","addX","vec","addY","addScalar","scalar","addScalarX","addScalarY","subtractX","subtractY","subtract","subtractScalar","subtractScalarX","subtractScalarY","divideX","vector","divideY","divide","divideScalar","divideScalarX","divideScalarY","invertX","invertY","invert","multiplyX","multiplyY","multiply","multiplyScalar","multiplyScalarX","multiplyScalarY","normalize","norm","limit","factor","randomize","topLeft","bottomRight","randomizeX","randomizeY","random","randomizeAny","unfloat","toFixed","mixX","amount","mixY","mix","clone","copyX","copyY","zero","dot","vec2","cross","projectOnto","coeff","horizontalAngle","horizontalAngleDeg","radian2degrees","verticalAngle","verticalAngleDeg","angle","angleDeg","rotate","nx","cos","sin","ny","rotateDeg","degrees2radian","rotateTo","rotation","rotateToDeg","rotateBy","rotateByDeg","distanceX","absDistanceX","distanceY","absDistanceY","distance","distanceSq","lengthSq","magnitude","isZero","isEqualTo","toArray","toObject","degrees","floor","rad","deg","Vector","toLineVector","sourcePos","targetPos","lp","fromVectors","h","getNearestPoint","hpLen","t","__pow","tv","line1","line2","p2","v1","v2","t2","center1","radius1","center2","radius2","near","c1","vC1C2","sumR","subR","isLarge","c","rc","rs","n1","n2","tn1","sn2","result1","result2","calculateDistance","pos1","pos2","matchData","isStrictComparable","getMatchData","matchesStrictComparable","noCustomizer","COMPARE_PARTIAL_FLAG","baseIsMatch","reIsDeepProp","reIsPlainProp","resolver","TypeError","memoized","cache","Cache","rePropName","reEscapeChar","stringToPath","memoize","memoizeCapped","match","quote","subString","isKey","castPath","toKey","hasFunc","hasPath","baseHasIn","defaultValue","baseGet","hasIn","basePropertyDeep","comparator","current","computed","baseExtremum","baseMatchesProperty","baseMatches","property","baseLt","p1","rect","centerLine","V.fromPositions","left","top","bottom","vertexes","V.Vector","hypo","minP","V.getNearestPoint","V.toLineVector","linePos","sourceMargin","targetMargin","normalized","sv","check","c2","applyMarginToLineInner","V.fromLinePosition","theta","theta0","control","centerToSource","V.fromVectors","centerToTarget","V.calculateRelativeAngleRadian","reverseAngleRadian","middle","moveOnCircumference","centerToMp","mpTangent","V.calculatePerpendicularLine","theta1","tangent","cp","V.getIntersectionPointOfLines","mp","tangent2","cp1","cp2","theta2","statesKey","NONE_MARKER","config","states","hovered","getNodeStaticShape","getNodeShape","staticShape","labelText","unref","groupStates","nodeStates","curve","origin","labelPosition","position","stopWatchHandle","getEdgeStroke","normalWidth","toEdgeMarker","edgeLayoutPoint","isEdgeSummarized","stopCalcHandle","watchEffect","sourceShape","targetShape","shiftedPosition","isSummarized","calculateEdgePositionInner","EdgeGroup.calculateEdgeShiftedPosition","sourceShapeMargin","targetShapeMargin","sourceNodePos","sourceNodeShape","targetNodeShape","distance1","distance2","calculateDistanceToAvoidOverlapsWithRect","v2d.calculateDistancesFromCenterOfNodeToEndOfNode","v2d.applyMarginToLine","l","v2d.positionsToLinePosition","shift","originPosition","shifted","shiftedCenter","V.getCenterOfLinePosition","p3","x3","y3","x12","y12","x32","y32","V.calculateCircleCenterAndRadiusBy3Points","centerToTop","sourceMoveRad","targetMoveRad","v2d.moveOnCircumference","v2d.reverseAngleRadian","V.toVectorsFromLinePosition","v2d.calculateBezierCurveControlPoint","circle","calculateCurvePositionAndState","stopUpdateMarkerHandle","sourceMarkerId","makeMarker","targetMarkerId","mouseEventHandlersKey","nodePositions","zoomLevel","edgeStates","selectedNodes","selectedEdges","hoveredNodes","hoveredEdges","addEventListener","handleContainerPointerDownEvent","passive","removeEventListener","moveCounter","pointerCounter","nodePointers","follow","followedPointerId","nodeBasePositions","hoveredNodesPre","edgePointers","edgePointerPeekCount","containerPointerHandlers","pointermove","_","pointerup","handleContainerPointerUpEvent","pointercancel","nodePointerHandlers","event","preventDefault","stopPropagation","pointerState","pointerId","latestPosition","pageX","pageY","MOVE_DETECTION_THRESHOLD","draggingNodes2","_calculateNodeNewPosition","dragBasePosition","draggingNodes","shiftKey","isTouchAnySelectedNode","MapUtil","ev","handler","edgePointerHandlers","isTouchAnySelectedEdge","pointerState2","isFollowed","isSelectedNode","removed","followed","userGrabs","includes","_unwrapNodePosition","nodeBasePosition","z","provides","handleNodePointerDownEvent","handleNodePointerOverEvent","handleNodePointerOutEvent","handleEdgePointerDownEvent","handleEdgePointerOverEvent","handleEdgePointerOutEvent","eventEmitterKey","all","indexOf","utilities","getGlobalThis","globalThis","window","extend","prop","isElement","o","HTMLElement","SVGElement","SVGSVGElement","nodeName","isNumber","parseFloat","getSvg","elementOrSelector","element","document","querySelector","tagName","toLowerCase","contentDocument","documentElement","getSVGDocument","proxy","fn","context","getType","mouseAndTouchNormalize","evt","clientX","clientY","touches","getBoundingClientRect","originalEvent","touchNormalize","touch","isDblClick","prevEvt","detail","timeStampDiff","timeStamp","touchesDistance","getTime","throttle","wait","options","that","timeout","previous","later","leading","trailing","setTimeout","createRequestAnimationFrame","refreshRate","requestAnimationFrame","requestTimeout","point1","point2","Utils","require$$0","uniwheel","_addEventListener","_removeEventListener","support","prefix","fns","passiveTrueOption","passiveFalseOption","createElement","onmousewheel","elem","eventName","isPassiveListener","cb","getSupport","srcElement","deltaMode","deltaX","delatZ","returnValue","deltaY","wheelDelta","wheelDeltaX","createCallback","getCallback","_browser","documentMode","svgUtilities","svgNS","xmlNS","xmlnsNS","xlinkNS","evNS","getBoundingClientRectNormalized","clientWidth","clientHeight","getOrCreateViewport","selector","viewport","childNodes","children","el","getAttribute","viewportId","toISOString","createElementNS","setAttribute","svgChildren","appendChild","classNames","setupSvgAttributes","setAttributeNS","parentNode","internetExplorerRedisplayInterval","refreshDefsGlobal","allDefs","querySelectorAll","allDefsCount","thisDefs","insertBefore","setCTM","matrix","defs","d","f","getEventPoint","point","createSVGPoint","getTouchPoint","getSvgCenterPoint","SvgUtils","controlIcons","enable","instance","textContent","zoomGroup","_createZoomIn","_createZoomReset","_createZoomOut","zoomIn","getPublicInstance","zoomInBackground","zoomInShape","resetPanZoomControl","reset","resetPanZoomControlBackground","resetPanZoomControlShape1","resetPanZoomControlShape2","zoomOut","zoomOutBackground","zoomOutShape","disable","removeChild","require$$1","ShadowViewport","init","originalState","zoom","activeState","updateCTMCached","updateCTM","viewBox","cacheViewBox","newCTM","processCTM","svgViewBox","viewBoxValues","updateCTMOnNextFrame","removeAttribute","simpleViewBoxCache","bBox","getBBox","getViewBox","newScale","getCTM","contain","offsetX","offsetY","getOriginalState","getState","getZoom","getRelativeZoom","computeRelativeZoom","getPan","safeCTM","createSVGMatrix","willZoom","isZoomDifferent","willPan","isPanDifferent","beforeZoom","updateCache","onZoom","preventPan","beforePan","preventPanX","preventPanY","onPan","pendingUpdate","ctm","onUpdatedCTM","Wheel","ControlIcons","require$$2","require$$3","SvgPanZoom","optionsDefaults","viewportSelector","controlIconsEnabled","dblClickZoomEnabled","mouseWheelZoomEnabled","preventMouseEventsDefault","zoomScaleSensitivity","minZoom","maxZoom","customEventsHandler","eventsListenerElement","passiveListenerTrueOption","passiveListenerFalseOption","boundingClientRectNormalized","oldScale","oldPoint","newPoint","publicInstance","setBeforeZoom","setOnZoom","setBeforePan","setOnPan","setOnUpdatedCTM","lastMouseWheelEventTime","setupHandlers","eventListeners","mousedown","handleMouseDown","touchstart","handleTouchStart","mouseup","handleMouseUp","touchend","handleTouchEnd","mousemove","handleMouseMove","touchmove","handleTouchMove","mouseleave","touchleave","touchcancel","svgElement","haltEventListeners","enableMouseWheelZoom","wheelListener","handleMouseWheel","disableMouseWheelZoom","delta","timeDelta","divider","log","inversedScreenCTM","getScreenCTM","inverse","relativeMousePoint","matrixTransform","zoomAtPoint","zoomScale","zoomAbsolute","oldCTM","relativePoint","modifier","translate","absolute","publicZoom","computeFromRelativeZoom","publicZoomAtPoint","resetZoom","resetPan","pan","handleDblClick","zoomFactor","firstEventCTM","stateOrigin","viewportCTM","touch1","touch2","firstDistance","firstZoomLevel","relativeTouchPoint","updateBBox","panBy","resize","disableControlIcons","enableControlIcons","destroy","instancesStore","pi","enablePan","disablePan","isPanEnabled","enableZoom","disableZoom","isZoomEnabled","isControlIconsEnabled","enableDblClickZoom","disableDblClickZoom","isDblClickZoomEnabled","isMouseWheelZoomEnabled","setZoomScaleSensitivity","setMinZoom","setMaxZoom","zoomBy","zoomAtPointBy","getSizes","realZoom","svgPanZoom_1","methods","fitToContents","sizes","getRealZoom","applyAbsoluteZoomLevel","originalZoom","_isPanEnabled","_internalEnablePan","_internalDisablePan","_isZoomEnabled","_internalEnableZoom","_internalDisableZoom","setPanEnabled","enabled","setZoomEnabled","userInit","userDestroy","_internalIsPanEnabled","_internalIsZoomEnabled","State","State2","ref","mountedCallbacks","unmountedCallbacks","onSvgPanZoomMounted","onSvgPanZoomUnmounted","zoomLevelKey","LayerPositions","useZoomLevel","baseX","baseY","applyScaleToDasharray","element2","transform2","bbox","attrs","useAttrs","texts","topDeltaY","dominantBaseline","backgroundRectPos","paddingVertical","paddingHorizontal","vertical","horizontal","lineMargin","observer","updateObserver","observer2","MutationObserver","observe","attributes","attributeFilter","enableMutationObserver","disconnect","prev","sfc","useNodeConfig","useMouseOperation","labelVisibility","labelMargin","CENTER","labelShiftV","labelShiftH","labelDiagonalShiftV","labelDiagonalShiftH","diagonalMargin","textAnchor","NORTH","EAST","NORTH_EAST","SOUTH_EAST","WEST","NORTH_WEST","SOUTH_WEST","labelX","labelY","shapeConfig","shapeStyle","speed","getDasharrayUnit","nativeCeil","ceil","baseSlice","pathD","useEdgeConfig","useStates","centerPos","edgeGroupStates","edgeConfig","indivisualEdgeGroups","group","labelAreaPosition","edgeStyle","vMargin","sourceAbove","sourceBelow","targetAbove","targetBelow","above","below","v2d.calculateEdgeLabelArea","nodeShape","useContainers","updateAttributes","bgLayer","vpLayer","attr","records","attributeName","Boolean","vp","useEventEmitter","basePoint","thickVerticals","thickHorizontals","normalVerticals","normalHorizontals","thickH","thickV","normalH","normalV","gi","maxWidth","maxHeight","inc","normalDasharray","thickDasharray","thickAttrs","normalAttrs","pathConfig","usePathConfig","move","EPSILON","Number","pathList","paths","calcPathPoints","nodeStates2","nodeLayouts","edgeStates2","scale2","pathEndType","directions","lastNode","isForward","edge0","edge1","_detectDirectionsOfPathEdges","edgePos","v2d.inverseLine","_getEdgeLine","isMarginOverRunStart","isMarginOverRunEnd","firstEdge","nodeRadius","_getNodeRadius","nextPoint","_calculateEdgeOfNode","V.calculateDistance","next","crossPoint","_getIntersectionOfLines","nodeCoreRadius","prevCoreIp","_getIntersectionOfLineAndNode","nextCoreIp","prevNodeIp","nextNodeIp","findFirstNonNull","lastPoints","lastPoint","lastEdge","unshift","_calculatePathPoints","emitPathClicked","moveRad","V.getIntersectionOfLineTargetAndCircle","V.getIntersectionOfCircles","nearBy","ip1","ip2","d1","d2","V.getIntersectionOfLineTargetAndCircle2","prevSlope","_getSlope","nextSlope","nodeCenter","targetSide","arrowPoints","angleStroke","anglePoints","arrow","VMarkerHeadArrow","VMarkerHeadAngle","VMarkerHeadCircle","refX","SYSTEM_SLOTS","_sfc_main","defineComponent","components","VNode","VNodeFocusRing","VEdgeGroups","VEdgeBackgrounds","VEdgeLabels","VBackgroundViewport","VBackgroundGrid","VPaths","VMarkerHead","default","layers","eventHandlers","emits","setup","slots","provideEventEmitter","results","getConfigDefaults","styleKeys","deep","provideConfigs","layerDefs","definedSlots","accum","isShowGrid","isShowBackgroundViewport","overrideNodes","overrideNodeLabels","overrideEdgeLabels","show","prop2","update","bindProp","useSvgPanZoom","rectSize","resizeObserver","ResizeObserver","r","absoluteZoomLevel","viewStyle","provideZoomLevel","initialZoomLevel","updateBorderBox","panToCenter","currentSelectedNodes","bindPropKeySet","currentSelectedEdges","currentLayouts","visibleNodeFocusRing","markers2","dragging","mode","nodes2","append","idSet","EdgeGroup.makeEdgeGroupStates","provideStates","readonly","visiblePaths","activateParams","newHandler","oldHandler","svg2","allConfigs","panTo","getAsSvg","cloneNode","outerHTML","replaceAll","_hoisted_1","class","_createElementBlock","_normalizeClass","_Fragment","_renderSlot","_ctx","layerName","_hoisted_2","_openBlock","_createCommentVNode","_component_v_background_viewport","_hoisted_3","_createVNode","_component_v_edge_backgrounds","_createBlock","_component_v_edge_labels","_withCtx","_TransitionGroup","css","_createSlots","slotProps","align","verticalAlign","degree","updatedConfig","app","componentName","component"],"mappings":"q7BAgCYA,EAAOC,UACVD,IAAUC,GAAUD,GAAUA,GAASC,GAAUA,aCvBpCC,EAAOC,WACvBC,EAASF,EAAME,OACZA,QACDC,EAAGH,EAAME,GAAQ,GAAID,UAChBC,eCRTE,EAHaC,MAAMC,UAGCF,kBCOLG,OACbC,KACAN,EAAoB,MAAXK,EAAkB,EAAIA,EAAQL,gBAEtCO,UACID,EAAQN,GAAQ,KACnBQ,EAAQH,EAAQC,QACfG,IAAID,EAAM,GAAIA,EAAM,OAKnBJ,UAAUG,sBCjBbG,SAAW,QACXC,KAAO,KDiBJP,0BDTeL,OACnBa,EAAOC,KAAKH,SACZJ,EAAQQ,EAAaF,EAAMb,WAE3BO,EAAQ,KAIRA,GADYM,EAAKZ,OAAS,IAEvBe,QAEEC,KAAKJ,EAAMN,EAAO,KAEzBO,KAAKF,MACA,MCJCP,UAAUa,aEhBElB,OAChBa,EAAOC,KAAKH,SACZJ,EAAQQ,EAAaF,EAAMb,UAExBO,EAAQ,OAAI,EAAYM,EAAKN,GAAO,MFanCF,UAAUc,aGjBEnB,UACbe,EAAaD,KAAKH,SAAUX,SHiB3BK,UAAUK,aIjBEV,EAAKH,OACrBgB,EAAOC,KAAKH,SACZJ,EAAQQ,EAAaF,EAAMb,UAE3BO,EAAQ,KACRO,KAAKF,OACFQ,KAAK,CAACpB,EAAKH,OAEXU,GAAO,GAAKV,EAEZiB,YCrByB,iBAAVO,QAAsBA,QAAUA,OAAOC,SAAWA,QAAUD,OCEhFE,EAA0B,iBAARC,MAAoBA,MAAQA,KAAKF,SAAWA,QAAUE,OAGjEC,GAAcF,GAAYG,SAAS,cAATA,KCHxBC,EAAKC,OCAdC,EAAcP,OAAOjB,UAGrByB,EAAiBD,EAAYC,eAO7BC,EAAuBF,EAAYG,SAGnCC,EAAiBL,EAASA,EAAOM,iBAAc,MCR/CH,EAPcT,OAAOjB,UAOc2B,aCCnCC,EAAiBL,EAASA,EAAOM,iBAAc,aAS/BrC,UACL,MAATA,OACe,IAAVA,EAdQ,qBADL,gBAiBJoC,GAAkBA,KAAkBX,OAAOzB,YFGlCA,OACbsC,EAAQL,EAAeb,KAAKpB,EAAOoC,GACnCG,EAAMvC,EAAMoC,SAGRA,QAAkB,MACpBI,GAAW,QACRC,QAELC,EAASR,EAAqBd,KAAKpB,UACnCwC,IACEF,IACIF,GAAkBG,SAEjBvC,EAAMoC,IAGVM,EEnBHC,CAAU3C,YDNQA,UACfkC,EAAqBd,KAAKpB,GCM7B4C,CAAe5C,cCCHA,OACZ6C,SAAc7C,SACF,MAATA,IAA0B,aAAoB,YAAR6C,cCD3B7C,OACb8C,EAAS9C,UACL,MAILuC,EAAMQ,EAAW/C,SA3BT,qBA4BLuC,GA3BI,8BA2BcA,GA7BZ,0BA6B6BA,GA1B7B,kBA0BgDA,MC7BzDS,ICDWlB,EAAK,sBDAlBmB,GACED,EAAM,SAASE,KAAKC,GAAcA,EAAWC,MAAQD,EAAWC,KAAKC,UAAY,KACvE,iBAAmBL,EAAO,OEDtCM,EAHYzB,SAASrB,UAGI2B,oBASXoB,MACJ,MAARA,EAAc,YAEPD,EAAalC,KAAKmC,SAClBd,eAECc,EAAO,SACRd,WAEJ,OCVLe,EAAe,8BAGfC,EAAY5B,SAASrB,UACrBwB,EAAcP,OAAOjB,UAGrB8C,EAAeG,EAAUtB,SAGzBF,EAAiBD,EAAYC,eAG7ByB,EAAaC,OAAO,IACtBL,EAAalC,KAAKa,GAAgB2B,QAjBjB,sBAiBuC,QACvDA,QAAQ,yDAA0D,SAAW,gBAW1D5D,YACf8C,EAAS9C,KHxBEuD,EGwBiBvD,EHvBxBiD,GAAeA,KAAcM,MG0BxBM,EAAW7D,GAAS0D,EAAaF,GAChCM,KAAKC,EAAS/D,QH5BbuD,aIJCS,EAAQ7D,OACrBH,WCJYgE,EAAQ7D,UACP,MAAV6D,OAAiB,EAAYA,EAAO7D,GDG/B8D,CAASD,EAAQ7D,UACtB+D,EAAalE,GAASA,OAAQ,QET7BmE,EAAUrC,EAAM,SCDPqC,EAAU1C,OAAQ,cCMjCQ,EAHcR,OAAOjB,UAGQyB,mBCH7BA,EAHcR,OAAOjB,UAGQyB,0BCOnBxB,OACRC,KACAN,EAAoB,MAAXK,EAAkB,EAAIA,EAAQL,gBAEtCO,UACID,EAAQN,GAAQ,KACnBQ,EAAQH,EAAQC,QACfG,IAAID,EAAM,GAAIA,EAAM,gBCVTwD,EAAKjE,OCHNH,EACb6C,EDGA7B,EAAOoD,EAAItD,gBCFC,WADZ+B,SADa7C,EDKAG,KCHmB,UAAR0C,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAV7C,EACU,OAAVA,GDEDgB,EAAmB,iBAAPb,EAAkB,SAAW,QACzCa,EAAKoD,eEDO3D,OACZC,KACAN,EAAoB,MAAXK,EAAkB,EAAIA,EAAQL,gBAEtCO,UACID,EAAQN,GAAQ,KACnBQ,EAAQH,EAAQC,QACfG,IAAID,EAAM,GAAIA,EAAM,OHKxBJ,UAAUG,sBIfRG,SAAWuD,EAAeA,EAAa,MAAQ,QAC/CtD,KAAO,KJeTP,0BKhBeL,OACduC,EAASzB,KAAKK,IAAInB,WAAec,KAAKH,SAASX,eAC9CY,MAAQ2B,EAAS,EAAI,EACnBA,KLcJlC,UAAUa,aFPElB,OACXa,EAAOC,KAAKH,YACZuD,EAAc,KACZ3B,EAAS1B,EAAKb,SApBD,8BAqBVuC,OAA4B,EAAYA,SAE1CT,EAAeb,KAAKJ,EAAMb,GAAOa,EAAKb,QAAO,KEEjDK,UAAUc,aDXEnB,OACXa,EAAOC,KAAKH,gBACTuD,OAA8B,IAAdrD,EAAKb,GAAsB8B,EAAeb,KAAKJ,EAAMb,MCUzEK,UAAUK,aMdEV,EAAKH,OAChBgB,EAAOC,KAAKH,qBACXC,MAAQE,KAAKK,IAAInB,GAAO,EAAI,IAC5BA,GAAQkE,QAA0B,IAAVrE,EAfV,4BAekDA,EAC9DiB,QHMAT,UAAUG,sBIbZI,KAAO,OACPD,SAAW,CACdwD,KAAQ,IAAIC,EACZH,IAAO,OAAYI,GACnBC,OAAU,IAAIF,MJUT/D,0BKfeL,OAClBuC,EAASgC,EAAWzD,KAAMd,UAAeA,eACxCY,MAAQ2B,EAAS,EAAI,EACnBA,KLaAlC,UAAUa,aMhBElB,UACZuE,EAAWzD,KAAMd,GAAKkB,IAAIlB,MNgB1BK,UAAUc,aOjBEnB,UACZuE,EAAWzD,KAAMd,GAAKmB,IAAInB,MPiB1BK,UAAUK,aQjBEV,EAAKH,OACpBgB,EAAO0D,EAAWzD,KAAMd,GACxBY,EAAOC,EAAKD,cAEXF,IAAIV,EAAKH,QACTe,MAAQC,EAAKD,MAAQA,EAAO,EAAI,EAC9BE,iBCJMR,OACTO,EAAOC,KAAKH,SAAW,IAAI0D,EAAU/D,QACpCM,KAAOC,EAAKD,OAIbP,UAAUG,sBCVTG,SAAW,IAAI0D,OACfzD,KAAO,KDURP,0BEZeL,OACfa,EAAOC,KAAKH,SACZ4B,EAAS1B,SAAeb,eAEvBY,KAAOC,EAAKD,KACV2B,KFQHlC,UAAUa,aGbElB,UACTc,KAAKH,SAASO,IAAIlB,MHarBK,UAAUc,aIdEnB,UACTc,KAAKH,SAASQ,IAAInB,MJcrBK,UAAUK,aKPEV,EAAKH,OACjBgB,EAAOC,KAAKH,YACZE,aAAgBwD,EAAW,KACzBG,EAAQ3D,EAAKF,aACZ8D,GAAQD,EAAMvE,OAASyE,aACpBtD,KAAK,CAACpB,EAAKH,SACZe,OAASC,EAAKD,KACZE,OAEFA,KAAKH,SAAW,IAAIgE,EAASH,YAEjC9D,IAAIV,EAAKH,QACTe,KAAOC,EAAKD,KACVE,iBClBS8D,OACZrE,KACAN,EAAmB,MAAV2E,EAAiB,EAAIA,EAAO3E,gBAEpCU,SAAW,IAAIgE,IACXpE,EAAQN,QACV4E,IAAID,EAAOrE,eCRDR,EAAO+E,WACpBvE,KACAN,EAAkB,MAATF,EAAgB,EAAIA,EAAME,SAE9BM,EAAQN,MACX6E,EAAU/E,EAAMQ,GAAQA,EAAOR,UAC1B,SAGJ,IDIAM,UAAUwE,IAAME,EAAS1E,UAAUe,cEVvBvB,eACdc,SAASD,IAAIb,EAbC,6BAcZiB,QFSAT,UAAUc,aGfEtB,UACZiB,KAAKH,SAASQ,IAAItB,eCWNE,EAAOD,EAAOkF,EAASC,EAAYC,EAAWC,OAC7DC,EAjBqB,EAiBTJ,EACZK,EAAYtF,EAAME,OAClBqF,EAAYxF,EAAMG,UAElBoF,GAAaC,QAA4BA,EAAYD,UAChD,MAGLE,EAAaJ,EAAMjE,IAAInB,GACvByF,EAAaL,EAAMjE,IAAIpB,MACvByF,GAAcC,SACTD,GAAczF,GAAS0F,GAAczF,MAE1CQ,KACAgC,GAAS,EACTkD,EA/BuB,EA+BfT,EAAoC,IAAID,OAAW,QAEzDrE,IAAIX,EAAOD,KACXY,IAAIZ,EAAOC,KAGRQ,EAAQ8E,GAAW,KACtBK,EAAW3F,EAAMQ,GACjBoF,EAAW7F,EAAMS,MAEjB0E,MACEW,EAAWR,EACXH,EAAWU,EAAUD,EAAUnF,EAAOT,EAAOC,EAAOoF,GACpDF,EAAWS,EAAUC,EAAUpF,EAAOR,EAAOD,EAAOqF,WAEzC,IAAbS,EAAwB,IACtBA,cAGK,WAIPH,OACGI,EAAU/F,GAAO,SAASgG,EAAUC,MCrDtB/F,EDsDO+F,GAANN,ECrDXtE,IAAInB,SDsDW8F,GAAYZ,EAAUQ,EAAUI,EAAUd,EAASC,EAAYE,WACxEM,EAAKrE,KAAK2E,OCxDN/F,KD0DX,IACG,qBAIM2F,IACXT,EAAUQ,EAAUC,EAAUX,EAASC,EAAYE,GACpD,IACI,yBAIGpF,YACAD,GACTyC,QE7EQZ,EAAKqE,sBCIF/B,OACd1D,KACAgC,EAASnC,MAAM6D,EAAIrD,eAEnBqF,SAAQ,SAASpG,EAAOG,OACjBO,GAAS,CAACP,EAAKH,MAEnB0C,aCPW7B,OACdH,KACAgC,EAASnC,MAAMM,EAAIE,eAEnBqF,SAAQ,SAASpG,OACVU,GAASV,KAEb0C,MCYL2D,EAActE,EAASA,EAAOvB,eAAY,EAC1C8F,EAAgBD,EAAcA,EAAYE,aAAU,QCJ1ChG,MAAMiG,YChBhBC,EAHchF,OAAOjB,UAGciG,qBAGnCC,EAAmBjF,OAAOkF,wBASZD,EAA+B,SAAS1C,UAC1C,MAAVA,EACK,MAEAvC,OAAOuC,YCdG9D,EAAO+E,WACtBvE,KACAN,EAAkB,MAATF,EAAgB,EAAIA,EAAME,OACnCwG,EAAW,EACXlE,EAAS,KAEJhC,EAAQN,GAAQ,KACnBJ,EAAQE,EAAMQ,GACduE,EAAUjF,EAAOU,EAAOR,OACnB0G,KAAc5G,UAGlB0C,EDGAmE,CAAYH,EAAiB1C,IAAS,SAAS8C,UAC7CL,EAAqBrF,KAAK4C,EAAQ8C,yBENpC,eCKa9G,UACJ,MAATA,GAAiC,iBAATA,aCZRA,UAChB+G,EAAa/G,IAVR,sBAUkB+C,EAAW/C,OCVvCgC,GAAcP,OAAOjB,UAGrByB,GAAiBD,GAAYC,eAG7BwE,GAAuBzE,GAAYyE,qBAoBnCO,GAAcC,EAAgB,kBAAoBC,UAApB,IAAsCD,EAAkB,SAASjH,UAC1F+G,EAAa/G,IAAUiC,GAAeb,KAAKpB,EAAO,YACtDyG,GAAqBrF,KAAKpB,EAAO,cAGvBgH,OC/BXG,GAAgC,iBAAXC,GAAuBA,IAAYA,EAAQC,UAAYD,EAG5EE,GAAaH,IAAgC,iBAAVI,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFC,GAHgBF,IAAcA,GAAWG,UAAYN,GAG5BrF,EAAK0F,YAAS,MAGtBA,GAASA,GAAOE,cAAW,sBCFvC,GCVLC,GAAW,+BAUE3H,EAAOI,OAClByC,SAAc7C,aACC,MAAVI,EAfY,iBAewBA,KAGlC,aACE,UAARyC,GAAoB8E,GAAS7D,KAAK9D,WAClBA,EAAQ,GAAK,GAAKA,EAAQI,cCQ/BJ,SACO,iBAATA,GACZA,MAAcA,EAAQ,GAAK,GAAKA,GA9Bb,qBC+BnB4H,GAAiB,MAXJ,yBAYYA,GAXZ,yBAYjBA,GAXc,sBAWYA,GAVX,uBAWfA,GAVe,uBAUYA,GATZ,uBAUfA,GATsB,8BASYA,GARlB,wBAShBA,GARgB,yBAQY,KAhCd,sBAiCYA,GAhCX,kBAiCfA,GApBqB,wBAoBYA,GAhCnB,oBAiCdA,GApBkB,qBAoBYA,GAhChB,iBAiCdA,GAhCe,kBAgCYA,GA/Bb,qBAgCdA,GA/Ba,gBA+BYA,GA9BT,mBA+BhBA,GA9BgB,mBA8BYA,GA7BZ,mBA8BhBA,GA7Ba,gBA6BYA,GA5BT,mBA6BhBA,GA5BiB,qBA4BY,MCtCVrE,GCJf4D,GAAgC,iBAAXC,GAAuBA,IAAYA,EAAQC,UAAYD,EAG5EE,GAAaH,IAAgC,iBAAVI,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFM,GAHgBP,IAAcA,GAAWG,UAAYN,IAGtBvF,EAAWkG,QAG1CC,GAAY,mBAGRC,EAAQV,IAAcA,GAAWW,SAAWX,GAAWW,QAAQ,QAAQD,aAEvEA,GAKGH,IAAeA,GAAYK,SAAWL,GAAYK,QAAQ,cAC1DzF,KAXK,GCVZ0F,GDwBWJ,IAAAA,GCxB6BK,gBAmBzBD,IFjBA5E,GEiB6B4E,GFhBvC,SAASnI,UACPuD,GAAKvD,cD6CUA,UACjB+G,EAAa/G,IAClBqI,GAASrI,EAAMI,WAAawH,GAAe7E,EAAW/C,KI7CtDiC,GAHcR,OAAOjB,UAGQyB,2BAUVjC,EAAOsI,OACxBC,EAAQ/B,EAAQxG,GAChBwI,GAASD,GAASvB,GAAYhH,GAC9ByI,GAAUF,IAAUC,GAASd,GAAS1H,GACtC0I,GAAUH,IAAUC,IAAUC,GAAUL,GAAapI,GACrD2I,EAAcJ,GAASC,GAASC,GAAUC,EAC1ChG,EAASiG,WClBIC,EAAGC,WAChBnI,KACAgC,EAASnC,MAAMqI,KAEVlI,EAAQkI,KACRlI,GAASmI,EAASnI,UAEpBgC,EDWoBoG,CAAU9I,EAAMI,OAAQ2I,QAAU,GACzD3I,EAASsC,EAAOtC,eAEXD,KAAOH,OACIiC,GAAeb,KAAKpB,EAAOG,QAG/B,aAENsI,IAAkB,aAAmB,UAAPtI,IAE9BuI,IAAkB,aAAmB,cAAPvI,GAA8B,cAAPA,IAEtD6I,GAAQ7I,EAAKC,OAEXmB,KAAKpB,UAGTuC,ME5CLV,GAAcP,OAAOjB,sBASJR,OACfiJ,EAAOjJ,GAASA,EAAMkJ,mBAGnBlJ,KAFqB,mBAARiJ,GAAsBA,EAAKzI,WAAcwB,gBCJ9CuB,EAAM4F,UACd,SAASC,UACP7F,EAAK4F,EAAUC,YCPTC,GAAQ5H,OAAO2B,KAAM3B,QCIlCQ,GAHcR,OAAOjB,UAGQyB,2BCqBZjC,UACH,MAATA,GAAiBqI,GAASrI,EAAMI,UAAYyD,EAAW7D,eCGlDgE,UACLsF,GAAYtF,GAAUuF,GAAcvF,YFjB3BA,OACXwF,GAAYxF,UACRyF,GAAWzF,OAEhBtB,EAAS,WACJvC,KAAOsB,OAAOuC,GACjB/B,GAAeb,KAAK4C,EAAQ7D,IAAe,eAAPA,KAC/BoB,KAAKpB,UAGTuC,EEO8CgH,CAAS1F,eCtB5CA,mBCGIA,EAAQ2F,EAAUC,OACpClH,EAASiH,EAAS3F,UACfwC,EAAQxC,GAAUtB,WCRRxC,EAAO6E,WACpBrE,KACAN,EAAS2E,EAAO3E,OAChByJ,EAAS3J,EAAME,SAEVM,EAAQN,KACTyJ,EAASnJ,GAASqE,EAAOrE,UAE1BR,EDA2B4J,CAAUpH,EAAQkH,EAAY5F,IDJzD+F,CAAe/F,EAAQZ,GAAM4G,OGHlC/H,GAHcR,OAAOjB,UAGQyB,sBCLlBkC,EAAUrC,EAAM,eCAjBqC,EAAUrC,EAAM,cCApBqC,EAAUrC,EAAM,UCAZqC,EAAUrC,EAAM,WCK1BmI,GAAS,eAETC,GAAa,mBACbC,GAAS,eACTC,GAAa,mBAEbC,GAAc,oBAGdC,GAAqBvG,EAASwG,IAC9BC,GAAgBzG,EAASa,GACzB6F,GAAoB1G,EAAS2G,IAC7BC,GAAgB5G,EAAS6G,IACzBC,GAAoB9G,EAAS+G,IAS7BC,GAAShI,GAGRwH,IAAYQ,GAAO,IAAIR,GAAS,IAAIS,YAAY,MAAQX,IACxDzF,GAAOmG,GAAO,IAAInG,IAAQqF,IAC1BS,IAAWK,GAAOL,GAAQO,YAAcf,IACxCU,IAAOG,GAAO,IAAIH,KAAQT,IAC1BW,IAAWC,GAAO,IAAID,KAAYV,SAC5B,SAASpK,OACZ0C,EAASK,EAAW/C,GACpBiJ,EA/BQ,mBA+BDvG,EAAsB1C,EAAMkJ,iBAAc,EACjDgC,EAAajC,EAAOlF,EAASkF,GAAQ,MAErCiC,SACMA,QACDZ,UAA2BD,QAC3BG,UAAsBP,QACtBQ,UAA0BP,QAC1BS,UAAsBR,QACtBU,UAA0BT,UAG5B1H,WAIIqI,GC5CXI,GAAU,qBACVC,GAAW,iBACXC,GAAY,kBAMZpJ,GAHcR,OAAOjB,UAGQyB,2BAgBR+B,EAAQ/D,EAAOkF,EAASC,EAAYC,EAAWC,OAClEgG,EAAW9E,EAAQxC,GACnBuH,EAAW/E,EAAQvG,GACnBuL,EAASF,EAAWF,GAAWL,GAAO/G,GACtCyH,EAASF,EAAWH,GAAWL,GAAO9K,GAKtCyL,KAHKF,GAAUL,GAAUE,GAAYG,IAGhBH,GACrBM,KAHKF,GAAUN,GAAUE,GAAYI,IAGhBJ,GACrBO,EAAYJ,GAAUC,KAEtBG,GAAalE,GAAS1D,GAAS,KAC5B0D,GAASzH,UACL,KAEE,KACA,KAET2L,IAAcF,eACE,IAAIG,GACdP,GAAYlD,GAAapE,GAC7B8H,EAAY9H,EAAQ/D,EAAOkF,EAASC,EAAYC,EAAWC,YjCd/CtB,EAAQ/D,EAAOsC,EAAK4C,EAASC,EAAYC,EAAWC,UAC9D/C,OAxBQ,uBA0BPyB,EAAO+H,YAAc9L,EAAM8L,YAC3B/H,EAAOgI,YAAc/L,EAAM+L,kBACvB,IAEAhI,EAAOiI,SACRhM,EAAMgM,WAhCC,+BAmCVjI,EAAO+H,YAAc9L,EAAM8L,aAC3B1G,EAAU,IAAIc,EAAWnC,GAAS,IAAImC,EAAWlG,SA9C9C,uBACA,oBAGE,yBAoDHI,GAAI2D,GAAS/D,OAtDX,wBAyDF+D,EAAOkI,MAAQjM,EAAMiM,MAAQlI,EAAOmI,SAAWlM,EAAMkM,YAtDlD,sBAEA,yBA2DHnI,GAAW/D,EAAQ,OA/DnB,mBAkEHmM,EAAUC,MA/DP,mBAkEH9G,EA5EiB,EA4ELJ,WACMmH,GAElBtI,EAAOjD,MAAQd,EAAMc,OAASwE,SACzB,MAGLgH,EAAUjH,EAAMjE,IAAI2C,MACpBuI,SACKA,GAAWtM,KApFG,IAyFjBY,IAAImD,EAAQ/D,OACdyC,EAASoJ,EAAYM,EAAQpI,GAASoI,EAAQnM,GAAQkF,EAASC,EAAYC,EAAWC,mBAC1EtB,GACTtB,MAjFG,qBAoFN4D,SACKA,EAAclF,KAAK4C,IAAWsC,EAAclF,KAAKnB,UAGvD,EiC/CDuM,CAAWxI,EAAQ/D,EAAOuL,EAAQrG,EAASC,EAAYC,EAAWC,QAnD/C,KAqDc,KACjCmH,EAAef,GAAYzJ,GAAeb,KAAK4C,EAAQ,eACvD0I,EAAef,GAAY1J,GAAeb,KAAKnB,EAAO,kBAEtDwM,GAAgBC,EAAc,KAC5BC,EAAeF,EAAezI,EAAOhE,QAAUgE,EAC/C4I,EAAeF,EAAezM,EAAMD,QAAUC,eAEhC,IAAI4L,GACfxG,EAAUsH,EAAcC,EAAczH,EAASC,EAAYE,YAGjEsG,UAGa,IAAIC,YNtDF7H,EAAQ/D,EAAOkF,EAASC,EAAYC,EAAWC,OAC/DC,EAtBqB,EAsBTJ,EACZ0H,EAAWC,GAAW9I,GACtB+I,EAAYF,EAASzM,UAIrB2M,GAHWD,GAAW7M,GACDG,SAEMmF,SACtB,UAEL7E,EAAQqM,EACLrM,KAAS,KACVP,EAAM0M,EAASnM,UACDP,KAAOF,EAAQgC,GAAeb,KAAKnB,EAAOE,WACnD,MAIP6M,EAAa1H,EAAMjE,IAAI2C,GACvB2B,EAAaL,EAAMjE,IAAIpB,MACvB+M,GAAcrH,SACTqH,GAAc/M,GAAS0F,GAAc3B,MAE1CtB,GAAS,IACP7B,IAAImD,EAAQ/D,KACZY,IAAIZ,EAAO+D,WAEbiJ,EAAW1H,IACN7E,EAAQqM,GAAW,KAEtBG,EAAWlJ,IADT6I,EAASnM,IAEXoF,EAAW7F,EAAME,MAEjBiF,MACEW,EAAWR,EACXH,EAAWU,EAAUoH,EAAU/M,EAAKF,EAAO+D,EAAQsB,GACnDF,EAAW8H,EAAUpH,EAAU3F,EAAK6D,EAAQ/D,EAAOqF,aAGtC,MACV4H,IAAapH,GAAYT,EAAU6H,EAAUpH,EAAUX,EAASC,EAAYE,GAC7ES,GACD,IACI,cAGoB,eAAP5F,MAEtBuC,IAAWuK,EAAU,KACnBE,EAAUnJ,EAAOkF,YACjBkE,EAAUnN,EAAMiJ,YAGhBiE,GAAWC,qBACOpJ,MAAU,gBAAiB/D,IACzB,mBAAXkN,GAAyBA,aAAmBA,GACjC,mBAAXC,GAAyBA,aAAmBA,OAC9C,mBAGGpJ,YACA/D,GACTyC,EMPA2K,CAAarJ,EAAQ/D,EAAOkF,EAASC,EAAYC,EAAWC,gBC9DhDtF,EAAOC,EAAOkF,EAASC,EAAYE,UAClDtF,IAAUC,IAGD,MAATD,GAA0B,MAATC,IAAmB8G,EAAa/G,KAAW+G,EAAa9G,GACpED,GAAUA,GAASC,GAAUA,EAE/BqN,GAAgBtN,EAAOC,EAAOkF,EAASC,EAAYmI,GAAajI,gBCMxDtF,EAAOC,UACfsN,GAAYvN,EAAOC,eCJeD,UACrCwN,aAAWxN,GACNA,EAEAyN,WAASzN,eAQO0N,EAAgBxB,EAAO,gBAC5CwB,MAAAA,QACI,IAAIC,MAAM,GAAGzB,oBAEdwB,cCYPE,EACA1B,EACA2B,EACAC,SAIMC,EAAQN,WAAsB,IAAI7C,qBAEtC,IAAMgD,EAAM1B,KACZ,WAIQ8B,EADiBJ,EAAM1B,GACP+B,WAAYrF,KAAKiF,IAClCK,GAAQF,EAAUD,OACfpN,UACGyF,QAAQ2H,EAAM/I,IAAK+I,MAGhC,CAAEI,WAAW,YAETJ,GAAO,WACL7N,EAAQK,MAAM6N,KAAKL,GACpBG,GAAQN,EAAM1B,GAAOhM,MACnB,UAAUgM,IAAiBhM,MAG7BmO,GAASN,SCnEZO,GAAgBvM,OAAO,kCAOrBwM,EAAaC,GAAQC,SAAOH,IAAgB,oBAC3C,CACLI,UAAWH,EAAWG,UACtBC,IAAKJ,EAAWI,IAChBC,WAAYL,EAAWK,kCCfN5O,EAA4B6O,UACtC7O,aAAiB6B,SAAW7B,EAAM6O,GAAU7O,gBAGjCA,EAA6B6O,UACwB,IAAnEpN,OAAOsD,OAAO/E,GAAOiO,WAAYa,aAAajN,WAAUzB,OACnDJ,EAEFyB,OAAOsN,YACZtN,OAAOhB,QAAQT,GAAOoE,KAAI,EAAE4K,EAAGF,KAAO,CAACE,EAAGF,aAAajN,SAAWiN,EAAED,GAAUC,WA4FxEG,eA+H8CC,SAClDC,EAAO,UACN1N,OAAO2N,OAAOD,EAAMD,EAASC,gBC1OUE,UACvC5N,OAAOhB,QAAQ4O,eAGwCR,EAAWT,SACnEkB,EAAO,IAAI1E,IAAanJ,OAAO2B,KAAKyL,OAChCT,GAAMhI,SAAQ,EAAEjG,EAAKH,MACxBkO,GAAQW,EAAO1O,GAAMH,OACjBG,GAAOH,KAEXuP,OAAOpP,QAETiG,mBAAoByI,EAAOG,iBAGNQ,EAAYC,EAAmBC,SACnDC,EAAQC,GAAO7K,OAAO0K,EAAMI,OAAQL,SACxB,UAAdG,EAAM9M,KACD,CACLiN,MAAsB,EAAfH,EAAMI,OAAaL,EAC1BM,OAAuB,EAAfL,EAAMI,OAAaL,GAGtB,CACLI,MAAOH,EAAMG,MAAQJ,EACrBM,OAAQL,EAAMK,OAASN,eAM3BO,EACAC,EACAC,EACAC,SAIMC,EADYC,KAAKC,IAAIN,EAAQO,EAAIL,EAAcK,GACtBN,EAASJ,MAAQ,EAAIM,EAAeN,MAAQ,EAIrEW,EADYH,KAAKC,IAAIN,EAAQS,EAAIP,EAAcO,GACtBR,EAASF,OAAS,EAAII,EAAeJ,OAAS,SACtEK,GAAcI,cAGeE,EAAwCjB,OACxEhN,EAA0B,WAChB,IAAVgN,QAA6B,IAAdiB,GAAyC,SAAdA,QACnCA,IAAa,EACQ,iBAAdA,EACPA,EACNC,MAAM,OACNxM,QAASyM,SAAS/B,GAAKY,IACvBzB,YAAa6C,MAAMhC,KACnBiC,KAAK,KAECJ,EAAYjB,EAEhBhN,GAAqB,MAAXA,EAAiBA,OAAS,cAGZiO,OAC3BjO,EAA0B,UACZ,IAAdiO,GAAyC,SAAdA,IACpB,UACqB,iBAAdA,EAAwB,OAClCzQ,EAAQyQ,EACXC,MAAM,OACNxM,QAASyM,SAAS/B,KAClBb,YAAa6C,MAAMhC,OAClB5O,EAAME,OAAS,GAAM,EAEdF,EAAM8Q,QAAO,CAACC,EAAGrI,IAAMqI,EAAIrI,GAAG,GAGK,EAAnC1I,EAAM8Q,QAAO,CAACC,EAAGrI,IAAMqI,EAAIrI,GAAG,UAGpB,EAAZ+H,SAEJjO,+BDwBGuM,GAAAiC,2DACD,GAAT,qBACQ,GAAR,yBACa,GAAb,wBACO,GAAP,wBACa,GAAb,yBACQ,GAAR,yBACa,GAAb,wBACO,GAAP,wBACa,GAAb,qCC7BqB9M,UACZ7D,MAAM6N,KAAKhK,EAAIW,0BAMaA,UAC9BA,EAAOoM,WAAYrC,QCpGxBsC,GAAe,SCEfC,GAAc,mBASA5M,UACTA,EACHA,EAAO6M,MAAM,WDHM7M,WACnB/D,EAAQ+D,EAAOrE,OAEZM,KAAW0Q,GAAatN,KAAKW,EAAO8M,OAAO7Q,aAC3CA,ECDa8Q,CAAgB/M,GAAU,GAAGb,QAAQyN,GAAa,IAClE5M,cCQYzE,SACO,iBAATA,GACX+G,EAAa/G,IArBF,mBAqBY+C,EAAW/C,OCjBnCyR,GAAa,qBAGbC,GAAa,aAGbC,GAAY,cAGZC,GAAef,qBAyBD7Q,MACI,iBAATA,SACFA,KAEL6R,GAAS7R,UAzCL,OA4CJ8C,EAAS9C,GAAQ,KACfC,EAAgC,mBAAjBD,EAAMuG,QAAwBvG,EAAMuG,UAAYvG,IAC3D8C,EAAS7C,GAAUA,EAAQ,GAAMA,KAEvB,iBAATD,SACQ,IAAVA,EAAcA,GAASA,IAExB8R,GAAS9R,OACb+R,EAAWL,GAAW5N,KAAK9D,UACvB+R,GAAYJ,GAAU7N,KAAK9D,GAC/B4R,GAAa5R,EAAMsR,MAAM,GAAIS,EAAW,EAAI,GAC3CN,GAAW3N,KAAK9D,GAvDb,KAuD6BA,MCzDnCgS,GAAW,EAAA,cCyBIhS,OACb0C,WDAY1C,UACXA,KAGGiS,GAASjS,MACHgS,IAAYhS,KAAU,EAAA,EA9BpB,uBA+BFA,EAAQ,KAAS,GAGxBA,GAAUA,EAAQA,EAAQ,EAPd,IAAVA,EAAcA,EAAQ,ECFlBkS,CAASlS,GAClBmS,EAAYzP,EAAS,SAElBA,GAAWA,EAAUyP,EAAYzP,EAASyP,EAAYzP,EAAU,MCvBrE2D,GAActE,EAASA,EAAOvB,eAAY,EAC1C4R,GAAiB/L,GAAcA,GAAYlE,cAAW,cAUpCnC,MAEA,iBAATA,SACFA,KAELwG,EAAQxG,mBChBIE,EAAO2I,WACnBnI,KACAN,EAAkB,MAATF,EAAgB,EAAIA,EAAME,OACnCsC,EAASnC,MAAMH,KAEVM,EAAQN,KACRM,GAASmI,EAAS3I,EAAMQ,GAAQA,EAAOR,UAEzCwC,EDUE2P,CAASrS,EAAOsS,IAAgB,MAErCT,GAAS7R,UACJoS,GAAiBA,GAAehR,KAAKpB,GAAS,OAEnD0C,EAAU1C,EAAQ,SACJ,KAAV0C,GAAkB,EAAI1C,IA3BjB,SA2BwC,KAAO0C,cEV5C1C,UACA,MAATA,EAAgB,GAAKsS,GAAatS,OClBvCuS,GAAiBzQ,EAAK0Q,SACtBC,GAAYnC,KAAKoC,QCgBjBC,YDPiBC,OACfrP,EAAO+M,KAAKsC,UACT,SAASC,EAAQC,QACbb,GAASY,MACO,MAAbC,EAAoB,EAAIL,GAAUM,GAAUD,GAAY,OACnDP,GAAeM,GAAS,KAGnCG,MAAiBH,GAAU,KAAKjC,MAAM,oBAC9BrN,EAAKyP,EAAK,GAAK,MAAQA,EAAK,GAAKF,KAEnB,KAAKlC,MAAM,MACvB,GAAK,MAAQoC,EAAK,GAAKF,WAEhCvP,EAAKsP,ICPJI,CAAY,YAETN,YCdbO,SAASC,SACDC,QAAEA,QAASC,UAAOC,UAASC,QAAS7D,EAAOd,cAAeuE,EAC1DK,gBACQC,EAAIC,KAAQjS,OAAOhB,QAAQkT,GAAY,OAC3CC,EAAS3S,KAAK4S,wBAAwBT,EAASK,QAChDK,gBAAgBF,EAAQF,KAI3BK,EAAuBC,UAErBC,EAAWD,EAAQ/F,kBAAmBmF,KACtCc,EAAOC,EAAWC,cAClBnD,EAAIvB,EAAM1P,gBACLqU,KAAUJ,EAAU,OAEvB/D,EAAWoE,GADJjB,EAAMgB,GACgBf,EAAQ9D,KAAMyB,GAC3CsD,EAAYC,kBAAKN,EAAKO,eACnB,KACHC,GAAY,YACJjB,EAAIC,KAAQjS,OAAOhB,QAAQ2S,GAAU,IAC3CiB,IAAWZ,iBACTkB,EAAatB,EAAMI,OACpBkB,gBAEOC,GAAkBL,EAAWrE,EAAUwD,EAD5BY,GAAYK,EAAYrB,EAAQ9D,KAAMyB,IAEzDyD,YAIFA,UAGQlE,GAAKN,EAASJ,MAtCH,GAsCsCmB,EACvDsD,EAAU/D,EAAIN,EAASJ,MAAQ,EAAIoE,EAAKW,IAAIC,UACpCtE,EAAI0D,EAAKO,OAAOjE,IAChBE,GAAKR,EAASF,OAzCL,GAyCyCiB,SAM5D2C,EAAS3S,KAAK4S,wBAAwBT,EAASiB,QAChDP,gBAAgBF,EAAQW,OAIb9S,OAAO2B,KAAKiQ,UAC1B0B,EAAgBC,SAAM,IAAMvT,OAAO2B,KAAKiQ,IAAQU,KAE9CkB,GAAG,iBAAkBzB,KACrByB,GAAG,mBAAoBzB,KACvByB,GAAG,eAAgBzB,QAEtB0B,aAAe,WAEVC,IAAI,iBAAkB3B,KACtB2B,IAAI,mBAAoB3B,KACxB2B,IAAI,eAAgB3B,IAIhC4B,aACMnU,KAAKiU,mBACFA,eAICpB,gBAAgBuB,EAA2B3B,KACxC1T,MAAMwQ,EAAImC,GAAMe,EAAIlD,EAAG,KACvBxQ,MAAM0Q,EAAIiC,GAAMe,EAAIhD,EAAG,GAG5BmD,wBAAwBT,EAAwB5D,SAChDoE,EAAS0B,QAAMlC,EAAS5D,UACzBoE,EAAO5T,UACHA,MAAQ,CAAEwQ,EAAG,EAAGE,EAAG,IAErBkD,OCvFP2B,GAAkB,mBAEdhS,EAAOY,EAAU1C,OAAQ,2BACxB,GAAI,GAAI,IACN8B,QACAd,KALW,MAQP8S,eCCUvR,EAAQ7D,EAAKH,GACzB,aAAPG,GAAsBoV,MACTvR,EAAQ7D,EAAK,CAC1BqV,cAAgB,EAChBC,YAAc,EACdzV,MAASA,EACT0V,UAAY,MAGPvV,GAAOH,cCRQgE,EAAQ7D,EAAKH,SACtB,IAAVA,IAAwBK,EAAG2D,EAAO7D,GAAMH,SAC9B,IAAVA,UAAgCgE,QACnBA,EAAQ7D,EAAKH,OCRV2V,MACd,SAAS3R,EAAQ6E,EAAUc,WAC5BjJ,KACAkV,EAAWnU,OAAOuC,GAClB4J,EAAQjE,EAAS3F,GACjB5D,EAASwN,EAAMxN,OAEZA,KAAU,KACXD,EAAMyN,EAAM+H,GAAYvV,IAAWM,OACQ,IAA3CmI,EAAS+M,EAASzV,GAAMA,EAAKyV,gBAI5B5R,GCjBPmD,GAAgC,iBAAXC,GAAuBA,IAAYA,EAAQC,UAAYD,EAG5EE,GAAaH,IAAgC,iBAAVI,QAAsBA,SAAWA,OAAOF,UAAYE,OAMvFsO,GAHgBvO,IAAcA,GAAWG,UAAYN,GAG5BrF,EAAK0F,YAAS,EACvCsO,GAAcD,GAASA,GAAOC,iBAAc,cCHvBC,EAAYC,OCDXC,EACpBvT,EDCAuJ,EAAS+J,GCFWC,EDEeF,EAAW9J,OCD9CvJ,EAAS,IAAIuT,EAAY/M,YAAY+M,EAAYlK,gBACjD5F,EAAWzD,GAAQ7B,IAAI,IAAIsF,EAAW8P,IACnCvT,GDDqDqT,EAAW9J,cAChE,IAAI8J,EAAW7M,YAAY+C,EAAQ8J,EAAW/J,WAAY+J,EAAW3V,YET1E8V,GAAezU,OAAO0U,UAUR,gCAET,SAASC,OACTtT,EAASsT,SACL,MAELF,UACKA,GAAaE,KAEf5V,UAAY4V,MACf1T,EAAS,IAAIsB,WACVxD,eAAY,EACZkC,GAZO,MCVC2G,GAAQ5H,OAAO4U,eAAgB5U,YCK9CgC,GAAY5B,SAASrB,UACrBwB,GAAcP,OAAOjB,UAGrB8C,GAAeG,GAAUtB,SAGzBF,GAAiBD,GAAYC,eAG7BqU,GAAmBhT,GAAalC,KAAKK,oBCVxBuC,EAAQ7D,OACX,gBAARA,GAAgD,mBAAhB6D,EAAO7D,KAIhC,aAAPA,SAIG6D,EAAO7D,OCVZ8B,GAHcR,OAAOjB,UAGQyB,2BAYZ+B,EAAQ7D,EAAKH,OAC5BkN,EAAWlJ,EAAO7D,MACDiB,KAAK4C,EAAQ7D,IAAQE,EAAG6M,EAAUlN,UACxC,IAAVA,QAAgCgE,OACnBA,EAAQ7D,EAAKH,OCf7BiC,GAHcR,OAAOjB,UAGQyB,2BASb+B,OACblB,EAASkB,mBCTMA,OAChBtB,EAAS,MACC,MAAVsB,UACO7D,KAAOsB,OAAOuC,KACdzC,KAAKpB,UAGTuC,EDGE6T,CAAavS,OAElBwS,EAAUhN,GAAYxF,GACtBtB,EAAS,WAEJvC,KAAO6D,GACD,sBAA8B/B,GAAeb,KAAK4C,EAAQ7D,OAC9DoB,KAAKpB,UAGTuC,cEFOsB,UACPsF,GAAYtF,GAAUuF,GAAcvF,GAAQ,GAAQyS,GAAWzS,eCDjDhE,mBCdH0W,EAAQ9I,EAAO5J,EAAQoB,OACrCuR,GAAS3S,QACO,YAEhBtD,KACAN,EAASwN,EAAMxN,SAEVM,EAAQN,GAAQ,KACnBD,EAAMyN,EAAMlN,GAEZkW,EAAWxR,EACXA,EAAWpB,EAAO7D,GAAMuW,EAAOvW,GAAMA,EAAK6D,EAAQ0S,QAClD,OAEa,IAAbE,MACSF,EAAOvW,IAEhBwW,KACc3S,EAAQ7D,EAAKyW,MAEjB5S,EAAQ7D,EAAKyW,UAGtB5S,EDRA6S,CAAW7W,EAAO8W,GAAO9W,gBEGXgE,EAAQ0S,EAAQvW,EAAK4W,EAAUC,EAAW5R,EAAYE,OACvE4H,EAAW+J,GAAQjT,EAAQ7D,GAC3B+W,EAAWD,GAAQP,EAAQvW,GAC3BoM,EAAUjH,EAAMjE,IAAI6V,MAEpB3K,KACevI,EAAQ7D,EAAKoM,YCTPvM,EDYrB4W,EAAWxR,EACXA,EAAW8H,EAAUgK,EAAW/W,EAAM,GAAK6D,EAAQ0S,EAAQpR,QAC3D,EAEA6R,OAAwB,IAAbP,KAEXO,EAAU,KACR5O,EAAQ/B,EAAQ0Q,GAChBzO,GAAUF,GAASb,GAASwP,GAC5BE,GAAW7O,IAAUE,GAAUL,GAAa8O,KAErCA,EACP3O,GAASE,GAAU2O,EACjB5Q,EAAQ0G,KACCA,ECzBVnG,EADkB/G,ED4BMkN,IC3BD5D,GAAYtJ,cCrBzB0W,EAAQxW,OACrBQ,KACAN,EAASsW,EAAOtW,iBAEFG,MAAMH,MACfM,EAAQN,KACTM,GAASgW,EAAOhW,UAEjBR,EFyCUmX,CAAUnK,GAEdzE,MACI,abrCEwD,EAAQ+J,MACvBA,SACK/J,EAAOqF,YAEZlR,EAAS6L,EAAO7L,OAChBsC,EAASoT,GAAcA,GAAY1V,GAAU,IAAI6L,EAAO/C,YAAY9I,YAEjEkX,KAAK5U,GACLA,Ea8BU6U,CAAYL,GAAU,IAE1BE,MACI,IACAI,GAAgBN,GAAU,MAG1B,YRpBIlX,OAChB+G,EAAa/G,IA5CJ,mBA4Cc+C,EAAW/C,UAC9B,MAELoW,EAAQqB,GAAazX,MACX,OAAVoW,SACK,MAELnN,EAAOhH,GAAeb,KAAKgV,EAAO,gBAAkBA,EAAMlN,kBACxC,mBAARD,GAAsBA,aAAgBA,GAClD3F,GAAalC,KAAK6H,IAASqN,GQalBoB,CAAcR,IAAalQ,GAAYkQ,MACnChK,EACPlG,GAAYkG,KACHyK,GAAczK,GAEjBpK,EAASoK,KAAarJ,EAAWqJ,gBGjExBlJ,SACc,mBAAtBA,EAAOkF,aAA8BM,GAAYxF,GAE5D,GADA4T,GAAWH,GAAazT,IHgEX6T,CAAgBX,QAIlB,EAGXC,MAEItW,IAAIqW,EAAUN,KACVA,EAAUM,EAAUH,EAAU3R,EAAYE,YACpC4R,OAEDlT,EAAQ7D,EAAKyW,gBIvEb5S,EAAQ0S,EAAQK,EAAU3R,EAAYE,GACnDtB,IAAW0S,MAGPA,GAAQ,SAASQ,EAAU/W,YACf,IAAI0L,GAClB/I,EAASoU,MACGlT,EAAQ0S,EAAQvW,EAAK4W,EAAUe,GAAW1S,EAAYE,OAEjE,KACCsR,EAAWxR,EACXA,EAAW6R,GAAQjT,EAAQ7D,GAAM+W,EAAW/W,EAAM,GAAK6D,EAAQ0S,EAAQpR,QACvE,OAEa,IAAbsR,MACSM,MAEIlT,EAAQ7D,EAAKyW,MAE/BE,gBCtBa9W,UACTA,cCPMuD,EAAMwU,EAASC,UACpBA,EAAK5X,aACN,SAAUmD,EAAKnC,KAAK2W,QACpB,SAAUxU,EAAKnC,KAAK2W,EAASC,EAAK,SAClC,SAAUzU,EAAKnC,KAAK2W,EAASC,EAAK,GAAIA,EAAK,SAC3C,SAAUzU,EAAKnC,KAAK2W,EAASC,EAAK,GAAIA,EAAK,GAAIA,EAAK,WAEpDzU,EAAK0U,MAAMF,EAASC,OCdzBE,GAAY5H,KAAK6H,QCSjBC,GAAmB7C,GAA4B,SAAShS,EAAMkB,UACzD8Q,GAAehS,EAAM,WAAY,CACtCiS,cAAgB,EAChBC,YAAc,EACdzV,OCGcA,EDHIyE,ECIb,kBACEzE,IDJP0V,UAAY,QCEE1V,GDPsBqY,MASzBD,GEhBXE,GAAYC,KAAKC,QCMjBC,YDKclV,OACZmV,EAAQ,EACRC,EAAa,SAEV,eACDC,EAAQN,KACRO,EApBO,MAoByBF,QAEvBC,EACTC,EAAY,QACRH,GAzBI,WA0BDxR,UAAU,UAGX,SAEH3D,EAAK0U,WAAM,EAAW/Q,YCrBf4R,CAASV,OAEZK,eCDGlV,EAAMwV,UACfN,YLCSlV,EAAMwV,EAAO5P,YACrB+O,QAAoB,IAAVa,EAAuBxV,EAAKnD,OAAS,EAAK2Y,EAAO,GAC5D,mBACDf,EAAO9Q,UACPxG,KACAN,EAAS8X,GAAUF,EAAK5X,OAAS2Y,EAAO,GACxC7Y,EAAQK,MAAMH,KAETM,EAAQN,KACTM,GAASsX,EAAKe,EAAQrY,gBAG1BsY,EAAYzY,MAAMwY,EAAQ,KACrBrY,EAAQqY,KACLrY,GAASsX,EAAKtX,YAEhBqY,GAAS5P,EAAUjJ,GACtB+X,GAAM1U,EAAMtC,KAAM+X,IKlBRC,CAAS1V,EAAMwV,EAAOV,IAAW9U,EAAO,gBCErCvD,EAAOU,EAAOsD,OAC/BlB,EAASkB,UACL,MAELnB,SAAcnC,WACN,UAARmC,EACKyG,GAAYtF,IAAWgF,GAAQtI,EAAOsD,EAAO5D,QACrC,UAARyC,GAAoBnC,KAASsD,IAE7B3D,EAAG2D,EAAOtD,GAAQV,OCdLkZ,OAAAA,GCwBG,SAASlV,EAAQ0S,EAAQK,MACxC/S,EAAQ0S,EAAQK,IDxBnBoC,IAAS,SAASnV,EAAQoV,OAC3B1Y,KACAN,EAASgZ,EAAQhZ,OACjBgF,EAAahF,EAAS,EAAIgZ,EAAQhZ,EAAS,QAAK,EAChDiZ,EAAQjZ,EAAS,EAAIgZ,EAAQ,QAAK,QAExBF,GAAS9Y,OAAS,GAA0B,mBAAdgF,OAC7BA,QACX,EAEAiU,GAASC,GAAeF,EAAQ,GAAIA,EAAQ,GAAIC,OACrCjZ,EAAS,OAAI,EAAYgF,IAC7B,KAEF3D,OAAOuC,KACPtD,EAAQN,GAAQ,KACnBsW,EAAS0C,EAAQ1Y,GACjBgW,MACO1S,EAAQ0S,EAAQhW,EAAO0E,UAG7BpB,0BEtBF,CACLuV,KAAM,CACJC,gBAAgB,EAChBC,YAAY,EACZC,aAAa,EACbC,aAAc,GACdC,aAAc,GACdC,KAAK,EACLC,cAAe,IAAIC,GACnBC,6BAAyB,EACzBC,KAAM,CACJC,SAAS,EACTC,SAAU,GACVC,gBAAiB,EACjBC,KAAM,CACJC,MAAO,UACPxK,MAAO,EACPa,UAAW,GAEb4J,MAAO,CACLD,MAAO,UACPxK,MAAO,EACPa,UAAW,KAIjBnB,KAAMgL,SACJ3K,OAAQ,CACNhN,KAAM,SACNkN,OAAQ,GAERD,MAAO,GACPE,OAAQ,GACRyK,aAAc,EAEdH,MAAO,UACPI,YAAa,EACbC,YAAa,UACbC,gBAAiB,GAEnBC,MAAO,CACLhY,QAAc+M,GAAO5P,MAAMmP,EAAKU,OAAOhN,KAAM2M,GAC7CO,oCAAwB/P,MAAMmP,EAAKU,OAAOE,OAAQP,MAAS,GAAK,GAChEM,mCAAuB9P,MAAMmP,EAAKU,OAAOC,MAAON,MAAS,GAAK,GAC9DQ,oCAAwBhQ,MAAMmP,EAAKU,OAAOG,OAAQR,MAAS,GAAK,GAChEiL,8BAAsB,YAAOza,MAAMmP,EAAKU,OAAO4K,aAAcjL,MAAS,GACtEkL,eAAqB9K,GAAO5P,MAAMmP,EAAKU,OAAO6K,YAAalL,GAC3DmL,eAAqB/K,GAAO5P,MAAMmP,EAAKU,OAAO8K,YAAanL,GAC3DoL,mBAAyBhL,GAAO5P,MAAMmP,EAAKU,OAAO+K,gBAAiBpL,GACnE8K,MAAO,WAETQ,cAAU,EACVC,WAAW,EACXC,YAAY,EACZC,MAAO,CACLf,SAAS,EACTgB,gBAAY,EACZC,SAAU,GACVC,WAAY,IACZd,MAAO,UACPe,gBAAY,EAUZC,OAAQ,EACRC,UAAWrK,qBAAmBsK,MAC9BC,KAAM,QAERC,UAAW,CACTxB,SAAS,EACTpK,MAAO,EACP6L,QAAS,EACTrB,MAAO,WAETsB,gBAAY,MAEdC,KAAMrB,SACJ3K,OAAQ,CACNC,MAAO,EACPwK,MAAO,UACP3J,UAAW,EACXmL,QAAS,OACTC,SAAS,EACTC,eAAgB,IAElBnB,MAAO,CACL/K,SAAeF,GAAO5P,MAAMmP,EAAKU,OAAOC,MAAO+L,GAAQ,EACvDvB,MAAO,UACP3J,aAAmBf,GAAO5P,MAAMmP,EAAKU,OAAOc,UAAWkL,GACvDC,WAAiBlM,GAAO5P,MAAMmP,EAAKU,OAAOiM,QAASD,GACnDE,WAAiBnM,GAAO5P,MAAMmP,EAAKU,OAAOkM,QAASF,GACnDG,kBAAwBpM,GAAO5P,MAAMmP,EAAKU,OAAOmM,eAAgBH,IAEnEf,SAAU,CACRhL,SAAeF,GAAO5P,MAAMmP,EAAKU,OAAOC,MAAO+L,GAAQ,EACvDvB,MAAO,UACP3J,oBACQsL,EAAIrM,GAAO5P,MAAMmP,EAAKU,OAAOC,MAAO+L,SACnC,GAAO,IAAJI,KAAe,EAAJA,KAEvBH,WAAiBlM,GAAO5P,MAAMmP,EAAKU,OAAOiM,QAASD,GACnDE,WAAiBnM,GAAO5P,MAAMmP,EAAKU,OAAOkM,QAASF,GACnDG,kBAAwBpM,GAAO5P,MAAMmP,EAAKU,OAAOmM,eAAgBH,IAEnEb,YAAY,EACZkB,IAAK,EACLrZ,KAAM,WACNsZ,OAAQ,CACNzF,OAAQ,CACN7T,KAAM,OACNiN,MAAO,EACPE,OAAQ,EACRsL,UACAc,MAAO,cACP9B,MAAO,MAETzL,OAAQ,CACNhM,KAAM,OACNiN,MAAO,EACPE,OAAQ,EACRsL,UACAc,MAAO,cACP9B,MAAO,OAGXgB,OAAQ,KACRe,UAAW,CAACC,EAAehJ,IACG,SAArBA,EAAQuI,KAAKhZ,MAA0B,KAEhD0Z,WAAY,CACVtB,MAAO,CACLE,SAAU,GACVC,WAAY,EACZd,MAAO,WAET3K,MAAO,CACL9M,KAAM,OAENkN,OAAQ,EAERD,MAAO,GACPE,OAAQ,GACRyK,aAAc,EACdH,MAAO,UACPI,YAAa,EACbC,YAAa,UACbC,qBAAiB,GAEnB4B,OAAQ,CACN1M,MAAO,EACPwK,MAAO,UACP3J,eAAW,EACXmL,aAAS,EACTC,SAAS,EACTC,eAAgB,KAGpBS,UAAW,QACXxB,MAAO,CACLC,gBAAY,EACZC,SAAU,GACVC,WAAY,IACZd,MAAO,UACPe,gBAAY,EAUZC,OAAQ,EACRK,QAAS,OAGbe,KAAM,CACJxC,SAAS,EACTyC,WAAW,EACXC,aAAa,EACbC,IAAK,eACLvB,OAAQ,EACRoB,KAAM,CACJ5M,MAAO,EACPwK,gBACQwC,EAAO,CACX,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,YACA,aAEIxY,EAAOyY,EAAEC,MACZ5Y,QACC6M,EAAEL,MAAM,IAAII,QAAO,CAACiM,EAAGC,WACX,GAAKD,EAAIC,EAAEC,WAAW,IACrBF,GACV,KAEJjM,QAAO,CAACiM,EAAGC,IAAMD,EAAIC,GAAG,UACpBJ,EAAKxM,KAAKC,IAAIjM,GAAQwY,EAAK1c,SAEpCuQ,eAAW,EACXmL,QAAS,QACTsB,SAAU,QACVrB,SAAS,EACTC,eAAgB,IAElBJ,gBAAY,UCrOZyB,GAAetb,OAAO,qBAemB5B,UACtCqO,GAAQC,SAAO4O,IAAe,WAAWld,MAAQA,wBAYjDmd,GAAa,6BAIbA,GAAa,6BAIbA,GAAa,cCjChBC,GAAsC9P,WAAS,IAC/C+P,GAAyC,GAEzCC,GAAa1b,OAAO,uBAuCE0R,GACtBA,YAbgBtT,eACdud,EAAI,YAAevd,MAAQ,EAC7Bud,IACEA,EAAI,GAAM,UACLH,GAAQpd,UACRqd,GAAerd,OAEPA,GAAOud,EAAI,IAOfjK,eAIU0I,EAAqBwB,EAAmBC,EAAgCjD,MAC7E,SAAhBwB,EAAOtZ,oBACG+a,MAIM,WAAhBzB,EAAOtZ,eACG+a,GACLzB,EAAO0B,eAGVC,WAjDc3B,EAAqBwB,EAAmBhD,gBACrDoD,gCACF5B,GADE,CAEL7B,MAAO,WAAOA,SAASK,EACvBgD,SAAAA,IA6CiBK,CAAa7B,EAAQwB,EAAUhD,GAC5ClH,EAzCC,WADSiK,EA0CII,GAzCDjb,QAAQ6a,EAAE5N,SAAS4N,EAAE1N,UAAU0N,EAAEpC,UAAUoC,EAAEpD,MAAM1W,QAAQ,IAAK,OAAO8Z,EAAEC,SAAW,IAAM,OAAmB,gBAAZD,EAAEtB,MAA0B,MAAQ,YADxIsB,SA2CZjK,IAAOmK,OAGCA,YA1CKzd,EAAagc,eACxBuB,EAAI,YAAevd,MAAQ,KAClBA,GAAOud,EAAI,EACrBA,OACKvd,GAAOgc,IAuCP1I,EAAIqK,IAHLrK,cChCTJ,EACA2J,EACA1J,SAGM2K,EAAQ5P,GAA0B,CACtC6P,iBAAkB,GAClBC,WAAY,GACZC,gBAAiB,2BAGP,WACJF,iBAAEA,aAAkBC,YA4EU7K,EAAkBD,EAAc2J,SAChEkB,EAAoD,GACpDC,EAAwC,GAGxC/Z,EAA6B,aACvBqP,EAAIoI,KAASpa,OAAOhB,QAAQuc,GAAQ,QACnCtG,UAAUrD,MAASwI,EAAKhN,UAAUwE,kBAIvClT,EAAM,CAAC0b,EAAKnF,OAAQmF,EAAKhN,QAAQwP,OAAOtN,KAAK,OAC7ChM,EAASX,EAAIjE,IAAQ,KACpBsT,GAAMoI,IACT1b,GAAO4E,QAOPuZ,EACJhL,EAAQuI,KAAKK,eAAera,SACxByR,EAAQuI,KAAKK,IACb,CAACqC,EAAWC,IAAgBlL,EAAQuI,KAAKK,cACnC/b,EAAKse,KAAUhd,OAAOhB,QAAQ2D,GAAM,OACxCsa,EAAUjd,OAAO2B,KAAKqb,GAAOre,UACpB,GAAXse,iBAEExC,EAAMoC,EAAQG,EAAOnL,IACpBqL,EAAQ9C,GAAQpa,OAAOhB,QAAQge,GAAO,MAC7B,IAAZC,IACeC,GAAU,CAAE9C,KAAAA,EAAM+C,aAAc,EAAGC,WAAY,KACrD1e,GAAO,CAAE6c,QAAO6B,WAAY,EAAGxC,WAAW,OAChD,KACDuC,EAAe,QACbE,EAAiBrd,OAAOsD,OAAO0Z,GAAOra,QACnCwL,GAAO5P,MAAMsT,EAAQuI,KAAKhM,OAAOC,MAAOiP,GAAQ,IAEnDC,EAASvd,OAAOhB,QAAQge,GAAOra,KAAI,EAAE6a,EAAQF,GAAOG,KACpDA,EAAI,OACUJ,EAAeI,EAAI,GAAKhD,EAAM4C,EAAeI,IAExD,CAACD,EAAQF,EAAMH,MAElBC,EAAaD,IACZxY,SAAQ,EAAE6Y,EAAQF,EAAMI,QACZF,GAAU,CAAEpD,OAAM+C,eAAcC,WAAAA,QAExC1e,GAAO,CAAE6c,QAAO6B,WAAAA,EAAYxC,WAAW,UAI/C,CAAE6B,iBAAAA,EAAkBC,WAAAA,GAjIgBiB,CAA+B9L,EAASD,EAAO2J,MACvEiB,EAAMC,iBAAkBA,MACxBD,EAAME,WAAYA,qBAIzB,WACJC,EAAwC,aAClC3K,GAAMuJ,mBAAO6B,MAAiBpd,OAAOhB,QAAQwd,EAAME,YAAa,KACtE9B,GAAY,KACE,GAAdwC,KACU,UACHvL,EAAQuI,KAAKQ,qBAAqBxa,SAAU,OAC/CoP,EAAIqC,EAAQuI,KAAKQ,UAAUoC,EAAOnL,KAC9B,OAANrC,EACUoO,GAAsBhM,EAAOoL,EAAOnL,EAASuL,GAE7C5N,WAELqC,EAAQuI,KAAKQ,WACVgD,GAAsBhM,EAAOoL,EAAOnL,EAASuL,KAIrDV,WAAW1K,GAAI4I,UAAYA,EAC7BA,UACKjZ,KAAKqb,GAAOrY,YAAegY,EAAgBkB,IAAM,OAG3CrB,EAAMG,gBAAiBA,MAGnCH,cAoGsB5K,EAAc2J,EAAc1J,EAAkBxD,MAGzD,IADArO,OAAOhB,QAAQuc,GAAO5c,cACZ,SAqBrB0P,EAbUQ,KAAKoC,OACjBjR,OAAOsD,OAAOiY,GACduC,YAAa,CAAClM,EAAM5Q,EAAEiU,QAASrD,EAAM5Q,EAAEoM,WACvCZ,WAAYa,IACZ1K,eACOuL,EAAQC,GAAO7K,OAAOuO,EAAQ9D,KAAKK,OAAQL,SAC9B,WAAfG,EAAM9M,KACc,EAAf8M,EAAMI,OAENO,KAAKoC,IAAI/C,EAAMG,MAAOH,EAAMK,wBAQ3C6L,EACAnF,EACA7H,EACAa,EACAmP,EACAD,EACAnC,2BAEI+C,EAAIC,EAAIC,EAAIC,SACZ9D,EAAKnF,OAASmF,EAAKhN,QACpB2Q,EAAIC,EAAIC,EAAIC,GAAMC,GACjB,0BAAQpP,KAAK,EACb,0BAAQE,KAAK,EACb,0BAAQF,KAAK,EACb,0BAAQE,KAAK,EACbhB,EACAmP,EACAD,EACAnC,IAGDiD,EAAIC,EAAIH,EAAIC,GAAMG,GACjB,0BAAQpP,KAAK,EACb,0BAAQE,KAAK,EACb,0BAAQF,KAAK,EACb,0BAAQE,KAAK,EACbhB,EACAmP,EACAD,EACAnC,GAGG,CAAE+C,GAAAA,EAAIC,GAAAA,EAAIC,GAAAA,EAAIC,GAAAA,eAIrBH,EACAC,EACAC,EACAC,EACAjQ,EACAmP,EACAD,EACAnC,SAEMoD,EAAKH,EAAKF,EACVM,EAAKH,EAAKF,MAGZM,KAAqB,EAAInB,GAAgBlP,KAGhC,IAATqQ,GAA4B,UAAdtD,EAAuB,OACjCuD,EAAS1P,KAAK2P,MAAMN,EAAKF,EAAIC,EAAKF,MACtB,aAAd/C,EAA0B,OAEtByD,EAAgB5P,KAAK6P,GAAK,GAC5BH,GAAUE,GAAiBF,GAAUE,gBAGlB,eAAdzD,GAELuD,EAAS,cAMN,IAAPH,EAAU,OACNO,EAAON,EAAK,KAAS,QACpB,CAACN,EAAKO,EAAOK,EAAMX,EAAIC,EAAKK,EAAOK,EAAMT,MAChC,IAAPG,EAAU,OACbM,EAAOP,EAAK,EAAI,WACf,CAACL,EAAIC,EAAKM,EAAOK,EAAMV,EAAIC,EAAKI,EAAOK,GACzC,OAECC,MADQP,EAAKD,GAEfC,EAAK,OACCC,SAEJO,EAAQP,EAAOzP,KAAKiQ,KAAK,EAAIjQ,KAAKkQ,IAAIH,EAAW,UAChD,CAACb,EAAKc,EAAOb,EAAKa,EAAQD,EAAWX,EAAKY,EAAOX,EAAKW,EAAQD,oMCnRxD7P,EAAGE,wBACG+P,UACd,IAAIA,EAAOjQ,EAAGE,QAcjBF,EAAIA,GAAK,OAaTE,EAAIA,GAAK,YA/CY+P,IAoEpBC,UAAY,SAAUC,UACrB,IAAIF,EAAOE,EAAI,IAAM,EAAGA,EAAI,IAAM,MAiBnCC,WAAa,SAAUvR,UACtB,IAAIoR,EAAOpR,EAAImB,GAAK,EAAGnB,EAAIqB,GAAK,MAwBjClQ,UAAUqgB,KAAO,SAAUC,eAC5BtQ,GAAKsQ,EAAItQ,EACPvP,QAkBDT,UAAUugB,KAAO,SAAUD,eAC5BpQ,GAAKoQ,EAAIpQ,EACPzP,QAkBDT,UAAUwE,IAAM,SAAU8b,eAC3BtQ,GAAKsQ,EAAItQ,OACTE,GAAKoQ,EAAIpQ,EACPzP,QAiBDT,UAAUwgB,UAAY,SAAUC,eACjCzQ,GAAKyQ,OACLvQ,GAAKuQ,EACHhgB,QAiBDT,UAAU0gB,WAAa,SAAUD,eAClCzQ,GAAKyQ,EACHhgB,QAiBDT,UAAU2gB,WAAa,SAAUF,eAClCvQ,GAAKuQ,EACHhgB,QAkBDT,UAAU4gB,UAAY,SAAUN,eACjCtQ,GAAKsQ,EAAItQ,EACPvP,QAkBDT,UAAU6gB,UAAY,SAAUP,eACjCpQ,GAAKoQ,EAAIpQ,EACPzP,QAkBDT,UAAU8gB,SAAW,SAAUR,eAChCtQ,GAAKsQ,EAAItQ,OACTE,GAAKoQ,EAAIpQ,EACPzP,QAiBDT,UAAU+gB,eAAiB,SAAUN,eACtCzQ,GAAKyQ,OACLvQ,GAAKuQ,EACHhgB,QAiBDT,UAAUghB,gBAAkB,SAAUP,eACvCzQ,GAAKyQ,EACHhgB,QAiBDT,UAAUihB,gBAAkB,SAAUR,eACvCvQ,GAAKuQ,EACHhgB,QAkBDT,UAAUkhB,QAAU,SAAUC,eAC/BnR,GAAKmR,EAAOnR,EACVvP,QAkBDT,UAAUohB,QAAU,SAAUD,eAC/BjR,GAAKiR,EAAOjR,EACVzP,QAkBDT,UAAUqhB,OAAS,SAAUF,eAC9BnR,GAAKmR,EAAOnR,OACZE,GAAKiR,EAAOjR,EACVzP,QAiBDT,UAAUshB,aAAe,SAAUb,UAC1B,IAAXA,QACEzQ,GAAKyQ,OACLvQ,GAAKuQ,SAELzQ,EAAI,OACJE,EAAI,GAGHzP,QAiBDT,UAAUuhB,cAAgB,SAAUd,UAC3B,IAAXA,OACEzQ,GAAKyQ,OAELzQ,EAAI,EAEHvP,QAiBDT,UAAUwhB,cAAgB,SAAUf,UAC3B,IAAXA,OACEvQ,GAAKuQ,OAELvQ,EAAI,EAEHzP,QAgBDT,UAAUyhB,QAAU,uBACrBzR,MACEvP,QAgBDT,UAAU0hB,QAAU,uBACrBxR,MACEzP,QAgBDT,UAAU2hB,OAAS,uBACpBF,eACAC,UACEjhB,QAkBDT,UAAU4hB,UAAY,SAAUT,eACjCnR,GAAKmR,EAAOnR,EACVvP,QAkBDT,UAAU6hB,UAAY,SAAUV,eACjCjR,GAAKiR,EAAOjR,EACVzP,QAkBDT,UAAU8hB,SAAW,SAAUX,eAChCnR,GAAKmR,EAAOnR,OACZE,GAAKiR,EAAOjR,EACVzP,QAiBDT,UAAU+hB,eAAiB,SAAUtB,eACtCzQ,GAAKyQ,OACLvQ,GAAKuQ,EACHhgB,QAiBDT,UAAUgiB,gBAAkB,SAAUvB,eACvCzQ,GAAKyQ,EACHhgB,QAiBDT,UAAUiiB,gBAAkB,SAAUxB,eACvCvQ,GAAKuQ,EACHhgB,QASDT,UAAUkiB,UAAY,eACxBtiB,EAASa,KAAKb,gBAEH,IAAXA,QACEoQ,EAAI,OACJE,EAAI,QAEJmR,OAAOpB,EAAOrgB,EAAQA,IAErBa,QAGDT,UAAUmiB,KAAOlC,EAAOjgB,UAAUkiB,YAiBlCliB,UAAUoiB,MAAQ,SAAUzK,EAAK0K,UACnCvS,KAAKC,IAAItP,KAAKuP,GAAK2H,SAAW3H,GAAKqS,GACnCvS,KAAKC,IAAItP,KAAKyP,GAAKyH,SAAWzH,GAAKmS,GAChC5hB,QAkBDT,UAAUsiB,UAAY,SAAUC,EAASC,eAC1CC,WAAWF,EAASC,QACpBE,WAAWH,EAASC,GAElB/hB,QAkBDT,UAAUyiB,WAAa,SAAUF,EAASC,OAC5CtQ,EAAMpC,KAAKoC,IAAIqQ,EAAQvS,EAAGwS,EAAYxS,GACtC2H,EAAM7H,KAAK6H,IAAI4K,EAAQvS,EAAGwS,EAAYxS,eACrCA,EAAI2S,EAAOzQ,EAAKyF,GACdlX,QAkBDT,UAAU0iB,WAAa,SAAUH,EAASC,OAC5CtQ,EAAMpC,KAAKoC,IAAIqQ,EAAQrS,EAAGsS,EAAYtS,GACtCyH,EAAM7H,KAAK6H,IAAI4K,EAAQrS,EAAGsS,EAAYtS,eACrCA,EAAIyS,EAAOzQ,EAAKyF,GACdlX,QAkBDT,UAAU4iB,aAAe,SAAUL,EAASC,UAC3C1S,KAAKqC,MAAMrC,KAAK6S,eACjBF,WAAWF,EAASC,QAEpBE,WAAWH,EAASC,GAEnB/hB,QAgBDT,UAAU6iB,QAAU,uBACrB7S,EAAIF,KAAKqC,MAAM1R,KAAKuP,QACpBE,EAAIJ,KAAKqC,MAAM1R,KAAKyP,GAClBzP,QAiBDT,UAAU8iB,QAAU,SAAUxQ,eACX,IAAdA,MAAyC,QAC/CtC,EAAIvP,KAAKuP,EAAE8S,QAAQxQ,QACnBpC,EAAIzP,KAAKyP,EAAE4S,QAAQxQ,GACjB7R,QAmBDT,UAAU+iB,KAAO,SAAUzC,EAAK0C,eAChB,IAAXA,MACD,SAGLhT,KAASgT,GAAUviB,KAAKuP,EAAIgT,EAAS1C,EAAItQ,EACvCvP,QAmBDT,UAAUijB,KAAO,SAAU3C,EAAK0C,eAChB,IAAXA,MACD,SAGL9S,KAAS8S,GAAUviB,KAAKyP,EAAI8S,EAAS1C,EAAIpQ,EACvCzP,QAmBDT,UAAUkjB,IAAM,SAAU5C,EAAK0C,eAChCD,KAAKzC,EAAK0C,QACVC,KAAK3C,EAAK0C,GACRviB,QAoBDT,UAAUmjB,MAAQ,kBACjB,IAAIlD,EAAOxf,KAAKuP,EAAGvP,KAAKyP,MAiBzBlQ,UAAUojB,MAAQ,SAAU9C,eAC7BtQ,EAAIsQ,EAAItQ,EACNvP,QAiBDT,UAAUqjB,MAAQ,SAAU/C,eAC7BpQ,EAAIoQ,EAAIpQ,EACNzP,QAiBDT,UAAU8W,KAAO,SAAUwJ,eAC5B8C,MAAM9C,QACN+C,MAAM/C,GACJ7f,QAeDT,UAAUsjB,KAAO,uBAClBtT,EAAIvP,KAAKyP,EAAI,EACXzP,QAiBDT,UAAUujB,IAAM,SAAUC,UACzB/iB,KAAKuP,EAAIwT,EAAKxT,EAAIvP,KAAKyP,EAAIsT,EAAKtT,KAGjClQ,UAAUyjB,MAAQ,SAAUD,UAC1B/iB,KAAKuP,EAAIwT,EAAKtT,EAAOzP,KAAKyP,EAAIsT,EAAKxT,KAkBrChQ,UAAU0jB,YAAc,SAAUF,OACjCG,QAAgB3T,EAAIwT,EAAKxT,EAAIvP,KAAKyP,EAAIsT,EAAKtT,MAAcF,EAAEwT,EAAKxT,EAAIwT,EAAKtT,EAAEsT,EAAKtT,eAC/EF,EAAI2T,EAAQH,EAAKxT,OACjBE,EAAIyT,EAAQH,EAAKtT,EACfzP,QAIJT,UAAU4jB,gBAAkB,kBAC3B9T,KAAK2P,MAAMhf,KAAKyP,EAAGzP,KAAKuP,MAGzBhQ,UAAU6jB,mBAAqB,kBAC9BC,EAAerjB,KAAKmjB,sBAGrB5jB,UAAU+jB,cAAgB,kBACzBjU,KAAK2P,MAAMhf,KAAKuP,EAAGvP,KAAKyP,MAGzBlQ,UAAUgkB,iBAAmB,kBAC5BF,EAAerjB,KAAKsjB,oBAGrB/jB,UAAUikB,MAAQhE,EAAOjgB,UAAU4jB,kBACnC5jB,UAAUkkB,SAAWjE,EAAOjgB,UAAU6jB,qBACtC7jB,UAAU+a,UAAYkF,EAAOjgB,UAAU4jB,kBAEvC5jB,UAAUmkB,OAAS,SAAUF,OAC/BG,EAAM3jB,KAAKuP,EAAIF,KAAKuU,IAAIJ,GAAWxjB,KAAKyP,EAAIJ,KAAKwU,IAAIL,GACrDM,EAAM9jB,KAAKuP,EAAIF,KAAKwU,IAAIL,GAAWxjB,KAAKyP,EAAIJ,KAAKuU,IAAIJ,eAEpDjU,EAAIoU,OACJlU,EAAIqU,EAEF9jB,QAGDT,UAAUwkB,UAAY,SAAUP,YAC9BQ,EAAeR,GAChBxjB,KAAK0jB,OAAOF,MAGbjkB,UAAU0kB,SAAW,SAASC,UAC7BlkB,KAAK0jB,OAAOQ,EAASlkB,KAAKwjB,YAG3BjkB,UAAU4kB,YAAc,SAASD,YAC5BF,EAAeE,GACnBlkB,KAAKikB,SAASC,MAGf3kB,UAAU6kB,SAAW,SAAUF,OACjCV,EAAQxjB,KAAKwjB,QAAUU,SAEpBlkB,KAAK0jB,OAAOF,MAGbjkB,UAAU8kB,YAAc,SAAUH,YAC7BF,EAAeE,GACnBlkB,KAAKokB,SAASF,MAiBf3kB,UAAU+kB,UAAY,SAAUzE,UAC/B7f,KAAKuP,EAAIsQ,EAAItQ,KAiBdhQ,UAAUglB,aAAe,SAAU1E,UAClCxQ,KAAKC,IAAItP,KAAKskB,UAAUzE,OAiBzBtgB,UAAUilB,UAAY,SAAU3E,UAC/B7f,KAAKyP,EAAIoQ,EAAIpQ,KAiBdlQ,UAAUklB,aAAe,SAAU5E,UAClCxQ,KAAKC,IAAItP,KAAKwkB,UAAU3E,OAiBzBtgB,UAAUmlB,SAAW,SAAU7E,UAC9BxQ,KAAKiQ,KAAKtf,KAAK2kB,WAAW9E,OAiB3BtgB,UAAUolB,WAAa,SAAU9E,OACnCjB,EAAK5e,KAAKskB,UAAUzE,GACvBhB,EAAK7e,KAAKwkB,UAAU3E,UAEdjB,EAAKA,EAAKC,EAAKA,KAehBtf,UAAUJ,OAAS,kBAClBkQ,KAAKiQ,KAAKtf,KAAK4kB,eAehBrlB,UAAUqlB,SAAW,kBACpB5kB,KAAKuP,EAAIvP,KAAKuP,EAAIvP,KAAKyP,EAAIzP,KAAKyP,KAGjClQ,UAAUslB,UAAYrF,EAAOjgB,UAAUJ,SAcvCI,UAAUulB,OAAS,kBACP,IAAX9kB,KAAKuP,GAAsB,IAAXvP,KAAKyP,KAgBtBlQ,UAAUwlB,UAAY,SAAShC,UAC9B/iB,KAAKuP,IAAMwT,EAAKxT,GAAKvP,KAAKyP,IAAMsT,EAAKtT,KAmBtClQ,UAAU2B,SAAW,iBACpB,KAAOlB,KAAKuP,EAAI,OAASvP,KAAKyP,KAe/BlQ,UAAUylB,QAAU,iBACnB,CAAEhlB,KAAKuP,EAAGvP,KAAKyP,MAehBlQ,UAAU0lB,SAAW,iBACpB,CAAE1V,EAAGvP,KAAKuP,EAAGE,EAAGzP,KAAKyP,QAIzByV,EAAU,IAAM7V,KAAK6P,cAERzN,EAAKyF,UACX7H,KAAK8V,MAAM9V,KAAK6S,YAAkBzQ,EAAM,GAAKA,cAG/B2T,UACjBA,EAAMF,aAGWG,UACjBA,EAAMH,sCCjyCmB9L,SACzB3D,EAAS6P,GAAO7F,UAAU,CAACrG,EAAKmF,GAAInF,EAAKoF,KACzC5Q,EAAS0X,GAAO7F,UAAU,CAACrG,EAAKqF,GAAIrF,EAAKsF,WACxC,CACLjJ,OAAAA,EACA7H,OAAAA,EACAC,EAAG0X,GAAa9P,EAAQ7H,gBAIE4X,EAAqBC,SAC3ChQ,EAAS6P,GAAO3F,WAAW6F,GAC3B5X,EAAS0X,GAAO3F,WAAW8F,SAC1B,CACLhQ,OAAAA,EACA7H,OAAAA,EACAC,EAAG0X,GAAa9P,EAAQ7H,gBAIA6H,EAAgB7H,SACnC,CACL6H,OAAAA,EACA7H,OAAAA,EACAC,EAAG0X,GAAa9P,EAAQ7H,gBAIC6H,EAAgB7H,UACpCA,EAAO8U,QAAQrC,SAAS5K,eAiBDqG,EAAW1C,SACnCzR,EAAIyR,EAAKvL,EAAE6U,QAAQjB,YAGnBiE,EAAKtM,EAAK3D,OACVuG,EAAIF,EAAE4G,QAAQrC,SAASqF,GAGvB5C,EAAMnb,EAAEmb,IAAI9G,UAIL0J,EAAGhD,QAAQ3e,IAAI4D,EAAE2Z,eAAewB,gBA2B7CrN,EACA7H,EACA4F,EACA1E,QAGUlB,EAAO8U,QACArC,SAAS7M,GAAQoR,WACP9V,EAASA,GAAWO,KAAKkQ,IAAI,eAElC,WAKhBnG,EAAOuM,GAAYlQ,EAAQ7H,GAC3BgY,EAAIC,GAAgBrS,EAAQ4F,GAI5B0M,EADKF,EAAElD,QAAQrC,SAAS7M,GACbrU,YAIb2P,EAASgX,SAAc,QAKvBhX,IAAWgX,SAAcF,QAIvBG,EAAI1W,KAAKiQ,KAAK0G,QAAU,GAAIA,QAAS,IAMrCC,EAAK7M,EAAKvL,EAAE4T,YAAYH,eAAeyE,UAItCH,EAAEvF,SAAS4F,eAkEwBC,EAAaC,SACjDC,EAAKD,EAAM1Q,OACX5H,EAAIuY,EAAG1D,QAAQrC,SAAS6F,EAAMzQ,QAE9B4Q,EAAKH,EAAMrY,EACXyY,EAAKH,EAAMtY,EAEX0Y,EAAK1Y,EAAEmV,MAAMqD,GAAMA,EAAGrD,MAAMsD,UAE3BF,EAAG1D,QAAQ3e,IAAIuiB,EAAG5D,QAAQpB,eAAeiF,gBAIhDC,EACAC,EACAC,EACAC,EACAC,SAEMC,EAAKL,EAILM,EAHKJ,EAGMhE,QAAQrC,SAASwG,GAG5B7K,EAAI8K,EAAMjC,YAEVkC,EAAON,EAAUE,KACnBI,EAAO/K,SAAU,WAGfgL,EAAO3X,KAAKC,IAAImX,EAAUE,MAC5B3K,EAAIgL,SAAa,QAKjBhL,IAAM+K,EAAM,OACRpf,EAAImf,EAAMpE,QAAQjB,mBACd+E,EAAQ9D,QAAQ3e,IAAI4D,EAAE2Z,eAAemF,OAO7CzK,IAAMgL,EAAM,OACRrf,EAAImf,EAAMpE,QAAQjB,YAClBwF,EAAUR,EAAUE,SAIhBH,EAAQ9D,QAAQ3e,IAAI4D,EAAE2Z,eAAe2F,EAAUR,GAAWA,UAOhExK,EAAIwK,EACJS,EAAIP,EAOJQ,EAAKlL,YAJO,GAAI+J,QAAK,GAAIA,QAAK,OAAUhK,EAAIC,IAO5CmL,EAAK/X,KAAKiQ,KAAK0G,QAAK,GAAIA,QAAM,IAG9BqB,EAAKP,EAAMpE,QAAQjB,YAGnB6F,EAAKhC,GAAO7F,UAAU,EAAE4H,EAAG5X,EAAG4X,EAAG9X,IAKjCgY,EAAMF,EAAG3E,QAAQpB,eAAe6F,GAChCK,EAAMF,EAAG5E,QAAQpB,eAAe8F,GAEhCK,EAAUjB,EAAQ9D,QAAQ3e,IAAIwjB,GAAKxjB,IAAIyjB,GACvCE,EAAUlB,EAAQ9D,QAAQ3e,IAAIwjB,GAAKlH,SAASmH,UAEvCG,GAAkBF,EAASb,GAC3Be,GAAkBD,EAASd,GAErBa,EAAUC,cAGctO,SACnCiO,EAAKjO,EAAKvL,EACb6U,QACAjB,YACAiC,OAAOrU,KAAK6P,GAAK,UACbyG,GAAYvM,EAAKxL,OAAQwL,EAAKxL,OAAO8U,QAAQ3e,IAAIsjB,gBAGbnB,EAAaC,UACjD9W,KAAK2P,MACVkH,EAAMrY,EAAE4B,EAAI0W,EAAMtY,EAAE0B,EAAI2W,EAAMrY,EAAE0B,EAAI4W,EAAMtY,EAAE4B,EAC5CyW,EAAMrY,EAAE0B,EAAI4W,EAAMtY,EAAE0B,EAAI2W,EAAMrY,EAAE4B,EAAI0W,EAAMtY,EAAE4B,eAsCdmY,EAAcC,SACxCtY,EAAIsY,EAAKtY,EAAIqY,EAAKrY,EAClBE,EAAIoY,EAAKpY,EAAImY,EAAKnY,SACjBJ,KAAKiQ,KAAKjQ,KAAKkQ,IAAIhQ,EAAG,GAAKF,KAAKkQ,IAAI9P,EAAG,gBCnVpB1Q,UACnBA,GAAUA,IAAU8C,EAAS9C,eCFLG,EAAK+W,UAC7B,SAASlT,UACA,MAAVA,IAGGA,EAAO7D,KAAS+W,SACP,OAAc/W,KAAOsB,OAAOuC,kBCJ3B0S,OACfqS,WCFgB/kB,WAChBtB,EAASU,GAAKY,GACd5D,EAASsC,EAAOtC,OAEbA,KAAU,KACXD,EAAMuC,EAAOtC,GACbJ,EAAQgE,EAAO7D,KAEZC,GAAU,CAACD,EAAKH,EAAOgpB,GAAmBhpB,WAE5C0C,EDRSumB,CAAavS,UACL,GAApBqS,EAAU3oB,QAAe2oB,EAAU,GAAG,GACjCG,GAAwBH,EAAU,GAAG,GAAIA,EAAU,GAAG,IAExD,SAAS/kB,UACPA,IAAW0S,YEAD1S,EAAQ0S,EAAQqS,EAAW3jB,OAC1C1E,EAAQqoB,EAAU3oB,OAClBA,EAASM,EACTyoB,GAAgB/jB,KAEN,MAAVpB,SACM5D,QAEDqB,OAAOuC,GACTtD,KAAS,KACVM,EAAO+nB,EAAUroB,MAChByoB,GAAgBnoB,EAAK,GAClBA,EAAK,KAAOgD,EAAOhD,EAAK,QACjB,KAAMgD,UAEZ,SAGFtD,EAAQN,GAAQ,KAEnBD,KADG4oB,EAAUroB,IACF,GACXwM,EAAWlJ,EAAO7D,GAClB+W,EAAWlW,EAAK,MAEhBmoB,GAAgBnoB,EAAK,YACN,IAAbkM,UAAmClJ,UAC9B,MAEJ,KACDsB,EAAQ,IAAIuG,KACZzG,MACE1C,EAAS0C,EAAW8H,EAAUgK,EAAU/W,EAAK6D,EAAQ0S,EAAQpR,aAElD,MACTiI,GAAY2J,EAAUhK,EAAUkc,EAA+ChkB,EAAYE,GAC3F5C,UAEC,UAIN,EFzCuB2mB,CAAYrlB,EAAQ0S,EAAQqS,QGbxDO,GAAe,mDACfC,GAAgB,oBAULvpB,EAAOgE,MAChBwC,EAAQxG,UACH,MAEL6C,SAAc7C,UACN,UAAR6C,GAA4B,UAARA,GAA4B,WAARA,GAC/B,MAAT7C,IAAiB6R,GAAS7R,MAGvBupB,GAAczlB,KAAK9D,KAAWspB,GAAaxlB,KAAK9D,IAC1C,MAAVgE,GAAkBhE,KAASyB,OAAOuC,gBCwBtBT,EAAMimB,MACF,mBAARjmB,GAAmC,MAAZimB,GAAuC,mBAAZA,QACrD,IAAIC,UAhDQ,2BAkDhBC,EAAW,eACT1R,EAAO9Q,UACP/G,EAAMqpB,EAAWA,EAASvR,MAAMhX,KAAM+W,GAAQA,EAAK,GACnD2R,EAAQD,EAASC,SAEjBA,EAAMroB,IAAInB,UACLwpB,EAAMtoB,IAAIlB,OAEfuC,EAASa,EAAK0U,MAAMhX,KAAM+W,YACrB2R,MAAQA,EAAM9oB,IAAIV,EAAKuC,IAAWinB,EACpCjnB,YAEAinB,MAAQ,OAAaC,OAAS9kB,GAChC4kB,KAIDE,MAAQ9kB,MCnEZ+kB,GAAa,mGAGbC,GAAe,WASfC,YCFmBxmB,OACjBb,EAASsnB,GAAQzmB,GAAM,SAASpD,UAXf,MAYfwpB,EAAM5oB,QACFJ,QAEDR,KAGLwpB,EAAQjnB,EAAOinB,aACZjnB,EDPUunB,EAAc,SAASxlB,OACpC/B,EAAS,UACgB,KAAzB+B,EAAO0Y,WAAW,MACb5b,KAAK,MAEPqC,QAAQimB,IAAY,SAASK,EAAOrX,EAAQsX,EAAOC,KACjD7oB,KAAK4oB,EAAQC,EAAUxmB,QAAQkmB,GAAc,MAASjX,GAAUqX,MAElExnB,QAGMqnB,eEbG/pB,EAAOgE,UACnBwC,EAAQxG,GACHA,EAEFqqB,GAAMrqB,EAAOgE,GAAU,CAAChE,GAAS+pB,GAAa5nB,GAASnC,gBCLjDA,MACO,iBAATA,GAAqB6R,GAAS7R,UAChCA,MAEL0C,EAAU1C,EAAQ,SACJ,KAAV0C,GAAkB,EAAI1C,IAdjB,SAcwC,KAAO0C,cCN7CsB,EAAQ0Y,WAGnBhc,EAAQ,EACRN,KAHGkqB,GAAS5N,EAAM1Y,IAGJ5D,OAED,MAAV4D,GAAkBtD,EAAQN,KACtB4D,EAAOumB,GAAM7N,EAAKhc,cAErBA,GAASA,GAASN,EAAU4D,OAAS,cCZ5BA,EAAQ7D,UACR,MAAV6D,GAAkB7D,KAAOsB,OAAOuC,eCoB1BA,EAAQ0Y,UACJ,MAAV1Y,YCdQA,EAAQ0Y,EAAM8N,WAGzB9pB,KACAN,KAHGkqB,GAAS5N,EAAM1Y,IAGJ5D,OACdsC,GAAS,IAEJhC,EAAQN,GAAQ,KACnBD,EAAMoqB,GAAM7N,EAAKhc,WACI,MAAVsD,GAAkBwmB,EAAQxmB,EAAQ7D,YAGxC6D,EAAO7D,UAEduC,KAAYhC,GAASN,EAChBsC,OAEU,MAAVsB,EAAiB,EAAIA,EAAO5D,SAClBiI,GAASjI,IAAW4I,GAAQ7I,EAAKC,OACzC4D,IAAWgD,GAAYhD,IDLTymB,CAAQzmB,EAAQ0Y,EAAMgO,gBEVpBhO,EAAMxF,UAC7BmT,GAAM3N,IAASsM,GAAmB9R,GAC7BgS,GAAwBqB,GAAM7N,GAAOxF,GAEvC,SAASlT,OACVkJ,WCEKlJ,EAAQ0Y,EAAMiO,OACrBjoB,EAAmB,MAAVsB,OAAiB,EAAY4mB,GAAQ5mB,EAAQ0Y,eACxC,IAAXha,EAAuBioB,EAAejoB,EDJ5BrB,CAAI2C,EAAQ0Y,eACN,IAAbxP,GAA0BA,IAAagK,EAC3C2T,GAAM7mB,EAAQ0Y,GACdnP,GAAY2J,EAAUhK,EAAUkc,gBEDtB1M,UACT2N,GAAM3N,ICrBOvc,EDqBcoqB,GAAM7N,GCpBjC,SAAS1Y,UACG,MAAVA,OAAiB,EAAYA,EAAO7D,cCArBuc,UACjB,SAAS1Y,UACP4mB,GAAQ5mB,EAAQ0Y,IFiBwBoO,CAAiBpO,OCrB9Cvc,cEENH,EAAOC,UACdD,EAAQC,cCiBFC,EAAO2I,UACZ3I,GAASA,EAAME,gBChBHF,EAAO2I,EAAUkiB,WACjCrqB,KACAN,EAASF,EAAME,SAEVM,EAAQN,GAAQ,KACnBJ,EAAQE,EAAMQ,GACdsqB,EAAUniB,EAAS7I,MAER,MAAXgrB,SAAiC,MAC5BA,GAAYA,IAAYnZ,GAASmZ,GAClCD,EAAWC,EAASC,QAEtBA,EAAWD,EACXtoB,EAAS1C,SAGV0C,EDCHwoB,CAAahrB,EEbG,mBAHAF,EFgBiB6I,GEZ5B7I,EAEI,MAATA,EACKqY,GAEW,iBAATrY,EACFwG,EAAQxG,GACXmrB,GAAoBnrB,EAAM,GAAIA,EAAM,IACpCorB,GAAYprB,GAEXqrB,GAASrrB,GFEmCsrB,SAC/C,MEjBgBtrB,cCgBkBurB,EAAclE,SAC7C,CAAE7H,GAAI+L,EAAG/a,EAAGiP,GAAI8L,EAAG7a,EAAGgP,GAAI2H,EAAG7W,EAAGmP,GAAI0H,EAAG3W,eA8E9C+V,EACAC,EACA8E,EACA9b,eAEM+b,EAAaC,GAAgBjF,EAAWC,GACxCiF,EAAOjF,EAAUlW,EAAKgb,EAAK1b,MAAQ,EAAKJ,EACxCkc,EAAMlF,EAAUhW,EAAK8a,EAAKxb,OAAS,EAAKN,EACxCoF,EAAQ4R,EAAUlW,EAAKgb,EAAK1b,MAAQ,EAAKJ,EACzCmc,EAASnF,EAAUhW,EAAK8a,EAAKxb,OAAS,EAAKN,EAC3Coc,EAAW,GACXrR,EAAe+Q,EAAK/Q,aAAe/K,KAIrB,GAAhB+K,IAEOlZ,KACPwqB,GAASrL,UAAU,CAACiL,EAAMC,IAC1BG,GAASrL,UAAU,CAACiL,EAAME,IAC1BE,GAASrL,UAAU,CAAC5L,EAAO8W,IAC3BG,GAASrL,UAAU,CAAC5L,EAAO+W,SAExB,OAGCG,EAAOvR,EAAenK,KAAKwU,IAAIxU,KAAK6P,GAAK,KACtC5e,KACPwqB,GAASrL,UAAU,CAACiL,EAAOlR,EAAcmR,IACzCG,GAASrL,UAAU,CAACiL,EAAMC,EAAMnR,IAChCsR,GAASrL,UAAU,CAACiL,EAAOlR,EAAeuR,EAAMJ,EAAMnR,EAAeuR,IACrED,GAASrL,UAAU,CAACiL,EAAOlR,EAAcoR,IACzCE,GAASrL,UAAU,CAACiL,EAAME,EAASpR,IACnCsR,GAASrL,UAAU,CAACiL,EAAOlR,EAAeuR,EAAMH,EAASpR,EAAeuR,IACxED,GAASrL,UAAU,CAAC5L,EAAQ2F,EAAcmR,IAC1CG,GAASrL,UAAU,CAAC5L,EAAO8W,EAAMnR,IACjCsR,GAASrL,UAAU,CAAC5L,EAAQ2F,EAAeuR,EAAMJ,EAAMnR,EAAeuR,IACtED,GAASrL,UAAU,CAAC5L,EAAQ2F,EAAcoR,IAC1CE,GAASrL,UAAU,CAAC5L,EAAO+W,EAASpR,IACpCsR,GAASrL,UAAU,CAAC5L,EAAQ2F,EAAeuR,EAAMH,EAASpR,EAAeuR,WAIvEC,EACJ,YAFWH,EAAS1nB,QAAS8nB,GAAkBnP,EAAG0O,SAEjCU,GAAeV,EAAW/U,OAAQqG,GAAG8I,gBAAe4F,EAAW5c,cAC3Esd,GAAeF,EAAMR,EAAW5c,QAAQzO,qBA2G/CgsB,EACAC,EACAC,mBAM8BjS,EAAcgS,EAAsBC,SAC5DC,EAAalS,EAAKvL,EAAE6U,QAAQjB,cAE7B5T,EAAE2V,cAED+H,EAAKnS,EAAK3D,OAAOiN,QAAQ3e,IAAIunB,EAAW5I,QAAQpB,eAAe8J,IAE/DnF,EAAK7M,EAAKxL,OAAO8U,QAAQrC,SAASiL,EAAW5I,QAAQpB,eAAe+J,QAErE9M,EAAIC,GAAM+M,EAAGvG,WACbvG,EAAIC,GAAMuH,EAAGjB,gBAEZwG,EAAQN,GAAeK,EAAItF,MAC7B7M,EAAKvL,EAAE2V,QAAUgI,EAAMhI,QAAU,EAAG,OAEhCqD,EAAKiE,GAASrL,UAAU,IAAOhB,GAAM,KAASC,GAAM,IACpD+M,EAAK5E,EAAGnE,QAAQ3e,IAAIunB,EAAWhK,eAAe,MAClD/C,EAAIC,GAAMqI,EAAG7B,WACbvG,EAAIC,GAAM+M,EAAGzG,gBAGV,CAAEzG,GAAAA,EAAIC,GAAAA,EAAIC,GAAAA,EAAIC,GAAAA,GAxBdgN,CADMC,GAAmBR,GACIC,EAAcC,eAkChB5Y,EAAee,EAAkBuL,SAC7DxP,EAAEA,IAAGE,GAAMgD,EACXmM,EAAKrP,EAAIiE,EAAOjE,EAChBsP,EAAKpP,EAAI+D,EAAO/D,QAEf,CACLF,EAAGqP,EAAKvP,KAAKuU,IAAI7E,GAAUF,EAAKxP,KAAKwU,IAAI9E,GAAUvL,EAAOjE,EAC1DE,EAAGmP,EAAKvP,KAAKwU,IAAI9E,GAAUF,EAAKxP,KAAKuU,IAAI7E,GAAUvL,EAAO/D,eAS3Bmc,UAC7BA,EAAQ,IACS,OAAL1M,GAAS0M,GAEN,EAAVvc,KAAK6P,GAAS0M,cAcvBtB,EACA9W,EACA4S,EACAyF,SAEMC,EAAsB,GACtBC,EAAiBC,GAAcxY,EAAQ8W,GACvC2B,EAAiBD,GAAcxY,EAAQ4S,OAEzCwF,EAAQM,GAA+BH,EAAgBE,GACvDJ,EAASD,EAAQ,MACXO,GAAmBP,UAEvBQ,EAAStB,GAASnL,WAAW0M,GAAoB/B,EAAI9W,GAASoY,EAAQ,IACtEU,EAAaN,GAAcxY,EAAQ4Y,GACnCG,EAAYC,GAA6BF,GAEzCG,EAASP,GAA+BH,EAAgBO,OAC1DI,EAAUF,GAA6BT,MACvC1c,KAAKC,IAAImd,GAAUpd,KAAK6P,GAAK,EAAG,OAC5ByN,EAAKC,GAA8BF,EAASH,KAC1CjsB,KAAKqsB,OACR,OAECE,EAAK/B,GAASnL,WAAW0M,GAAoBD,EAAQ5Y,EAAQiZ,EAAS,IACtEK,EAAWN,GAA6BR,GAAcxY,EAAQsX,GAASnL,WAAWkN,KAClFE,EAAMH,GAA8BF,EAASI,GAC7CE,EAAMJ,GAA8BE,EAAUP,KAC5CjsB,KAAKysB,EAAKF,EAAIG,KAGhB1sB,KAAK8rB,SAEPa,EAASf,GAA+BD,EAAgBK,QACpDE,GAA6BP,GACnC5c,KAAKC,IAAI2d,GAAU5d,KAAK6P,GAAK,EAAG,OAC5ByN,EAAKC,GAA8BF,EAASH,KAC1CjsB,KAAKqsB,OACR,OAECE,EAAK/B,GAASnL,WAAW0M,GAAoBD,EAAQ5Y,EAAQyZ,EAAS,IACtEH,EAAWN,GAA6BR,GAAcxY,EAAQsX,GAASnL,WAAWkN,KAClFE,EAAMH,GAA8BL,EAAWO,GAC/CE,EAAMJ,GAA8BE,EAAUJ,KAC5CpsB,KAAKysB,EAAKF,EAAIG,UAGjBlB,QCpSHoB,GAAYpsB,OAAO,UAEnBqsB,GAA2B,CAC/BvrB,KAAM,OACNiN,MAAO,EACPE,OAAQ,EACRsL,OAAQ,EACRc,MAAO,cACP9B,MAAO,2BAwLA9L,GAAQC,SAAO0f,IAAY,sBAeR3e,EAAYsL,EAAmBuT,UAErDvT,GAAYuT,EAAOvT,SACdlL,GAAO7K,OAAOspB,EAAOvT,SAAUtL,GAE/BI,GAAO7K,OAAOspB,EAAOxe,OAAQL,eAetC8e,EACAjb,EACAI,EACAqH,EACAyT,EACAF,KAEO5a,GAAM,CAAEqH,SAAAA,EAAUyT,QAAAA,SACnBtQ,EAAQqQ,EAAO7a,KACf9D,MAAQsb,YAAS,aArCHzb,EAAYsL,EAAmByT,EAAkBF,UACjEE,GAAWF,EAAOxT,MACbjL,GAAO7K,OAAOspB,EAAOxT,MAAOrL,GAE5Bgf,GAAmBhf,EAAMsL,EAAUuT,GAiCfI,CAAapb,EAAMI,GAAKwK,EAAMnD,SAAUmD,EAAMsQ,QAASF,OAC9EK,YAAczD,YAAS,IAAMuD,GAAmBnb,EAAMI,GAAKwK,EAAMnD,SAAUuT,OAC3EpT,MAAQgQ,YAAS,IAAMrb,GAAO7K,OAAOspB,EAAOpT,MAAO5H,EAAMI,QACzDkb,UAAY1D,YAAS,oBACrBoD,EAAOpT,MAAMQ,gBAAgB5Z,SACxB+sB,QAAM3Q,EAAMhD,OAAOQ,KAEnB,SAAA,WAAMhI,aAAMmb,QAAM3Q,EAAMhD,OAAOQ,SAAS,QAG7CV,UAAYkQ,YAAS,IAAMrb,GAAO5P,MAAMquB,EAAOtT,UAAW1H,EAAMI,QAChEuH,WAAaiQ,YAAS,IAAMrb,GAAO5P,MAAMquB,EAAOrT,WAAY3H,EAAMI,kBAGpD0I,SACA,SAAhBA,EAAOtZ,KACFurB,GAEAjS,cAKTmS,EACAO,EACAC,EACA9R,EACAvJ,EACAqH,EACAuT,EACAjb,EACA1D,OAEasN,EAAMvJ,YAGZA,GAAM,CACX4G,UAAM,EACNW,YAAY,EACZF,SAAAA,EACAyT,SAAS,EACTQ,WAAO,EACPC,OAAQ,CAAExP,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACnCsP,cAAe,CAAEzP,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GAC1CuP,SAAU,CAAE1P,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACrCwP,gBAAiB,cAGblR,EAAQqQ,EAAO7a,GAEf4G,EAAO4Q,YAAe,WACpBlM,EAAO/B,EAAMvJ,GACb+I,WAxEaX,EAAYf,EAAmByT,EAAkBF,UAClEvT,EACKlL,GAAO7K,OAAOspB,EAAOvT,SAAUe,GAC7B0S,GAAWF,EAAOxT,MACpBjL,GAAO7K,OAAOspB,EAAOxT,MAAOgB,GAE5BjM,GAAO7K,OAAOspB,EAAOxe,OAAQgM,GAkErBuT,CAAcrQ,EAAMd,EAAMnD,SAAUmD,EAAMsQ,QAASF,SAI3D,CAAE7R,OAAAA,EAAQ6S,YAHGzf,GAAO5P,MAAMquB,EAAOxe,OAAOC,MAAOiP,GAGxBrI,OAFf4Y,GAAa1f,GAAO7K,OAAOspB,EAAOlS,OAAOzF,OAAQ,CAACqI,EAAMvC,KAEjC3N,OADvBygB,GAAa1f,GAAO7K,OAAOspB,EAAOlS,OAAOtN,OAAQ,CAACkQ,EAAMvC,WAGnEnC,KAAOA,IACPW,WAAaiQ,YAAS,IAAMrb,GAAO5P,MAAMquB,EAAOrT,WAAYgC,EAAMvJ,YAElE8b,EAAkBja,QAAMuZ,EAAY3Q,iBAAkBzK,GACtD+b,EAAmBla,QAAMuZ,EAAYzQ,gBAAiB3K,GAEtDgc,EAAiBC,eAAY,mBAC3B3Q,EAAO/B,EAAMvJ,OACdsL,eAECrI,EAAStD,QAAQ2L,WAAMrI,QACvB7H,EAASuE,QAAQ2L,WAAMlQ,QAEvB8gB,EAAc,iBAAW5Q,WAAMrI,kBAASgY,YACxCkB,EAAc,iBAAW7Q,WAAMlQ,kBAAS6f,iBACzChY,GAAW7H,GAAW8gB,GAAgBC,gBAKrCC,W5BhTR9S,EACA+S,EACApZ,EACA7H,EACAa,EACA+M,UAEKM,EAGD+S,EAEKC,GAA2BhT,EAAElB,KAAMnF,EAAQ7H,EAAQa,EAAO,EAAG,EAAG+M,GAEhEsT,GACLhT,EAAElB,KACFnF,EACA7H,EACAa,EACAqN,EAAE8B,WACF9B,EAAE6B,aACFnC,GAbK,CAAE+C,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,G4BwSVqQ,CACtBT,EAAgBvvB,MAChBwvB,EAAiBxvB,MACjB0W,EACA7H,EACAa,EAAM1P,MACNquB,EAAO5R,YAGFwT,EAAmBC,YDjM5BC,EACAhgB,EACAigB,EACAC,OAGIC,EAaAC,WAZyB,WAAzBH,EAAgBvtB,KACNutB,EAAgBrgB,OAEhBygB,GACVrgB,EACAggB,EACAC,EACA,KAMyB,WAAzBC,EAAgBxtB,KACNwtB,EAAgBtgB,OAEhBygB,GACVL,EACAhgB,EACAkgB,EACA,GAIG,CAACC,EAAWC,GCmKfE,CAAkD/Z,EAAQ7H,EAAQ8gB,EAAaC,GAE3E3e,EAAIvB,EAAM1P,QAGVivB,cAAgByB,GACpBb,EACAI,EAAoBhf,EACpBif,EAAoBjf,OAIlBob,EAAe,EACfC,EAAe,QACbqE,EAAItW,EAAKra,SACO,SAAlB2wB,EAAEja,OAAO7T,KAAiB,OACtBsZ,EAASwU,EAAEja,SACFyF,EAAOb,OAASa,EAAOrM,MACjB,gBAAjBqM,EAAOC,WACOuU,EAAEtB,gBAGA,SAAlBsB,EAAE9hB,OAAOhM,KAAiB,OACtBsZ,EAASwU,EAAE9hB,SACFsN,EAAOb,OAASa,EAAOrM,MACjB,gBAAjBqM,EAAOC,WACOuU,EAAEtB,aAIA,OAAlBhB,EAAO/S,aAAqC,IAAlB+S,EAAO/S,OACb,SAAlBqV,EAAEja,OAAO7T,MAAqC,SAAlB8tB,EAAE9hB,OAAOhM,UACvBotB,KACAC,OAGF7B,EAAO/S,OAAS2U,KAChB5B,EAAO/S,OAAS4U,MAKrB,aADA7B,EAAOxrB,OAEZmsB,OAASa,IACTd,WAAQ,IAENG,SADa,IAAjB7C,GAAuC,IAAjBC,EACPrO,EAAM+Q,OAEN0B,GAAsBzS,EAAM+Q,OAAQ3C,EAAepb,EAAGqb,EAAerb,OAEnF,GAEC+d,OAAS4B,GAA4Bla,EAAQ7H,SAC7CgiB,EAAQtB,EAAgBvvB,MAAM6e,WAAa,EAAI0Q,EAAgBvvB,MAAM4e,cAEpEsQ,EAAUH,YAqCrB+B,EACAjB,EACAgB,EACAxE,EACAC,SAKM0C,EAASpC,GAAmBkE,GAC5BC,EAAUnE,GAAmBiD,GAC7BmB,W1BtdgC3W,UAC/BkM,GAAO7F,UAAU,IAAOlB,GAAKnF,EAAKqF,IAAM,KAASD,GAAKpF,EAAKsF,IAAM,I0BqdlDsR,CAA0BpB,IAGzCpb,EAAQ1E,Y1B7Mfwb,EACAlE,EACA6J,SAEM1R,EAAK+L,EAAG/a,EACRiP,EAAK8L,EAAG7a,EACRgP,EAAK2H,EAAG7W,EACRmP,EAAK0H,EAAG3W,EACRygB,EAAKD,EAAG1gB,EACR4gB,EAAKF,EAAGxgB,EACR2gB,EAAM7R,EAAKE,EACX4R,EAAM7R,EAAKE,EACX4R,EAAMJ,EAAKzR,EACX8R,EAAMJ,EAAKzR,EAEXnP,WACgBkP,GAAM4R,KAAY3R,IAAO2R,QAAmB5R,GAAM8R,KAAY7R,QAC7E0R,EAAMG,EAAM,EAAIF,EAAMC,GACvB7gB,IACF6gB,QAAmB7R,GAAM4R,KAAY3R,IAAO0R,QAAmB3R,GAAM8R,KAAY7R,QAC9E0R,EAAMG,EAAM,EAAIF,EAAMC,GAEvBxhB,EAASO,KAAKiQ,KAAKjQ,KAAKkQ,IAAIhB,EAAKhP,EAAG,GAAKF,KAAKkQ,IAAIf,EAAK/O,EAAG,UAEzD,CADQ6V,GAAO7F,UAAU,CAAClQ,EAAGE,IACpBX,G0BqLS0hB,CACvBzC,EAAOtY,OACPsY,EAAOngB,OACPmiB,OAGE9B,EACAH,KAEU,IAAV8B,WAEmB,IAAjBxE,GAAuC,IAAjBC,EACbwE,EAEAJ,GAAsBI,EAAgBzE,EAAcC,GAE1D,CAAC4C,EAAUH,SAId2C,EAAczE,GAAcxY,EAAQuc,GAGpClE,EAASK,GAA+BF,GAAcxY,EAAQua,EAAOtY,QAASgb,MAE/D,IAAjBrF,GAAuC,IAAjBC,IACbwE,MACN,KAGDa,EAAgBtF,EAAetc,EAC/B6hB,EAAgBtF,EAAevc,EAG/B+c,EAAS,mBAIF8D,GACTiB,GAAwB7C,EAAOtY,OAAQjC,EAAQkd,GAC/CE,GAAwB7C,EAAOngB,OAAQ4F,GAASmd,QAK9ClE,EAASP,GACXF,GAAcxY,EAAQua,EAAOtY,QAC7BuW,GAAcxY,EAAQua,EAAOngB,SAE3Bqf,EAASf,GACXzB,GAAgBjX,EAAQ,CAAEjE,EAAG0e,EAAS1P,GAAI9O,EAAGwe,EAASzP,KACtDiM,GAAgBjX,EAAQ,CAAEjE,EAAG0e,EAASxP,GAAIhP,EAAGwe,EAASvP,SAEpDmN,EAASY,EAAS,MACXoE,GAAuBpE,GAC5BZ,EAASoB,EAAS,MACX4D,GAAuB5D,KAGhCR,EAASQ,EAAS,EAAG,OAEjB/F,EAAI6I,EAAcrN,QAAQ3e,IAAI+rB,EAAQjiB,EAAE4T,YAAYH,eAAe,cAC9DqO,GAA4BI,EAAe7I,GAC/C,CAAC+G,EAAUH,UAKfxD,EAAIlE,Y1BjiB6BhN,SACjC,CAACkM,GAAO7F,UAAU,CAACrG,EAAKmF,GAAInF,EAAKoF,KAAM8G,GAAO7F,UAAU,CAACrG,EAAKqF,GAAIrF,EAAKsF,M0BgiB7DoS,CAA4B7C,GACvCnC,EAAUiF,GAAqCzG,EAAI9W,EAAQ4S,EAAIyF,GAAQ1oB,QAAS2Y,EAAEmJ,sBAEhF,CACNzR,OAAQuc,EACRnE,MAAOC,EACPmF,OAAQ,CAAExd,OAAAA,EAAQ1E,OAAAA,GAClBgd,QAAAA,GAEK,CAACmC,EAAUH,GAhIYmD,CACxBjU,EAAM+Q,OACNa,EACAgB,EACAxE,EAAepb,EACfqb,EAAerb,KAEXie,SAAWA,IACXH,MAAQA,MAIZoD,EAAyBzC,eAAY,KACpC1S,EAAMvJ,OACL2e,eAAiBC,GACrBhY,EAAKra,MAAM0W,QACX,EACAuH,EAAMmU,eACN/X,EAAKra,MAAMwc,OAAOlC,SAEdgY,eAAiBD,GACrBhY,EAAKra,MAAM6O,QACX,EACAoP,EAAMqU,eACNjY,EAAKra,MAAMwc,OAAOlC,aAIf7G,GAAI0b,gBAAkB,gBAGflR,EAAMmU,mBACNnU,EAAMqU,uBC3dhBC,GAAwBxwB,OAAO,kCAsCRsR,EAAgC7D,eACrDkE,EAAM,WAAMlE,MAAS,CAAEgB,EAAG,EAAGE,EAAG,UAC/B8D,kBAAKd,eAIZhF,EACA8jB,EACAC,EACA3D,EACA4D,EACAC,EACAC,EACAC,EACAC,EACAvf,gBAEU,sBACEvT,UAAO+yB,iBAAiB,cAAeC,EAAiC,CAChFC,SAAS,sBAID,sBACAjzB,UAAOkzB,oBAAoB,cAAeF,YAGhD/U,EAAe,CAGnBvP,UAAW,CACTykB,YAAa,EACbC,eAAgB,GAElBC,aAAc,IAAIzuB,IAClB0uB,OAAQ,CACNC,qBACAC,kBAAmB,IAErBX,aAAAA,EACAY,gBAAiB,IAAI7oB,IACrBkoB,aAAAA,EACAY,aAAc,IAAI9uB,IAClB+uB,qBAAsB,GAGlBC,EAA2B,CAC/BC,qBAyBuCC,KACjCplB,UAAUykB,eAzBhBY,UAAWC,EACXC,cAAeD,GAEXE,EAAsB,CAC1BL,qBAoJkCM,WAC5BC,mBACAC,wBAEAC,EAAerW,EAAMoV,aAAahyB,IAAI8yB,EAAMI,eAC7CD,cAGQE,eAAiB,CAAEhkB,EAAG2jB,EAAMM,MAAO/jB,EAAGyjB,EAAMO,SAC5CvB,cAETmB,EAAanB,aAvPY,cA2PxB,WAAWmB,EAAajgB,kBAAS0G,qBAIL4Z,IAA7BL,EAAanB,YAA8C,OACvDyB,EAAgBC,EAA0BP,EAAc,CAC5DC,UAAWD,EAAaC,UACxBE,MAAOH,EAAaQ,iBAAiBtkB,EACrCkkB,MAAOJ,EAAaQ,iBAAiBpkB,MAE/B5C,KAAK,iBAAkB8mB,SAE3BG,EAAgBF,EAA0BP,EAAcH,KACtDrmB,KAAK,mBAAoBinB,IA/KjChB,mBAqNgCI,WAC1BC,mBACAC,wBAEAC,EAAerW,EAAMoV,aAAahyB,IAAI8yB,EAAMI,eAC7CD,WAICjB,aAAa9jB,OAAO4kB,EAAMI,iBAE1B/kB,EAAO8kB,EAAajgB,UAEVigB,EAAanB,YA3TA,MA6TvB,WAAWmB,EAAajgB,kBAAS0G,UAAW,OACxCga,EAAgBF,EAA0BP,EAAcH,KACtDrmB,KAAK,eAAgBinB,KACrBjnB,KAAK,iBAAkB,CAAE0B,KAAAA,EAAM2kB,MAAAA,YAGjCrmB,KAAK,iBAAkB,CAAE0B,KAAAA,EAAM2kB,MAAAA,aAzHb3kB,EAAc2kB,cACtCA,EAAMa,UAAYpC,EAAc7xB,KAAO,WAI7BJ,cAERqa,EAAa,SAAA,WAAWxL,aAAOwL,kBACjCA,EAAY,OACRia,EACJC,GAAQ3uB,QAAQ0X,EAAMoV,cAAcplB,WAC7B8O,EAAEwX,WAAaJ,EAAMI,WAAa5B,EAAcrxB,IAAIyb,EAAE1I,UAC3DjU,OAAS,EACT+zB,EAAMa,UAAYC,EAEhBtC,EAAcrxB,IAAIkO,KACND,OAAOC,GAGG,iBAAfwL,GACP2X,EAAc5xB,MAAQia,KAGVhW,IAAIwK,GAEVmjB,EAAcrxB,IAAIkO,OAEd7O,UACAqE,IAAIwK,MAGd1B,KAAK,aAAc,CAAE0B,KAAAA,EAAM2kB,MAAAA,KA2FZ3kB,EAAM2kB,GAGE,GAA3BlW,EAAMoV,aAAatyB,QAEfuyB,OAAS,CAAEC,qBAAuBC,kBAAmB,OACjDU,GAAqB9tB,SAAQ,EAAE+uB,EAAIC,eAClClC,oBAAoBiC,EAAIC,QAE3BtnB,KAAK,YAAa,cAEPwmB,KAIfzB,aAAalyB,UACb8yB,gBAAgBrtB,QAAQ6X,EAAM4U,aAAa7tB,IAAKiZ,EAAM4U,eA1P5DoB,uBAiLoCE,KAC9BC,mBACAC,sBAEFC,EAAerW,EAAMoV,aAAahyB,IAAI8yB,EAAMI,eAC3CD,aAIAA,KAAgBrW,EAAMoV,aAAatuB,SAAU,OAC1CyK,EAAO8kB,EAAajgB,UAEVigB,EAAanB,YAvRF,EAwRd,OAEL4B,EAAgBF,EAA0BP,EAAc,CAC5DC,UAAWD,EAAaC,UACxBE,MAAOH,EAAaE,eAAehkB,EACnCkkB,MAAOJ,EAAaE,eAAe9jB,MAE7B5C,KAAK,eAAgBinB,KAEvBjnB,KAAK,iBAAkB,CAAE0B,KAAAA,EAAM2kB,MAAAA,MAKnCd,aAAa1yB,UACb2yB,OAAS,CAAEC,qBAAuBC,kBAAmB,OACjDU,GAAqB9tB,SAAQ,EAAE+uB,EAAIC,eAClClC,oBAAoBiC,EAAIC,QAE3BtnB,KAAK,YAAa,aA/MtBunB,EAAsB,CAC1BtB,mBAuVgCI,KAC1BC,mBACAC,wBAEAC,EAAerW,EAAMyV,aAAaryB,IAAI8yB,EAAMI,eAC7CD,WAICZ,aAAankB,OAAO4kB,EAAMI,iBAE1B1Y,EAAOyY,EAAa3V,SAElB7Q,KAAK,iBAAkB,CAAE+N,KAAAA,EAAMsY,MAAAA,KAEnClW,EAAMyV,aAAa3yB,KAAO,GAAoC,IAA/Bkd,EAAM0V,gCAqCb9X,EAAcsY,YACtCA,EAAMa,UAAYrC,EAAc5xB,KAAO,WAI7BJ,cAERqa,EAAa,WAAWa,aAAOb,cACjCA,EAAY,OACRsa,EACJJ,GAAQ3uB,QAAQ0X,EAAMyV,cAAczlB,WAC7B8O,EAAEwX,WAAaJ,EAAMI,WAAa3B,EAActxB,IAAIyb,EAAE4B,UAC3Dve,OAAS,EACT+zB,EAAMa,UAAYM,EAChB1C,EAActxB,IAAIua,KACNtM,OAAOsM,GAGG,iBAAfb,GACP4X,EAAc7xB,MAAQia,KAGVhW,IAAI6W,MAINlb,UACAqE,IAAI6W,MAGd/N,KAAK,aAAc,CAAE+N,KAAAA,EAAMsY,MAAAA,KAlEZtY,EAAMsY,GAGG,IAA5BlW,EAAMyV,aAAa3yB,SAEf4yB,qBAAuB,KACnB0B,GAAqBjvB,SAAQ,EAAE+uB,EAAIC,eAClClC,oBAAoBiC,EAAIC,QAE3BtnB,KAAK,YAAa,aA/W5BmmB,uBAmXoCE,KAC9BC,mBACAC,sBAEepW,EAAMyV,aAAaryB,IAAI8yB,EAAMI,4BAKvCgB,KAAgBtX,EAAMyV,aAAa3uB,SAAU,OAChD8W,EAAO0Z,EAAa5W,SAClB7Q,KAAK,iBAAkB,CAAE+N,KAAAA,EAAMsY,MAAAA,MAInCT,aAAa/yB,UACbgzB,qBAAuB,KACnB0B,GAAqBjvB,SAAQ,EAAE+uB,EAAIC,eAClClC,oBAAoBiC,EAAIC,QAE3BtnB,KAAK,YAAa,wBApYagmB,KACjCplB,UAAUykB,YAAc,EACS,IAAnClV,EAAMvP,UAAU0kB,mBAERQ,GAA0BxtB,SAAQ,EAAE+uB,EAAIC,uBACtCp1B,UAAO+yB,iBAAiBoC,EAAIC,EAAS,CAAEnC,SAAS,SAGxDvkB,UAAU0kB,4BAOqBe,QAC/BzlB,UAAU0kB,iBACuB,IAAnCnV,EAAMvP,UAAU0kB,oBAERQ,GAA0BxtB,SAAQ,EAAE+uB,EAAIC,uBACtCp1B,UAAOkzB,oBAAoBiC,EAAIC,MAEvCnX,EAAMvP,UAAUykB,aAvHO,GAuHkC,IAEvDgB,EAAMa,aAA2Bj0B,KAAO,GAAK6xB,EAAc7xB,KAAO,YAGxDJ,UACAA,oBASQ2zB,SACpBkB,EAAavX,EAAMqV,OAAOC,oBAAsBe,EAAaC,UAC7DkB,EAAiB9C,EAAcrxB,IAAIgzB,EAAajgB,QAEhDqhB,MAAyBnB,aAAatW,EAAMoV,iBAC7CmC,GAAcE,GAAaF,IAAeC,EAAiB,OAExDlhB,EAAY2gB,GAAQ3uB,QAAQ0X,EAAMoV,cAAcliB,SAAUwhB,EAAcrxB,IAAIyb,EAAE1I,cAC/EE,gBACG+e,OAAS,CAAEC,qBAAuBC,kBAAmB,OAG9Cjf,IACT+e,OAAOC,kBAAoBe,EAAaC,cACzC,OACCoB,EAAW1X,EAAMoV,aAAahyB,IAAI4c,EAAMqV,OAAOC,uBAChDoC,gBACGrC,OAAS,CAAEC,qBAAuBC,kBAAmB,OAG9CmC,KAGbH,GAAcC,EAAgB,OAG1BG,EAAYV,GAAQ3uB,QAAQ0X,EAAMoV,cAAcjvB,QAASwE,EAAEyL,WAC3Dif,OAAOE,kBAAoB/xB,OAAOsN,YACtCxO,MAAM6N,KAAKukB,GACR1kB,YAAa2nB,EAAUC,SAASjtB,KAChCqF,yBAAY,WAAWrF,aAAImS,aAC3B3W,QAAS,CAACwE,EAAGktB,GAAoBtD,EAAe5pB,SAExCksB,iBAAmBtgB,kBAAK8f,EAAaE,kBACrCuB,iBAAmBD,GAAoBtD,EAAe8B,EAAajgB,oBAWjDigB,EAAgCH,SAC3DtU,EAAKyU,EAAaQ,iBAAiBtkB,EAAI2jB,EAAMM,MAC7C3U,EAAKwU,EAAaQ,iBAAiBpkB,EAAIyjB,EAAMO,MAC7C/gB,EACJsK,EAAMqV,OAAOC,mBAAqBe,EAAaC,UAC3C/f,iBACG8f,EAAajgB,QAASigB,EAAayB,kBACjC9X,EAAMqV,OAAOE,mBAElB,EAAGc,EAAajgB,QAASigB,EAAayB,kBACtCC,EAAIvD,EAAUzyB,aAEbyB,OAAOsN,YACZtN,OAAOhB,QAAQkT,GAAWvP,KAAI,EAAEoL,EAAMkE,KAAS,CAC7ClE,EACA,CACEgB,EAAGkD,EAAIlD,EAAIqP,EAAKmW,EAChBtlB,EAAGgD,EAAIhD,EAAIoP,EAAKkW,eAxBlBrD,GAAe,WACb2B,EAAerW,EAAMoV,aAAahyB,IAAI4c,EAAMqV,OAAOC,mBACrDe,KACiBA,YAoWjB2B,EAAW,CACftD,cAAAA,EACAE,aAAAA,EACAD,cAAAA,EACAE,aAAAA,EACAoD,oCAjMkC1mB,EAAc2kB,QAC1CC,mBACAC,kBAE0B,IAA5BpW,EAAMyV,aAAa3yB,YAIQ,GAA3Bkd,EAAMoV,aAAatyB,SAEb+M,KAAK,YAAa,WAChBomB,GAAqB9tB,SAAQ,EAAE+uB,EAAIC,eAClCrC,iBAAiBoC,EAAIC,aAK5Bd,EAAiC,CACrCC,UAAWJ,EAAMI,UACjBlgB,OAAQ7E,EACR2jB,YAAa,EACb4C,iBAAkBD,GAAoBtD,EAAehjB,GACrDslB,iBAAkB,CAAEtkB,EAAG2jB,EAAMM,MAAO/jB,EAAGyjB,EAAMO,OAC7CF,eAAgB,CAAEhkB,EAAG2jB,EAAMM,MAAO/jB,EAAGyjB,EAAMO,UAEvCrB,aAAaxyB,IAAIszB,EAAMI,UAAWD,GAEpC3B,EAAcrxB,IAAIkO,KAChByO,EAAMqV,OAAOC,kBAAoB,KAE7BD,OAAOC,kBAAoBY,EAAMI,YACpBD,WAIZrW,EAAMqV,OAAOE,kBAAkBc,EAAajgB,WAI/CvG,KAAK,mBAAoB,CAAE0B,KAAAA,EAAM2kB,MAAAA,KA2JzCgC,oCAxJkC3mB,EAAc2kB,KAC1CV,gBAAgBzuB,IAAIwK,GACtByO,EAAMoV,aAAatyB,KAAO,MAGxB8xB,aAAa7tB,IAAIwK,KACf1B,KAAK,mBAAoB,CAAE0B,KAAAA,EAAM2kB,MAAAA,MAmJzCiC,mCAhJiC5mB,EAAc2kB,KACzCV,gBAAgBlkB,OAAOC,GACzByO,EAAMoV,aAAatyB,KAAO,MAGxB8xB,aAAatjB,OAAOC,KAClB1B,KAAK,kBAAmB,CAAE0B,KAAAA,EAAM2kB,MAAAA,MA2IxCkC,oCApIkCxa,EAAcsY,QAC1CC,mBACAC,kBAE0B,IAA5BpW,EAAMoV,aAAatyB,YAIQ,GAA3Bkd,EAAMyV,aAAa3yB,SAEb+M,KAAK,YAAa,WAChBunB,GAAqBjvB,SAAQ,EAAE+uB,EAAIC,eAClCrC,iBAAiBoC,EAAIC,QAE1BzB,qBAAuB,KAGzBA,6BAGAW,EAAiC,CACrCC,UAAWJ,EAAMI,UACjB5V,OAAQ9C,KAEJ6X,aAAa7yB,IAAIszB,EAAMI,UAAWD,KAEhCxmB,KAAK,mBAAoB,CAAE+N,KAAAA,EAAMsY,MAAAA,KA2GzCmC,oCAnBkCza,EAAcsY,KAC1CrB,aAAa9tB,IAAI6W,KACf/N,KAAK,mBAAoB,CAAE+N,KAAAA,EAAMsY,MAAAA,KAkBzCoC,mCAfiC1a,EAAcsY,KACzCrB,aAAavjB,OAAOsM,KAClB/N,KAAK,kBAAmB,CAAE+N,KAAAA,EAAMsY,MAAAA,uBAelC5B,GAAuB0D,GACxBA,uBAIAznB,GAAQC,SAAO8jB,IAAwB,4BCzjB1CiE,GAAkBz0B,OAAO,+BAIvBwR,ECTyB,CAACkjB,IAAI7tB,EAAEA,GAAG,IAAIhE,IAAIqQ,GAAG,SAAS+R,EAAEvkB,OAAOyc,EAAEtW,EAAEvH,IAAI2lB,KAAK9H,EAAE3d,KAAKkB,GAAGmG,EAAE/H,IAAImmB,EAAE,CAACvkB,KAAK0S,IAAI,SAAS6R,EAAEvkB,OAAOyc,EAAEtW,EAAEvH,IAAI2lB,SAAS9H,EAAE5e,OAAO4e,EAAEwX,QAAQj0B,KAAK,EAAE,GAAGmG,EAAE/H,IAAImmB,EAAE,MAAMlZ,KAAK,SAASkZ,EAAEvkB,OAAOyc,EAAEtW,EAAEvH,IAAI2lB,MAAM9H,EAAE5N,QAAQlN,KAAI,SAASmkB,KAAK9lB,SAAQmG,EAAEvH,IAAI,OAAO6d,EAAE5N,QAAQlN,KAAI,SAASmkB,KAAKvB,EAAEvkB,YAA3RmG,mBDUd4tB,GAAiBjjB,GAClBA,sBAIA,CACLA,QAAS/E,GAAQC,SAAO+nB,IAAkB,sBEhB9CG,GAAiB,CAMfC,cAAe,cACa,oBAAfC,kBAAmCA,cAC1B,oBAATl1B,YAA6BA,QAClB,oBAAXm1B,cAA+BA,eACpB,IAAXt1B,UAA+BA,WAEtB,IAATP,YAA6BA,WAClC,IAAI0M,MAAM,mCAUlBopB,OAAQ,SAAUloB,EAAQ6H,WAEfsgB,OADAnoB,GAAU,GACF6H,EAEXzV,KAAK6B,SAAS4T,EAAOsgB,MAChBA,GAAQ/1B,KAAK81B,OAAOloB,EAAOmoB,GAAOtgB,EAAOsgB,MAEzCA,GAAQtgB,EAAOsgB,UAGnBnoB,GASTooB,UAAW,SAAUC,UAEjBA,aAAaC,aACbD,aAAaE,YACbF,aAAaG,eACZH,GACc,iBAANA,GACD,OAANA,GACe,IAAfA,EAAE7vB,UACoB,iBAAf6vB,EAAEI,UAUfx0B,SAAU,SAAUo0B,SAC2B,oBAAtCz1B,OAAOjB,UAAU2B,SAASf,KAAK81B,IASxCK,SAAU,SAAU3uB,UACVkI,MAAM0mB,WAAW5uB,KAAO4J,SAAS5J,IAS3C6uB,OAAQ,SAAUC,OACZC,EAAShpB,KAER1N,KAAKg2B,UAAUS,KAqBRA,MArB4B,MAGP,iBAAtBA,GACPA,aAA6B3uB,cAavB,IAAI4E,MAAM,6DAVNiqB,SAASC,cAAcH,UAGzB,IAAI/pB,MACR,0DACE+pB,MAY4B,QAAlCC,EAAQG,QAAQC,gBACZJ,UAEgC,WAAlCA,EAAQG,QAAQC,gBACZJ,EAAQK,gBAAgBC,oBACzB,IACiC,UAAlCN,EAAQG,QAAQC,mBAGoB,QAAlCJ,EAAQG,QAAQC,cACZ,IAAIpqB,MACR,+FAGI,IAAIA,MAAM,qBAPZgqB,EAAQO,iBAAiBD,uBAc9BtpB,GASTwpB,MAAO,SAAUC,EAAIC,UACZ,kBACED,EAAGngB,MAAMogB,EAASnxB,aAY7BoxB,QAAS,SAAUpB,UACVz1B,OAAOjB,UAAU2B,SACrB8V,MAAMif,GACNtzB,QAAQ,cAAe,IACvBA,QAAQ,MAAO,KASpB20B,uBAAwB,SAAUC,EAAK7pB,WAEjB,IAAhB6pB,EAAIC,SAAsC,OAAhBD,EAAIC,aAE5BA,QAAU,IACVC,QAAU,OAGM,IAAhBF,EAAIG,SAAsBH,EAAIG,QAAQv4B,gBACT,IAA3Bo4B,EAAIG,QAAQ,GAAGF,UACbA,QAAUD,EAAIG,QAAQ,GAAGF,UACzBC,QAAUF,EAAIG,QAAQ,GAAGD,qBACK,IAAzBF,EAAIG,QAAQ,GAAGlE,MAAkB,KACtCjJ,EAAO7c,EAAIiqB,0BAEXH,QAAUD,EAAIG,QAAQ,GAAGlE,MAAQjJ,EAAKG,OACtC+M,QAAUF,EAAIG,QAAQ,GAAGjE,MAAQlJ,EAAKI,eAGb,IAAtB4M,EAAIK,oBACqB,IAA9BL,EAAIK,cAAcJ,YAChBA,QAAUD,EAAIK,cAAcJ,UAC5BC,QAAUF,EAAIK,cAAcH,UAaxCI,eAAgB,SAAUN,EAAK7pB,EAAKoqB,WAEd,IAAhBP,EAAIG,SAAsBH,EAAIG,QAAQv4B,gBACL,IAA/Bo4B,EAAIG,QAAQI,GAAON,UACjBA,QAAUD,EAAIG,QAAQI,GAAON,UAC7BC,QAAUF,EAAIG,QAAQI,GAAOL,qBACK,IAA7BF,EAAIG,QAAQI,GAAOtE,MAAkB,KAC1CjJ,EAAO7c,EAAIiqB,0BAEXH,QAAUD,EAAIG,QAAQI,GAAOtE,MAAQjJ,EAAKG,OAC1C+M,QAAUF,EAAIG,QAAQI,GAAOrE,MAAQlJ,EAAKI,eAK5B,IAAhB4M,EAAIC,SAAsC,OAAhBD,EAAIC,YAE5BA,QAAU,IACVC,QAAU,OACY,IAAtBF,EAAIK,oBAC4B,IAA9BL,EAAIK,cAAcJ,YAChBA,QAAUD,EAAIK,cAAcJ,UAC5BC,QAAUF,EAAIK,cAAcH,WAgB1CM,WAAY,SAAUR,EAAKS,MAEN,IAAfT,EAAIU,cACC,KAGAD,MAAAA,EAAwC,KAC3CE,EAAgBX,EAAIY,UAAYH,EAAQG,UAC1CC,EAAkB/oB,KAAKiQ,KACrBjQ,KAAKkQ,IAAIgY,EAAIC,QAAUQ,EAAQR,QAAS,GACtCnoB,KAAKkQ,IAAIgY,EAAIE,QAAUO,EAAQP,QAAS,WAGvCS,EAAgB,KAAOE,EAAkB,UAI3C,GAQT7gB,IACED,KAAKC,KACL,kBACS,IAAID,MAAO+gB,WAStBC,SAAU,SAAUh2B,EAAMi2B,EAAMC,OAE1BpB,EAASrgB,EAAMtV,EADfg3B,EAAOz4B,KAEP04B,EAAU,KACVC,EAAW,EACVH,MACO,QAERI,EAAQ,cACqB,IAApBJ,EAAQK,QAAoB,EAAIJ,EAAKlhB,QACtC,OACDjV,EAAK0U,MAAMogB,EAASrgB,GACxB2hB,MACO3hB,EAAO,cAGd,eACDQ,EAAMkhB,EAAKlhB,MACVohB,IAAgC,IAApBH,EAAQK,YACZthB,OAETK,EAAY2gB,KAAcI,YACpB34B,OACHiG,UACH2R,GAAa,GAAKA,EAAY2gB,gBACnBG,KACH,OACCnhB,IACFjV,EAAK0U,MAAMogB,EAASrgB,GACxB2hB,MACO3hB,EAAO,OAET2hB,IAAgC,IAArBF,EAAQM,aACnBC,WAAWH,EAAOhhB,IAEvBnW,IAUXu3B,4BAA6B,SAAUC,OACjCP,EAAU,WAGM,SAAhBO,GAA0BA,EAAc,IAAMA,EAAc,MACpD5pB,KAAK8V,MAAM,IAAO8T,IAGd,OAAZP,EACK7C,OAAOqD,uBAAyBC,GAAe,IAE/CA,GAAeT,IAW1B/Q,kBAAmB,SAAUyR,EAAQC,OAC/Bza,EAAKwa,EAAO7pB,EAAI8pB,EAAO9pB,EACvBsP,EAAKua,EAAO3pB,EAAI4pB,EAAO5pB,SACpBJ,KAAKiQ,KAAKV,EAAKA,EAAKC,EAAKA,iBAUZ6Z,UACf,SAAUzqB,UACR8qB,WAAW9qB,EAAUyqB,QCjW5BY,GAAQC,GAEZC,GAAkB,eAIdC,EACAC,EACAC,EAHEC,EAAS,GAIXC,EAAM,GACJC,EAAoB,CAAE9H,SAAS,GAC/B+H,EAAqB,CAAE/H,SAAS,uBAa7B2H,MAED,YAAahD,SAASqD,cAAc,OAChC,aAC0B,IAA1BrD,SAASsD,aACT,aACA,kBAEDN,aAgEkBO,EAAMC,EAAWlsB,EAAUmsB,OAChDC,IAEiB,UAAjBC,IACGrsB,WAjEeyoB,EAASzoB,OAG3BkpB,EAAK,SAASS,IACfA,MAAkC/B,OAAO3C,WAGtCA,EAAQ,CAEV0E,cAAAA,EACAhqB,OAAQgqB,EAAchqB,QAAUgqB,EAAc2C,WAC9C34B,KAAM,QACN44B,UAAiC,uBAAtB5C,EAAch2B,KAAgC,EAAI,EAC7D64B,OAAQ,EACRC,OAAQ,EACRvH,eAAgB,aACAA,eACVyE,EAAczE,iBACbyE,EAAc+C,aAAc,UAKjB,cAAhBL,OACIM,UAAe,GAAMhD,EAAciD,aAE3BC,gBACLL,UAAe,GAAM7C,EAAckD,gBAEtCF,OAAShD,EAAcK,OAIxBhqB,EAASilB,aAGd5yB,KAAK,CACPo2B,QAAAA,EACAS,GAAAA,IAGKA,EA0BA4D,CAAeb,EAAMjsB,KAGvBwrB,GACHG,EAASO,EACTE,EACAD,EAAoBN,EAAoBC,cAIdG,EAAMC,EAAWlsB,EAAUmsB,OACnDC,IAEiB,UAAjBC,IACGrsB,WArCYyoB,WACVzY,EAAI,EAAGA,EAAI4b,EAAI16B,OAAQ8e,OAC1B4b,EAAI5b,GAAGyY,UAAYA,SACdmD,EAAI5b,GAAGkZ,UAGX,aAiCA6D,CAAYd,KAGdR,GACHE,EAASO,EACTE,EACAD,EAAoBN,EAAoBC,YApCpBrD,WACbzY,EAAI,EAAGA,EAAI4b,EAAI16B,OAAQ8e,OAC1B4b,EAAI5b,GAAGyY,UAAYA,SACdmD,EAAIx6B,OAAO4e,EAAG,IAoCVic,UAjHbZ,GAAM3D,gBAAgB7D,oBACJ,qBACG,0BAEH,gBACG,gBACd,MA0IJ,CACL9d,YA7BwBkmB,EAAMjsB,EAAUmsB,KACtBF,EAAMI,IAAcrsB,EAAUmsB,GAG5B,kBAAhBE,OAEAJ,EACA,sBACAjsB,EACAmsB,IAqBJlmB,aAhB2BgmB,EAAMjsB,EAAUmsB,KACtBF,EAAMI,IAAcrsB,EAAUmsB,GAG/B,kBAAhBE,OAEAJ,EACA,sBACAjsB,EACAmsB,KAvJU,GCNdd,GAAQC,GACV0B,GAAW,UAKS,oBAAZtE,UAA6BA,SAASuE,kBAGnC,UAGbC,GAAiB,CACfC,MAAO,6BACPC,MAAO,uCACPC,QAAS,gCACTC,QAAS,+BACTC,KAAM,oCAQNC,gCAAiC,SAAU/tB,MACrCA,EAAIguB,aAAehuB,EAAIiuB,mBAClB,CAAE9sB,MAAOnB,EAAIguB,YAAa3sB,OAAQrB,EAAIiuB,iBAClCjuB,EAAIiqB,+BACRjqB,EAAIiqB,8BAEL,IAAIjrB,MAAM,2CAUpBkvB,oBAAqB,SAAUluB,EAAKmuB,OAC9BC,EAAW,YAEXxC,GAAMtD,UAAU6F,GACPA,EAEAnuB,EAAIkpB,cAAciF,IAIhB,KACTE,EAAaz8B,MAAMC,UAAU8Q,MAC9BlQ,KAAKuN,EAAIquB,YAAcruB,EAAIsuB,UAC3BhvB,QAAO,SAAUivB,SACO,SAAhBA,EAAG5F,UAAuC,UAAhB4F,EAAG5F,YAMhB,IAAtB0F,EAAW58B,QACgB,MAA3B48B,EAAW,GAAG1F,UAC8B,OAA5C0F,EAAW,GAAGG,aAAa,iBAEhBH,EAAW,QAKrBD,EAAU,KACTK,EACF,aAAc,IAAI7kB,MAAO8kB,cAAcz5B,QAAQ,MAAO,OAC7Cg0B,SAAS0F,gBAAgBr8B,KAAKo7B,MAAO,MACvCkB,aAAa,KAAMH,OAGxBI,EAAc7uB,EAAIquB,YAAcruB,EAAIsuB,YAClCO,GAAeA,EAAYp9B,OAAS,UAC/B8e,EAAIse,EAAYp9B,OAAQ8e,EAAI,EAAGA,IAEe,SAAjDse,EAAYA,EAAYp9B,OAAS8e,GAAGoY,YAC7BmG,YAAYD,EAAYA,EAAYp9B,OAAS8e,MAIxDue,YAAYV,OAIdW,EAAa,UACbX,EAASI,aAAa,aACXJ,EAASI,aAAa,SAASvsB,MAAM,OAI9C8sB,EAAWhH,QAAQ,6BACZn1B,KAAK,2BACPg8B,aAAa,QAASG,EAAW3sB,KAAK,OAG1CgsB,GAQTY,mBAAoB,SAAUhvB,QAExB4uB,aAAa,QAASt8B,KAAKo7B,SAC3BuB,eAAe38B,KAAKs7B,QAAS,cAAet7B,KAAKu7B,WACjDoB,eAAe38B,KAAKs7B,QAAS,WAAYt7B,KAAKw7B,MAG3B,OAAnB9tB,EAAIkvB,WAAqB,KACvBpuB,EAAQd,EAAIwuB,aAAa,UAAY,QACrC1tB,EAAMsoB,cAAcrB,QAAQ,eAC1B6G,aAAa,QAAS,qBAAuB9tB,KAQvDquB,kCAAmC,IAanCC,kBAAmBxD,GAAMhB,UACvB,mBACMyE,EAAUpG,SAASqG,iBAAiB,QACpCC,EAAeF,EAAQ59B,OAClB8e,EAAI,EAAGA,EAAIgf,EAAchf,IAAK,KACjCif,EAAWH,EAAQ9e,KACd2e,WAAWO,aAAaD,EAAUA,MAG/Cl9B,GAAOA,GAAK68B,kCAAoC,MAUlDO,OAAQ,SAAU1G,EAAS2G,EAAQC,OAC7B7E,EAAOz4B,KACTgQ,EACE,UACAqtB,EAAOrhB,EACP,IACAqhB,EAAOphB,EACP,IACAohB,EAAOnW,EACP,IACAmW,EAAOE,EACP,IACAF,EAAO77B,EACP,IACA67B,EAAOG,EACP,MAEIb,eAAe,KAAM,YAAa3sB,GACtC,cAAe0mB,EAAQloB,QACjBA,MAAMtG,UAAY8H,EACjB,kBAAmB0mB,EAAQloB,QAC5BA,MAAM,iBAAmBwB,EACxB,sBAAuB0mB,EAAQloB,UAChCA,MAAM,qBAAuBwB,GAMtB,OAAbirB,IAAuBqC,MAEpBV,WAAWO,aAAaG,EAAMA,UAI5BvE,YAAW,aACX+D,sBACJrE,EAAKoE,qCAWZY,cAAe,SAAUlG,EAAK7pB,OACxBgwB,EAAQhwB,EAAIiwB,2BAEVrG,uBAAuBC,EAAK7pB,KAE5B6B,EAAIgoB,EAAIC,UACR/nB,EAAI8nB,EAAIE,QAEPiG,GAWTE,cAAe,SAAUrG,EAAK7pB,EAAKoqB,OAC7B4F,EAAQhwB,EAAIiwB,2BAEV9F,eAAeN,EAAK7pB,EAAKoqB,KAEzBvoB,EAAIgoB,EAAIC,UACR/nB,EAAI8nB,EAAIE,QAEPiG,GASTG,kBAAmB,SAAUnwB,EAAKmB,EAAOE,UAChC/O,KAAK29B,eAAejwB,EAAKmB,EAAQ,EAAGE,EAAS,IAWtD4uB,eAAgB,SAAUjwB,EAAK6B,EAAGE,OAC5BiuB,EAAQhwB,EAAIiwB,0BACVpuB,EAAIA,IACJE,EAAIA,EAEHiuB,ICpQPI,GAAWvE,GAEfwE,GAAiB,CACfC,OAAQ,SAAUC,OAEZX,EAAOW,EAASvwB,IAAIkpB,cAAc,WACjC0G,MACI3G,SAAS0F,gBAAgByB,GAAS1C,MAAO,UACvC1tB,IAAI8uB,YAAYc,KAIbA,EAAK1G,cAAc,sCACnB,KACRpoB,EAAQmoB,SAAS0F,gBAAgByB,GAAS1C,MAAO,WAC/CkB,aAAa,KAAM,kCACnBA,aAAa,OAAQ,cACrB4B,YACJ,iQACG1B,YAAYhuB,OAIf2vB,EAAYxH,SAAS0F,gBAAgByB,GAAS1C,MAAO,OAC/CkB,aAAa,KAAM,2BACnBA,aACR,YACA,gBACYztB,MAAQ,IAClB,OACUE,OAAS,IACnB,mBAEMutB,aAAa,QAAS,0BAGtBE,YAAYx8B,KAAKo+B,cAAcH,MAC/BzB,YAAYx8B,KAAKq+B,iBAAiBJ,MAClCzB,YAAYx8B,KAAKs+B,eAAeL,MAGjCvwB,IAAI8uB,YAAY2B,KAGhBJ,aAAeI,GAG1BC,cAAe,SAAUH,OACnBM,EAAS5H,SAAS0F,gBAAgByB,GAAS1C,MAAO,OAC/CkB,aAAa,KAAM,0BACnBA,aAAa,YAAa,oCAC1BA,aAAa,QAAS,0BACtBxK,iBACL,SACA,aACW0M,oBAAoBD,YAE/B,KAEKzM,iBACL,cACA,aACW0M,oBAAoBD,YAE/B,OAGEE,EAAmB9H,SAAS0F,gBAAgByB,GAAS1C,MAAO,UAC/CkB,aAAa,IAAK,OAClBA,aAAa,IAAK,OAClBA,aAAa,QAAS,UACtBA,aAAa,SAAU,UACvBA,aAAa,QAAS,qCAChCE,YAAYiC,OAEfC,EAAc/H,SAAS0F,gBAAgByB,GAAS1C,MAAO,iBAC/CkB,aACV,IACA,0XAEUA,aAAa,QAAS,kCAC3BE,YAAYkC,GAEZH,GAGTF,iBAAkB,SAAUJ,OAEtBU,EAAsBhI,SAAS0F,gBAAgByB,GAAS1C,MAAO,OAC/CkB,aAAa,KAAM,iCACnBA,aAAa,YAAa,gCAC1BA,aAAa,QAAS,0BACtBxK,iBAClB,SACA,aACW0M,oBAAoBI,WAE/B,KAEkB9M,iBAClB,cACA,aACW0M,oBAAoBI,WAE/B,OAGEC,EAAgClI,SAAS0F,gBAC3CyB,GAAS1C,MACT,UAE4BkB,aAAa,IAAK,OAClBA,aAAa,IAAK,OAClBA,aAAa,QAAS,SACtBA,aAAa,SAAU,QACvBA,aAC5B,QACA,qCAEkBE,YAAYqC,OAE5BC,EAA4BnI,SAAS0F,gBACvCyB,GAAS1C,MACT,UAEwBkB,aACxB,IACA,2LAEwBA,aACxB,QACA,kCAEkBE,YAAYsC,OAE5BC,EAA4BpI,SAAS0F,gBACvCyB,GAAS1C,MACT,iBAEwBkB,aACxB,IACA,0zDAEwBA,aACxB,QACA,kCAEkBE,YAAYuC,GAEzBJ,GAGTL,eAAgB,SAAUL,OAEpBe,EAAUrI,SAAS0F,gBAAgByB,GAAS1C,MAAO,OAC/CkB,aAAa,KAAM,2BACnBA,aAAa,YAAa,qCAC1BA,aAAa,QAAS,0BACtBxK,iBACN,SACA,aACW0M,oBAAoBQ,aAE/B,KAEMlN,iBACN,cACA,aACW0M,oBAAoBQ,aAE/B,OAGEC,EAAoBtI,SAAS0F,gBAAgByB,GAAS1C,MAAO,UAC/CkB,aAAa,IAAK,OAClBA,aAAa,IAAK,OAClBA,aAAa,QAAS,UACtBA,aAAa,SAAU,UACvBA,aAAa,QAAS,qCAChCE,YAAYyC,OAEhBC,EAAevI,SAAS0F,gBAAgByB,GAAS1C,MAAO,iBAC/CkB,aACX,IACA,wQAEWA,aAAa,QAAS,kCAC3BE,YAAY0C,GAEbF,GAGTG,QAAS,SAAUlB,GACbA,EAASF,iBACFA,aAAanB,WAAWwC,YAAYnB,EAASF,gBAC7CA,aAAe,QCnM1BD,GAAWvE,GACbD,GAAQ+F,GAENC,GAAiB,SAAUxD,EAAUtD,QAClC+G,KAAKzD,EAAUtD,OASPj5B,UAAUggC,KAAO,SAAUzD,EAAUtD,QAE7CsD,SAAWA,OACXtD,QAAUA,OAGVgH,cAAgB,CAAEC,KAAM,EAAGlwB,EAAG,EAAGE,EAAG,QACpCiwB,YAAc,CAAED,KAAM,EAAGlwB,EAAG,EAAGE,EAAG,QAElCkwB,gBAAkBrG,GAAMpC,MAAMl3B,KAAK4/B,UAAW5/B,WAG9Ck5B,sBAAwBI,GAAMN,4BACjCh5B,KAAKw4B,QAAQS,kBAIV4G,QAAU,CAAEtwB,EAAG,EAAGE,EAAG,EAAGZ,MAAO,EAAGE,OAAQ,QAC1C+wB,mBAGDC,EAAS//B,KAAKggC,kBAGb5C,OAAO2C,QAGPH,gBAOQrgC,UAAUugC,aAAe,eAClCG,EAAajgC,KAAKw4B,QAAQ9qB,IAAIwuB,aAAa,cAE3C+D,EAAY,KACVC,EAAgBD,EACjBtwB,MAAM,UACN3C,QAAO,SAAUa,UACTA,KAER1K,IAAIozB,iBAGFsJ,QAAQtwB,EAAI2wB,EAAc,QAC1BL,QAAQpwB,EAAIywB,EAAc,QAC1BL,QAAQhxB,MAAQqxB,EAAc,QAC9BL,QAAQ9wB,OAASmxB,EAAc,OAEhCT,EAAOpwB,KAAKoC,IACdzR,KAAKw4B,QAAQ3pB,MAAQ7O,KAAK6/B,QAAQhxB,MAClC7O,KAAKw4B,QAAQzpB,OAAS/O,KAAK6/B,QAAQ9wB,aAIhC2wB,YAAYD,KAAOA,OACnBC,YAAYnwB,QAAUipB,QAAQ3pB,MAAQ7O,KAAK6/B,QAAQhxB,MAAQ4wB,GAAQ,OACnEC,YAAYjwB,QAAU+oB,QAAQzpB,OAAS/O,KAAK6/B,QAAQ9wB,OAAS0wB,GAAQ,OAGrEU,4BAEA3H,QAAQ9qB,IAAI0yB,gBAAgB,qBAE5BC,yBAOM9gC,UAAU8gC,mBAAqB,eACxCC,EAAOtgC,KAAK87B,SAASyE,eAEpBV,QAAQtwB,EAAI+wB,EAAK/wB,OACjBswB,QAAQpwB,EAAI6wB,EAAK7wB,OACjBowB,QAAQhxB,MAAQyxB,EAAKzxB,WACrBgxB,QAAQ9wB,OAASuxB,EAAKvxB,WAQdxP,UAAUihC,WAAa,kBAC7BlH,GAAMxD,OAAO,GAAI91B,KAAK6/B,aAShBtgC,UAAUygC,WAAa,eAI9BS,EAHFV,EAAS//B,KAAK0gC,UAEd1gC,KAAKw4B,QAAQ5f,KAAO5Y,KAAKw4B,QAAQmI,aAE/B3gC,KAAKw4B,QAAQ5f,IACJvJ,KAAKoC,IACdzR,KAAKw4B,QAAQ3pB,MAAQ7O,KAAK6/B,QAAQhxB,MAClC7O,KAAKw4B,QAAQzpB,OAAS/O,KAAK6/B,QAAQ9wB,QAG1BM,KAAK6H,IACdlX,KAAKw4B,QAAQ3pB,MAAQ7O,KAAK6/B,QAAQhxB,MAClC7O,KAAKw4B,QAAQzpB,OAAS/O,KAAK6/B,QAAQ9wB,UAIhCiN,EAAIykB,IACJlD,EAAIkD,IACJj/B,GAAKxB,KAAK6/B,QAAQtwB,EAAIkxB,IACtBjD,GAAKx9B,KAAK6/B,QAAQpwB,EAAIgxB,MAG3BzgC,KAAKw4B,QAAQhlB,OAAQ,KACnBotB,EAGA,SAFMpI,QAAQ3pB,YACNgxB,QAAQhxB,MAAyB,EAAjB7O,KAAK6/B,QAAQtwB,GAASwwB,EAAO/jB,GAEvD6kB,EAGE,SAFMrI,QAAQzpB,aACN8wB,QAAQ9wB,OAA0B,EAAjB/O,KAAK6/B,QAAQpwB,GAASswB,EAAO/jB,KAGnDxa,EAAIo/B,IACJpD,EAAIqD,cAIRrB,cAAcC,KAAOM,EAAO/jB,OAC5BwjB,cAAcjwB,EAAIwwB,EAAOv+B,OACzBg+B,cAAc/vB,EAAIswB,EAAOvC,EAEvBuC,MAQMxgC,UAAUuhC,iBAAmB,kBACnCxH,GAAMxD,OAAO,GAAI91B,KAAKw/B,mBAQhBjgC,UAAUwhC,SAAW,kBAC3BzH,GAAMxD,OAAO,GAAI91B,KAAK0/B,iBAQhBngC,UAAUyhC,QAAU,kBAC1BhhC,KAAK0/B,YAAYD,SAQXlgC,UAAU0hC,gBAAkB,kBAClCjhC,KAAK0/B,YAAYD,KAAOz/B,KAAKw/B,cAAcC,SAQrClgC,UAAU2hC,oBAAsB,SAAUzyB,UAChDA,EAAQzO,KAAKw/B,cAAcC,SAQrBlgC,UAAU4hC,OAAS,iBACzB,CAAE5xB,EAAGvP,KAAK0/B,YAAYnwB,EAAGE,EAAGzP,KAAK0/B,YAAYjwB,OAQvClQ,UAAUmhC,OAAS,eAC5BU,EAAUphC,KAAKw4B,QAAQ9qB,IAAI2zB,2BAGvBrlB,EAAIhc,KAAK0/B,YAAYD,OACrBxjB,EAAI,IACJiL,EAAI,IACJqW,EAAIv9B,KAAK0/B,YAAYD,OACrBj+B,EAAIxB,KAAK0/B,YAAYnwB,IACrBiuB,EAAIx9B,KAAK0/B,YAAYjwB,EAEtB2xB,MAQM7hC,UAAU69B,OAAS,SAAU2C,OACtCuB,EAAWthC,KAAKuhC,gBAAgBxB,GAClCyB,EAAUxhC,KAAKyhC,eAAe1B,MAE5BuB,GAAYE,EAAS,IAEnBF,KAMM,IAHNthC,KAAKw4B,QAAQkJ,WACX1hC,KAAKihC,kBACLjhC,KAAKkhC,oBAAoBnB,EAAO/jB,OAG3BA,EAAI+jB,EAAOxC,EAAIv9B,KAAK0/B,YAAYD,QAC5B,SAENkC,YAAY5B,QACZvH,QAAQoJ,OAAO5hC,KAAKihC,qBAKzBO,EAAS,KACPK,EAAa7hC,KAAKw4B,QAAQsJ,UAAU9hC,KAAKmhC,SAAU,CACnD5xB,EAAGwwB,EAAOv+B,EACViO,EAAGswB,EAAOvC,IAGZuE,GAAc,EACdC,GAAc,GAGG,IAAfH,KAEKrgC,EAAIxB,KAAKmhC,SAAS5xB,IAClBiuB,EAAIx9B,KAAKmhC,SAAS1xB,IAEXuyB,GAAc,GACnB1I,GAAMz3B,SAASggC,MAEH,IAAjBA,EAAWtyB,KAEN/N,EAAIxB,KAAKmhC,SAAS5xB,KACX,GACL+pB,GAAMhD,SAASuL,EAAWtyB,OAE5B/N,EAAIqgC,EAAWtyB,IAIH,IAAjBsyB,EAAWpyB,KAEN+tB,EAAIx9B,KAAKmhC,SAAS1xB,KACX,GACL6pB,GAAMhD,SAASuL,EAAWpyB,OAE5B+tB,EAAIqE,EAAWpyB,IAMrBsyB,GAAeC,IAAiBhiC,KAAKyhC,eAAe1B,MAC7C,QAEL4B,YAAY5B,QACZvH,QAAQyJ,MAAMjiC,KAAKmhC,YAKxBG,GAAYE,SACTrB,4BAKI5gC,UAAUgiC,gBAAkB,SAAUxB,UAC5C//B,KAAK0/B,YAAYD,OAASM,EAAO/jB,MAG3Bzc,UAAUkiC,eAAiB,SAAU1B,UAC3C//B,KAAK0/B,YAAYnwB,IAAMwwB,EAAOv+B,GAAKxB,KAAK0/B,YAAYjwB,IAAMswB,EAAOvC,MAQ3Dj+B,UAAUoiC,YAAc,SAAU5B,QAC1CL,YAAYD,KAAOM,EAAO/jB,OAC1B0jB,YAAYnwB,EAAIwwB,EAAOv+B,OACvBk+B,YAAYjwB,EAAIswB,EAAOvC,MAGfj+B,UAAU2iC,eAAgB,KAK1B3iC,UAAU4gC,qBAAuB,WACzCngC,KAAKkiC,qBAEHA,eAAgB,OAGhBhJ,sBAAsB/4B,KAAK01B,OAAQ71B,KAAK2/B,sBAOlCpgC,UAAUqgC,UAAY,eAC/BuC,EAAMniC,KAAK0gC,YAGNtD,OAAOp9B,KAAK87B,SAAUqG,EAAKniC,KAAKs9B,WAGpC4E,eAAgB,EAGjBliC,KAAKw4B,QAAQ4J,mBACV5J,QAAQ4J,aAAaD,QCvW1BE,GAAQ9I,GACV+I,GAAejD,GACf/F,GAAQiJ,GACRzE,GAAW0E,GACXlD,GDuWe,SAAUxD,EAAUtD,UAC5B,IAAI8G,GAAexD,EAAUtD,ICtWlCiK,GAAa,SAAU/0B,EAAK8qB,QACzB+G,KAAK7xB,EAAK8qB,IAGbkK,GAAkB,CACpBC,iBAAkB,yBAClBnqB,YAAY,EACZoqB,qBAAqB,EACrBnqB,aAAa,EACboqB,qBAAqB,EACrBC,uBAAuB,EACvBC,2BAA2B,EAC3BC,qBAAsB,GACtBC,QAAS,GACTC,QAAS,GACTtqB,KAAK,EACL+nB,SAAS,EACTntB,QAAQ,EACRylB,YAAa,OACbyI,WAAY,KACZE,OAAQ,KACRE,UAAW,KACXG,MAAO,KACPkB,oBAAqB,KACrBC,sBAAuB,KACvBhB,aAAc,MAGZiB,GAA4B,CAAErR,SAAS,GACvCsR,GAA6B,CAAEtR,SAAS,MAEjCzyB,UAAUggC,KAAO,SAAU7xB,EAAK8qB,OACrCC,EAAOz4B,UAEN0N,IAAMA,OACN4vB,KAAO5vB,EAAIkpB,cAAc,WAGrB8F,mBAAmB18B,KAAK0N,UAG5B8qB,QAAUc,GAAMxD,OAAOwD,GAAMxD,OAAO,GAAI4M,IAAkBlK,QAG1Dxb,MAAQ,WAGTumB,EACFzF,GAASrC,gCAAgC/tB,QACtCmB,MAAQ00B,EAA6B10B,WACrCE,OAASw0B,EAA6Bx0B,YAGtC+sB,SAAWwD,GACdxB,GAASlC,oBAAoB57B,KAAK0N,IAAK1N,KAAKw4B,QAAQmK,kBACpD,CACEj1B,IAAK1N,KAAK0N,IACVmB,MAAO7O,KAAK6O,MACZE,OAAQ/O,KAAK+O,OACb6J,IAAK5Y,KAAKw4B,QAAQ5f,IAClB+nB,QAAS3gC,KAAKw4B,QAAQmI,QACtBntB,OAAQxT,KAAKw4B,QAAQhlB,OACrBylB,YAAaj5B,KAAKw4B,QAAQS,YAE1ByI,WAAY,SAAU8B,EAAU/C,MAC1BhI,EAAKqD,UAAYrD,EAAKD,QAAQkJ,kBACzBjJ,EAAKD,QAAQkJ,WAAW8B,EAAU/C,IAG7CmB,OAAQ,SAAUnzB,MACZgqB,EAAKqD,UAAYrD,EAAKD,QAAQoJ,cACzBnJ,EAAKD,QAAQoJ,OAAOnzB,IAG/BqzB,UAAW,SAAU2B,EAAUC,MACzBjL,EAAKqD,UAAYrD,EAAKD,QAAQsJ,iBACzBrJ,EAAKD,QAAQsJ,UAAU2B,EAAUC,IAG5CzB,MAAO,SAAUvE,MACXjF,EAAKqD,UAAYrD,EAAKD,QAAQyJ,aACzBxJ,EAAKD,QAAQyJ,MAAMvE,IAG9B0E,aAAc,SAAUD,MAClB1J,EAAKqD,UAAYrD,EAAKD,QAAQ4J,oBACzB3J,EAAKD,QAAQ4J,aAAaD,UAOrCwB,EAAiB3jC,KAAKw+B,sBACXoF,cAAc5jC,KAAKw4B,QAAQkJ,cAC3BmC,UAAU7jC,KAAKw4B,QAAQoJ,UACvBkC,aAAa9jC,KAAKw4B,QAAQsJ,aAC1BiC,SAAS/jC,KAAKw4B,QAAQyJ,SACtB+B,gBAAgBhkC,KAAKw4B,QAAQ4J,cAExCpiC,KAAKw4B,QAAQoK,wBACF5E,OAAOh+B,WAIjBikC,wBAA0B3sB,KAAKC,WAC/B2sB,oBAMI3kC,UAAU2kC,cAAgB,eAC/BzL,EAAOz4B,KACTg4B,EAAU,aAEPmM,eAAiB,CAEpBC,UAAW,SAAU7M,OACf91B,EAASg3B,EAAK4L,gBAAgB9M,EAAKS,YAC7BT,EACH91B,GAET6iC,WAAY,SAAU/M,OAChB91B,EAASg3B,EAAK8L,iBAAiBhN,EAAKS,YAC9BT,EACH91B,GAIT+iC,QAAS,SAAUjN,UACVkB,EAAKgM,cAAclN,IAE5BmN,SAAU,SAAUnN,UACXkB,EAAKkM,eAAepN,IAI7BqN,UAAW,SAAUrN,UACZkB,EAAKoM,gBAAgBtN,IAE9BuN,UAAW,SAAUvN,UACZkB,EAAKsM,gBAAgBxN,IAI9ByN,WAAY,SAAUzN,UACbkB,EAAKgM,cAAclN,IAE5B0N,WAAY,SAAU1N,UACbkB,EAAKkM,eAAepN,IAE7B2N,YAAa,SAAU3N,UACdkB,EAAKkM,eAAepN,KAMS,MAApCv3B,KAAKw4B,QAAQ2K,oBAA6B,MACvC3K,QAAQ2K,oBAAoB5D,KAAK,CACpC4F,WAAYnlC,KAAK0N,IACjB01B,sBAAuBpjC,KAAKw4B,QAAQ4K,sBACpCnF,SAAUj+B,KAAKw+B,0BAIb4G,EACFplC,KAAKw4B,QAAQ2K,oBAAoBiC,sBAC/BA,GAAsBA,EAAmBjmC,eAClC8e,EAAImnB,EAAmBjmC,OAAS,EAAG8e,GAAK,EAAGA,IAC9Cje,KAAKmkC,eAAenjC,eAAeokC,EAAmBnnB,YACjDje,KAAKmkC,eAAeiB,EAAmBnnB,YAO7CiV,KAASlzB,KAAKmkC,qBAEf3L,QAAQ4K,uBAAyBpjC,KAAK0N,KAAKokB,iBAC/CoB,EACAlzB,KAAKmkC,eAAejR,GACnBlzB,KAAKw4B,QAAQuK,0BAEVO,GADAD,IAMJrjC,KAAKw4B,QAAQsK,6BACVtK,QAAQsK,uBAAwB,OAChCuC,4BAOE9lC,UAAU8lC,qBAAuB,eACrCrlC,KAAKw4B,QAAQsK,sBAAuB,KACnCrK,EAAOz4B,UAGNslC,cAAgB,SAAU/N,UACtBkB,EAAK8M,iBAAiBhO,QAI3B6C,GAAqBp6B,KAAKw4B,QAAQuK,6BAChC/uB,GACJhU,KAAKw4B,QAAQ4K,uBAAyBpjC,KAAK0N,IAC3C1N,KAAKslC,cACLlL,QAGG5B,QAAQsK,uBAAwB,OAO9BvjC,UAAUimC,sBAAwB,cACvCxlC,KAAKw4B,QAAQsK,sBAAuB,KAClC1I,GAAqBp6B,KAAKw4B,QAAQuK,6BAChC7uB,IACJlU,KAAKw4B,QAAQ4K,uBAAyBpjC,KAAK0N,IAC3C1N,KAAKslC,cACLlL,QAEG5B,QAAQsK,uBAAwB,OAS9BvjC,UAAUgmC,iBAAmB,SAAUhO,MAC3Cv3B,KAAKw4B,QAAQ/f,aAA8B,SAAfzY,KAAKgd,OAIlChd,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,OAKlB8K,EAAQlO,EAAIqD,QAAU,EACxB8K,EAAYpuB,KAAKC,MAAQvX,KAAKikC,wBAC9B0B,EAAU,EAAIt2B,KAAK6H,IAAI,EAAG,GAAKwuB,QAG5BzB,wBAA0B3sB,KAAKC,MAGhC,cAAeggB,GAAyB,IAAlBA,EAAIiD,WAAmBjD,EAAIsD,eAC5B,IAAftD,EAAIqD,OAAe,EAAIvrB,KAAKC,IAAIioB,EAAIsD,YAActD,EAAIqD,cAIvD6K,GAASA,EAAQ,GACpBA,KACU,EAAI,MAAUp2B,KAAKu2B,IAAIv2B,KAAKC,IAAIm2B,GAAS,IAAOE,MAE5DE,EAAoB7lC,KAAK0N,IAAIo4B,eAAeC,UAC9CC,EAAqBlI,GAASL,cAAclG,EAAKv3B,KAAK0N,KAAKu4B,gBACzDJ,GAEFpG,EAAOpwB,KAAKkQ,IAAI,EAAIvf,KAAKw4B,QAAQwK,wBAA2ByC,QAEzDS,YAAYzG,EAAMuG,QAWdzmC,UAAU2mC,YAAc,SAAUC,EAAWzI,EAAO0I,OACzD5G,EAAgBx/B,KAAK87B,SAASgF,mBAE7BsF,KAeS/2B,KAAK6H,IACflX,KAAKw4B,QAAQyK,QAAUzD,EAAcC,KACrCpwB,KAAKoC,IAAIzR,KAAKw4B,QAAQ0K,QAAU1D,EAAcC,KAAM0G,OAG9BnmC,KAAKghC,WAjB3BhhC,KAAKghC,UAAYmF,EACjBnmC,KAAKw4B,QAAQyK,QAAUzD,EAAcC,OAExBz/B,KAAKw4B,QAAQyK,QAAUzD,EAAcC,KAAQz/B,KAAKghC,UAE/DhhC,KAAKghC,UAAYmF,EACjBnmC,KAAKw4B,QAAQ0K,QAAU1D,EAAcC,SAExBz/B,KAAKw4B,QAAQ0K,QAAU1D,EAAcC,KAAQz/B,KAAKghC,eAY/DqF,EAASrmC,KAAK87B,SAAS4E,SACzB4F,EAAgB5I,EAAMuI,gBAAgBI,EAAON,WAC7CQ,EAAWvmC,KAAK0N,IACb2zB,kBACAmF,UAAUF,EAAc/2B,EAAG+2B,EAAc72B,GACzChB,MAAM03B,GACNK,WAAWF,EAAc/2B,GAAI+2B,EAAc72B,GAC9CswB,EAASsG,EAAOhlB,SAASklB,GAEvBxG,EAAO/jB,IAAMqqB,EAAOrqB,QACjB8f,SAASsB,OAAO2C,OAUdxgC,UAAUkgC,KAAO,SAAUhxB,EAAOg4B,QACtCP,YACHz3B,EACAqvB,GAASD,kBAAkB79B,KAAK0N,IAAK1N,KAAK6O,MAAO7O,KAAK+O,QACtD03B,OAUOlnC,UAAUmnC,WAAa,SAAUj4B,EAAOg4B,GAC7CA,MACMzmC,KAAK2mC,wBAAwBl4B,SAGlCgxB,KAAKhxB,EAAOg4B,OAURlnC,UAAUqnC,kBAAoB,SAAUn4B,EAAOivB,EAAO+I,MAC3DA,MAEMzmC,KAAK2mC,wBAAwBl4B,IAIV,aAAzB6qB,GAAMjC,QAAQqG,GAAuB,MACnC,MAAOA,MAAS,MAAOA,SAGnB,IAAIhxB,MAAM,4BAFRoxB,GAASH,eAAe39B,KAAK0N,IAAKgwB,EAAMnuB,EAAGmuB,EAAMjuB,QAMxDy2B,YAAYz3B,EAAOivB,EAAO+I,OAQtBlnC,UAAUyhC,QAAU,kBACtBhhC,KAAK87B,SAASkF,cAQZzhC,UAAU0hC,gBAAkB,kBAC9BjhC,KAAK87B,SAASmF,sBASZ1hC,UAAUonC,wBAA0B,SAAUlH,UAChDA,EAAOz/B,KAAK87B,SAASgF,mBAAmBrB,SAMtClgC,UAAUsnC,UAAY,eAC3BrH,EAAgBx/B,KAAK87B,SAASgF,wBAE7BrB,KAAKD,EAAcC,MAAM,OAMrBlgC,UAAUunC,SAAW,gBACzBC,IAAI/mC,KAAK87B,SAASgF,wBAMdvhC,UAAUq/B,MAAQ,gBACtBiI,iBACAC,eASIvnC,UAAUynC,eAAiB,SAAUzP,OAiB1C0P,MAhBAjnC,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,GAKlB36B,KAAKw4B,QAAQoK,uBACGrL,EAAI3pB,OAAOsuB,aAAa,UAAY,IACtCzG,QAAQ,kCACf,IAMP8B,EAAIxD,SACO,GAA+C,KAArC/zB,KAAKw4B,QAAQwK,uBAEmB,KAArChjC,KAAKw4B,QAAQwK,0BAG7BtF,EAAQI,GAASL,cAAclG,EAAKv3B,KAAK0N,KAAKu4B,gBAChDjmC,KAAK0N,IAAIo4B,eAAeC,gBAErBG,YAAYe,EAAYvJ,OAQpBn+B,UAAU8kC,gBAAkB,SAAU9M,EAAKS,GAChDh4B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,MAIhBrD,uBAAuBC,EAAKv3B,KAAK0N,KAGnC1N,KAAKw4B,QAAQqK,qBAAuBvJ,GAAMvB,WAAWR,EAAKS,QACvDgP,eAAezP,SAGfva,MAAQ,WACRkqB,cAAgBlnC,KAAK87B,SAAS4E,cAC9ByG,YAAcrJ,GAASL,cAAclG,EAAKv3B,KAAK0N,KAAKu4B,gBACvDjmC,KAAKknC,cAAcnB,gBAUdxmC,UAAUslC,gBAAkB,SAAUtN,MAC3Cv3B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,GAIH,QAAf36B,KAAKgd,OAAmBhd,KAAKw4B,QAAQhgB,WAAY,KAE/CklB,EAAQI,GAASL,cAAclG,EAAKv3B,KAAK0N,KAAKu4B,gBAC9CjmC,KAAKknC,cAAcnB,WAErBqB,EAAcpnC,KAAKknC,cAAcV,UAC/B9I,EAAMnuB,EAAIvP,KAAKmnC,YAAY53B,EAC3BmuB,EAAMjuB,EAAIzP,KAAKmnC,YAAY13B,QAG1BqsB,SAASsB,OAAOgK,QASd7nC,UAAUklC,cAAgB,SAAUlN,GACzCv3B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,GAIH,QAAf36B,KAAKgd,aAEFA,MAAQ,YASNzd,UAAUglC,iBAAmB,SAAUhN,EAAKS,MAC3B,GAAtBT,EAAIG,QAAQv4B,YACTklC,gBAAgB9M,EAAKS,OACrB,CACDh4B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,QAIjBuM,cAAgBlnC,KAAK87B,SAAS4E,aAC/B2G,EAASvJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,GAC/C45B,EAASxJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,QAC9C65B,cAAgBjO,GAAM3R,kBAAkB0f,EAAQC,KAC9C/3B,KAAYA,EAAI+3B,EAAO/3B,GAAK,IAC5BE,KAAYA,EAAI63B,EAAO73B,GAAK,OAC9B03B,YAAcE,EAAOpB,gBAAgBjmC,KAAKknC,cAAcnB,gBACxDyB,eAAiBxnC,KAAKghC,eASpBzhC,UAAUwlC,gBAAkB,SAAUxN,MACrB,GAAtBA,EAAIG,QAAQv4B,YACT0lC,gBAAgBtN,OAChB,IAEDv3B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,IAGjB36B,KAAKw4B,QAAQhgB,aAAexY,KAAKw4B,QAAQ/f,uBAI1C4uB,EAASvJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,GAC/C45B,EAASxJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,GAC/C8F,EAASxT,KAAK0N,IAAIiwB,sBACfpuB,KAAYA,EAAI+3B,EAAO/3B,GAAK,IAC5BE,KAAYA,EAAI63B,EAAO73B,GAAK,EAEhB,QAAfzP,KAAKgd,OAAmBhd,KAAKw4B,QAAQhgB,WAAY,KAE/CklB,EAAQlqB,EAAOyyB,gBAAgBjmC,KAAKknC,cAAcnB,WAClDqB,EAAcpnC,KAAKknC,cAAcV,UACnC9I,EAAMnuB,EAAIvP,KAAKmnC,YAAY53B,EAC3BmuB,EAAMjuB,EAAIzP,KAAKmnC,YAAY13B,QAExBqsB,SAASsB,OAAOgK,MAGnBpnC,KAAKw4B,QAAQ/f,YAAa,KAGxBhK,EADW6qB,GAAM3R,kBAAkB0f,EAAQC,GACxBtnC,KAAKunC,cACxB1B,EAAoB7lC,KAAK0N,IAAIo4B,eAAeC,UAC5C0B,EAAqBj0B,EAAOyyB,gBAAgBJ,QAC3CK,YAAYlmC,KAAKwnC,eAAiB/4B,EAAOg5B,GAAoB,SAU7DloC,UAAUolC,eAAiB,SAAUpN,MACpB,GAAtBA,EAAIG,QAAQv4B,YACTslC,cAAclN,WAEfv3B,KAAKw4B,QAAQuK,4BACXxL,EAAIpE,iBACFA,mBAEAwH,aAAc,QAIjBuM,cAAgBlnC,KAAK87B,SAAS4E,SACT,GAAtBnJ,EAAIG,QAAQv4B,YACTgoC,YAAcrJ,GAASL,cAAclG,EAAKv3B,KAAK0N,KAAKu4B,gBACvDjmC,KAAKknC,cAAcnB,eAEhB,KACDsB,EAASvJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,GAC/C45B,EAASxJ,GAASF,cAAcrG,EAAKv3B,KAAK0N,IAAK,QAC9C65B,cAAgBjO,GAAM3R,kBAAkB0f,EAAQC,KAC9C/3B,KAAYA,EAAI+3B,EAAO/3B,GAAK,IAC5BE,KAAYA,EAAI63B,EAAO73B,GAAK,OAC9B03B,YAAcE,EAAOpB,gBAAgBjmC,KAAKknC,cAAcnB,gBASxDxmC,UAAUqZ,IAAM,eACrBinB,EAAU7/B,KAAK87B,SAAS0E,aAC1BC,EAAWpxB,KAAKoC,IACdzR,KAAK6O,MAAQgxB,EAAQhxB,MACrB7O,KAAK+O,OAAS8wB,EAAQ9wB,aAGrB0wB,KAAKgB,GAAU,OAOXlhC,UAAUohC,QAAU,eACzBd,EAAU7/B,KAAK87B,SAAS0E,aAC1BC,EAAWpxB,KAAK6H,IACdlX,KAAK6O,MAAQgxB,EAAQhxB,MACrB7O,KAAK+O,OAAS8wB,EAAQ9wB,aAGrB0wB,KAAKgB,GAAU,OAOXlhC,UAAUiU,OAAS,eACxBqsB,EAAU7/B,KAAK87B,SAAS0E,aAC1BI,EACoE,SAA5D/xB,SAAiBA,MAAoB,EAAZgxB,EAAQtwB,GAASvP,KAAKghC,WACvDH,EACsE,SAA9D9xB,UAAkBA,OAAqB,EAAZ8wB,EAAQpwB,GAASzP,KAAKghC,gBAEtDxC,oBAAoBuI,IAAI,CAAEx3B,EAAGqxB,EAASnxB,EAAGoxB,QAOrCthC,UAAUmoC,WAAa,gBAC3B5L,SAASuE,yBAQL9gC,UAAUwnC,IAAM,SAAUrJ,OAC/B0J,EAAcpnC,KAAK87B,SAAS4E,WACpBl/B,EAAIk8B,EAAMnuB,IACViuB,EAAIE,EAAMjuB,OACjBqsB,SAASsB,OAAOgK,OAQZ7nC,UAAUooC,MAAQ,SAAUjK,OACjC0J,EAAcpnC,KAAK87B,SAAS4E,WACpBl/B,GAAKk8B,EAAMnuB,IACXiuB,GAAKE,EAAMjuB,OAClBqsB,SAASsB,OAAOgK,OAQZ7nC,UAAU4hC,OAAS,eACxBnkB,EAAQhd,KAAK87B,SAASiF,iBAEnB,CAAExxB,EAAGyN,EAAMzN,EAAGE,EAAGuN,EAAMvN,OAMrBlQ,UAAUqoC,OAAS,eAExBrE,EAA+BzF,GAASrC,gCAC1Cz7B,KAAK0N,UAEFmB,MAAQ00B,EAA6B10B,WACrCE,OAASw0B,EAA6Bx0B,WAGvC+sB,EAAW97B,KAAK87B,WACXtD,QAAQ3pB,MAAQ7O,KAAK6O,QACrB2pB,QAAQzpB,OAAS/O,KAAK+O,SACtBixB,aAGLhgC,KAAKw4B,QAAQoK,2BACVpE,oBAAoBqJ,2BACpBrJ,oBAAoBsJ,0BAOlBvoC,UAAUwoC,QAAU,eACzBtP,EAAOz4B,aAoBFkzB,UAjBJwO,WAAa,UACbE,OAAS,UACTE,UAAY,UACZG,MAAQ,UACRG,aAAe,KAIoB,MAApCpiC,KAAKw4B,QAAQ2K,0BACV3K,QAAQ2K,oBAAoB4E,QAAQ,CACvC5C,WAAYnlC,KAAK0N,IACjB01B,sBAAuBpjC,KAAKw4B,QAAQ4K,sBACpCnF,SAAUj+B,KAAKw+B,sBAKDx+B,KAAKmkC,qBACf3L,QAAQ4K,uBAAyBpjC,KAAK0N,KAAKukB,oBAC/CiB,EACAlzB,KAAKmkC,eAAejR,GACnBlzB,KAAKw4B,QAAQuK,0BAEVO,GADAD,SAMHmC,6BAGAhH,oBAAoBqJ,2BAGpBjJ,WAGYoJ,GAAeh7B,QAAO,SAAUixB,UACxCA,EAASvwB,MAAQ+qB,EAAK/qB,cAIxB1N,KAAKw4B,eAGLx4B,KAAK87B,gBAGL97B,KAAK2jC,sBACL3jC,KAAKioC,QACPzJ,kBAAoB,kBAChB,UASAj/B,UAAUi/B,kBAAoB,eACnC/F,EAAOz4B,YAGNA,KAAK2jC,sBACHA,eAAiB3jC,KAAKioC,GAAK,CAE9BC,UAAW,oBACJ1P,QAAQhgB,YAAa,EACnBigB,EAAKwP,IAEdE,WAAY,oBACL3P,QAAQhgB,YAAa,EACnBigB,EAAKwP,IAEdG,aAAc,mBACH3P,EAAKD,QAAQhgB,YAExBuuB,IAAK,SAAUrJ,YACRqJ,IAAIrJ,GACFjF,EAAKwP,IAEdN,MAAO,SAAUjK,YACViK,MAAMjK,GACJjF,EAAKwP,IAEd9G,OAAQ,kBACC1I,EAAK0I,UAGd2C,aAAc,SAAU3M,YACjBqB,QAAQsJ,UACJ,OAAP3K,EAAc,KAAOmC,GAAMpC,MAAMC,EAAIsB,EAAKkL,gBACrClL,EAAKwP,IAEdlE,SAAU,SAAU5M,YACbqB,QAAQyJ,MACJ,OAAP9K,EAAc,KAAOmC,GAAMpC,MAAMC,EAAIsB,EAAKkL,gBACrClL,EAAKwP,IAGdI,WAAY,oBACL7P,QAAQ/f,aAAc,EACpBggB,EAAKwP,IAEdK,YAAa,oBACN9P,QAAQ/f,aAAc,EACpBggB,EAAKwP,IAEdM,cAAe,mBACJ9P,EAAKD,QAAQ/f,aAExBqvB,mBAAoB,kBACbrP,EAAKD,QAAQoK,wBACXpK,QAAQoK,qBAAsB,KACtB5E,OAAOvF,IAEfA,EAAKwP,IAEdJ,oBAAqB,kBACfpP,EAAKD,QAAQoK,wBACVpK,QAAQoK,qBAAsB,KACtBzD,QAAQ1G,IAEhBA,EAAKwP,IAEdO,sBAAuB,mBACZ/P,EAAKD,QAAQoK,qBAGxB6F,mBAAoB,oBACbjQ,QAAQqK,qBAAsB,EAC5BpK,EAAKwP,IAEdS,oBAAqB,oBACdlQ,QAAQqK,qBAAsB,EAC5BpK,EAAKwP,IAEdU,sBAAuB,mBACZlQ,EAAKD,QAAQqK,qBAGxBwC,qBAAsB,oBACfA,uBACE5M,EAAKwP,IAEdzC,sBAAuB,oBAChBA,wBACE/M,EAAKwP,IAEdW,wBAAyB,mBACdnQ,EAAKD,QAAQsK,uBAGxB+F,wBAAyB,SAAUp6B,YAC5B+pB,QAAQwK,qBAAuBv0B,EAC7BgqB,EAAKwP,IAEda,WAAY,SAAUrJ,YACfjH,QAAQyK,QAAUxD,EAChBhH,EAAKwP,IAEdc,WAAY,SAAUtJ,YACfjH,QAAQ0K,QAAUzD,EAChBhH,EAAKwP,IAGdrE,cAAe,SAAUzM,YAClBqB,QAAQkJ,WACJ,OAAPvK,EAAc,KAAOmC,GAAMpC,MAAMC,EAAIsB,EAAKkL,gBACrClL,EAAKwP,IAEdpE,UAAW,SAAU1M,YACdqB,QAAQoJ,OACJ,OAAPzK,EAAc,KAAOmC,GAAMpC,MAAMC,EAAIsB,EAAKkL,gBACrClL,EAAKwP,IAGdxI,KAAM,SAAUhxB,YACTi4B,WAAWj4B,GAAO,GAChBgqB,EAAKwP,IAEde,OAAQ,SAAUv6B,YACXi4B,WAAWj4B,GAAO,GAChBgqB,EAAKwP,IAEd/B,YAAa,SAAUz3B,EAAOivB,YACvBkJ,kBAAkBn4B,EAAOivB,GAAO,GAC9BjF,EAAKwP,IAEdgB,cAAe,SAAUx6B,EAAOivB,YACzBkJ,kBAAkBn4B,EAAOivB,GAAO,GAC9BjF,EAAKwP,IAEd1J,OAAQ,uBACDyK,OAAO,EAAIvQ,EAAKD,QAAQwK,sBACtBvK,EAAKwP,IAEdjJ,QAAS,uBACFgK,OAAO,KAASvQ,EAAKD,QAAQwK,uBAC3BvK,EAAKwP,IAEdjH,QAAS,kBACAvI,EAAKwI,mBAGd+C,gBAAiB,SAAU7M,YACpBqB,QAAQ4J,aACJ,OAAPjL,EAAc,KAAOmC,GAAMpC,MAAMC,EAAIsB,EAAKkL,gBACrClL,EAAKwP,IAGdpB,UAAW,oBACJA,YACEpO,EAAKwP,IAEdnB,SAAU,oBACHA,WACErO,EAAKwP,IAEdrJ,MAAO,oBACAA,QACEnG,EAAKwP,IAGdrvB,IAAK,oBACEA,MACE6f,EAAKwP,IAEdtH,QAAS,oBACFA,UACElI,EAAKwP,IAEdz0B,OAAQ,oBACDA,SACEilB,EAAKwP,IAGdP,WAAY,oBACLA,aACEjP,EAAKwP,IAEdL,OAAQ,oBACDA,SACEnP,EAAKwP,IAEdiB,SAAU,iBACD,CACLr6B,MAAO4pB,EAAK5pB,MACZE,OAAQ0pB,EAAK1pB,OACbo6B,SAAU1Q,EAAKuI,UACfnB,QAASpH,EAAKqD,SAAS0E,eAI3BuH,QAAS,oBACFA,UACEtP,EAAKwP,MAKXjoC,KAAK2jC,oBASVqE,GAAiB,GA4BrBoB,GA1BiB,SAAU3S,EAAmB+B,OACxC9qB,EAAM4rB,GAAM9C,OAAOC,MAEX,OAAR/oB,SACK,aAGEuQ,EAAI+pB,GAAe7oC,OAAS,EAAG8e,GAAK,EAAGA,OAC1C+pB,GAAe/pB,GAAGvQ,MAAQA,SACrBs6B,GAAe/pB,GAAGggB,SAASO,8BAKvBl+B,KAAK,CAClBoN,IAAAA,EACAuwB,SAAU,IAAIwE,GAAW/0B,EAAK8qB,KAIzBwP,GACLA,GAAe7oC,OAAS,GACxB8+B,SAASO,2BCjgCT6K,GAAuC,CAC3CC,4BACO1wB,MACFpF,SACAwrB,UACAA,UACIh/B,MAETmT,oBACQo2B,EAAQvpC,KAAKkpC,WACbnC,EAAM/mC,KAAKmhC,SACX1yB,EAAQ86B,EAAMJ,WAChB55B,GAAKd,IACLgB,GAAKhB,QACHqtB,EACGyN,EAAM16B,MAAQJ,EADjBqtB,EAEIyN,EAAMx6B,OAASN,QAElB,CACLmF,IAAK,CACH+W,KAAMoc,EAAIt3B,EACVmb,OAAQkR,EAAkBiL,EAAIt3B,EAC9Bib,MAAOqc,EAAIx3B,EACXsE,MAAOioB,EAAiBiL,EAAIx3B,GAE9BiE,OAAQ,CACNjE,EAAGusB,EAAiB,EAAIiL,EAAIx3B,EAC5BE,EAAGqsB,EAAkB,EAAIiL,EAAIt3B,KAInC+5B,qBACSxpC,KAAKkpC,WAAWC,UAEzBM,uBAAiDjY,EAAmB9Y,EAAsBC,SAElFlH,EAAMpC,KAAKoC,IAAI,KAAQiH,GACvBxB,EAAM7H,KAAK6H,IAAIzF,EAAKkH,GACpB8mB,EAAOpwB,KAAK6H,IAAI7H,KAAKoC,IAAIyF,EAAKsa,GAAY/f,GAI1Ci4B,EAFW1pC,KAAKwpC,cACDxpC,KAAKghC,eAGrB8H,WAAWr3B,EAAMi4B,GACnBX,WAAW7xB,EAAMwyB,GACjBjK,KAAKA,EAAOiK,IAEjBtB,sBACSpoC,KAAK2pC,eAEdzB,wBACOyB,eAAgB,OAChBC,qBACE5pC,MAETmoC,yBACOwB,eAAgB,OAChBE,sBACE7pC,MAETuoC,uBACSvoC,KAAK8pC,gBAEdzB,yBACOyB,gBAAiB,OACjBC,sBACE/pC,MAETsoC,0BACOwB,gBAAiB,OACjBE,uBACEhqC,MAETiqC,cAAwCC,UAClCA,OACGhC,iBAEAC,aAEAnoC,MAETmqC,eAAyCD,UACnCA,QACG7B,kBACAI,4BAEAH,mBACAI,uBAEA1oC,mBAsBT0N,EACA8qB,yBAGM4R,EAAW,SAAA,WAAQjH,8BAAqB5D,QAAU1M,MAClDwX,EAAc,SAAA,WAAQlH,8BAAqB4E,WAAalV,MACxDuS,EAAqB,SAAA,WAAQjC,8BAAqBiC,sBAAsB,eAExC,IAAlC5M,EAAQsK,0BACFA,sBAAwBtK,EAAQ/f,eAGlC0qB,oBAAsB,CAC5B5D,mBA9BFrsB,EACAslB,iBAEMyF,EAAW/qB,IACRy2B,cAAgB,WAAQnxB,iBACxBsxB,eAAiB,0BAASrxB,kBAC1B6xB,sBAAwBrM,EAASmK,eACjCwB,mBAAqB3L,EAASiK,YAC9B2B,oBAAsB5L,EAASkK,aAC/BoC,uBAAyBtM,EAASsK,gBAClCwB,oBAAsB9L,EAASoK,aAC/B2B,qBAAuB/L,EAASqK,mBAClCn6B,OAAO+E,EAAYm2B,KAmBVpT,EAAEgI,SAAUzF,KACfvC,IAEX8R,WAAcsC,EAAYpU,GAC1BmP,mBAAAA,GAGKz3B,GAAWD,EAAK8qB,OChLpBgS,GAAAC,eAMyB/8B,EAAkC8qB,SACxDyF,EAAWyM,YACb1tB,EAAQ,QACN2tB,EAA+B,GAC/BC,EAAiC,gBAc7B,2BACFlU,EAAUnpB,GAAQG,EAAI3O,MAAO,SAE7BqrC,EAAW,SAAA,WAAQjH,8BAAqB5D,QAAU1M,MAClDwX,EAAc,SAAA,WAAQlH,8BAAqB4E,WAAalV,MACxDuS,EAAqB,SAAA,WAAQjC,8BAAqBiC,sBAAsB,KAEtEjC,oBAAsB,CAC5B5D,WACWxgC,MAAQk3B,EAAEgI,WACVhI,KArBL,IACS9wB,YAAa+hB,QACb/nB,OAAS,GAsBxB4oC,cAlBM,IACW5iC,YAAa+hB,QACb/nB,OAAS,IAkBZ82B,IAEdmP,mBAAAA,MAGiB1O,EAAS8B,qBAGlB,sBACDz5B,UAAOgpC,mBAmBX,CAAEp6B,WAAYswB,EAAU4M,oBAhBF58B,IACb,IAAV+O,IACe1c,KAAK2N,GACH,IAAV+O,QAauC8tB,sBARrB78B,IACf,IAAV+O,GAAqC,IAAVA,IACV1c,KAAK2N,UA7DzBw8B,GAAAD,wBACO,GAAV,wBACU,GAAV,0BACY,GAAZ,kBCAIO,GAAejqC,OAAO,kCAcnByM,GAAQC,SAAOu9B,IAAe,mBCgB1BC,GAA2C,CACtD,QACA,QACA,YACA,QACA,OACA,OACA,aACA,iUC1BIv8B,MAAEA,GAAUw8B,KAEZ17B,EAAIm7B,MAAI/9B,EAAMu+B,OACdz7B,EAAIi7B,MAAI/9B,EAAMw+B,OACd1xB,EAAcixB,MAAI,GAClBhxB,EAAcgxB,MAAI,WAClB/wB,EAAkB+wB,WAAiC,GACnD57B,EAAS47B,MAAI,GACb77B,EAAQ67B,MAAI,GACZ37B,EAAS27B,MAAI,GACblxB,EAAekxB,MAAI,yBAEb,iBACJ16B,EAAIvB,EAAM1P,QACJA,MAAQ4N,EAAMygB,OAAO3T,YAAczJ,IACnCjR,MAAQ,WAAMquB,OAAO1T,eAAe,SAChC3a,MAAQqsC,GAAsBz+B,EAAMygB,OAAOzT,gBAAiB3J,GAElD,WAAtBrD,EAAMygB,OAAOxrB,QACb7C,MAAQ4N,EAAMu+B,QACdnsC,MAAQ4N,EAAMw+B,QACTpsC,MAAQ4N,EAAMygB,OAAOte,OAASkB,MAE/BjR,MAAQ4N,EAAMygB,OAAOve,MAAQmB,IAC5BjR,MAAQ4N,EAAMygB,OAAOre,OAASiB,IACxBjR,MAAQ4N,EAAMygB,OAAO5T,aAAexJ,IAC/CjR,MAAQ4N,EAAMu+B,MAAQr8B,EAAM9P,MAAQ,IACpCA,MAAQ4N,EAAMw+B,MAAQp8B,EAAOhQ,MAAQ,QAI9B,CACXwQ,EAAAA,EACAE,EAAAA,EACAgK,YAAAA,EACAC,YAAAA,EACAC,gBAAAA,EACA7K,OAAAA,EACAD,MAAAA,EACAE,OAAAA,EACAyK,aAAAA,iwBCpDA6xB,EACAxjB,EACAyjB,eAEMC,EAAOF,EAAQ9K,YACjBhxB,EAAIg8B,EAAKh8B,IACTE,EAAI87B,EAAK97B,IACTZ,MAAQ08B,EAAK18B,QACbE,OAASw8B,EAAKx8B,SACRhQ,MAAQ,WAAQm9B,aAAa,qBAAgB,QAsCnDsP,EAAQC,cAERh9B,MAAEA,GAAUw8B,KAEZS,EAAQ1hB,YAAS,IAAMrd,EAAM6N,KAAK7K,MAAM,WAExCuK,EAAW8P,YAAS,kBACjB,WAAM,gBAA2Brd,EAAMygB,OAAOlT,SAAWzL,EAAM1P,SAGlEob,EAAa6P,YAAS,IAAM9P,EAASnb,MAAQ4N,EAAMygB,OAAOjT,aAE1DwxB,EAAY3hB,YAAS,WACnB4hB,EAAmBJ,EAAM,2BACN,YAArBI,EACK,EACuB,YAArBA,KACW7sC,SAAeA,MAAMI,OAAS,GAAM,GAGhDgb,EAAWpb,SAAeA,MAAMI,OAAS,MAI/Cu3B,EAAUgU,QACVxiC,EAAYwiC,MAAI,IAChBj4B,EAAMjG,WAAe,CAAE+C,EAAG,EAAGE,EAAG,EAAGZ,MAAO,EAAGE,OAAQ,IACrD88B,EAAoB7hB,YAAS,mBAC3BoD,EAASzgB,EAAMygB,OAAOhT,eACvBgT,SAAe3a,MAChBq5B,EAAiBC,EACjB3e,EAAO1S,mBAAmBla,UACV4sB,EAAO1S,QAAQsxB,WACb5e,EAAO1S,QAAQuxB,eAEjB,WAAOvxB,WAAW,IAChB,WAAOA,WAAW,SAElCwxB,EAAa/xB,EAAWpb,MAAQmb,EAASnb,YACxC,CACLwQ,EAAGkD,EAAIlD,EAAIw8B,EAAoBt9B,EAAM1P,MACrC0Q,EAAGgD,EAAIhD,EAAIq8B,EAAkBr9B,EAAM1P,MAASmtC,EAAa,EACzDr9B,MAAO4D,EAAI5D,MAA4B,EAApBk9B,EAAwBt9B,EAAM1P,MACjDgQ,OAAQ0D,EAAI1D,OAA2B,EAAlB+8B,EAAsBr9B,EAAM1P,MAAQmtC,UAIzDC,QACEC,EAAiB,KACjBz/B,EAAMygB,OAAOhT,YAAczN,EAAMygB,OAAOhT,WAAWnB,SAChDkzB,GAAYzV,EAAQ33B,mBApF3BssC,EACAxjB,EACAyjB,SAEMe,EAAW,IAAIC,kBAAiB,OACXjB,EAASxjB,EAAKyjB,eAEhCiB,QAAQlB,EAAS,CACxBmB,YAAY,EACZC,gBAAiB,CAAC,IAAK,IAAK,YAAa,iBAElBpB,EAASxjB,EAAKyjB,GAChCe,EAyEQK,CAAuBhW,EAAQ33B,MAAO0T,EAAKvK,gBAG9CykC,oBACC,wBAIL,IAAMP,eAEd,IAAMz/B,EAAMygB,OAAOhT,YAAczN,EAAMygB,OAAOhT,WAAWnB,UACzD,CAACpL,EAAG++B,KACE/+B,GAAK++B,yBAID,gBACAD,oBACC,OAGA,CAAEzyB,SAAAA,EAAUwc,QAAAA,EAASxuB,UAAAA,EAAW2jC,kBAAAA,EAAmBp9B,MAAAA,+pCC/HjD,CAACo+B,EAAKlgC,eACPzN,EAAKuN,KAAQE,IACnBzN,GAAOuN,SAENogC,uMCsBHt9B,EAAIya,YAAS,kBAAM,WAAMvX,cAAKlD,IAAK,KACnCE,EAAIua,YAAS,kBAAM,WAAMvX,cAAKhD,IAAK,KAEnC2d,EAAS0f,MACTr+B,MAAEA,GAAUw8B,MAEZhW,2BACJA,6BACAC,4BACAC,GACE4X,KAEEC,EAAkBhjB,YAAS,mBAC3Brd,EAAMqQ,MAAMhD,MAAMf,UACb,WAAM+D,MAAM0Q,kBAKjBuf,EAAcjjB,YAAS,IACvBrd,EAAMqQ,MAAMhD,MAAMM,YAAcrK,qBAAmBi9B,OAC9C,EAEAvgC,EAAMqQ,MAAMhD,MAAMK,OAAS5L,EAAM1P,QAItCouC,EAAczC,MAAI,GAClB0C,EAAc1C,MAAI,GAClB2C,EAAsB3C,MAAI,GAC1B4C,EAAsB5C,MAAI,kBAEpB,WACJ16B,EAAIvB,EAAM1P,MACV2P,EAAQ/B,EAAMqQ,MAAMtO,SACR,UAAdA,EAAM9M,KAAkB,OACpBkN,EAASJ,EAAMI,OAASkB,EACxByM,EAAI3N,EAASm+B,EAAYluC,MACzBwuC,EAAiBl+B,KAAKiQ,KAAK0G,QAAK,GAAI,KAC9BjnB,MAAQ+P,EAASm+B,EAAYluC,QAC7BA,MAAQ+P,EAASm+B,EAAYluC,QACrBA,MAAQwuC,IACRxuC,MAAQwuC,MACvB,OACC/zB,EAAe9K,EAAM8K,aAAexJ,EACpCnB,EAAQH,EAAMG,MAAQmB,EACtBjB,EAASL,EAAMK,OAASiB,EACxByM,EAAIjD,EAAeyzB,EAAYluC,MAC/BwuC,EAAiBl+B,KAAKiQ,KAAK0G,QAAK,GAAI,KAC9BjnB,MAAQgQ,EAAS,EAAIk+B,EAAYluC,QACjCA,MAAQ8P,EAAQ,EAAIo+B,EAAYluC,QACxBA,MAAQgQ,EAAS,EAAIyK,EAAe+zB,IACpCxuC,MAAQ8P,EAAQ,EAAI2K,EAAe+zB,YAIrDC,EAAaxjB,YAAS,YAClBrd,EAAMqQ,MAAMhD,MAAMM,gBACnBrK,qBAAmBi9B,YACnBj9B,qBAAmBw9B,WACnBx9B,qBAAmBsK,YACf,cACJtK,qBAAmBy9B,UACnBz9B,qBAAmB09B,gBACnB19B,qBAAmB29B,iBACf,aACJ39B,qBAAmB49B,UACnB59B,qBAAmB69B,gBACnB79B,qBAAmB89B,yBAEf,UAGPnC,EAAmB5hB,YAAS,YACxBrd,EAAMqQ,MAAMhD,MAAMM,gBACnBrK,qBAAmBw9B,WACnBx9B,qBAAmB09B,gBACnB19B,qBAAmB69B,iBACf,gBACJ79B,qBAAmBsK,WACnBtK,qBAAmB29B,gBACnB39B,qBAAmB89B,iBACf,eACJ99B,qBAAmBi9B,YACnBj9B,qBAAmBy9B,UACnBz9B,qBAAmB49B,mBAEf,cAGPG,EAAShkB,YAAS,YACdrd,EAAMqQ,MAAMhD,MAAMM,gBACnBrK,qBAAmBi9B,YACnBj9B,qBAAmBw9B,WACnBx9B,qBAAmBsK,aACf,OACJtK,qBAAmBy9B,YACfN,EAAYruC,WAChBkR,qBAAmB49B,YACdT,EAAYruC,WACjBkR,qBAAmB09B,gBACnB19B,qBAAmB29B,kBACfN,EAAoBvuC,WACxBkR,qBAAmB69B,gBACnB79B,qBAAmB89B,0BAEdT,EAAoBvuC,UAG5BkvC,EAASjkB,YAAS,YACdrd,EAAMqQ,MAAMhD,MAAMM,gBACnBrK,qBAAmBw9B,aACdN,EAAYpuC,WACjBkR,qBAAmBsK,aACf4yB,EAAYpuC,WAChBkR,qBAAmBi9B,YACnBj9B,qBAAmBy9B,UACnBz9B,qBAAmB49B,YACf,OACJ59B,qBAAmB09B,gBACnB19B,qBAAmB69B,kBACdT,EAAoBtuC,WACzBkR,qBAAmB29B,gBACnB39B,qBAAmB89B,0BAEfV,EAAoBtuC,mBAIpB,CACXwQ,EAAAA,EACAE,EAAAA,EACA2d,OAAAA,EACA4f,gBAAAA,EACA/X,2BAAAA,EACAC,2BAAAA,EACAC,0BAAAA,EACAqY,WAAAA,EACA5B,iBAAAA,EACAoC,OAAAA,EACAC,OAAAA,EACAx/B,MAAAA,05CChJIc,EAAIya,YAAS,kBAAM,WAAMvX,cAAKlD,IAAK,KACnCE,EAAIua,YAAS,kBAAM,WAAMvX,cAAKhD,IAAK,KAEnC2d,EAAS0f,KACToB,EAAc1hC,WAAqB,0BAE7B,qBACJ2hC,EAAaxhC,EAAMqQ,MAAMtO,SACP,WAApBy/B,EAAWvsC,KAAmB,OAC1B8M,EAA0B,CAC9B9M,KAAM,SACNkN,OACEq/B,EAAWr/B,mBACC2K,eAAe,GAAK,EAChC2T,EAAO3S,UAAUC,QACjB0S,EAAO3S,UAAU5L,MAAQ,EAC3BwK,MAAO,OACPI,YAAa2T,EAAO3S,UAAU5L,MAC9B6K,YAAa0T,EAAO3S,UAAUpB,MAC9BM,gBAAiByT,EAAO3S,UAAU/K,kBAE7BvB,OAAO+/B,EAAax/B,OACtB,OACCA,EAA6B,CACjC9M,KAAM,OACNiN,MACEs/B,EAAWt/B,kBACC4K,eAAe,GACA,EAA3B2T,EAAO3S,UAAUC,QACjB0S,EAAO3S,UAAU5L,MACnBE,OACEo/B,EAAWp/B,mBACC0K,eAAe,GACA,EAA3B2T,EAAO3S,UAAUC,QACjB0S,EAAO3S,UAAU5L,MACnB2K,aACE20B,EAAW30B,aAAe,EAAI20B,EAAW30B,aAAe4T,EAAO3S,UAAUC,QAAU,EACrFrB,MAAO,OACPI,YAAa2T,EAAO3S,UAAU5L,MAC9B6K,YAAa0T,EAAO3S,UAAUpB,MAC9BM,gBAAiByT,EAAO3S,UAAU/K,kBAE7BvB,OAAO+/B,EAAax/B,SAIlB,CAAEa,EAAAA,EAAGE,EAAAA,EAAGy+B,YAAAA,ifCzCfz/B,MAAEA,GAAUw8B,KAEZxxB,EAAcuQ,YAAS,IACpBrd,EAAMygB,OAAOve,MAAQJ,EAAM1P,QAG9B4a,EAAkBqQ,YAAS,IACxBohB,GAAsBz+B,EAAMygB,OAAO1d,UAAWjB,EAAM1P,SAGvDgc,EAAiBiP,YAAS,WACxBokB,IAAQzhC,EAAMygB,OAAOtS,SACvBuzB,GAAiB1hC,EAAMygB,OAAO1d,WAAa/C,EAAMygB,OAAOrS,eAAiBtM,EAAM1P,aAE5EqvC,EAAQ,qBAAqBA,SAAU,cAGnC,CAAE30B,YAAAA,EAAaE,gBAAAA,EAAiBoB,eAAAA,iXCrC1B9b,EAAO6Y,EAAO8D,OAC3Bnc,KACAN,EAASF,EAAME,OAEf2Y,EAAQ,OACDA,EAAQ3Y,EAAS,EAAKA,EAAS2Y,MAEpC8D,EAAMzc,EAASA,EAASyc,GACpB,OACDzc,KAEA2Y,EAAQ8D,EAAM,EAAMA,EAAM9D,IAAW,OACnC,UAEPrW,EAASnC,MAAMH,KACVM,EAAQN,KACRM,GAASR,EAAMQ,EAAQqY,UAEzBrW,MCtBL6sC,GAAaj/B,KAAKk/B,KAClBt3B,GAAY5H,KAAK6H,gBAuBNjY,EAAOa,EAAMsY,MACrBA,EAAQC,GAAepZ,EAAOa,EAAMsY,QAAkB,IAATtY,GACzC,EAEAmX,GAAUnF,GAAUhS,GAAO,OAEhCX,EAAkB,MAATF,EAAgB,EAAIA,EAAME,WAClCA,GAAUW,EAAO,QACb,WAELL,EAAQ,EACRkG,EAAW,EACXlE,EAASnC,MAAMgvC,GAAWnvC,EAASW,IAEhCL,EAAQN,KACNwG,KAAc6oC,GAAUvvC,EAAOQ,EAAQA,GAASK,UAElD2B,sVCjBHgN,MAAEA,GAAUw8B,KAEZwD,EAAQzkB,YAAS,mBACflO,EAAInP,EAAMqQ,MAAMiR,SAChBlQ,EAAS,IAAK,SAAA,WAAMf,MAAM8Q,gBAAOhC,WAAW,GAAI,CAAEvc,EAAGuM,EAAE2C,GAAIhP,EAAGqM,EAAE4C,KAChE6e,EAAc,YAClBj9B,KAAK,KAAKwb,EAAEyC,MAAMzC,EAAE0C,SAChBT,EAAQ,GAAG5Y,SAAQ,EAAEmlB,EAAIlE,KAAQmX,EAAEj9B,KAAK,KAAKgqB,EAAG/a,KAAK+a,EAAG7a,KAAK2W,EAAG7W,KAAK6W,EAAG3W,OACvE8tB,EAAEztB,KAAK,QAGV2J,EAAcuQ,YAAS,IACpBrd,EAAMygB,OAAOve,MAAQJ,EAAM1P,QAG9B4a,EAAkBqQ,YAAS,IACxBohB,GAAsBz+B,EAAMygB,OAAO1d,UAAWjB,EAAM1P,SAGvDgc,EAAiBiP,YAAS,WACxBokB,IAAQzhC,EAAMygB,OAAOtS,SACvBuzB,GAAiB1hC,EAAMygB,OAAO1d,WAAa/C,EAAMygB,OAAOrS,eAAiBtM,EAAM1P,aAE5EqvC,EAAQ,qBAAqBA,SAAU,cAGnC,CAAE30B,YAAAA,EAAaE,gBAAAA,EAAiBoB,eAAAA,8mBC1BvCqS,EAASshB,cAEF,CAAEthB,OAAAA,ogCCXTA,EAASshB,MACTjd,WAAEA,GAAekd,KAIjBl8B,EAAMi4B,MAAI,CAAEnsB,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IACrCkwB,EAAYlE,MAAI,CAAEn7B,EAAG,EAAGE,EAAG,0BAErB,WACJiO,EAASld,OAAO2B,KAAKwK,EAAMoP,OAAO,KACpChd,MAAQ0yB,EAAW/T,GAAQuQ,WACrBlvB,MAAQ,CAChBwQ,KAAQxQ,MAAMwf,GAAK9L,EAAI1T,MAAM0f,IAAM,EACnChP,KAAQ1Q,MAAMyf,GAAK/L,EAAI1T,MAAM2f,IAAM,QAI1B,CAAE0O,OAAAA,EAAQ3a,IAAAA,EAAKm8B,UAAAA,kiBChCtBnd,WAAEA,kBAAYod,UAAiB18B,GAAYw8B,cA4BpC,CAAEld,WAAAA,EAAYod,gBAAAA,EAAiB18B,QAAAA,80BCHtC1D,MAAEA,GAAUw8B,KAEZ7d,EAASshB,MACTtZ,2BACJA,6BACAC,4BACAC,GACEyX,KAEE0B,EAAQzkB,YAAS,WACflO,EAAInP,EAAMqQ,MAAMiR,YACF,aAAhBb,EAAOxrB,MAAwB+K,EAAMqQ,MAAM8Q,MAExC,OACC/P,EAAS,IAAKpR,EAAMqQ,MAAM8Q,MAAMhC,QAAS,CAAEvc,EAAGuM,EAAE2C,GAAIhP,EAAGqM,EAAE4C,KACzD6e,EAAc,YAClBj9B,KAAK,KAAKwb,EAAEyC,MAAMzC,EAAE0C,SAChBT,EAAQ,GAAG5Y,SAAQ,EAAEmlB,EAAIlE,KAAQmX,EAAEj9B,KAAK,KAAKgqB,EAAG/a,KAAK+a,EAAG7a,KAAK2W,EAAG7W,KAAK6W,EAAG3W,OACvE8tB,EAAEztB,KAAK,WANP,KAAKgM,EAAEyC,MAAMzC,EAAE0C,QAAQ1C,EAAE2C,MAAM3C,EAAE4C,QAUtCjF,EAAcuQ,YAAS,OAAahN,MAAM5D,KAAKmC,OAAO1M,MAAQ,IAAMJ,EAAM1P,iBAEnE,CACXquB,OAAAA,EACAgI,2BAAAA,EACAC,2BAAAA,EACAC,0BAAAA,igBCtDI7D,WAAEA,kBAAYod,UAAiB18B,GAAYw8B,cAEpC,CAAEld,WAAAA,EAAYod,gBAAAA,EAAiB18B,QAAAA,qlBCQtC28B,EAAaJ,MACb7gB,WAAEA,aAAY4D,kBAAYod,UAAiB18B,GAAYw8B,MACvDlgC,MAAEA,GAAUw8B,KAGZ8D,EAAuB/kB,YAAS,IACpCxpB,OAAOsN,YACLtN,OAAOhB,QAAQqvC,EAAgB3xB,YAAYlQ,QACzC,EAAE6lB,EAAGmc,MAAYA,EAAM5zB,WAAa5a,OAAO2B,KAAK6sC,EAAMjzB,OAAO5c,OAAS,OAKtE8vC,EAAoBjlB,YACxB,IAAM,CAACtM,EAAgBjI,EAAmB7H,EAAmBshC,a7B2I7D/jB,EACA+jB,EACA70B,EACAK,EACAjM,SAGM2K,EAAOuS,GAAmBR,GAC1BG,EAAalS,EAAKvL,EAAE6U,QAAQjB,YAG5B8J,EACQ,IAAZ7Q,EACItB,EAAK3D,OACL2D,EAAK3D,OAAOiN,QAAQ3e,IAAIunB,EAAW5I,QAAQpB,eAAe5G,EAAUjM,IAGpEwX,EACQ,IAAZvL,EACItB,EAAKxL,OACLwL,EAAKxL,OAAO8U,QAAQrC,SAASiL,EAAW5I,QAAQpB,eAAe5G,EAAUjM,IAGzEw+B,KAAyBp+B,MAAQ,EAAIwL,GAAU5L,EAC/C0gC,EAAUrkB,GAASrL,UAAU,EAAE6L,EAAW7b,EAAG6b,EAAW/b,IAAI+R,eAAe2rB,OAC7EmC,EAAc7jB,EAAG7I,QAAQrC,SAAS8uB,GAASlqB,WAC3CoqB,EAAc9jB,EAAG7I,QAAQ3e,IAAIorC,GAASlqB,WACtCqqB,EAAcrpB,EAAGvD,QAAQrC,SAAS8uB,GAASlqB,WAC3CsqB,EAActpB,EAAGvD,QAAQ3e,IAAIorC,GAASlqB,iBAEpCzB,EAAQpK,EAAKvL,EAAE4V,kBACjBD,OAAeA,GAAS,OAEzB4rB,EAAaC,GAAe,CAACA,EAAaD,IACzCE,EAAaC,GAAe,CAACA,EAAaD,IAEvC,CACL75B,OAAQ,CAAE+5B,MAAOJ,EAAaK,MAAOJ,GACrCzhC,OAAQ,CAAE4hC,MAAOF,EAAaG,MAAOF,I6BhL9BG,CACLje,EAAW/T,GAAQsQ,cACnBkhB,EACAJ,EAAW90B,MAAMK,OACjBy0B,EAAW90B,MAAMU,QACjBjM,EAAM1P,SAKN4wC,EAAY3lB,YAAS,IAAOzb,gBACzB,CACLkE,IAAK,WAAQL,MAAM7D,MAAS,CAAEgB,EAAG,EAAGE,EAAG,GACvCf,MAAOmf,EAAWtf,GAAMG,mBAIf,CACXqgC,qBAAAA,EACAE,kBAAAA,EACAU,UAAAA,EACAle,WAAAA,EACAqd,WAAAA,EACArgC,MAAAA,ipBC3CIf,IAAEA,GAAQkiC,KAGVx1B,EAAaswB,QACb5O,EAAW4O,QAEXmF,EAAmB,CAACrE,EAAiBsE,EAAsBC,OACzD5qC,4BAAwBm3B,aAAa0T,EAAM,WAAQ9T,aAAa8T,MAAS,QAG3E7D,EAAW,IAAIG,0BACdlyB,EAAWrb,QAAU+8B,EAAS/8B,mBAC7BysC,EAAQyE,EAAQ9sC,sBAAS,WAAE+sC,iBAAiB,MAAIljC,OAAOmjC,WAC5C3E,EAAOpxB,EAAWrb,MAAO+8B,EAAS/8B,8BAG3C,WACFqxC,EAAK7iC,GAAQG,EAAI3O,MAAM63B,cAA2B,eAAgB,gBAC/D73B,MAAQqxC,QACX5E,EAAQ,CAAC,YAAa,WACnBe,QAAQzQ,EAAS/8B,MAAO,CAC/BytC,YAAY,EACZC,gBAAiBjB,IAEdpxB,EAAWrb,SACCysC,EAAOpxB,EAAWrb,MAAOqxC,qBAGhC,OACDzD,kBAGE,CAAEvyB,WAAAA,6TC9BT9H,QAAEA,GAAY+9B,MACd5iC,UAAEA,EAAWE,cAAeiiC,MAC5BnhC,MAAEA,GAAUw8B,KACZ7d,E5DiBG/Q,GAAa,Q4DdhBi0B,EAAY5F,MAAW,CAAEn7B,EAAG,EAAGE,EAAG,IAGlCqsB,EAAW4O,MAAU,CAAE77B,MAAO,IAAKE,OAAQ,mBAEvC,iBACFg4B,EAAM,WAAWhoC,gBAAOoiC,SAC1B4F,MACQhoC,MAAQ,CAChBwQ,GAAIw3B,EAAIx3B,EACRE,GAAIs3B,EAAIt3B,UAGN8a,EAAO9c,EAAU1O,MAAM44B,0BACpB54B,MAAQ,CACf8P,MAAO0b,EAAK1b,MACZE,OAAQwb,EAAKxb,aAITiF,GAAG,qBACAjV,MAAQ,CAAE8P,MAAO0b,EAAK1b,MAAOE,OAAQwb,EAAKxb,aAG7CiF,GAAG,kBACCjV,MAAQ,CAAEwQ,GAAIw3B,EAAIx3B,EAAGE,GAAIs3B,EAAIt3B,QAGjCuE,GAAG,aAAa,iBAChB+yB,EAAM,WAAWhoC,gBAAOoiC,SAC1B4F,MACQhoC,MAAQ,CAAEwQ,GAAIw3B,EAAIx3B,EAAGE,GAAIs3B,EAAIt3B,aAIrC8gC,EAAiB7F,MAAqB,IACtC8F,EAAmB9F,MAAqB,IACxC+F,EAAkB/F,MAAqB,IACvCgG,EAAoBhG,MAAqB,0BAGnC,WACJiG,EAA0B,GAC1BC,EAA0B,GAC1BC,EAA2B,GAC3BC,EAA2B,GAE3B9gC,EAAIvB,EAAM1P,MACVgyC,EAAK3jB,EAAOpU,KAAKE,SACjB3J,EAAI+gC,EAAUvxC,MAAMwQ,EAAIS,EACxBP,EAAI6gC,EAAUvxC,MAAM0Q,EAAIO,EACxBnB,EAAQQ,KAAK8V,MAAM2W,EAAS/8B,MAAM8P,MAAQkiC,EAAK,GAAKA,EACpDhiC,EAASM,KAAK8V,MAAM2W,EAAS/8B,MAAMgQ,OAASgiC,EAAK,GAAKA,EACtDC,KAAsBjyC,MAAMwQ,EAAIV,GAASmB,EACzCihC,KAAuBlyC,MAAM0Q,EAAIV,GAAUiB,EAC3CkhC,EAAM9jB,EAAOpU,KAAKG,gBAClBg4B,EAAkB/jB,EAAOpU,KAAKI,KAAK1J,UACnC0hC,EAAiBhkB,EAAOpU,KAAKM,MAAM5J,cAErC2hC,EAAa,CACf91B,OAAQ6R,EAAOpU,KAAKM,MAAMD,MAC1B,eAAgB+T,EAAOpU,KAAKM,MAAMzK,MAClC,mBAAoBuiC,EACpB,oBAAqBA,EAAiB7hC,EAAIS,OAAI,GAG5CshC,EAAc,CAChB/1B,OAAQ6R,EAAOpU,KAAKI,KAAKC,MACzB,eAAgB+T,EAAOpU,KAAKI,KAAKvK,MACjC,mBAAoBsiC,EACpB,oBAAqBA,EAAkB5hC,EAAIS,OAAI,SAI3CgL,KAAejc,MAAMwQ,EAAIV,GAASmB,UAC/BiO,EAAIxO,EAAGwO,GAAKgzB,EAAWhzB,GAAK8yB,EAAI,OACjCtxC,EAAQ4P,KAAK8V,MAAMlH,EAAI8yB,GACzBG,GAAOzxC,EAAQyxC,GAAQ,IAClB5wC,KAAK,CAACb,EAAOA,EAAQsxC,EAAIxhC,EAAGyL,EAAGq2B,MAE9B/wC,KAAK,CAACb,EAAOA,EAAQsxC,EAAIxhC,EAAGyL,EAAGs2B,MAI9B/9B,kBAAK89B,KACP,qBAAuBD,EAAiB3hC,EAAIO,OAAI,IAE7CuD,kBAAK+9B,KACP,qBAAuBH,EAAkB1hC,EAAIO,OAAI,QAGvD4V,KAAe7mB,MAAM0Q,EAAIV,GAAUiB,UAChCiO,EAAI1O,EAAG0O,GAAK+yB,EAAU/yB,GAAK8yB,EAAI,OAChCtxC,EAAQ4P,KAAK8V,MAAMlH,EAAI8yB,GACzBG,GAAOzxC,EAAQyxC,GAAQ,IAClB5wC,KAAK,CAACb,EAAOA,EAAQsxC,EAAIthC,EAAGmW,EAAGyrB,MAE9B/wC,KAAK,CAACb,EAAOA,EAAQsxC,EAAIthC,EAAGmW,EAAG0rB,MAI1BvyC,MAAQ4xC,IACV5xC,MAAQ6xC,IACL7xC,MAAQ8xC,IACV9xC,MAAQ+xC,OAGb,CACXP,eAAAA,EACAC,iBAAAA,EACAC,gBAAAA,EACAC,kBAAAA,izCC5GIjiC,MAAEA,GAAUw8B,KACZsG,EAAaC,KAEbjU,EAAIvT,YAAS,SACbynB,GAAO,SACJ9kC,EAAMoR,OAAO5a,YACR,OAAN2Y,MAEOA,aAAaxc,MAAO,GACzB,IAAIwc,SACFD,EAAO,MACTC,EAAE3c,OAAS,GAAM,EAAG,OAChBoQ,EAAIuM,EAAE,KACRA,EAAEzL,MAAM,KACP/P,KAAK,KAAKiP,EAAEA,KAAKA,EAAEE,eAEpBqM,EAAG,GAAG3Y,KAAI,EAAEmnB,EAAIlE,KAAQvK,EAAKvb,KAAK,KAAKgqB,EAAG/a,KAAK+a,EAAG7a,KAAK2W,EAAG7W,KAAK6W,EAAG3W,OACjEoM,EAAK/L,KAAK,KACZ,OACC2M,EAAIg1B,YACH,EACA,GAAGh1B,EAAI,KAAO,OAAOX,EAAEvM,KAAKuM,EAAErM,QAd9B,KAgBRK,KAAK,QAGJsd,EAASpD,YAAS,IACfrb,GAAO7K,OAAOytC,EAAW91B,KAAM9O,EAAM8O,QAGxC9B,EAAkBqQ,YAAS,IACxBohB,GAAsBhe,EAAOruB,MAAM2Q,UAAWjB,EAAM1P,SAGvDgc,EAAiBiP,YAAS,WACxBokB,IAAQhhB,EAAOruB,MAAM+b,SACvBuzB,GAAiBjhB,EAAOruB,MAAM2Q,WAAa0d,EAAOruB,MAAMgc,eAAiBtM,EAAM1P,aAE5EqvC,EAAQ,qBAAqBA,SAAU,cAGnC,CAAE7Q,EAAAA,EAAG9uB,MAAAA,EAAO2e,OAAAA,EAAQzT,gBAAAA,EAAiBoB,eAAAA,0hBC7B5C22B,EAA2B,IAAjBC,OAAOD,QAajBH,EAAaC,MACb3jB,WAAEA,aAAY4D,UAAYtf,GAAYw8B,MACtClgC,MAAEA,GAAUw8B,MACZ34B,QAAEA,GAAY+9B,KAEduB,EAAW5nB,YAAS,WAClBnO,EAAqB,aAChBJ,KAAQ9O,EAAMklC,MAAO,OACxB91B,EAAQN,EAAKM,MAChB5Y,UAAiBua,OAAAA,EAAQ9C,KAAMjO,EAAMoP,MAAM2B,OAC3C1Q,WAAYxL,EAAEoZ,OACbmB,EAAM5c,SAAWsc,EAAKM,MAAM5c,UAG3BmB,KAAK,CAAEmb,KAAAA,EAAMM,MAAAA,WAEbF,KAGHi2B,EAAiB9nB,YAAS,IAAOvO,OACX,IAAtBA,EAAKM,MAAM5c,aAAqB,SAC9Bkb,EAAS1L,GAAO5P,MAAMwyC,EAAWl3B,OAAQoB,EAAKA,MAAQhN,EAAM1P,sBAmBlE0c,EACAs2B,EACAC,EACAC,EACAC,EACAv2B,EACAw2B,EACA93B,eAKM0B,EAAQN,EAAKM,MAGbq2B,WAkP8Br2B,SAC9B5c,EAAS4c,EAAM5c,UAEjBA,GAAU,QACL,EAAC,SAGJizC,EAAwB,OAC1BC,EAA0B,aACrBp0B,EAAI,EAAGA,EAAI9e,EAAQ8e,IAAK,OACzBxI,EAASsG,EAAMkC,GAAGrD,KAAKnF,OACvB7H,EAASmO,EAAMkC,GAAGrD,KAAKhN,WACzB0kC,KACM,IAANr0B,KACE9e,EAAS,EAAG,OAGRozC,EAAQ,CAAC98B,EAAQ7H,GAAQwP,OACzBo1B,EAAQ,CAACz2B,EAAM,GAAGnB,KAAKnF,OAAQsG,EAAM,GAAGnB,KAAKhN,QAAQwP,UACvDm1B,EAAM,KAAOC,EAAM,IAAMD,EAAM,KAAOC,EAAM,GAAI,GACrC,CAACz2B,EAAM,GAAGnB,KAAKnF,OAAQsG,EAAM,GAAGnB,KAAKhN,QACzCgnB,SAAS7Y,EAAM,GAAGnB,KAAKhN,QAElBA,IAAWmO,EAAM,GAAGnB,KAAKnF,OAGzB7H,IAAWmO,EAAM,GAAGnB,KAAKhN,cAG3B,CAACmO,EAAM,GAAGnB,KAAKnF,OAAQsG,EAAM,GAAGnB,KAAKhN,QAAQgnB,SAAShnB,UAGxD,CAACmO,EAAM,GAAGnB,KAAKnF,OAAQsG,EAAM,GAAGnB,KAAKhN,QAAQgnB,SAAShnB,UAGxDykC,IAAa58B,IAEhBnV,KAAKgyC,KACLA,EAAY1kC,EAAS6H,SAE3B28B,EA1RYK,CAA6B12B,GAC1C22B,EAAU32B,EAAM5Y,KAAI,CAACyX,EAAMqD,aAqZbrD,EAAkBN,EAAoB0C,OACtDiR,EAAWjR,EAAM+Q,OACjBtY,EAASmF,EAAKA,KAAKnF,OACnB7H,EAASgN,EAAKA,KAAKhN,OACnBkgB,EAAQ9Q,EAAM8Q,MACbxT,ejC5LqBlB,SACnB,CACLmF,GAAInF,EAAKqF,GACTD,GAAIpF,EAAKsF,GACTD,GAAIrF,EAAKmF,GACTG,GAAItF,EAAKoF,IiCwLEm0B,CAAgB1kB,KAClBrT,EAAKA,KAAKhN,SACVgN,EAAKA,KAAKnF,OACfqY,MACMhR,gCAAKgR,GAAL,CAAYlC,OAAQkC,EAAMlC,gBAGhCxS,EAAOuS,GAAmBsC,SACP,CACvBvQ,OAAQ9C,EAAK8C,OACbjI,OAAAA,EACA7H,OAAAA,EACAwL,KAAAA,EACA0U,MAAAA,GAxaqC8kB,CAAah4B,EAAMw3B,EAAWn0B,GAAIg0B,EAAWr3B,EAAK8C,WAGnFK,EAAoC,OAEtC80B,GAAuB,EACvBC,GAAqB,SAMjBC,EAAYL,EAAQ,OACtBM,EAAaC,EAAelB,EAAWgB,EAAUt9B,QAAQ/G,OAASwjC,QAChEhG,EAAa7xB,GAA0B,iBAAe24B,EAAa,GACnEE,EACJhH,GAAc,EACV6G,EAAU35B,KAAK3D,OACf09B,EAAqBJ,EAAW7G,EAAY8F,GAAa,QACxD1xC,KAAK4yC,KACCD,EAAelB,EAAWgB,EAAUnlC,QAAQc,OAASwjC,EAC9D73B,EAAS,EAAG,CACG+4B,GAAoBL,EAAU35B,KAAK3D,OAAQs9B,EAAU35B,KAAKxL,SAC3Ds+B,EAAa8G,OACJ,UAQvB7zC,EAAS4c,EAAM5c,eACZ8e,EAAI,EAAGA,EAAI9e,EAAQ8e,IAAK,OACzB2uB,EAAO8F,EAAQz0B,EAAI,GACnBo1B,EAAOX,EAAQz0B,GAEf7K,EAASigC,EAAK59B,OACdzG,EAAU8b,GAASnL,WAAW,WAAYvM,MAAW,CAAE7D,EAAG,EAAGE,EAAG,IAGhE6jC,EAAaC,EAAwB3G,EAAMyG,EAAMrkC,GAMjDgkC,EAAaC,EAAelB,EAAW3+B,GAAQ1E,OAASwjC,EACxDsB,EAAiBnkC,KAAK6H,IAAI87B,KAAkB,GAAIA,EAAa,EAAId,GACjEuB,EAAaC,EAA8B9G,EAAM59B,EAASwkC,GAAgB,GAC1EG,EAAaD,EAA8BL,EAAMrkC,EAASwkC,GAAgB,GAC1EI,EAAaF,EAA8B9G,EAAM59B,EAASgkC,GAAY,GACtEa,EAAaH,EAA8BL,EAAMrkC,EAASgkC,GAAY,OAKxEvgC,KACA6gC,EAAY,OACR/V,EAAI6V,GAAoBE,EAAYtkC,MACtCuuB,EAAIiW,IAIA,CACJM,GAAiBL,EAAYG,EAAYhH,EAAKxzB,KAAKxL,QACnD0lC,EACAQ,GAAiBH,EAAYE,EAAYR,EAAKj6B,KAAK3D,iBAE5C8nB,GAAKyV,EAAY,KAGtB1oB,EAAclE,IACdwtB,GAAcH,EAIdL,GAAoBE,EAAYG,GAChCL,GAAoBE,EAAYM,GAC5BH,EACAG,EAIDA,GAAchH,EAAKxzB,KAAKxL,SAE3BimC,GAAcF,EAIdP,GAAoBE,EAAYK,GAChCP,GAAoBE,EAAYO,GAC5BF,EACAE,EAIDA,GAAcR,EAAKj6B,KAAK3D,SAEzB,CAAC6U,EAAIgpB,EAAYltB,UAGnBqtB,GAAcE,EAIV,CAACF,EAAYzkC,EAAS2kC,GACnBC,GAAcC,EAIjB,CAACD,EAAY5kC,EAAS6kC,GAMtB,CACJC,GAAiBL,EAAYG,EAAYhH,EAAKxzB,KAAKxL,QACnDoB,EACA8kC,GAAiBH,EAAYE,EAAYR,EAAKj6B,KAAK3D,gBAOrDg+B,GAAcE,EAGV,CAACF,EAAYzkC,EAAS2kC,GACnBC,GAAcC,EAGjB,CAACD,EAAY5kC,EAAS6kC,GAItB,CAACjH,EAAKxzB,KAAKxL,OAAQoB,EAASqkC,EAAKj6B,KAAK3D,WAO5Cm3B,EAAK9e,MAAO,OAERimB,EAAah2B,EAAOA,EAAO5e,OAAS,MACtC40C,EAAY,OACRC,EACJD,aAAsBz0C,MAAQy0C,EAAWA,EAAW50C,OAAS,GAAK40C,MAChEb,IACAzgC,aAAenT,MAGLqc,EAAclJ,EAAI,GAAKA,EAAI,GAE3BA,QAERqZ,EAAUiF,GACdijB,EACApH,EAAK9e,MAAMkD,OAAOxd,OAClB0/B,EACAtG,EAAK9e,MAAMlC,OAETnZ,aAAenT,OAASqc,IACnBrb,KAAK,IAAIwrB,KAAYrZ,MAErBnS,KAAK,IAAIwrB,EAASonB,UAIzBv3B,gBAAgCrc,MAG9B+zC,EAAKvlB,QACAxtB,KAAKmS,EAAI,MAETnS,KAAKmS,EAAI,GAAIA,EAAI,MALnBnS,KAAKmS,UAeVwhC,EAAWvB,EAAQA,EAAQvzC,OAAS,OACtC6zC,EAAaC,EAAelB,EAAWkC,EAASrmC,QAAQc,OAASwjC,QAC/DhG,EAAa7xB,GAA0B,iBAAe24B,EAAa,GACnEE,EACJhH,GAAc,EACV+H,EAAS76B,KAAKxL,OACdulC,EAAqBc,EAAU/H,EAAY8F,GAAa,KACjDiB,EAAelB,EAAWkC,EAASx+B,QAAQ/G,OAASwjC,QAC3DpkB,EAAQmmB,EAASnmB,SACnBA,EAAO,OAEHrb,EAAMsL,EAAOA,EAAO5e,OAAS,GAE7B2sB,EAAUiF,GADEte,aAAenT,MAAQmT,EAAIA,EAAItT,OAAS,GAAKsT,EAG7Dqb,EAAMkD,OAAOxd,OACb0/B,EACAplB,EAAMlC,SAEDtrB,KAAK,IAAIwrB,EAASonB,WAGlB5yC,KAAK4yC,MAEV74B,EAAS,EAAG,CACG+4B,GAAoBa,EAAS76B,KAAK3D,OAAQw+B,EAAS76B,KAAKxL,SACzDs+B,EAAa8G,OACN,IAKvBH,MACKjjB,QACH7R,EAAO,aAAcze,SAChB40C,QAAQn2B,EAAO,GAAG,KAGzB+0B,KACK5yC,aAGF6d,EAxQAo2B,CACL14B,EACAoS,EACA1b,EAAQC,MACRqf,EACAhjB,EAAM1P,MACNwyC,EAAW51B,YACX41B,EAAW31B,IACXvB,MAIE+5B,EAAmB34B,IAClB81B,EAAW71B,aACR7O,KAAK,aAAc4O,eA6PL/M,SACJ,UAAdA,EAAM9M,KACD8M,EAAMI,OAENO,KAAKoC,IAAI/C,EAAMG,MAAOH,EAAMK,QAAU,aAgD/C6L,EACAo4B,EACAhB,EACA13B,SAEMlH,EAASkH,EAAYM,EAAKnF,OAASmF,EAAKhN,OACxCkgB,EAAQlT,EAAKkT,SACfA,EAAO,KACLumB,EAAUrB,EAAallB,EAAMkD,OAAOliB,cACpCgf,EAAMlC,MAAQ,WAGbtR,WAGEwQ,GAASnL,WACdiR,GACEtW,EAAYM,EAAKxB,KAAK3D,OAASmF,EAAKxB,KAAKxL,OACzCkgB,EAAMkD,OAAOxd,OACb6gC,IAGC,KACD5+B,EAAkB7H,EAClB0M,KACOM,EAAKxB,KAAKxL,SACVgN,EAAKxB,KAAK3D,WAEVmF,EAAKxB,KAAK3D,SACVmF,EAAKxB,KAAKxL,cAGfkO,EAAIw4B,GACR7+B,EACA7H,EACAkd,GAASnL,WAAWqyB,EAAY5+B,IAChC4/B,UAEW,OAANl3B,EAAarG,EAASqG,cAK/B8wB,EACAyG,EACArkC,OAEIskC,EAA8B,QAC9B1G,EAAK9e,SACHulB,EAAKvlB,MAAO,IACV8e,EAAKxzB,KAAKxL,OAAOmX,UAAUsuB,EAAKj6B,KAAK3D,eAChCm3B,EAAKxzB,KAAKxL,OAAO8U,UAGb6xB,GACX3H,EAAK9e,MAAMkD,OAAOxd,OAClBo5B,EAAK9e,MAAMkD,OAAOliB,OAClBukC,EAAKvlB,MAAMkD,OAAOxd,OAClB6/B,EAAKvlB,MAAMkD,OAAOliB,OAClB89B,EAAK9e,MAAMta,wB1DhTjBiC,EACA7H,EACA4F,EACA1E,EACA0lC,QAGU5mC,EAAO8U,QACArC,SAAS7M,GAAQoR,WACP9V,EAASA,GAAWO,KAAKkQ,IAAI,eAElC,WAKhBnG,EAAOuM,GAAYlQ,EAAQ7H,GAC3BgY,EAAIC,GAAgBrS,EAAQ4F,GAI5B0M,EADKF,EAAElD,QAAQrC,SAAS7M,GACbrU,YAIb2P,EAASgX,SAAc,QAKvBhX,IAAWgX,SAAcF,QAIvBG,EAAI1W,KAAKiQ,KAAK0G,QAAU,GAAIA,QAAS,IAMrCC,EAAK7M,EAAKvL,EAAE4T,YAAYH,eAAeyE,GACvC0uB,EAAM7uB,EAAElD,QAAQ3e,IAAIkiB,GACpByuB,EAAM9uB,EAAElD,QAAQrC,SAAS4F,GAEzB0uB,EAAKhtB,GAAkB6sB,EAAQC,GAC/BG,EAAKjtB,GAAkB6sB,EAAQE,UAEjCrlC,KAAKC,IAAIqlC,EAAKC,GAAM,EAGfF,EAGFC,EAAKC,EAAKH,EAAMC,E0D+PNG,CACXxB,EAAKj6B,KAAKxL,OACVylC,EAAKj6B,KAAK3D,OACVm3B,EAAK9e,MAAMkD,OAAOxd,OAClBo5B,EAAK9e,MAAMkD,OAAOliB,OAClBE,WAIAqkC,EAAKvlB,QAEMwmB,GACX1H,EAAKxzB,KAAK3D,OACVm3B,EAAKxzB,KAAKxL,OACVylC,EAAKvlB,MAAMkD,OAAOxd,OAClB6/B,EAAKvlB,MAAMkD,OAAOliB,YAEf,OAECgmC,EAAYC,EAAUnI,EAAKxzB,MAC3B47B,EAAYD,EAAU1B,EAAKj6B,SAE7B7H,SAASujC,KAAevjC,SAASyjC,IAAe3lC,KAAKC,IAAIwlC,EAAYE,GAAatD,EAEvE,KAEA9kB,GAA8BggB,EAAKxzB,KAAMi6B,EAAKj6B,aAI1Dk6B,aAIP14B,EACAq6B,EACAjC,EACAkC,UAEIt6B,EAAKkT,MACAymB,GACLU,EACAjC,EACAp4B,EAAKkT,MAAMkD,OAAOxd,OAClBoH,EAAKkT,MAAMkD,OAAOliB,OAClBgc,GAASnL,WAAW/E,EAAKkT,MAAMta,SAG1B8gC,GACLY,EAAat6B,EAAKxB,KAAK3D,OAASmF,EAAKxB,KAAKxL,OAC1CsnC,EAAat6B,EAAKxB,KAAKxL,OAASgN,EAAKxB,KAAK3D,OAC1Cw/B,EACAjC,cA6BavgC,YACL7E,OAAO6B,EAAIgD,EAAIgD,OAAOhG,MAAU7B,OAAO2B,EAAIkD,EAAIgD,OAAOlG,YAGvD,CAAEgiC,WAAAA,EAAYK,SAAAA,EAAUE,eAAAA,EAAgBsC,gBAAAA,6zBCvf/Ce,EAAcnrB,YAAS,WACrBhP,EAAIrO,EAAMkC,MACV+W,EAAIjZ,EAAMoC,cACZpC,EAAM+P,SACD,GAAG1B,KAAK4K,QAAQA,EAAI,MAAM5K,MAE1B,QAAQA,KAAK4K,EAAI,QAAQA,6YCN9BwvB,EAAcprB,YAAS,IACJ,gBAAhBrd,EAAMwO,MAA0B,EAAI9L,KAAKoC,IAAI9E,EAAMkC,MAAOlC,EAAMoC,QAAU,IAG7EsmC,EAAcrrB,YAAS,WACrBvN,EAAI24B,EAAYr2C,MAAQ,EACxBic,EAAIrO,EAAMkC,MACV+W,EAAIjZ,EAAMoC,cACZpC,EAAM+P,SACD,GAAG1B,EAAIyB,KAAKmJ,EAAInJ,MAAMA,KAAKmJ,EAAI,MAAM5K,EAAIyB,KAAKA,IAE9C,GAAGA,KAAKA,MAAMzB,EAAIyB,KAAKmJ,EAAI,MAAMnJ,KAAKmJ,EAAInJ,mzBChC/C1V,EAAiC,CACrCuuC,MAAOC,GACP/xB,MAAOgyB,GACPxkB,OAAQykB,IAkBJ5mC,EAAQmb,YACZ,IAAMrd,EAAMuO,OAAOrM,OAAgC,kBAAjBqM,OAAOC,MAA0B,EAAIxO,EAAM8B,SAGzEM,EAASib,YACb,IAAMrd,EAAMuO,OAAOnM,QAAiC,kBAAjBmM,OAAOC,MAA0B,EAAIxO,EAAM8B,SAG1EinC,EAAO1rB,YAAS,WACd3P,EAAS1N,EAAMuO,OAAOb,QAAiC,kBAAjBa,OAAOC,MAA0B,EAAIxO,EAAM8B,cAChF9B,EAAMuO,OAAOwB,SAAW7N,EAAM9P,MAAQsb,GAAUA,8jBCyGnDs7B,GAAe,CAAC,gBAAiB,sBAAuB,cAEzDC,GAAaC,kBAAa,CAC7BC,WAAY,CACVC,MAAAA,GACAC,eAAAA,eACAC,oBACAC,GACAC,YAAAA,uBACAC,mBACAC,GACAC,OAAAA,eACAC,IAEF5pC,MAAO,CACLyF,MAAO,CACLxQ,KAAMpB,OACNg2C,QAAS,UAEXz6B,MAAO,CACLna,KAAMpB,OACNg2C,QAAS,UAEXrkC,QAAS,CACPvQ,KAAMpB,OACNg2C,QAAS,UAEXhlB,UAAW,CACT5vB,KAAM+vC,OACN6E,QAAS,GAEX9kB,cAAe,CACb9vB,KAAMtC,MACNk3C,QAAS,IAAM,IAEjB7kB,cAAe,CACb/vB,KAAMtC,MACNk3C,QAAS,IAAM,IAEjBnkC,QAAS,CACPzQ,KAAMpB,OACNg2C,QAAS,UAEX3E,MAAO,CACLjwC,KAAMtC,MACNk3C,QAAS,IAAM,IAEjBC,OAAQ,CACN70C,KAAMpB,OACNg2C,QAAS,UAEXE,cAAe,CAKb90C,KAAMpB,OACNg2C,QAAS,WAGbG,MAAO,CAAC,mBAAoB,uBAAwB,uBAAwB,kBAC5EC,MAAMjqC,GAAOE,KAAEA,QAAMgqC,UAEbvkC,EAAUwkC,YACTt3C,QAAQmN,EAAM+pC,eAAevxC,SAAQ,EAAEvD,EAAMsxB,QAC1Clf,GAAGpS,EAAasxB,YAIpB7gB,WlE9MqBA,SACvB0kC,EAAmBvqC,WAASwqC,MAC5BC,EAAYz2C,OAAO2B,KAAK40C,aACnB73C,KAAO+3C,WACV,IAAM5kC,EAAQnT,KAAM,QAClB63C,EAAQ73C,GAAMmT,EAAQnT,IAAQ,MACnC,CAAEgO,WAAW,EAAMgqC,MAAM,qBAGtB96B,GAAc26B,GACfA,EkEoMWI,CAAexqC,EAAM0F,SAG/B+kC,EAAYptB,YAAS,WACnBqtB,EAAe,IAAI1tC,IAAInJ,OAAO2B,KAAK00C,OAC5B1xC,YAAakyC,EAAa/oC,OAAO0B,WAExCymC,EAASj2C,OAAOsN,YAAYk9B,GAAe7nC,QAAS,CAACwE,EAAG,qBACvDwG,OACLsoC,EACAj2C,OAAOhB,QAAQmN,EAAM8pC,QAAQ1mC,QAAO,CAACunC,GAAQrsC,EAAMrJ,QACpC0M,OAAOrD,GAChBrJ,KAAQ01C,IACJ11C,GAAMtB,KAAK2K,KAEXrJ,GAAQ,CAACqJ,GAEVqsC,IACN,YAGUh3C,QAAQ+2C,GAChBZ,KAIHc,EAAavtB,YAAS,IAAM3X,EAAQiG,KAAKU,KAAKC,UAC9Cu+B,EAA2BxtB,YAAS,WAClCysB,EAASW,EAAUr4C,aAClBw4C,EAAWx4C,OAAS03C,aAAqBt3C,OAAS,GAAKs3C,OAAet3C,OAAS,KAIlFs4C,EAAgBztB,YAAS,IAAM,kBAAmB6sB,IAClDa,EAAqB1tB,YAAS,IAAM,wBAAyB6sB,IAC7Dc,EAAqB3tB,YAAS,IAAM,eAAgB6sB,IAKpDppC,EAAYi9B,QACZh9B,EAAMg9B,QACNkN,EAAOlN,OAAa,GAEpBlZ,WpH9PR7kB,EACA1B,EACA4B,EACAG,MAOIA,EAAQ,OACJ6qC,EAAOnN,MAAU19B,EAAOL,EAAM1B,KAC9B6sC,EAAU/qC,IACTE,GAAQF,EAAU8qC,EAAK94C,WACrBA,MAAQgO,GAEVE,GAAQF,EAAUJ,EAAM1B,OACtB,UAAUA,IAAiB8B,oBAG9B,IAAMC,EAAO6qC,EAAK94C,QAAQ+4C,YAC1B,IAAMnrC,EAAM1B,QAAW6sC,EAAO9qC,EAAOa,MACvCgqC,EAAK94C,QAAU4N,EAAM1B,MAClB,UAAUA,IAAiB4sC,EAAK94C,OAEhC84C,QAGH9hB,EAAO2U,MAAU/9B,EAAM1B,oBAE3B,IAAM0B,EAAM1B,SAELgC,GAAQY,EAAGkoB,EAAKh3B,WACdA,MAAQ8O,cAIbkoB,OACC9oB,GAAQY,EAAGlB,EAAM1B,OACf,UAAUA,IAAiB4C,MAG7BkoB,EoHoNagiB,CAASprC,EAAO,YAAaE,SACzCwC,KAAK6H,IAAIrJ,EAAGwE,EAAQiG,KAAKI,gBACzBrJ,KAAKoC,IAAI5D,EAAGwE,EAAQiG,KAAKK,kBAKvBhL,iCAAYk9B,wBAAqBC,GAA0BkN,GAActqC,EAAK,CACpFi1B,iBAAkB,cAClBM,QAAS5wB,EAAQiG,KAAKI,aACtBwqB,QAAS7wB,EAAQiG,KAAKK,aACtBC,KAAK,EACLpF,QAAQ,EACRiF,YAAapG,EAAQiG,KAAKG,YAC1BmpB,yBACQ7M,EAAI,SAAA,WAAWh2B,gBAAOyqC,iBAAiB,EACzCn6B,KAAKC,IAAIkiB,EAAUzyB,MAAQg2B,IAAM,SACzBh2B,MAAQg2B,IACVloB,KAAK,YAAakoB,KAG9Bvc,WAAYnG,EAAQiG,KAAKE,WACzBypB,SAAY3vB,EAAQzF,KAAK,WAAYiP,SnHvQTxO,EAAAA,EmH0QZ,CAAEG,UAAAA,EAAWC,IAAAA,EAAKC,wBnHzQ9BN,GAAeC,SmH4Qf2qC,EAAW,CAAEppC,MAAO,EAAGE,OAAQ,GAC/BmpC,EAAiB,IAAIC,gBAAe,0BAC7Bp5C,UAAO6oC,eACZwQ,EAAI,WAAUr5C,gBAAO44B,2BACvBygB,EAAG,OACC7oC,MAAeV,MAAQupC,EAAEvpC,OAAS,EAClCY,MAAeV,OAASqpC,EAAErpC,QAAU,aAC/BhQ,UAAO4oC,MAAM,CAAEp4B,EAAAA,EAAGE,EAAAA,UACvBZ,MAAEA,SAAOE,GAAWqpC,SACnBjqC,OAAO8pC,EAAU,CAAEppC,MAAAA,EAAOE,OAAAA,MACzBlC,KAAK,cAAe,CAAE0C,EAAG6oC,EAAE7oC,EAAGE,EAAG2oC,EAAE3oC,EAAGZ,MAAAA,EAAOE,OAAAA,WAGrC,mBACZmY,EAAI3Z,GAAQE,EAAU1O,MAAO,4BACpBwtC,QAAQrlB,iBACf5O,MAAKS,mCAA0BxL,GAAQ2F,EAAWnU,MAAO,gCAC3Dq5C,EAAIlxB,EAAEyQ,yBACN9oB,MAAEA,SAAOE,GAAWqpC,SACnBjqC,OAAO8pC,EAAU,CAAEppC,MAAAA,EAAOE,OAAAA,UAEb,OACL49B,sBAGXlD,EAA0B4O,qBACnBt5C,UAAO0qC,uBAChB4O,EACAhmC,EAAQiG,KAAKI,aACbrG,EAAQiG,KAAKK,wBAKf,IAAMtG,EAAQiG,KAAKE,kCAENzZ,UAAOkrC,cAAcp8B,eAIlC,IAAMwE,EAAQiG,KAAKG,mCAEN1Z,UAAOorC,eAAet8B,cAI/B2jB,MAAgBiY,EAAuB57B,cAE3C,IAAM,CAACwE,EAAQiG,KAAKI,aAAcrG,EAAQiG,KAAKK,sBAEtB6Y,EAAUzyB,gBAK/B0P,MAAEA,YxB3UqB+iB,EAAwB8mB,SACjD7pC,EAAQub,YAAS,IACdsuB,EAAU//B,eAAiB,EAAK,EAAIiZ,EAAUzyB,yBAE/CgsC,GAAc,CACpBvZ,UAAAA,EACA/iB,MAAAA,IAEK,CAAEA,MAAAA,GwBmUW8pC,CAAiB/mB,EAAWnf,EAAQiG,SAElC,WAEZkgC,EAAmB7rC,EAAM6kB,YACRgnB,YAKnBC,EAAmBxqC,UACnBzN,OAAO2B,KAAKwK,EAAMyF,OAAOjT,OAAS,cACzBJ,UAAO2oC,wBACTz5B,SAOPq7B,EAAgB,QACJ,sBACHvqC,UAAOuqC,kBACVz8B,KAAK,gBAAY,OAKvB6rC,EAAc,QACF,sBACH35C,UAAOyU,aAOhBmlC,EAAuBC,GAAejsC,EAAO,gBAAiBA,EAAMyF,MAAOvF,WAC3E8rC,MAA+BrmC,EAAQzF,KAAK,cAAevN,MAAM6N,KAAKiF,YAEtEymC,EAAuBD,GAAejsC,EAAO,gBAAiBA,EAAMoP,MAAOlP,WAC3EgsC,MAA+BvmC,EAAQzF,KAAK,cAAevN,MAAM6N,KAAK4O,YAEtE6V,EAAexkB,GAAS,IAAIzD,KAC5BkoB,EAAezkB,GAAS,IAAIzD,KAC5BmvC,EAAiB1rC,GAAkB,CAAEgF,MAAO,cAIhD,IAAMzF,EAAMwF,UACZ,IAAM3R,OAAO2N,OAAO2qC,EAAgBnsC,EAAMwF,UAC1C,CAAE+kC,MAAM,EAAMhqC,WAAW,YAErB4rC,GAAgB,IAAMjsC,EAAK,iBAAkBisC,IAAiB,CAAE5B,MAAM,UAEtE6B,EAAuB/uB,YAAS,IAC7B3X,EAAQ9D,KAAKkM,UAAUxB,UAM1B+/B,ajEpYAx8B,GAAYF,IACbA,IiE0YC28B,EAAWvO,OAAa,KACtB12B,GAAG,qBAAwBilC,EAASl6C,OAAQ,MAC5CiV,GAAG,mBAAsBilC,EAASl6C,OAAQ,MAC1CiV,GAAG,6BAEL3B,EAAQiG,KAAKE,aACF,YAAT0gC,aACSn6C,UAAOmpC,uBAEPnpC,UAAOopC,cAGlB91B,EAAQiG,KAAKG,cACF,YAATygC,aACSn6C,UAAOspC,wBAEPtpC,UAAOupC,wBAKlBza,WAAEA,aAAY4D,YpCxUtBrf,EACA2J,EACA2V,EACAC,EACAC,EACAC,EACAxf,EACAF,EACA1D,SAEMof,EAAyBrhB,WAAS,IAClCilB,EAAyBjlB,WAAS,WAMjCrK,KAAKiQ,GAAOjN,gBACD0oB,EAAYzb,EAAOI,EAAIkf,EAAcrxB,IAAImS,IAAK,EAAOH,EAAQ9D,kBAK7E,IAAM,IAAImjB,KACV,CAACynB,EAAOvM,WACAwM,EAASD,EAAMnsC,YAAa4/B,EAAKhY,SAASjtB,KAC1C8sB,EAAUmY,EAAK5/B,YAAamsC,EAAMvkB,SAASjtB,OAC1CxC,mBACC6X,EAAQ6Q,EAAWrb,GACrBwK,IAAUA,EAAMnD,aAAgBA,UAAW,QAEzC1U,mBACA6X,EAAQ6Q,EAAWrb,GACrBwK,GAASA,EAAMnD,aAAgBA,UAAW,kBAOlD,IAAM,IAAI+X,KACV,CAACunB,EAAOvM,WACAwM,EAASD,EAAMnsC,YAAa4/B,EAAKhY,SAASjtB,KAC1C8sB,EAAUmY,EAAK5/B,YAAamsC,EAAMvkB,SAASjtB,OAC1CxC,mBACC6X,EAAQ6Q,EAAWrb,GACrBwK,IAAUA,EAAMsQ,YAAeA,SAAU,QAEvCnoB,mBACA6X,EAAQ6Q,EAAWrb,GACrBwK,GAASA,EAAMsQ,YAAeA,SAAU,kBAOhD,IAAM,IAAI3jB,IAAInJ,OAAO2B,KAAKiQ,MAC1B,CAACinC,EAAOzM,eACKx5B,KAAUimC,EACfzM,EAAKvsC,IAAI+S,OAEGya,EAAYzb,EAAOgB,GAAQ,GAAO,EAAOf,EAAQ9D,YAI7DmE,EAAYP,EAAQC,gBACfgB,KAAUw5B,EACfyM,EAAMh5C,IAAI+S,YAEPV,EAAUU,KACH9E,OAAO8E,KACR9E,OAAO8E,UACbya,EAAWza,aAUlBy7B,EAAkByK,GAA8BlnC,EAAO2J,EAAO1J,UAE7DlQ,KAAK4Z,GAAO5W,gBAEfssB,EACAod,EACAhhB,EACA9R,EACAvJ,EACAmf,EAActxB,IAAImS,GAClBH,EAAQuI,KACRzI,EAAQC,MACR3D,eAMF,IAAM,IAAIkjB,KACV,CAACwnB,EAAOvM,WACAwM,EAASD,EAAMnsC,YAAa4/B,EAAKhY,SAASjtB,KAC1C8sB,EAAUmY,EAAK5/B,YAAamsC,EAAMvkB,SAASjtB,OAC1CxC,mBACC6X,EAAQyU,EAAWjf,GACrBwK,IAAUA,EAAMnD,aAAgBA,UAAW,QAEzC1U,mBACA6X,EAAQyU,EAAWjf,GACrBwK,GAASA,EAAMnD,aAAgBA,UAAW,kBAOlD,IAAM,IAAIgY,KACV,CAACsnB,EAAOvM,WACAwM,EAASD,EAAMnsC,YAAa4/B,EAAKhY,SAASjtB,KAC1C8sB,EAAUmY,EAAK5/B,YAAamsC,EAAMvkB,SAASjtB,OAE1CxC,mBACC6X,EAAQyU,EAAWjf,GACrBwK,IAAUA,EAAMsQ,YACZA,SAAU,QAIZnoB,mBACA6X,EAAQyU,EAAWjf,GACrBwK,GAASA,EAAMsQ,YACXA,SAAU,kBAQtB,IAAM,IAAI3jB,IAAInJ,OAAO2B,KAAK4Z,MAC1B,CAACs9B,EAAOzM,eACKlvB,KAAU27B,EACfzM,EAAKvsC,IAAIqd,OAGX+T,EACAod,EACAhhB,EACA9R,EACA2B,GACA,EACArL,EAAQuI,KACRzI,EAAQC,MACR3D,aAIOiP,KAAUkvB,EACfyM,EAAMh5C,IAAIqd,OAEApP,OAAOoP,KACRpP,OAAOoP,KACTA,GAAQwQ,yBACZuD,EAAW/T,aAKlB2P,EAAS,CAAEQ,WAAAA,EAAY4D,WAAAA,EAAYod,gBAAAA,EAAiB18B,QAAAA,oBAClD+a,GAAWG,GACZA,EoC4J8BksB,CACjCC,WAAS7sC,EAAMyF,OACfonC,WAAS7sC,EAAMoP,OACf48B,EACAE,EACAjnB,EACAC,EACA2nB,WAASnnC,GACTymC,EACArqC,MAKAf,EACA8rC,WAASV,EAAe1mC,OACxBonC,WAAShoB,GACT3D,EACA4D,EACAknB,EACAE,EACAjnB,EACAC,EACAvf,SAMImnC,EAAezvB,YAAS,IAAM3X,EAAQoJ,KAAKxC,UAM3CygC,EAAiB,MACrBvnC,QAAS/E,GAAS0rC,EAAe1mC,OACjCA,MAAOonC,WAAS7sC,EAAMyF,OACtB2J,MAAOy9B,WAAS7sC,EAAMoP,OACtB1J,QAASmnC,WAASnnC,GAClB5D,MAAO+qC,WAAS/qC,GAChB6D,QAAAA,EACA3E,WAAYJ,GAAQ2F,EAAWnU,yBAG/B,IAAMsT,EAAQiG,KAAKO,gBACnB,CAAC8gC,EAAYC,OACAzlC,eACAlC,SAASynC,WAQJ,QACF,WAERG,EAAMtsC,GAAQ2F,EAAWnU,MAAO,kBAClCyU,WAII8E,KAAKO,cAAc5G,SAASynC,iBAE3B,QACHl5C,OAAO2B,KAAKwK,EAAMyF,OAAOjT,OAAS,EAGhCkT,EAAQiG,KAAKM,gBAKZ,OAEC2wB,EAAQsQ,EAAI3Q,aACdnC,IAAI,CACNx3B,EAAGg6B,EAAM16B,MAAQ,EACjBY,EAAG85B,EAAMx6B,OAAS,MAIdlC,KAAK,eAGR9N,OAAQ,cAKG,OACZ8N,KAAK,iBACLyL,KAAKO,cAAc1E,gBAGtB,CAEL1G,UAAAA,EACAC,IAAAA,EACAkqC,KAAAA,EAGAjqC,aAGAmsC,WAAYznC,EACZ+kC,UAAAA,EACAG,WAAAA,EACAC,yBAAAA,EACAC,cAAAA,EACAC,mBAAAA,EACAC,mBAAAA,EACAlpC,MAAAA,EACAof,WAAAA,EACA8qB,qBAAAA,EACAr8B,UACA28B,SAAAA,EACAH,eAAAA,EACAC,qBAAAA,EACAU,aAAAA,EAGAnQ,cAAAA,EACAoP,YAAAA,IAGJrP,QAAS,CAIP9K,6BACO5wB,eAAY4wB,UAKnBS,8BACOrxB,eAAYqxB,WAMnB+a,MAAMrc,uBACC/vB,eAAYo5B,IAAIrJ,IAMvBiK,MAAMjK,uBACC/vB,eAAYg6B,MAAMjK,IAMzByD,gBACS5zB,GAAQvN,KAAK2N,YAAYwzB,UAKlC+H,iBACQK,EAAQh8B,GAAQvN,KAAK2N,YAAYu7B,iBAChC,CACLr6B,MAAO06B,EAAM16B,MACbE,OAAQw6B,EAAMx6B,OACd8wB,QAAS0J,EAAM1J,UAOnBma,iBACQtjB,EAAU12B,KAAK0N,IACfouB,QAAWpF,WAASE,cAAc,eAElChpB,QAAS8oB,WAASujB,WAAU,MAE9Bne,EAAU,OACNloB,EAAMkoB,EAASyE,UACfxL,EAAI,EAAI/0B,KAAKyO,MACbf,EAAM,CACV6B,EAAGF,KAAK8V,SAAW5V,EAAI,IAAMwlB,GAC7BtlB,EAAGJ,KAAK8V,SAAW1V,EAAI,IAAMslB,GAC7BlmB,MAAOQ,KAAKk/B,QAAU1/B,MAAQ,IAAMkmB,GACpChmB,OAAQM,KAAKk/B,QAAUx/B,OAAS,IAAMgmB,MAEjCuH,aAAa,QAAU5uB,EAAImB,MAAM3N,cACjCo7B,aAAa,SAAU5uB,EAAIqB,OAAO7N,kBAEnC2M,EAAID,EAAOgpB,cAAc,iBAC7B0F,aAAa,YAAa,cAAc5uB,EAAI6B,MAAM7B,EAAI+B,aAAaslB,QACnEqL,gBAAgB,WAEX9D,aAAa,UAAW,OAAO5uB,EAAImB,SAASnB,EAAIqB,cAGrDhP,EAAO6N,EAAOssC,mBAGXn6C,EAAKo6C,WAAW,wBAAyB,MACzCp6C,EAAKo6C,WAAW,oBAAqB,IACrCp6C,MA9nBHq6C,GAAY,CAAC1P,IAAK,yCA2CnBxrC,IAAK,OAMHm7C,MAAM,6CAiBsBn7C,IAAK,2cAjExCo7C,qBAkHM,yBAjHKA,4BACT5P,IAAK,MAEL2P,MAAME,iBAAK,gDACX1rC,MAAM,MACNE,OAAO,4CAGP,wBAGSyrC,WAAS,uCADVC,aAASC,YAEdx7C,IAAKy7C,8BAGI,6BAAZx7C,6CACE,OAMEy7C,0FAJOC,+BACNroC,GAAAA,EACAtT,MACAgc,OAAAA,6DAMwB4/B,oFACoBC,kCAA/C,kDAEI,8CAFkDF,cAASP,0BAAEp7C,IAAKy7C,mBACpE,yDAIuB,iFAEzB,wDAEI,wCAF4CE,cAASP,0BAAEp7C,IAAKy7C,mBAC9D,yEAKJG,qBAuEI,IAvEJ,4BACEE,qDAEI,wCAF4CH,cAASP,0BAAEp7C,IAAKy7C,mBAC9D,yDAIF,2BACwB,QACtBM,cAAiBC,4DAGnBV,WAEI,yCAF6CK,cAASP,0BAAEp7C,IAAKy7C,mBAC/D,yDAImB,0CACEQ,cAC0BC,EADf,sBACeC,iHAKxCP,yBAAoB,8DAC3B,OAME,gGAJKD,cAAMM,iBACV3oC,GAAGY,EACHlU,IAAKkU,EACL4J,MAAK09B,6GAIV,wDAEI,6CAFiDG,cAASP,0BAAEp7C,IAAKy7C,mBACnE,yDAIF,oBACSW,kBAAgB,CACtBrwC,KAAGyvC,EAAIZ,WAAUvrC,KAAKoM,WACvB4gC,QAAOzB,2BACPx4C,IAAK,mDAEL,uCAeSk5C,mDAbFK,cAAeM,iBACnB3oC,GAAGY,EAAQlS,WACXhC,IAAKkU,EACL4J,MAAAA,iCAGew+B,iBAAa,6CAC3BH,WAAgDI,wGAGlC,sDACdJ,WAAsDI,sNAK5DjB,WAEI,yCAF6CK,cAASP,0BAAEp7C,IAAKy7C,mBAC/D,yDAGa,qDAAez7C,IAAK,EAAU2yC,MAAO6I,uEAEpD,wDAEI,yCAF6CG,cAASP,0BAAEp7C,IAAKy7C,mBAC/D,gkBC1DJprC,EAAIm7B,MAAI,GACRj7B,EAAIi7B,MAAI,GACR8C,EAA8C9C,MAAI,UAClDkB,EAA4DlB,MAAI,WAChElnB,EAAQknB,MAAI,kBAEN,WACJ16B,EAAIrD,EAAMsG,KAAKwC,OACfsQ,EAAIpZ,EAAMsG,KAAKrF,OACD,WAAhBjB,EAAM+uC,OACJ1rC,EAAEw/B,MAAMjgC,GAAKwW,EAAEypB,MAAMjgC,IACZxQ,MAAQiR,EAAEw/B,MAAM//B,EAAIsW,EAAEypB,MAAM//B,EAAI,QAAU,QAE1C1Q,MAAQiR,EAAEw/B,MAAMjgC,EAAIwW,EAAEypB,MAAMjgC,EAAI,QAAU,MAE3B,UAAxB5C,EAAMgvC,iBACN58C,MAAQiR,EAAEw/B,MAAMjgC,IAChBxQ,MAAQiR,EAAEw/B,MAAM//B,IACD1Q,MAAQ,YACQ,UAAxB4N,EAAMgvC,iBACb58C,MAAQiR,EAAEy/B,MAAMlgC,IAChBxQ,MAAQiR,EAAEy/B,MAAMhgC,IACD1Q,MAAQ,cAGvBA,SAAWywC,MAAMjgC,EAAIS,EAAEy/B,MAAMlgC,GAAK,IAClCxQ,SAAWywC,MAAM//B,EAAIO,EAAEy/B,MAAMhgC,GAAK,IACnB1Q,MAAQ,YAEF,WAAhB4N,EAAM+uC,OACX1rC,EAAEw/B,MAAMjgC,GAAKwW,EAAEypB,MAAMjgC,IACZxQ,MAAQiR,EAAEw/B,MAAM//B,EAAIsW,EAAEypB,MAAM//B,EAAI,QAAU,QAE1C1Q,MAAQiR,EAAEw/B,MAAMjgC,EAAIwW,EAAEypB,MAAMjgC,EAAI,QAAU,MAE3B,UAAxB5C,EAAMgvC,iBACN58C,MAAQgnB,EAAEypB,MAAMjgC,IAChBxQ,MAAQgnB,EAAEypB,MAAM//B,IACD1Q,MAAQ,YACQ,UAAxB4N,EAAMgvC,iBACb58C,MAAQgnB,EAAE0pB,MAAMlgC,IAChBxQ,MAAQgnB,EAAE0pB,MAAMhgC,IACD1Q,MAAQ,cAGvBA,SAAWywC,MAAMjgC,EAAIwW,EAAE0pB,MAAMlgC,GAAK,IAClCxQ,SAAWywC,MAAM//B,EAAIsW,EAAE0pB,MAAMhgC,GAAK,IACnB1Q,MAAQ,eAIhBA,MAAQ,SACS,UAAxB4N,EAAMgvC,iBACN58C,SAAWywC,MAAMjgC,EAAIwW,EAAEypB,MAAMjgC,GAAK,IAClCxQ,SAAWywC,MAAM//B,EAAIsW,EAAEypB,MAAM//B,GAAK,IACnB1Q,MAAQ,YACQ,UAAxB4N,EAAMgvC,iBACb58C,SAAW0wC,MAAMlgC,EAAIwW,EAAE0pB,MAAMlgC,GAAK,IAClCxQ,SAAW0wC,MAAMhgC,EAAIsW,EAAE0pB,MAAMhgC,GAAK,IACnB1Q,MAAQ,cAGvBA,SAAWywC,MAAMjgC,EAAIwW,EAAE0pB,MAAMlgC,GAAK,IAClCxQ,SAAWywC,MAAM//B,EAAIsW,EAAE0pB,MAAMhgC,GAAK,IACnB1Q,MAAQ,gBAGzB68C,EAASnxB,GAAgBza,EAAEw/B,MAAOzpB,EAAEypB,OAAO3hC,EAAE4V,YAC7Cm4B,OAAgBA,GAAU,SACV,IACdA,EAAS,SACD,QAGR78C,MAAQ68C,WAKVC,EAAgB7xB,YAAS,IACE,YAA3B4hB,EAAiB7sC,OAAwB4N,EAAMygB,OAAOhT,WAcjDzN,EAAMygB,OAbNtQ,gCACFnQ,EAAMygB,QADJ,CAELhT,WAAY,CACVnB,SAAS,EACTI,MAAO,UACPqB,QAAS,CACPsxB,SAAU,EACVC,WAAY,GAEdzyB,aAAc,gBAQT,CAAEjK,EAAAA,EAAGE,EAAAA,EAAG+9B,WAAAA,EAAY5B,iBAAAA,EAAkBpoB,MAAAA,EAAOq4B,cAAAA,wcC/I1B/iC,GAC9B7Q,YAAoBuwB,EAAgC,2BAI1C3lB,gBAAgBuB,EAA2B3B,SAC7CuG,EAAOhZ,KAAKw4B,QAAQxf,MAZT,KAaNja,MAAMwQ,EAAIF,KAAK8V,MAAM1S,EAAIlD,EAAIyJ,GAAQA,IACrCja,MAAM0Q,EAAIJ,KAAK8V,MAAM1S,EAAIhD,EAAIuJ,GAAQA,wHpHmOiD3G,UAC5FA,aqHhP8C,SAAUypC,UACxDt8C,QAAQs2C,IAAY3wC,SAAQ,EAAE42C,EAAeC,QAC9CA,UAAUD,EAAeC,iCtEyOmE5uB,SAC5F/a,EAAU2kC,YACZ5pB,MACI/a,EAAS+a,GAEV/a"}